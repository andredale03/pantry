function qb(a,e){for(var i=0;i<e.length;i++){const o=e[i];if(typeof o!="string"&&!Array.isArray(o)){for(const d in o)if(d!=="default"&&!(d in a)){const m=Object.getOwnPropertyDescriptor(o,d);m&&Object.defineProperty(a,d,m.get?m:{enumerable:!0,get:()=>o[d]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const x of m.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&o(x)}).observe(document,{childList:!0,subtree:!0});function i(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(d){if(d.ep)return;d.ep=!0;const m=i(d);fetch(d.href,m)}})();var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Np(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Cd={exports:{}},Kl={};var v2;function Wb(){if(v2)return Kl;v2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,d,m){var x=null;if(m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),"key"in d){m={};for(var A in d)A!=="key"&&(m[A]=d[A])}else m=d;return d=m.ref,{$$typeof:a,type:o,key:x,ref:d!==void 0?d:null,props:m}}return Kl.Fragment=e,Kl.jsx=i,Kl.jsxs=i,Kl}var E2;function Yb(){return E2||(E2=1,Cd.exports=Wb()),Cd.exports}var D=Yb(),Td={exports:{}},st={};var S2;function Xb(){if(S2)return st;S2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),x=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),U=Symbol.iterator;function j(B){return B===null||typeof B!="object"?null:(B=U&&B[U]||B["@@iterator"],typeof B=="function"?B:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,Q={};function ue(B,z,Z){this.props=B,this.context=z,this.refs=Q,this.updater=Z||H}ue.prototype.isReactComponent={},ue.prototype.setState=function(B,z){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,z,"setState")},ue.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function se(){}se.prototype=ue.prototype;function W(B,z,Z){this.props=B,this.context=z,this.refs=Q,this.updater=Z||H}var me=W.prototype=new se;me.constructor=W,q(me,ue.prototype),me.isPureReactComponent=!0;var Pe=Array.isArray;function Ae(){}var J={H:null,A:null,T:null,S:null},xe=Object.prototype.hasOwnProperty;function fe(B,z,Z){var ce=Z.ref;return{$$typeof:a,type:B,key:z,ref:ce!==void 0?ce:null,props:Z}}function Mt(B,z){return fe(B.type,z,B.props)}function ft(B){return typeof B=="object"&&B!==null&&B.$$typeof===a}function Oe(B){var z={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(Z){return z[Z]})}var qe=/\/+/g;function $e(B,z){return typeof B=="object"&&B!==null&&B.key!=null?Oe(""+B.key):z.toString(36)}function ne(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(Ae,Ae):(B.status="pending",B.then(function(z){B.status==="pending"&&(B.status="fulfilled",B.value=z)},function(z){B.status==="pending"&&(B.status="rejected",B.reason=z)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function $(B,z,Z,ce,Ne){var be=typeof B;(be==="undefined"||be==="boolean")&&(B=null);var ke=!1;if(B===null)ke=!0;else switch(be){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(B.$$typeof){case a:case e:ke=!0;break;case T:return ke=B._init,$(ke(B._payload),z,Z,ce,Ne)}}if(ke)return Ne=Ne(B),ke=ce===""?"."+$e(B,0):ce,Pe(Ne)?(Z="",ke!=null&&(Z=ke.replace(qe,"$&/")+"/"),$(Ne,z,Z,"",function(Ye){return Ye})):Ne!=null&&(ft(Ne)&&(Ne=Mt(Ne,Z+(Ne.key==null||B&&B.key===Ne.key?"":(""+Ne.key).replace(qe,"$&/")+"/")+ke)),z.push(Ne)),1;ke=0;var We=ce===""?".":ce+":";if(Pe(B))for(var Re=0;Re<B.length;Re++)ce=B[Re],be=We+$e(ce,Re),ke+=$(ce,z,Z,be,Ne);else if(Re=j(B),typeof Re=="function")for(B=Re.call(B),Re=0;!(ce=B.next()).done;)ce=ce.value,be=We+$e(ce,Re++),ke+=$(ce,z,Z,be,Ne);else if(be==="object"){if(typeof B.then=="function")return $(ne(B),z,Z,ce,Ne);throw z=String(B),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return ke}function he(B,z,Z){if(B==null)return B;var ce=[],Ne=0;return $(B,ce,"","",function(be){return z.call(Z,be,Ne++)}),ce}function we(B){if(B._status===-1){var z=B._result;z=z(),z.then(function(Z){(B._status===0||B._status===-1)&&(B._status=1,B._result=Z)},function(Z){(B._status===0||B._status===-1)&&(B._status=2,B._result=Z)}),B._status===-1&&(B._status=0,B._result=z)}if(B._status===1)return B._result.default;throw B._result}var de=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},le={map:he,forEach:function(B,z,Z){he(B,function(){z.apply(this,arguments)},Z)},count:function(B){var z=0;return he(B,function(){z++}),z},toArray:function(B){return he(B,function(z){return z})||[]},only:function(B){if(!ft(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return st.Activity=R,st.Children=le,st.Component=ue,st.Fragment=i,st.Profiler=d,st.PureComponent=W,st.StrictMode=o,st.Suspense=S,st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,st.__COMPILER_RUNTIME={__proto__:null,c:function(B){return J.H.useMemoCache(B)}},st.cache=function(B){return function(){return B.apply(null,arguments)}},st.cacheSignal=function(){return null},st.cloneElement=function(B,z,Z){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ce=q({},B.props),Ne=B.key;if(z!=null)for(be in z.key!==void 0&&(Ne=""+z.key),z)!xe.call(z,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&z.ref===void 0||(ce[be]=z[be]);var be=arguments.length-2;if(be===1)ce.children=Z;else if(1<be){for(var ke=Array(be),We=0;We<be;We++)ke[We]=arguments[We+2];ce.children=ke}return fe(B.type,Ne,ce)},st.createContext=function(B){return B={$$typeof:x,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:m,_context:B},B},st.createElement=function(B,z,Z){var ce,Ne={},be=null;if(z!=null)for(ce in z.key!==void 0&&(be=""+z.key),z)xe.call(z,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Ne[ce]=z[ce]);var ke=arguments.length-2;if(ke===1)Ne.children=Z;else if(1<ke){for(var We=Array(ke),Re=0;Re<ke;Re++)We[Re]=arguments[Re+2];Ne.children=We}if(B&&B.defaultProps)for(ce in ke=B.defaultProps,ke)Ne[ce]===void 0&&(Ne[ce]=ke[ce]);return fe(B,be,Ne)},st.createRef=function(){return{current:null}},st.forwardRef=function(B){return{$$typeof:A,render:B}},st.isValidElement=ft,st.lazy=function(B){return{$$typeof:T,_payload:{_status:-1,_result:B},_init:we}},st.memo=function(B,z){return{$$typeof:v,type:B,compare:z===void 0?null:z}},st.startTransition=function(B){var z=J.T,Z={};J.T=Z;try{var ce=B(),Ne=J.S;Ne!==null&&Ne(Z,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(Ae,de)}catch(be){de(be)}finally{z!==null&&Z.types!==null&&(z.types=Z.types),J.T=z}},st.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},st.use=function(B){return J.H.use(B)},st.useActionState=function(B,z,Z){return J.H.useActionState(B,z,Z)},st.useCallback=function(B,z){return J.H.useCallback(B,z)},st.useContext=function(B){return J.H.useContext(B)},st.useDebugValue=function(){},st.useDeferredValue=function(B,z){return J.H.useDeferredValue(B,z)},st.useEffect=function(B,z){return J.H.useEffect(B,z)},st.useEffectEvent=function(B){return J.H.useEffectEvent(B)},st.useId=function(){return J.H.useId()},st.useImperativeHandle=function(B,z,Z){return J.H.useImperativeHandle(B,z,Z)},st.useInsertionEffect=function(B,z){return J.H.useInsertionEffect(B,z)},st.useLayoutEffect=function(B,z){return J.H.useLayoutEffect(B,z)},st.useMemo=function(B,z){return J.H.useMemo(B,z)},st.useOptimistic=function(B,z){return J.H.useOptimistic(B,z)},st.useReducer=function(B,z,Z){return J.H.useReducer(B,z,Z)},st.useRef=function(B){return J.H.useRef(B)},st.useState=function(B){return J.H.useState(B)},st.useSyncExternalStore=function(B,z,Z){return J.H.useSyncExternalStore(B,z,Z)},st.useTransition=function(){return J.H.useTransition()},st.version="19.2.3",st}var A2;function Y0(){return A2||(A2=1,Td.exports=Xb()),Td.exports}var Ge=Y0(),Od={exports:{}},Ql={},Nd={exports:{}},Rd={};var _2;function Zb(){return _2||(_2=1,(function(a){function e($,he){var we=$.length;$.push(he);e:for(;0<we;){var de=we-1>>>1,le=$[de];if(0<d(le,he))$[de]=he,$[we]=le,we=de;else break e}}function i($){return $.length===0?null:$[0]}function o($){if($.length===0)return null;var he=$[0],we=$.pop();if(we!==he){$[0]=we;e:for(var de=0,le=$.length,B=le>>>1;de<B;){var z=2*(de+1)-1,Z=$[z],ce=z+1,Ne=$[ce];if(0>d(Z,we))ce<le&&0>d(Ne,Z)?($[de]=Ne,$[ce]=we,de=ce):($[de]=Z,$[z]=we,de=z);else if(ce<le&&0>d(Ne,we))$[de]=Ne,$[ce]=we,de=ce;else break e}}return he}function d($,he){var we=$.sortIndex-he.sortIndex;return we!==0?we:$.id-he.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;a.unstable_now=function(){return m.now()}}else{var x=Date,A=x.now();a.unstable_now=function(){return x.now()-A}}var S=[],v=[],T=1,R=null,U=3,j=!1,H=!1,q=!1,Q=!1,ue=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function me($){for(var he=i(v);he!==null;){if(he.callback===null)o(v);else if(he.startTime<=$)o(v),he.sortIndex=he.expirationTime,e(S,he);else break;he=i(v)}}function Pe($){if(q=!1,me($),!H)if(i(S)!==null)H=!0,Ae||(Ae=!0,Oe());else{var he=i(v);he!==null&&ne(Pe,he.startTime-$)}}var Ae=!1,J=-1,xe=5,fe=-1;function Mt(){return Q?!0:!(a.unstable_now()-fe<xe)}function ft(){if(Q=!1,Ae){var $=a.unstable_now();fe=$;var he=!0;try{e:{H=!1,q&&(q=!1,se(J),J=-1),j=!0;var we=U;try{t:{for(me($),R=i(S);R!==null&&!(R.expirationTime>$&&Mt());){var de=R.callback;if(typeof de=="function"){R.callback=null,U=R.priorityLevel;var le=de(R.expirationTime<=$);if($=a.unstable_now(),typeof le=="function"){R.callback=le,me($),he=!0;break t}R===i(S)&&o(S),me($)}else o(S);R=i(S)}if(R!==null)he=!0;else{var B=i(v);B!==null&&ne(Pe,B.startTime-$),he=!1}}break e}finally{R=null,U=we,j=!1}he=void 0}}finally{he?Oe():Ae=!1}}}var Oe;if(typeof W=="function")Oe=function(){W(ft)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,$e=qe.port2;qe.port1.onmessage=ft,Oe=function(){$e.postMessage(null)}}else Oe=function(){ue(ft,0)};function ne($,he){J=ue(function(){$(a.unstable_now())},he)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function($){$.callback=null},a.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<$?Math.floor(1e3/$):5},a.unstable_getCurrentPriorityLevel=function(){return U},a.unstable_next=function($){switch(U){case 1:case 2:case 3:var he=3;break;default:he=U}var we=U;U=he;try{return $()}finally{U=we}},a.unstable_requestPaint=function(){Q=!0},a.unstable_runWithPriority=function($,he){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var we=U;U=$;try{return he()}finally{U=we}},a.unstable_scheduleCallback=function($,he,we){var de=a.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?de+we:de):we=de,$){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=we+le,$={id:T++,callback:he,priorityLevel:$,startTime:we,expirationTime:le,sortIndex:-1},we>de?($.sortIndex=we,e(v,$),i(S)===null&&$===i(v)&&(q?(se(J),J=-1):q=!0,ne(Pe,we-de))):($.sortIndex=le,e(S,$),H||j||(H=!0,Ae||(Ae=!0,Oe()))),$},a.unstable_shouldYield=Mt,a.unstable_wrapCallback=function($){var he=U;return function(){var we=U;U=he;try{return $.apply(this,arguments)}finally{U=we}}}})(Rd)),Rd}var C2;function Kb(){return C2||(C2=1,Nd.exports=Zb()),Nd.exports}var Id={exports:{}},nr={};var T2;function Qb(){if(T2)return nr;T2=1;var a=Y0();function e(S){var v="https://react.dev/errors/"+S;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)v+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+S+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},d=Symbol.for("react.portal");function m(S,v,T){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:R==null?null:""+R,children:S,containerInfo:v,implementation:T}}var x=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function A(S,v){if(S==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return nr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,nr.createPortal=function(S,v){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return m(S,v,null,T)},nr.flushSync=function(S){var v=x.T,T=o.p;try{if(x.T=null,o.p=2,S)return S()}finally{x.T=v,o.p=T,o.d.f()}},nr.preconnect=function(S,v){typeof S=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,o.d.C(S,v))},nr.prefetchDNS=function(S){typeof S=="string"&&o.d.D(S)},nr.preinit=function(S,v){if(typeof S=="string"&&v&&typeof v.as=="string"){var T=v.as,R=A(T,v.crossOrigin),U=typeof v.integrity=="string"?v.integrity:void 0,j=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;T==="style"?o.d.S(S,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:R,integrity:U,fetchPriority:j}):T==="script"&&o.d.X(S,{crossOrigin:R,integrity:U,fetchPriority:j,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},nr.preinitModule=function(S,v){if(typeof S=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var T=A(v.as,v.crossOrigin);o.d.M(S,{crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&o.d.M(S)},nr.preload=function(S,v){if(typeof S=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var T=v.as,R=A(T,v.crossOrigin);o.d.L(S,T,{crossOrigin:R,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},nr.preloadModule=function(S,v){if(typeof S=="string")if(v){var T=A(v.as,v.crossOrigin);o.d.m(S,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else o.d.m(S)},nr.requestFormReset=function(S){o.d.r(S)},nr.unstable_batchedUpdates=function(S,v){return S(v)},nr.useFormState=function(S,v,T){return x.H.useFormState(S,v,T)},nr.useFormStatus=function(){return x.H.useHostTransitionStatus()},nr.version="19.2.3",nr}var O2;function Jb(){if(O2)return Id.exports;O2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Id.exports=Qb(),Id.exports}var N2;function $b(){if(N2)return Ql;N2=1;var a=Kb(),e=Y0(),i=Jb();function o(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var r=t,c=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(c=r.return),t=r.return;while(t)}return r.tag===3?c:null}function x(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function A(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function S(t){if(m(t)!==t)throw Error(o(188))}function v(t){var r=t.alternate;if(!r){if(r=m(t),r===null)throw Error(o(188));return r!==t?null:t}for(var c=t,h=r;;){var p=c.return;if(p===null)break;var b=p.alternate;if(b===null){if(h=p.return,h!==null){c=h;continue}break}if(p.child===b.child){for(b=p.child;b;){if(b===c)return S(p),t;if(b===h)return S(p),r;b=b.sibling}throw Error(o(188))}if(c.return!==h.return)c=p,h=b;else{for(var C=!1,k=p.child;k;){if(k===c){C=!0,c=p,h=b;break}if(k===h){C=!0,h=p,c=b;break}k=k.sibling}if(!C){for(k=b.child;k;){if(k===c){C=!0,c=b,h=p;break}if(k===h){C=!0,h=b,c=p;break}k=k.sibling}if(!C)throw Error(o(189))}}if(c.alternate!==h)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?t:r}function T(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=T(t),r!==null)return r;t=t.sibling}return null}var R=Object.assign,U=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),ue=Symbol.for("react.profiler"),se=Symbol.for("react.consumer"),W=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Pe=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),fe=Symbol.for("react.activity"),Mt=Symbol.for("react.memo_cache_sentinel"),ft=Symbol.iterator;function Oe(t){return t===null||typeof t!="object"?null:(t=ft&&t[ft]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Symbol.for("react.client.reference");function $e(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===qe?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case ue:return"Profiler";case Q:return"StrictMode";case Pe:return"Suspense";case Ae:return"SuspenseList";case fe:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case H:return"Portal";case W:return t.displayName||"Context";case se:return(t._context.displayName||"Context")+".Consumer";case me:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case J:return r=t.displayName||null,r!==null?r:$e(t.type)||"Memo";case xe:r=t._payload,t=t._init;try{return $e(t(r))}catch{}}return null}var ne=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},de=[],le=-1;function B(t){return{current:t}}function z(t){0>le||(t.current=de[le],de[le]=null,le--)}function Z(t,r){le++,de[le]=t.current,t.current=r}var ce=B(null),Ne=B(null),be=B(null),ke=B(null);function We(t,r){switch(Z(be,r),Z(Ne,t),Z(ce,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Gm(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Gm(r),t=qm(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}z(ce),Z(ce,t)}function Re(){z(ce),z(Ne),z(be)}function Ye(t){t.memoizedState!==null&&Z(ke,t);var r=ce.current,c=qm(r,t.type);r!==c&&(Z(Ne,t),Z(ce,c))}function et(t){Ne.current===t&&(z(ce),z(Ne)),ke.current===t&&(z(ke),Wl._currentValue=we)}var en,tt;function rn(t){if(en===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);en=r&&r[1]||"",tt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+en+t+tt}var ar=!1;function Cr(t,r){if(!t||ar)return"";ar=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(oe){var re=oe}Reflect.construct(t,[],pe)}else{try{pe.call()}catch(oe){re=oe}t.call(pe.prototype)}}else{try{throw Error()}catch(oe){re=oe}(pe=t())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(oe){if(oe&&re&&typeof oe.stack=="string")return[oe.stack,re.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),C=b[0],k=b[1];if(C&&k){var P=C.split(`
`),te=k.split(`
`);for(p=h=0;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;for(;p<te.length&&!te[p].includes("DetermineComponentFrameRoot");)p++;if(h===P.length||p===te.length)for(h=P.length-1,p=te.length-1;1<=h&&0<=p&&P[h]!==te[p];)p--;for(;1<=h&&0<=p;h--,p--)if(P[h]!==te[p]){if(h!==1||p!==1)do if(h--,p--,0>p||P[h]!==te[p]){var ge=`
`+P[h].replace(" at new "," at ");return t.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",t.displayName)),ge}while(1<=h&&0<=p);break}}}finally{ar=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?rn(c):""}function An(t,r){switch(t.tag){case 26:case 27:case 5:return rn(t.type);case 16:return rn("Lazy");case 13:return t.child!==r&&r!==null?rn("Suspense Fallback"):rn("Suspense");case 19:return rn("SuspenseList");case 0:case 15:return Cr(t.type,!1);case 11:return Cr(t.type.render,!1);case 1:return Cr(t.type,!0);case 31:return rn("Activity");default:return""}}function Ft(t){try{var r="",c=null;do r+=An(t,c),c=t,t=t.return;while(t);return r}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var mt=Object.prototype.hasOwnProperty,ga=a.unstable_scheduleCallback,Me=a.unstable_cancelCallback,Hs=a.unstable_shouldYield,Sc=a.unstable_requestPaint,dn=a.unstable_now,rl=a.unstable_getCurrentPriorityLevel,mr=a.unstable_ImmediatePriority,il=a.unstable_UserBlockingPriority,Tr=a.unstable_NormalPriority,Yn=a.unstable_LowPriority,al=a.unstable_IdlePriority,Gs=a.log,If=a.unstable_setDisableYieldValue,tn=null,Ce=null;function qt(t){if(typeof Gs=="function"&&If(t),Ce&&typeof Ce.setStrictMode=="function")try{Ce.setStrictMode(tn,t)}catch{}}var lt=Math.clz32?Math.clz32:sl,un=Math.log,as=Math.LN2;function sl(t){return t>>>=0,t===0?32:31-(un(t)/as|0)|0}var ss=256,wt=262144,Wr=4194304;function _i(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function os(t,r,c){var h=t.pendingLanes;if(h===0)return 0;var p=0,b=t.suspendedLanes,C=t.pingedLanes;t=t.warmLanes;var k=h&134217727;return k!==0?(h=k&~b,h!==0?p=_i(h):(C&=k,C!==0?p=_i(C):c||(c=k&~t,c!==0&&(p=_i(c))))):(k=h&~b,k!==0?p=_i(k):C!==0?p=_i(C):c||(c=h&~t,c!==0&&(p=_i(c)))),p===0?0:r!==0&&r!==p&&(r&b)===0&&(b=p&-p,c=r&-r,b>=c||b===32&&(c&4194048)!==0)?r:p}function Xn(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function ol(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jn(){var t=Wr;return Wr<<=1,(Wr&62914560)===0&&(Wr=4194304),t}function Ci(t){for(var r=[],c=0;31>c;c++)r.push(t);return r}function Ti(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Yr(t,r,c,h,p,b){var C=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var k=t.entanglements,P=t.expirationTimes,te=t.hiddenUpdates;for(c=C&~c;0<c;){var ge=31-lt(c),pe=1<<ge;k[ge]=0,P[ge]=-1;var re=te[ge];if(re!==null)for(te[ge]=null,ge=0;ge<re.length;ge++){var oe=re[ge];oe!==null&&(oe.lane&=-536870913)}c&=~pe}h!==0&&Ac(t,h,0),b!==0&&p===0&&t.tag!==0&&(t.suspendedLanes|=b&~(C&~r))}function Ac(t,r,c){t.pendingLanes|=r,t.suspendedLanes&=~r;var h=31-lt(r);t.entangledLanes|=r,t.entanglements[h]=t.entanglements[h]|1073741824|c&261930}function Oi(t,r){var c=t.entangledLanes|=r;for(t=t.entanglements;c;){var h=31-lt(c),p=1<<h;p&r|t[h]&r&&(t[h]|=r),c&=~p}}function qs(t,r){var c=r&-r;return c=(c&42)!==0?1:qn(c),(c&(t.suspendedLanes|r))!==0?0:c}function qn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ci(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function sr(){var t=he.p;return t!==0?t:(t=window.event,t===void 0?32:g2(t.type))}function Ie(t,r){var c=he.p;try{return he.p=t,r()}finally{he.p=c}}var or=Math.random().toString(36).slice(2),_n="__reactFiber$"+or,zt="__reactProps$"+or,Or="__reactContainer$"+or,ma="__reactEvents$"+or,Ws="__reactListeners$"+or,Xr="__reactHandles$"+or,_c="__reactResources$"+or,ls="__reactMarker$"+or;function yr(t){delete t[_n],delete t[zt],delete t[ma],delete t[Ws],delete t[Xr]}function yn(t){var r=t[_n];if(r)return r;for(var c=t.parentNode;c;){if(r=c[Or]||c[_n]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(t=Jm(t);t!==null;){if(c=t[_n])return c;t=Jm(t)}return r}t=c,c=t.parentNode}return null}function Rt(t){if(t=t[_n]||t[Or]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function ya(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(o(33))}function lr(t){var r=t[_c];return r||(r=t[_c]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function pn(t){t[ls]=!0}var ve=new Set,Cc={};function Bt(t,r){Nr(t,r),Nr(t+"Capture",r)}function Nr(t,r){for(Cc[t]=r,t=0;t<r.length;t++)ve.add(r[t])}var kf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_t={},At={};function yt(t){return mt.call(At,t)?!0:mt.call(_t,t)?!1:kf.test(t)?At[t]=!0:(_t[t]=!0,!1)}function pa(t,r,c){if(yt(r))if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+c)}}function xa(t,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+c)}}function Rr(t,r,c,h){if(h===null)t.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(r,c,""+h)}}function Tt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ui(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Df(t,r,c){var h=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var p=h.get,b=h.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return p.call(this)},set:function(C){c=""+C,b.call(this,C)}}),Object.defineProperty(t,r,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(C){c=""+C},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function an(t){if(!t._valueTracker){var r=ui(t)?"checked":"value";t._valueTracker=Df(t,r,""+t[r])}}function fi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var c=r.getValue(),h="";return t&&(h=ui(t)?t.checked?"true":"false":t.value),t=h,t!==c?(r.setValue(t),!0):!1}function Ys(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var wa=/[\n"\\]/g;function dt(t){return t.replace(wa,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Rn(t,r,c,h,p,b,C,k){t.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.type=C:t.removeAttribute("type"),r!=null?C==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Tt(r)):t.value!==""+Tt(r)&&(t.value=""+Tt(r)):C!=="submit"&&C!=="reset"||t.removeAttribute("value"),r!=null?M(t,C,Tt(r)):c!=null?M(t,C,Tt(c)):h!=null&&t.removeAttribute("value"),p==null&&b!=null&&(t.defaultChecked=!!b),p!=null&&(t.checked=p&&typeof p!="function"&&typeof p!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?t.name=""+Tt(k):t.removeAttribute("name")}function K(t,r,c,h,p,b,C,k){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.type=b),r!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||r!=null)){an(t);return}c=c!=null?""+Tt(c):"",r=r!=null?""+Tt(r):c,k||r===t.value||(t.value=r),t.defaultValue=r}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,t.checked=k?t.checked:!!h,t.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(t.name=C),an(t)}function M(t,r,c){r==="number"&&Ys(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function je(t,r,c,h){if(t=t.options,r){r={};for(var p=0;p<c.length;p++)r["$"+c[p]]=!0;for(c=0;c<t.length;c++)p=r.hasOwnProperty("$"+t[c].value),t[c].selected!==p&&(t[c].selected=p),p&&h&&(t[c].defaultSelected=!0)}else{for(c=""+Tt(c),r=null,p=0;p<t.length;p++){if(t[p].value===c){t[p].selected=!0,h&&(t[p].defaultSelected=!0);return}r!==null||t[p].disabled||(r=t[p])}r!==null&&(r.selected=!0)}}function Cn(t,r,c){if(r!=null&&(r=""+Tt(r),r!==t.value&&(t.value=r),c==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=c!=null?""+Tt(c):""}function cr(t,r,c,h){if(r==null){if(h!=null){if(c!=null)throw Error(o(92));if(ne(h)){if(1<h.length)throw Error(o(93));h=h[0]}c=h}c==null&&(c=""),r=c}c=Tt(r),t.defaultValue=c,h=t.textContent,h===c&&h!==""&&h!==null&&(t.value=h),an(t)}function ba(t,r){if(r){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=r;return}}t.textContent=r}var ll=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ur(t,r,c){var h=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":h?t.setProperty(r,c):typeof c!="number"||c===0||ll.has(r)?r==="float"?t.cssFloat=c:t[r]=(""+c).trim():t[r]=c+"px"}function Ve(t,r,c){if(r!=null&&typeof r!="object")throw Error(o(62));if(t=t.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?t.setProperty(h,""):h==="float"?t.cssFloat="":t[h]="");for(var p in r)h=r[p],r.hasOwnProperty(p)&&c[p]!==h&&ur(t,p,h)}else for(var b in r)r.hasOwnProperty(b)&&ur(t,b,r[b])}function Kt(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function va(t){return Mf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function pr(){}var cs=null;function cl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sn=null,Zr=null;function hi(t){var r=Rt(t);if(r&&(t=r.stateNode)){var c=t[zt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Rn(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+dt(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var h=c[r];if(h!==t&&h.form===t.form){var p=h[zt]||null;if(!p)throw Error(o(90));Rn(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(r=0;r<c.length;r++)h=c[r],h.form===t.form&&fi(h)}break e;case"textarea":Cn(t,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&je(t,!!c.multiple,r,!1)}}}var Xe=!1;function Oc(t,r,c){if(Xe)return t(r,c);Xe=!0;try{var h=t(r);return h}finally{if(Xe=!1,(sn!==null||Zr!==null)&&(wu(),sn&&(r=sn,t=Zr,Zr=sn=null,hi(r),t)))for(r=0;r<t.length;r++)hi(t[r])}}function it(t,r){var c=t.stateNode;if(c===null)return null;var h=c[zt]||null;if(h===null)return null;c=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(t=t.type,h=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!h;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(o(231,r,typeof c));return c}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ul=!1;if(Qt)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){ul=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{ul=!1}var di=null,gi=null,Xs=null;function Ea(){if(Xs)return Xs;var t,r=gi,c=r.length,h,p="value"in di?di.value:di.textContent,b=p.length;for(t=0;t<c&&r[t]===p[t];t++);var C=c-t;for(h=1;h<=C&&r[c-h]===p[b-h];h++);return Xs=p.slice(t,1<h?1-h:void 0)}function Ni(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ri(){return!0}function fl(){return!1}function In(t){function r(c,h,p,b,C){this._reactName=c,this._targetInst=p,this.type=h,this.nativeEvent=b,this.target=C,this.currentTarget=null;for(var k in t)t.hasOwnProperty(k)&&(c=t[k],this[k]=c?c(b):b[k]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Ri:fl,this.isPropagationStopped=fl,this}return R(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),r}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pn=In(Ir),Sa=R({},Ir,{view:0,detail:0}),Nc=In(Sa),Zs,hl,us,Ks=R({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==us&&(us&&t.type==="mousemove"?(Zs=t.screenX-us.screenX,hl=t.screenY-us.screenY):hl=Zs=0,us=t),Zs)},movementY:function(t){return"movementY"in t?t.movementY:hl}}),It=In(Ks),Rc=R({},Ks,{dataTransfer:0}),Qs=In(Rc),Ii=R({},Sa,{relatedTarget:0}),dl=In(Ii),ae=R({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),ct=In(ae),Fn=R({},Ir,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Js=In(Fn),Ic=R({},Ir,{data:0}),kc=In(Ic),Bf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=gl[t])?!!r[t]:!1}function fs(){return Tn}var fn=R({},Sa,{key:function(t){if(t.key){var r=Bf[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ni(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lf[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fs,charCode:function(t){return t.type==="keypress"?Ni(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ni(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$s=In(fn),Fi=R({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lt=In(Fi),Ze=R({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fs}),Uf=In(Ze),Jt=R({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),zi=In(Jt),Aa=R({},Ks,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jf=In(Aa),Kr=R({},Ir,{newState:0,oldState:0}),ml=In(Kr),Dc=[9,13,27,32],hs=Qt&&"CompositionEvent"in window,_a=null;Qt&&"documentMode"in document&&(_a=document.documentMode);var Mc=Qt&&"TextEvent"in window&&!_a,Bc=Qt&&(!hs||_a&&8<_a&&11>=_a),Vi=" ",eo=!1;function Lc(t,r){switch(t){case"keyup":return Dc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ca(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ta=!1;function ki(t,r){switch(t){case"compositionend":return Ca(r);case"keypress":return r.which!==32?null:(eo=!0,Vi);case"textInput":return t=r.data,t===Vi&&eo?null:t;default:return null}}function to(t,r){if(Ta)return t==="compositionend"||!hs&&Lc(t,r)?(t=Ea(),Xs=gi=di=null,Ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Bc&&r.locale!=="ko"?null:r.data;default:return null}}var xr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yl(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!xr[t.type]:r==="textarea"}function kr(t,r,c,h){sn?Zr?Zr.push(h):Zr=[h]:sn=h,r=Cu(r,"onChange"),0<r.length&&(c=new Pn("onChange","change",null,c,h),t.push({event:c,listeners:r}))}var ds=null,Hi=null;function Pf(t){jm(t,0)}function gs(t){var r=ya(t);if(fi(r))return t}function Dr(t,r){if(t==="change")return r}var Uc=!1;if(Qt){var ms;if(Qt){var Gi="oninput"in document;if(!Gi){var bt=document.createElement("div");bt.setAttribute("oninput","return;"),Gi=typeof bt.oninput=="function"}ms=Gi}else ms=!1;Uc=ms&&(!document.documentMode||9<document.documentMode)}function ys(){ds&&(ds.detachEvent("onpropertychange",O),Hi=ds=null)}function O(t){if(t.propertyName==="value"&&gs(Hi)){var r=[];kr(r,Hi,t,cl(t)),Oc(Pf,r)}}function n(t,r,c){t==="focusin"?(ys(),ds=r,Hi=c,ds.attachEvent("onpropertychange",O)):t==="focusout"&&ys()}function s(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gs(Hi)}function l(t,r){if(t==="click")return gs(r)}function u(t,r){if(t==="input"||t==="change")return gs(r)}function f(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var g=typeof Object.is=="function"?Object.is:f;function y(t,r){if(g(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var c=Object.keys(t),h=Object.keys(r);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var p=c[h];if(!mt.call(r,p)||!g(t[p],r[p]))return!1}return!0}function w(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function E(t,r){var c=w(t);t=0;for(var h;c;){if(c.nodeType===3){if(h=t+c.textContent.length,t<=r&&h>=r)return{node:c,offset:r-t};t=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=w(c)}}function _(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?_(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function N(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Ys(t.document);r instanceof t.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)t=r.contentWindow;else break;r=Ys(t.document)}return r}function I(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var L=Qt&&"documentMode"in document&&11>=document.documentMode,F=null,V=null,X=null,ie=!1;function _e(t,r,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ie||F==null||F!==Ys(h)||(h=F,"selectionStart"in h&&I(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),X&&y(X,h)||(X=h,h=Cu(V,"onSelect"),0<h.length&&(r=new Pn("onSelect","select",null,r,c),t.push({event:r,listeners:h}),r.target=F)))}function Se(t,r){var c={};return c[t.toLowerCase()]=r.toLowerCase(),c["Webkit"+t]="webkit"+r,c["Moz"+t]="moz"+r,c}var Ee={animationend:Se("Animation","AnimationEnd"),animationiteration:Se("Animation","AnimationIteration"),animationstart:Se("Animation","AnimationStart"),transitionrun:Se("Transition","TransitionRun"),transitionstart:Se("Transition","TransitionStart"),transitioncancel:Se("Transition","TransitionCancel"),transitionend:Se("Transition","TransitionEnd")},ht={},at={};Qt&&(at=document.createElement("div").style,"AnimationEvent"in window||(delete Ee.animationend.animation,delete Ee.animationiteration.animation,delete Ee.animationstart.animation),"TransitionEvent"in window||delete Ee.transitionend.transition);function xn(t){if(ht[t])return ht[t];if(!Ee[t])return t;var r=Ee[t],c;for(c in r)if(r.hasOwnProperty(c)&&c in at)return ht[t]=r[c];return t}var wr=xn("animationend"),Zn=xn("animationiteration"),Ut=xn("animationstart"),zn=xn("transitionrun"),fr=xn("transitionstart"),Oa=xn("transitioncancel"),qi=xn("transitionend"),jc=new Map,pl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pl.push("scrollEnd");function mi(t,r){jc.set(t,r),Bt(r,[t])}var Pc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Qr=[],no=0,Ff=0;function Fc(){for(var t=no,r=Ff=no=0;r<t;){var c=Qr[r];Qr[r++]=null;var h=Qr[r];Qr[r++]=null;var p=Qr[r];Qr[r++]=null;var b=Qr[r];if(Qr[r++]=null,h!==null&&p!==null){var C=h.pending;C===null?p.next=p:(p.next=C.next,C.next=p),h.pending=p}b!==0&&w1(c,p,b)}}function zc(t,r,c,h){Qr[no++]=t,Qr[no++]=r,Qr[no++]=c,Qr[no++]=h,Ff|=h,t.lanes|=h,t=t.alternate,t!==null&&(t.lanes|=h)}function zf(t,r,c,h){return zc(t,r,c,h),Vc(t)}function ps(t,r){return zc(t,null,null,r),Vc(t)}function w1(t,r,c){t.lanes|=c;var h=t.alternate;h!==null&&(h.lanes|=c);for(var p=!1,b=t.return;b!==null;)b.childLanes|=c,h=b.alternate,h!==null&&(h.childLanes|=c),b.tag===22&&(t=b.stateNode,t===null||t._visibility&1||(p=!0)),t=b,b=b.return;return t.tag===3?(b=t.stateNode,p&&r!==null&&(p=31-lt(c),t=b.hiddenUpdates,h=t[p],h===null?t[p]=[r]:h.push(r),r.lane=c|536870912),b):null}function Vc(t){if(50<Pl)throw Pl=0,Kh=null,Error(o(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ro={};function Ow(t,r,c,h){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(t,r,c,h){return new Ow(t,r,c,h)}function Vf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wi(t,r){var c=t.alternate;return c===null?(c=Mr(t.tag,r,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=r,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,r=t.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function b1(t,r){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,r=c.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Hc(t,r,c,h,p,b){var C=0;if(h=t,typeof t=="function")Vf(t)&&(C=1);else if(typeof t=="string")C=Db(t,c,ce.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case fe:return t=Mr(31,c,r,p),t.elementType=fe,t.lanes=b,t;case q:return xs(c.children,p,b,r);case Q:C=8,p|=24;break;case ue:return t=Mr(12,c,r,p|2),t.elementType=ue,t.lanes=b,t;case Pe:return t=Mr(13,c,r,p),t.elementType=Pe,t.lanes=b,t;case Ae:return t=Mr(19,c,r,p),t.elementType=Ae,t.lanes=b,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W:C=10;break e;case se:C=9;break e;case me:C=11;break e;case J:C=14;break e;case xe:C=16,h=null;break e}C=29,c=Error(o(130,t===null?"null":typeof t,"")),h=null}return r=Mr(C,c,r,p),r.elementType=t,r.type=h,r.lanes=b,r}function xs(t,r,c,h){return t=Mr(7,t,h,r),t.lanes=c,t}function Hf(t,r,c){return t=Mr(6,t,null,r),t.lanes=c,t}function v1(t){var r=Mr(18,null,null,0);return r.stateNode=t,r}function Gf(t,r,c){return r=Mr(4,t.children!==null?t.children:[],t.key,r),r.lanes=c,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var E1=new WeakMap;function Jr(t,r){if(typeof t=="object"&&t!==null){var c=E1.get(t);return c!==void 0?c:(r={value:t,source:r,stack:Ft(r)},E1.set(t,r),r)}return{value:t,source:r,stack:Ft(r)}}var io=[],ao=0,Gc=null,xl=0,$r=[],ei=0,Na=null,Di=1,Mi="";function Yi(t,r){io[ao++]=xl,io[ao++]=Gc,Gc=t,xl=r}function S1(t,r,c){$r[ei++]=Di,$r[ei++]=Mi,$r[ei++]=Na,Na=t;var h=Di;t=Mi;var p=32-lt(h)-1;h&=~(1<<p),c+=1;var b=32-lt(r)+p;if(30<b){var C=p-p%5;b=(h&(1<<C)-1).toString(32),h>>=C,p-=C,Di=1<<32-lt(r)+p|c<<p|h,Mi=b+t}else Di=1<<b|c<<p|h,Mi=t}function qf(t){t.return!==null&&(Yi(t,1),S1(t,1,0))}function Wf(t){for(;t===Gc;)Gc=io[--ao],io[ao]=null,xl=io[--ao],io[ao]=null;for(;t===Na;)Na=$r[--ei],$r[ei]=null,Mi=$r[--ei],$r[ei]=null,Di=$r[--ei],$r[ei]=null}function A1(t,r){$r[ei++]=Di,$r[ei++]=Mi,$r[ei++]=Na,Di=r.id,Mi=r.overflow,Na=t}var Kn=null,on=null,St=!1,Ra=null,ti=!1,Yf=Error(o(519));function Ia(t){var r=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wl(Jr(r,t)),Yf}function _1(t){var r=t.stateNode,c=t.type,h=t.memoizedProps;switch(r[_n]=t,r[zt]=h,c){case"dialog":xt("cancel",r),xt("close",r);break;case"iframe":case"object":case"embed":xt("load",r);break;case"video":case"audio":for(c=0;c<zl.length;c++)xt(zl[c],r);break;case"source":xt("error",r);break;case"img":case"image":case"link":xt("error",r),xt("load",r);break;case"details":xt("toggle",r);break;case"input":xt("invalid",r),K(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":xt("invalid",r);break;case"textarea":xt("invalid",r),cr(r,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||h.suppressHydrationWarning===!0||Vm(r.textContent,c)?(h.popover!=null&&(xt("beforetoggle",r),xt("toggle",r)),h.onScroll!=null&&xt("scroll",r),h.onScrollEnd!=null&&xt("scrollend",r),h.onClick!=null&&(r.onclick=pr),r=!0):r=!1,r||Ia(t,!0)}function C1(t){for(Kn=t.return;Kn;)switch(Kn.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:Kn=Kn.return}}function so(t){if(t!==Kn)return!1;if(!St)return C1(t),St=!0,!1;var r=t.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||fd(t.type,t.memoizedProps)),c=!c),c&&on&&Ia(t),C1(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));on=Qm(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));on=Qm(t)}else r===27?(r=on,qa(t.type)?(t=yd,yd=null,on=t):on=r):on=Kn?ri(t.stateNode.nextSibling):null;return!0}function ws(){on=Kn=null,St=!1}function Xf(){var t=Ra;return t!==null&&(Sr===null?Sr=t:Sr.push.apply(Sr,t),Ra=null),t}function wl(t){Ra===null?Ra=[t]:Ra.push(t)}var Zf=B(null),bs=null,Xi=null;function ka(t,r,c){Z(Zf,r._currentValue),r._currentValue=c}function Zi(t){t._currentValue=Zf.current,z(Zf)}function Kf(t,r,c){for(;t!==null;){var h=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),t===c)break;t=t.return}}function Qf(t,r,c,h){var p=t.child;for(p!==null&&(p.return=t);p!==null;){var b=p.dependencies;if(b!==null){var C=p.child;b=b.firstContext;e:for(;b!==null;){var k=b;b=p;for(var P=0;P<r.length;P++)if(k.context===r[P]){b.lanes|=c,k=b.alternate,k!==null&&(k.lanes|=c),Kf(b.return,c,t),h||(C=null);break e}b=k.next}}else if(p.tag===18){if(C=p.return,C===null)throw Error(o(341));C.lanes|=c,b=C.alternate,b!==null&&(b.lanes|=c),Kf(C,c,t),C=null}else C=p.child;if(C!==null)C.return=p;else for(C=p;C!==null;){if(C===t){C=null;break}if(p=C.sibling,p!==null){p.return=C.return,C=p;break}C=C.return}p=C}}function oo(t,r,c,h){t=null;for(var p=r,b=!1;p!==null;){if(!b){if((p.flags&524288)!==0)b=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var C=p.alternate;if(C===null)throw Error(o(387));if(C=C.memoizedProps,C!==null){var k=p.type;g(p.pendingProps.value,C.value)||(t!==null?t.push(k):t=[k])}}else if(p===ke.current){if(C=p.alternate,C===null)throw Error(o(387));C.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(t!==null?t.push(Wl):t=[Wl])}p=p.return}t!==null&&Qf(r,t,c,h),r.flags|=262144}function qc(t){for(t=t.firstContext;t!==null;){if(!g(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function vs(t){bs=t,Xi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qn(t){return T1(bs,t)}function Wc(t,r){return bs===null&&vs(t),T1(t,r)}function T1(t,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},Xi===null){if(t===null)throw Error(o(308));Xi=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Xi=Xi.next=r;return c}var Nw=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(c,h){t.push(h)}};this.abort=function(){r.aborted=!0,t.forEach(function(c){return c()})}},Rw=a.unstable_scheduleCallback,Iw=a.unstable_NormalPriority,kn={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jf(){return{controller:new Nw,data:new Map,refCount:0}}function bl(t){t.refCount--,t.refCount===0&&Rw(Iw,function(){t.controller.abort()})}var vl=null,$f=0,lo=0,co=null;function kw(t,r){if(vl===null){var c=vl=[];$f=0,lo=nd(),co={status:"pending",value:void 0,then:function(h){c.push(h)}}}return $f++,r.then(O1,O1),r}function O1(){if(--$f===0&&vl!==null){co!==null&&(co.status="fulfilled");var t=vl;vl=null,lo=0,co=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Dw(t,r){var c=[],h={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return t.then(function(){h.status="fulfilled",h.value=r;for(var p=0;p<c.length;p++)(0,c[p])(r)},function(p){for(h.status="rejected",h.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),h}var N1=$.S;$.S=function(t,r){hm=dn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&kw(t,r),N1!==null&&N1(t,r)};var Es=B(null);function eh(){var t=Es.current;return t!==null?t:$t.pooledCache}function Yc(t,r){r===null?Z(Es,Es.current):Z(Es,r.pool)}function R1(){var t=eh();return t===null?null:{parent:kn._currentValue,pool:t}}var uo=Error(o(460)),th=Error(o(474)),Xc=Error(o(542)),Zc={then:function(){}};function I1(t){return t=t.status,t==="fulfilled"||t==="rejected"}function k1(t,r,c){switch(c=t[c],c===void 0?t.push(r):c!==r&&(r.then(pr,pr),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,M1(t),t;default:if(typeof r.status=="string")r.then(pr,pr);else{if(t=$t,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=r,t.status="pending",t.then(function(h){if(r.status==="pending"){var p=r;p.status="fulfilled",p.value=h}},function(h){if(r.status==="pending"){var p=r;p.status="rejected",p.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,M1(t),t}throw As=r,uo}}function Ss(t){try{var r=t._init;return r(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(As=c,uo):c}}var As=null;function D1(){if(As===null)throw Error(o(459));var t=As;return As=null,t}function M1(t){if(t===uo||t===Xc)throw Error(o(483))}var fo=null,El=0;function Kc(t){var r=El;return El+=1,fo===null&&(fo=[]),k1(fo,t,r)}function Sl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Qc(t,r){throw r.$$typeof===U?Error(o(525)):(t=Object.prototype.toString.call(r),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function B1(t){function r(Y,G){if(t){var ee=Y.deletions;ee===null?(Y.deletions=[G],Y.flags|=16):ee.push(G)}}function c(Y,G){if(!t)return null;for(;G!==null;)r(Y,G),G=G.sibling;return null}function h(Y){for(var G=new Map;Y!==null;)Y.key!==null?G.set(Y.key,Y):G.set(Y.index,Y),Y=Y.sibling;return G}function p(Y,G){return Y=Wi(Y,G),Y.index=0,Y.sibling=null,Y}function b(Y,G,ee){return Y.index=ee,t?(ee=Y.alternate,ee!==null?(ee=ee.index,ee<G?(Y.flags|=67108866,G):ee):(Y.flags|=67108866,G)):(Y.flags|=1048576,G)}function C(Y){return t&&Y.alternate===null&&(Y.flags|=67108866),Y}function k(Y,G,ee,ye){return G===null||G.tag!==6?(G=Hf(ee,Y.mode,ye),G.return=Y,G):(G=p(G,ee),G.return=Y,G)}function P(Y,G,ee,ye){var He=ee.type;return He===q?ge(Y,G,ee.props.children,ye,ee.key):G!==null&&(G.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===xe&&Ss(He)===G.type)?(G=p(G,ee.props),Sl(G,ee),G.return=Y,G):(G=Hc(ee.type,ee.key,ee.props,null,Y.mode,ye),Sl(G,ee),G.return=Y,G)}function te(Y,G,ee,ye){return G===null||G.tag!==4||G.stateNode.containerInfo!==ee.containerInfo||G.stateNode.implementation!==ee.implementation?(G=Gf(ee,Y.mode,ye),G.return=Y,G):(G=p(G,ee.children||[]),G.return=Y,G)}function ge(Y,G,ee,ye,He){return G===null||G.tag!==7?(G=xs(ee,Y.mode,ye,He),G.return=Y,G):(G=p(G,ee),G.return=Y,G)}function pe(Y,G,ee){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Hf(""+G,Y.mode,ee),G.return=Y,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case j:return ee=Hc(G.type,G.key,G.props,null,Y.mode,ee),Sl(ee,G),ee.return=Y,ee;case H:return G=Gf(G,Y.mode,ee),G.return=Y,G;case xe:return G=Ss(G),pe(Y,G,ee)}if(ne(G)||Oe(G))return G=xs(G,Y.mode,ee,null),G.return=Y,G;if(typeof G.then=="function")return pe(Y,Kc(G),ee);if(G.$$typeof===W)return pe(Y,Wc(Y,G),ee);Qc(Y,G)}return null}function re(Y,G,ee,ye){var He=G!==null?G.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return He!==null?null:k(Y,G,""+ee,ye);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case j:return ee.key===He?P(Y,G,ee,ye):null;case H:return ee.key===He?te(Y,G,ee,ye):null;case xe:return ee=Ss(ee),re(Y,G,ee,ye)}if(ne(ee)||Oe(ee))return He!==null?null:ge(Y,G,ee,ye,null);if(typeof ee.then=="function")return re(Y,G,Kc(ee),ye);if(ee.$$typeof===W)return re(Y,G,Wc(Y,ee),ye);Qc(Y,ee)}return null}function oe(Y,G,ee,ye,He){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return Y=Y.get(ee)||null,k(G,Y,""+ye,He);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case j:return Y=Y.get(ye.key===null?ee:ye.key)||null,P(G,Y,ye,He);case H:return Y=Y.get(ye.key===null?ee:ye.key)||null,te(G,Y,ye,He);case xe:return ye=Ss(ye),oe(Y,G,ee,ye,He)}if(ne(ye)||Oe(ye))return Y=Y.get(ee)||null,ge(G,Y,ye,He,null);if(typeof ye.then=="function")return oe(Y,G,ee,Kc(ye),He);if(ye.$$typeof===W)return oe(Y,G,ee,Wc(G,ye),He);Qc(G,ye)}return null}function Be(Y,G,ee,ye){for(var He=null,Ot=null,Fe=G,ut=G=0,Et=null;Fe!==null&&ut<ee.length;ut++){Fe.index>ut?(Et=Fe,Fe=null):Et=Fe.sibling;var Nt=re(Y,Fe,ee[ut],ye);if(Nt===null){Fe===null&&(Fe=Et);break}t&&Fe&&Nt.alternate===null&&r(Y,Fe),G=b(Nt,G,ut),Ot===null?He=Nt:Ot.sibling=Nt,Ot=Nt,Fe=Et}if(ut===ee.length)return c(Y,Fe),St&&Yi(Y,ut),He;if(Fe===null){for(;ut<ee.length;ut++)Fe=pe(Y,ee[ut],ye),Fe!==null&&(G=b(Fe,G,ut),Ot===null?He=Fe:Ot.sibling=Fe,Ot=Fe);return St&&Yi(Y,ut),He}for(Fe=h(Fe);ut<ee.length;ut++)Et=oe(Fe,Y,ut,ee[ut],ye),Et!==null&&(t&&Et.alternate!==null&&Fe.delete(Et.key===null?ut:Et.key),G=b(Et,G,ut),Ot===null?He=Et:Ot.sibling=Et,Ot=Et);return t&&Fe.forEach(function(Ka){return r(Y,Ka)}),St&&Yi(Y,ut),He}function Ke(Y,G,ee,ye){if(ee==null)throw Error(o(151));for(var He=null,Ot=null,Fe=G,ut=G=0,Et=null,Nt=ee.next();Fe!==null&&!Nt.done;ut++,Nt=ee.next()){Fe.index>ut?(Et=Fe,Fe=null):Et=Fe.sibling;var Ka=re(Y,Fe,Nt.value,ye);if(Ka===null){Fe===null&&(Fe=Et);break}t&&Fe&&Ka.alternate===null&&r(Y,Fe),G=b(Ka,G,ut),Ot===null?He=Ka:Ot.sibling=Ka,Ot=Ka,Fe=Et}if(Nt.done)return c(Y,Fe),St&&Yi(Y,ut),He;if(Fe===null){for(;!Nt.done;ut++,Nt=ee.next())Nt=pe(Y,Nt.value,ye),Nt!==null&&(G=b(Nt,G,ut),Ot===null?He=Nt:Ot.sibling=Nt,Ot=Nt);return St&&Yi(Y,ut),He}for(Fe=h(Fe);!Nt.done;ut++,Nt=ee.next())Nt=oe(Fe,Y,ut,Nt.value,ye),Nt!==null&&(t&&Nt.alternate!==null&&Fe.delete(Nt.key===null?ut:Nt.key),G=b(Nt,G,ut),Ot===null?He=Nt:Ot.sibling=Nt,Ot=Nt);return t&&Fe.forEach(function(Gb){return r(Y,Gb)}),St&&Yi(Y,ut),He}function Xt(Y,G,ee,ye){if(typeof ee=="object"&&ee!==null&&ee.type===q&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case j:e:{for(var He=ee.key;G!==null;){if(G.key===He){if(He=ee.type,He===q){if(G.tag===7){c(Y,G.sibling),ye=p(G,ee.props.children),ye.return=Y,Y=ye;break e}}else if(G.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===xe&&Ss(He)===G.type){c(Y,G.sibling),ye=p(G,ee.props),Sl(ye,ee),ye.return=Y,Y=ye;break e}c(Y,G);break}else r(Y,G);G=G.sibling}ee.type===q?(ye=xs(ee.props.children,Y.mode,ye,ee.key),ye.return=Y,Y=ye):(ye=Hc(ee.type,ee.key,ee.props,null,Y.mode,ye),Sl(ye,ee),ye.return=Y,Y=ye)}return C(Y);case H:e:{for(He=ee.key;G!==null;){if(G.key===He)if(G.tag===4&&G.stateNode.containerInfo===ee.containerInfo&&G.stateNode.implementation===ee.implementation){c(Y,G.sibling),ye=p(G,ee.children||[]),ye.return=Y,Y=ye;break e}else{c(Y,G);break}else r(Y,G);G=G.sibling}ye=Gf(ee,Y.mode,ye),ye.return=Y,Y=ye}return C(Y);case xe:return ee=Ss(ee),Xt(Y,G,ee,ye)}if(ne(ee))return Be(Y,G,ee,ye);if(Oe(ee)){if(He=Oe(ee),typeof He!="function")throw Error(o(150));return ee=He.call(ee),Ke(Y,G,ee,ye)}if(typeof ee.then=="function")return Xt(Y,G,Kc(ee),ye);if(ee.$$typeof===W)return Xt(Y,G,Wc(Y,ee),ye);Qc(Y,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,G!==null&&G.tag===6?(c(Y,G.sibling),ye=p(G,ee),ye.return=Y,Y=ye):(c(Y,G),ye=Hf(ee,Y.mode,ye),ye.return=Y,Y=ye),C(Y)):c(Y,G)}return function(Y,G,ee,ye){try{El=0;var He=Xt(Y,G,ee,ye);return fo=null,He}catch(Fe){if(Fe===uo||Fe===Xc)throw Fe;var Ot=Mr(29,Fe,null,Y.mode);return Ot.lanes=ye,Ot.return=Y,Ot}}}var _s=B1(!0),L1=B1(!1),Da=!1;function nh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rh(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ma(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ba(t,r,c){var h=t.updateQueue;if(h===null)return null;if(h=h.shared,(kt&2)!==0){var p=h.pending;return p===null?r.next=r:(r.next=p.next,p.next=r),h.pending=r,r=Vc(t),w1(t,null,c),r}return zc(t,h,r,c),Vc(t)}function Al(t,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var h=r.lanes;h&=t.pendingLanes,c|=h,r.lanes=c,Oi(t,c)}}function ih(t,r){var c=t.updateQueue,h=t.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var p=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var C={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?p=b=C:b=b.next=C,c=c.next}while(c!==null);b===null?p=b=r:b=b.next=r}else p=b=r;c={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=r:t.next=r,c.lastBaseUpdate=r}var ah=!1;function _l(){if(ah){var t=co;if(t!==null)throw t}}function Cl(t,r,c,h){ah=!1;var p=t.updateQueue;Da=!1;var b=p.firstBaseUpdate,C=p.lastBaseUpdate,k=p.shared.pending;if(k!==null){p.shared.pending=null;var P=k,te=P.next;P.next=null,C===null?b=te:C.next=te,C=P;var ge=t.alternate;ge!==null&&(ge=ge.updateQueue,k=ge.lastBaseUpdate,k!==C&&(k===null?ge.firstBaseUpdate=te:k.next=te,ge.lastBaseUpdate=P))}if(b!==null){var pe=p.baseState;C=0,ge=te=P=null,k=b;do{var re=k.lane&-536870913,oe=re!==k.lane;if(oe?(vt&re)===re:(h&re)===re){re!==0&&re===lo&&(ah=!0),ge!==null&&(ge=ge.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Be=t,Ke=k;re=r;var Xt=c;switch(Ke.tag){case 1:if(Be=Ke.payload,typeof Be=="function"){pe=Be.call(Xt,pe,re);break e}pe=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Ke.payload,re=typeof Be=="function"?Be.call(Xt,pe,re):Be,re==null)break e;pe=R({},pe,re);break e;case 2:Da=!0}}re=k.callback,re!==null&&(t.flags|=64,oe&&(t.flags|=8192),oe=p.callbacks,oe===null?p.callbacks=[re]:oe.push(re))}else oe={lane:re,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ge===null?(te=ge=oe,P=pe):ge=ge.next=oe,C|=re;if(k=k.next,k===null){if(k=p.shared.pending,k===null)break;oe=k,k=oe.next,oe.next=null,p.lastBaseUpdate=oe,p.shared.pending=null}}while(!0);ge===null&&(P=pe),p.baseState=P,p.firstBaseUpdate=te,p.lastBaseUpdate=ge,b===null&&(p.shared.lanes=0),Fa|=C,t.lanes=C,t.memoizedState=pe}}function U1(t,r){if(typeof t!="function")throw Error(o(191,t));t.call(r)}function j1(t,r){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)U1(c[t],r)}var ho=B(null),Jc=B(0);function P1(t,r){t=ia,Z(Jc,t),Z(ho,r),ia=t|r.baseLanes}function sh(){Z(Jc,ia),Z(ho,ho.current)}function oh(){ia=Jc.current,z(ho),z(Jc)}var Br=B(null),ni=null;function La(t){var r=t.alternate;Z(On,On.current&1),Z(Br,t),ni===null&&(r===null||ho.current!==null||r.memoizedState!==null)&&(ni=t)}function lh(t){Z(On,On.current),Z(Br,t),ni===null&&(ni=t)}function F1(t){t.tag===22?(Z(On,On.current),Z(Br,t),ni===null&&(ni=t)):Ua()}function Ua(){Z(On,On.current),Z(Br,Br.current)}function Lr(t){z(Br),ni===t&&(ni=null),z(On)}var On=B(0);function $c(t){for(var r=t;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||gd(c)||md(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ki=0,ot=null,Wt=null,Dn=null,eu=!1,go=!1,Cs=!1,tu=0,Tl=0,mo=null,Mw=0;function wn(){throw Error(o(321))}function ch(t,r){if(r===null)return!1;for(var c=0;c<r.length&&c<t.length;c++)if(!g(t[c],r[c]))return!1;return!0}function uh(t,r,c,h,p,b){return Ki=b,ot=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=t===null||t.memoizedState===null?Sg:_h,Cs=!1,b=c(h,p),Cs=!1,go&&(b=V1(r,c,h,p)),z1(t),b}function z1(t){$.H=Rl;var r=Wt!==null&&Wt.next!==null;if(Ki=0,Dn=Wt=ot=null,eu=!1,Tl=0,mo=null,r)throw Error(o(300));t===null||Mn||(t=t.dependencies,t!==null&&qc(t)&&(Mn=!0))}function V1(t,r,c,h){ot=t;var p=0;do{if(go&&(mo=null),Tl=0,go=!1,25<=p)throw Error(o(301));if(p+=1,Dn=Wt=null,t.updateQueue!=null){var b=t.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}$.H=Ag,b=r(c,h)}while(go);return b}function Bw(){var t=$.H,r=t.useState()[0];return r=typeof r.then=="function"?Ol(r):r,t=t.useState()[0],(Wt!==null?Wt.memoizedState:null)!==t&&(ot.flags|=1024),r}function fh(){var t=tu!==0;return tu=0,t}function hh(t,r,c){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~c}function dh(t){if(eu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}eu=!1}Ki=0,Dn=Wt=ot=null,go=!1,Tl=tu=0,mo=null}function hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?ot.memoizedState=Dn=t:Dn=Dn.next=t,Dn}function Nn(){if(Wt===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=Wt.next;var r=Dn===null?ot.memoizedState:Dn.next;if(r!==null)Dn=r,Wt=t;else{if(t===null)throw ot.alternate===null?Error(o(467)):Error(o(310));Wt=t,t={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Dn===null?ot.memoizedState=Dn=t:Dn=Dn.next=t}return Dn}function nu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(t){var r=Tl;return Tl+=1,mo===null&&(mo=[]),t=k1(mo,t,r),r=ot,(Dn===null?r.memoizedState:Dn.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?Sg:_h),t}function ru(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ol(t);if(t.$$typeof===W)return Qn(t)}throw Error(o(438,String(t)))}function gh(t){var r=null,c=ot.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var h=ot.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(p){return p.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=nu(),ot.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(t),h=0;h<t;h++)c[h]=Mt;return r.index++,c}function Qi(t,r){return typeof r=="function"?r(t):r}function iu(t){var r=Nn();return mh(r,Wt,t)}function mh(t,r,c){var h=t.queue;if(h===null)throw Error(o(311));h.lastRenderedReducer=c;var p=t.baseQueue,b=h.pending;if(b!==null){if(p!==null){var C=p.next;p.next=b.next,b.next=C}r.baseQueue=p=b,h.pending=null}if(b=t.baseState,p===null)t.memoizedState=b;else{r=p.next;var k=C=null,P=null,te=r,ge=!1;do{var pe=te.lane&-536870913;if(pe!==te.lane?(vt&pe)===pe:(Ki&pe)===pe){var re=te.revertLane;if(re===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),pe===lo&&(ge=!0);else if((Ki&re)===re){te=te.next,re===lo&&(ge=!0);continue}else pe={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},P===null?(k=P=pe,C=b):P=P.next=pe,ot.lanes|=re,Fa|=re;pe=te.action,Cs&&c(b,pe),b=te.hasEagerState?te.eagerState:c(b,pe)}else re={lane:pe,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},P===null?(k=P=re,C=b):P=P.next=re,ot.lanes|=pe,Fa|=pe;te=te.next}while(te!==null&&te!==r);if(P===null?C=b:P.next=k,!g(b,t.memoizedState)&&(Mn=!0,ge&&(c=co,c!==null)))throw c;t.memoizedState=b,t.baseState=C,t.baseQueue=P,h.lastRenderedState=b}return p===null&&(h.lanes=0),[t.memoizedState,h.dispatch]}function yh(t){var r=Nn(),c=r.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=t;var h=c.dispatch,p=c.pending,b=r.memoizedState;if(p!==null){c.pending=null;var C=p=p.next;do b=t(b,C.action),C=C.next;while(C!==p);g(b,r.memoizedState)||(Mn=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),c.lastRenderedState=b}return[b,h]}function H1(t,r,c){var h=ot,p=Nn(),b=St;if(b){if(c===void 0)throw Error(o(407));c=c()}else c=r();var C=!g((Wt||p).memoizedState,c);if(C&&(p.memoizedState=c,Mn=!0),p=p.queue,wh(W1.bind(null,h,p,t),[t]),p.getSnapshot!==r||C||Dn!==null&&Dn.memoizedState.tag&1){if(h.flags|=2048,yo(9,{destroy:void 0},q1.bind(null,h,p,c,r),null),$t===null)throw Error(o(349));b||(Ki&127)!==0||G1(h,r,c)}return c}function G1(t,r,c){t.flags|=16384,t={getSnapshot:r,value:c},r=ot.updateQueue,r===null?(r=nu(),ot.updateQueue=r,r.stores=[t]):(c=r.stores,c===null?r.stores=[t]:c.push(t))}function q1(t,r,c,h){r.value=c,r.getSnapshot=h,Y1(r)&&X1(t)}function W1(t,r,c){return c(function(){Y1(r)&&X1(t)})}function Y1(t){var r=t.getSnapshot;t=t.value;try{var c=r();return!g(t,c)}catch{return!0}}function X1(t){var r=ps(t,2);r!==null&&Ar(r,t,2)}function ph(t){var r=hr();if(typeof t=="function"){var c=t;if(t=c(),Cs){qt(!0);try{c()}finally{qt(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:t},r}function Z1(t,r,c,h){return t.baseState=c,mh(t,Wt,typeof h=="function"?h:Qi)}function Lw(t,r,c,h,p){if(ou(t))throw Error(o(485));if(t=r.action,t!==null){var b={payload:p,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){b.listeners.push(C)}};$.T!==null?c(!0):b.isTransition=!1,h(b),c=r.pending,c===null?(b.next=r.pending=b,K1(r,b)):(b.next=c.next,r.pending=c.next=b)}}function K1(t,r){var c=r.action,h=r.payload,p=t.state;if(r.isTransition){var b=$.T,C={};$.T=C;try{var k=c(p,h),P=$.S;P!==null&&P(C,k),Q1(t,r,k)}catch(te){xh(t,r,te)}finally{b!==null&&C.types!==null&&(b.types=C.types),$.T=b}}else try{b=c(p,h),Q1(t,r,b)}catch(te){xh(t,r,te)}}function Q1(t,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){J1(t,r,h)},function(h){return xh(t,r,h)}):J1(t,r,c)}function J1(t,r,c){r.status="fulfilled",r.value=c,$1(r),t.state=c,r=t.pending,r!==null&&(c=r.next,c===r?t.pending=null:(c=c.next,r.next=c,K1(t,c)))}function xh(t,r,c){var h=t.pending;if(t.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=c,$1(r),r=r.next;while(r!==h)}t.action=null}function $1(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function eg(t,r){return r}function tg(t,r){if(St){var c=$t.formState;if(c!==null){e:{var h=ot;if(St){if(on){t:{for(var p=on,b=ti;p.nodeType!==8;){if(!b){p=null;break t}if(p=ri(p.nextSibling),p===null){p=null;break t}}b=p.data,p=b==="F!"||b==="F"?p:null}if(p){on=ri(p.nextSibling),h=p.data==="F!";break e}}Ia(h)}h=!1}h&&(r=c[0])}}return c=hr(),c.memoizedState=c.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eg,lastRenderedState:r},c.queue=h,c=bg.bind(null,ot,h),h.dispatch=c,h=ph(!1),b=Ah.bind(null,ot,!1,h.queue),h=hr(),p={state:r,dispatch:null,action:t,pending:null},h.queue=p,c=Lw.bind(null,ot,p,b,c),p.dispatch=c,h.memoizedState=t,[r,c,!1]}function ng(t){var r=Nn();return rg(r,Wt,t)}function rg(t,r,c){if(r=mh(t,r,eg)[0],t=iu(Qi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=Ol(r)}catch(C){throw C===uo?Xc:C}else h=r;r=Nn();var p=r.queue,b=p.dispatch;return c!==r.memoizedState&&(ot.flags|=2048,yo(9,{destroy:void 0},Uw.bind(null,p,c),null)),[h,b,t]}function Uw(t,r){t.action=r}function ig(t){var r=Nn(),c=Wt;if(c!==null)return rg(r,c,t);Nn(),r=r.memoizedState,c=Nn();var h=c.queue.dispatch;return c.memoizedState=t,[r,h,!1]}function yo(t,r,c,h){return t={tag:t,create:c,deps:h,inst:r,next:null},r=ot.updateQueue,r===null&&(r=nu(),ot.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=t.next=t:(h=c.next,c.next=t,t.next=h,r.lastEffect=t),t}function ag(){return Nn().memoizedState}function au(t,r,c,h){var p=hr();ot.flags|=t,p.memoizedState=yo(1|r,{destroy:void 0},c,h===void 0?null:h)}function su(t,r,c,h){var p=Nn();h=h===void 0?null:h;var b=p.memoizedState.inst;Wt!==null&&h!==null&&ch(h,Wt.memoizedState.deps)?p.memoizedState=yo(r,b,c,h):(ot.flags|=t,p.memoizedState=yo(1|r,b,c,h))}function sg(t,r){au(8390656,8,t,r)}function wh(t,r){su(2048,8,t,r)}function jw(t){ot.flags|=4;var r=ot.updateQueue;if(r===null)r=nu(),ot.updateQueue=r,r.events=[t];else{var c=r.events;c===null?r.events=[t]:c.push(t)}}function og(t){var r=Nn().memoizedState;return jw({ref:r,nextImpl:t}),function(){if((kt&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}function lg(t,r){return su(4,2,t,r)}function cg(t,r){return su(4,4,t,r)}function ug(t,r){if(typeof r=="function"){t=t();var c=r(t);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function fg(t,r,c){c=c!=null?c.concat([t]):null,su(4,4,ug.bind(null,r,t),c)}function bh(){}function hg(t,r){var c=Nn();r=r===void 0?null:r;var h=c.memoizedState;return r!==null&&ch(r,h[1])?h[0]:(c.memoizedState=[t,r],t)}function dg(t,r){var c=Nn();r=r===void 0?null:r;var h=c.memoizedState;if(r!==null&&ch(r,h[1]))return h[0];if(h=t(),Cs){qt(!0);try{t()}finally{qt(!1)}}return c.memoizedState=[h,r],h}function vh(t,r,c){return c===void 0||(Ki&1073741824)!==0&&(vt&261930)===0?t.memoizedState=r:(t.memoizedState=c,t=gm(),ot.lanes|=t,Fa|=t,c)}function gg(t,r,c,h){return g(c,r)?c:ho.current!==null?(t=vh(t,c,h),g(t,r)||(Mn=!0),t):(Ki&42)===0||(Ki&1073741824)!==0&&(vt&261930)===0?(Mn=!0,t.memoizedState=c):(t=gm(),ot.lanes|=t,Fa|=t,r)}function mg(t,r,c,h,p){var b=he.p;he.p=b!==0&&8>b?b:8;var C=$.T,k={};$.T=k,Ah(t,!1,r,c);try{var P=p(),te=$.S;if(te!==null&&te(k,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ge=Dw(P,h);Nl(t,r,ge,Pr(t))}else Nl(t,r,h,Pr(t))}catch(pe){Nl(t,r,{then:function(){},status:"rejected",reason:pe},Pr())}finally{he.p=b,C!==null&&k.types!==null&&(C.types=k.types),$.T=C}}function Pw(){}function Eh(t,r,c,h){if(t.tag!==5)throw Error(o(476));var p=yg(t).queue;mg(t,p,r,we,c===null?Pw:function(){return pg(t),c(h)})}function yg(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:we},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:c},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function pg(t){var r=yg(t);r.next===null&&(r=t.alternate.memoizedState),Nl(t,r.next.queue,{},Pr())}function Sh(){return Qn(Wl)}function xg(){return Nn().memoizedState}function wg(){return Nn().memoizedState}function Fw(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var c=Pr();t=Ma(c);var h=Ba(r,t,c);h!==null&&(Ar(h,r,c),Al(h,r,c)),r={cache:Jf()},t.payload=r;return}r=r.return}}function zw(t,r,c){var h=Pr();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ou(t)?vg(r,c):(c=zf(t,r,c,h),c!==null&&(Ar(c,t,h),Eg(c,r,h)))}function bg(t,r,c){var h=Pr();Nl(t,r,c,h)}function Nl(t,r,c,h){var p={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(ou(t))vg(r,p);else{var b=t.alternate;if(t.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var C=r.lastRenderedState,k=b(C,c);if(p.hasEagerState=!0,p.eagerState=k,g(k,C))return zc(t,r,p,0),$t===null&&Fc(),!1}catch{}if(c=zf(t,r,p,h),c!==null)return Ar(c,t,h),Eg(c,r,h),!0}return!1}function Ah(t,r,c,h){if(h={lane:2,revertLane:nd(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},ou(t)){if(r)throw Error(o(479))}else r=zf(t,c,h,2),r!==null&&Ar(r,t,2)}function ou(t){var r=t.alternate;return t===ot||r!==null&&r===ot}function vg(t,r){go=eu=!0;var c=t.pending;c===null?r.next=r:(r.next=c.next,c.next=r),t.pending=r}function Eg(t,r,c){if((c&4194048)!==0){var h=r.lanes;h&=t.pendingLanes,c|=h,r.lanes=c,Oi(t,c)}}var Rl={readContext:Qn,use:ru,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useLayoutEffect:wn,useInsertionEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useSyncExternalStore:wn,useId:wn,useHostTransitionStatus:wn,useFormState:wn,useActionState:wn,useOptimistic:wn,useMemoCache:wn,useCacheRefresh:wn};Rl.useEffectEvent=wn;var Sg={readContext:Qn,use:ru,useCallback:function(t,r){return hr().memoizedState=[t,r===void 0?null:r],t},useContext:Qn,useEffect:sg,useImperativeHandle:function(t,r,c){c=c!=null?c.concat([t]):null,au(4194308,4,ug.bind(null,r,t),c)},useLayoutEffect:function(t,r){return au(4194308,4,t,r)},useInsertionEffect:function(t,r){au(4,2,t,r)},useMemo:function(t,r){var c=hr();r=r===void 0?null:r;var h=t();if(Cs){qt(!0);try{t()}finally{qt(!1)}}return c.memoizedState=[h,r],h},useReducer:function(t,r,c){var h=hr();if(c!==void 0){var p=c(r);if(Cs){qt(!0);try{c(r)}finally{qt(!1)}}}else p=r;return h.memoizedState=h.baseState=p,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:p},h.queue=t,t=t.dispatch=zw.bind(null,ot,t),[h.memoizedState,t]},useRef:function(t){var r=hr();return t={current:t},r.memoizedState=t},useState:function(t){t=ph(t);var r=t.queue,c=bg.bind(null,ot,r);return r.dispatch=c,[t.memoizedState,c]},useDebugValue:bh,useDeferredValue:function(t,r){var c=hr();return vh(c,t,r)},useTransition:function(){var t=ph(!1);return t=mg.bind(null,ot,t.queue,!0,!1),hr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,c){var h=ot,p=hr();if(St){if(c===void 0)throw Error(o(407));c=c()}else{if(c=r(),$t===null)throw Error(o(349));(vt&127)!==0||G1(h,r,c)}p.memoizedState=c;var b={value:c,getSnapshot:r};return p.queue=b,sg(W1.bind(null,h,b,t),[t]),h.flags|=2048,yo(9,{destroy:void 0},q1.bind(null,h,b,c,r),null),c},useId:function(){var t=hr(),r=$t.identifierPrefix;if(St){var c=Mi,h=Di;c=(h&~(1<<32-lt(h)-1)).toString(32)+c,r="_"+r+"R_"+c,c=tu++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=Mw++,r="_"+r+"r_"+c.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Sh,useFormState:tg,useActionState:tg,useOptimistic:function(t){var r=hr();r.memoizedState=r.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Ah.bind(null,ot,!0,c),c.dispatch=r,[t,r]},useMemoCache:gh,useCacheRefresh:function(){return hr().memoizedState=Fw.bind(null,ot)},useEffectEvent:function(t){var r=hr(),c={impl:t};return r.memoizedState=c,function(){if((kt&2)!==0)throw Error(o(440));return c.impl.apply(void 0,arguments)}}},_h={readContext:Qn,use:ru,useCallback:hg,useContext:Qn,useEffect:wh,useImperativeHandle:fg,useInsertionEffect:lg,useLayoutEffect:cg,useMemo:dg,useReducer:iu,useRef:ag,useState:function(){return iu(Qi)},useDebugValue:bh,useDeferredValue:function(t,r){var c=Nn();return gg(c,Wt.memoizedState,t,r)},useTransition:function(){var t=iu(Qi)[0],r=Nn().memoizedState;return[typeof t=="boolean"?t:Ol(t),r]},useSyncExternalStore:H1,useId:xg,useHostTransitionStatus:Sh,useFormState:ng,useActionState:ng,useOptimistic:function(t,r){var c=Nn();return Z1(c,Wt,t,r)},useMemoCache:gh,useCacheRefresh:wg};_h.useEffectEvent=og;var Ag={readContext:Qn,use:ru,useCallback:hg,useContext:Qn,useEffect:wh,useImperativeHandle:fg,useInsertionEffect:lg,useLayoutEffect:cg,useMemo:dg,useReducer:yh,useRef:ag,useState:function(){return yh(Qi)},useDebugValue:bh,useDeferredValue:function(t,r){var c=Nn();return Wt===null?vh(c,t,r):gg(c,Wt.memoizedState,t,r)},useTransition:function(){var t=yh(Qi)[0],r=Nn().memoizedState;return[typeof t=="boolean"?t:Ol(t),r]},useSyncExternalStore:H1,useId:xg,useHostTransitionStatus:Sh,useFormState:ig,useActionState:ig,useOptimistic:function(t,r){var c=Nn();return Wt!==null?Z1(c,Wt,t,r):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:gh,useCacheRefresh:wg};Ag.useEffectEvent=og;function Ch(t,r,c,h){r=t.memoizedState,c=c(h,r),c=c==null?r:R({},r,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var Th={enqueueSetState:function(t,r,c){t=t._reactInternals;var h=Pr(),p=Ma(h);p.payload=r,c!=null&&(p.callback=c),r=Ba(t,p,h),r!==null&&(Ar(r,t,h),Al(r,t,h))},enqueueReplaceState:function(t,r,c){t=t._reactInternals;var h=Pr(),p=Ma(h);p.tag=1,p.payload=r,c!=null&&(p.callback=c),r=Ba(t,p,h),r!==null&&(Ar(r,t,h),Al(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var c=Pr(),h=Ma(c);h.tag=2,r!=null&&(h.callback=r),r=Ba(t,h,c),r!==null&&(Ar(r,t,c),Al(r,t,c))}};function _g(t,r,c,h,p,b,C){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(h,b,C):r.prototype&&r.prototype.isPureReactComponent?!y(c,h)||!y(p,b):!0}function Cg(t,r,c,h){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,h),r.state!==t&&Th.enqueueReplaceState(r,r.state,null)}function Ts(t,r){var c=r;if("ref"in r){c={};for(var h in r)h!=="ref"&&(c[h]=r[h])}if(t=t.defaultProps){c===r&&(c=R({},c));for(var p in t)c[p]===void 0&&(c[p]=t[p])}return c}function Tg(t){Pc(t)}function Og(t){console.error(t)}function Ng(t){Pc(t)}function lu(t,r){try{var c=t.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function Rg(t,r,c){try{var h=t.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Oh(t,r,c){return c=Ma(c),c.tag=3,c.payload={element:null},c.callback=function(){lu(t,r)},c}function Ig(t){return t=Ma(t),t.tag=3,t}function kg(t,r,c,h){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var b=h.value;t.payload=function(){return p(b)},t.callback=function(){Rg(r,c,h)}}var C=c.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(t.callback=function(){Rg(r,c,h),typeof p!="function"&&(za===null?za=new Set([this]):za.add(this));var k=h.stack;this.componentDidCatch(h.value,{componentStack:k!==null?k:""})})}function Vw(t,r,c,h,p){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=c.alternate,r!==null&&oo(r,c,p,!0),c=Br.current,c!==null){switch(c.tag){case 31:case 13:return ni===null?bu():c.alternate===null&&bn===0&&(bn=3),c.flags&=-257,c.flags|=65536,c.lanes=p,h===Zc?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([h]):r.add(h),$h(t,h,p)),!1;case 22:return c.flags|=65536,h===Zc?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([h]):c.add(h)),$h(t,h,p)),!1}throw Error(o(435,c.tag))}return $h(t,h,p),bu(),!1}if(St)return r=Br.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=p,h!==Yf&&(t=Error(o(422),{cause:h}),wl(Jr(t,c)))):(h!==Yf&&(r=Error(o(423),{cause:h}),wl(Jr(r,c))),t=t.current.alternate,t.flags|=65536,p&=-p,t.lanes|=p,h=Jr(h,c),p=Oh(t.stateNode,h,p),ih(t,p),bn!==4&&(bn=2)),!1;var b=Error(o(520),{cause:h});if(b=Jr(b,c),jl===null?jl=[b]:jl.push(b),bn!==4&&(bn=2),r===null)return!0;h=Jr(h,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,t=p&-p,c.lanes|=t,t=Oh(c.stateNode,h,t),ih(c,t),!1;case 1:if(r=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(za===null||!za.has(b))))return c.flags|=65536,p&=-p,c.lanes|=p,p=Ig(p),kg(p,t,c,h),ih(c,p),!1}c=c.return}while(c!==null);return!1}var Nh=Error(o(461)),Mn=!1;function Jn(t,r,c,h){r.child=t===null?L1(r,null,c,h):_s(r,t.child,c,h)}function Dg(t,r,c,h,p){c=c.render;var b=r.ref;if("ref"in h){var C={};for(var k in h)k!=="ref"&&(C[k]=h[k])}else C=h;return vs(r),h=uh(t,r,c,C,b,p),k=fh(),t!==null&&!Mn?(hh(t,r,p),Ji(t,r,p)):(St&&k&&qf(r),r.flags|=1,Jn(t,r,h,p),r.child)}function Mg(t,r,c,h,p){if(t===null){var b=c.type;return typeof b=="function"&&!Vf(b)&&b.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=b,Bg(t,r,b,h,p)):(t=Hc(c.type,null,h,r,r.mode,p),t.ref=r.ref,t.return=r,r.child=t)}if(b=t.child,!Uh(t,p)){var C=b.memoizedProps;if(c=c.compare,c=c!==null?c:y,c(C,h)&&t.ref===r.ref)return Ji(t,r,p)}return r.flags|=1,t=Wi(b,h),t.ref=r.ref,t.return=r,r.child=t}function Bg(t,r,c,h,p){if(t!==null){var b=t.memoizedProps;if(y(b,h)&&t.ref===r.ref)if(Mn=!1,r.pendingProps=h=b,Uh(t,p))(t.flags&131072)!==0&&(Mn=!0);else return r.lanes=t.lanes,Ji(t,r,p)}return Rh(t,r,c,h,p)}function Lg(t,r,c,h){var p=h.children,b=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((r.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,t!==null){for(h=r.child=t.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;h=p&~b}else h=0,r.child=null;return Ug(t,r,b,c,h)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Yc(r,b!==null?b.cachePool:null),b!==null?P1(r,b):sh(),F1(r);else return h=r.lanes=536870912,Ug(t,r,b!==null?b.baseLanes|c:c,c,h)}else b!==null?(Yc(r,b.cachePool),P1(r,b),Ua(),r.memoizedState=null):(t!==null&&Yc(r,null),sh(),Ua());return Jn(t,r,p,c),r.child}function Il(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Ug(t,r,c,h,p){var b=eh();return b=b===null?null:{parent:kn._currentValue,pool:b},r.memoizedState={baseLanes:c,cachePool:b},t!==null&&Yc(r,null),sh(),F1(r),t!==null&&oo(t,r,h,!0),r.childLanes=p,null}function cu(t,r){return r=fu({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function jg(t,r,c){return _s(r,t.child,null,c),t=cu(r,r.pendingProps),t.flags|=2,Lr(r),r.memoizedState=null,t}function Hw(t,r,c){var h=r.pendingProps,p=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(St){if(h.mode==="hidden")return t=cu(r,h),r.lanes=536870912,Il(null,t);if(lh(r),(t=on)?(t=Km(t,ti),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Na!==null?{id:Di,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},c=v1(t),c.return=r,r.child=c,Kn=r,on=null)):t=null,t===null)throw Ia(r);return r.lanes=536870912,null}return cu(r,h)}var b=t.memoizedState;if(b!==null){var C=b.dehydrated;if(lh(r),p)if(r.flags&256)r.flags&=-257,r=jg(t,r,c);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(o(558));else if(Mn||oo(t,r,c,!1),p=(c&t.childLanes)!==0,Mn||p){if(h=$t,h!==null&&(C=qs(h,c),C!==0&&C!==b.retryLane))throw b.retryLane=C,ps(t,C),Ar(h,t,C),Nh;bu(),r=jg(t,r,c)}else t=b.treeContext,on=ri(C.nextSibling),Kn=r,St=!0,Ra=null,ti=!1,t!==null&&A1(r,t),r=cu(r,h),r.flags|=4096;return r}return t=Wi(t.child,{mode:h.mode,children:h.children}),t.ref=r.ref,r.child=t,t.return=r,t}function uu(t,r){var c=r.ref;if(c===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(t===null||t.ref!==c)&&(r.flags|=4194816)}}function Rh(t,r,c,h,p){return vs(r),c=uh(t,r,c,h,void 0,p),h=fh(),t!==null&&!Mn?(hh(t,r,p),Ji(t,r,p)):(St&&h&&qf(r),r.flags|=1,Jn(t,r,c,p),r.child)}function Pg(t,r,c,h,p,b){return vs(r),r.updateQueue=null,c=V1(r,h,c,p),z1(t),h=fh(),t!==null&&!Mn?(hh(t,r,b),Ji(t,r,b)):(St&&h&&qf(r),r.flags|=1,Jn(t,r,c,b),r.child)}function Fg(t,r,c,h,p){if(vs(r),r.stateNode===null){var b=ro,C=c.contextType;typeof C=="object"&&C!==null&&(b=Qn(C)),b=new c(h,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Th,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=h,b.state=r.memoizedState,b.refs={},nh(r),C=c.contextType,b.context=typeof C=="object"&&C!==null?Qn(C):ro,b.state=r.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(Ch(r,c,C,h),b.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(C=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),C!==b.state&&Th.enqueueReplaceState(b,b.state,null),Cl(r,h,b,p),_l(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(t===null){b=r.stateNode;var k=r.memoizedProps,P=Ts(c,k);b.props=P;var te=b.context,ge=c.contextType;C=ro,typeof ge=="object"&&ge!==null&&(C=Qn(ge));var pe=c.getDerivedStateFromProps;ge=typeof pe=="function"||typeof b.getSnapshotBeforeUpdate=="function",k=r.pendingProps!==k,ge||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k||te!==C)&&Cg(r,b,h,C),Da=!1;var re=r.memoizedState;b.state=re,Cl(r,h,b,p),_l(),te=r.memoizedState,k||re!==te||Da?(typeof pe=="function"&&(Ch(r,c,pe,h),te=r.memoizedState),(P=Da||_g(r,c,P,h,re,te,C))?(ge||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=te),b.props=h,b.state=te,b.context=C,h=P):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{b=r.stateNode,rh(t,r),C=r.memoizedProps,ge=Ts(c,C),b.props=ge,pe=r.pendingProps,re=b.context,te=c.contextType,P=ro,typeof te=="object"&&te!==null&&(P=Qn(te)),k=c.getDerivedStateFromProps,(te=typeof k=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C!==pe||re!==P)&&Cg(r,b,h,P),Da=!1,re=r.memoizedState,b.state=re,Cl(r,h,b,p),_l();var oe=r.memoizedState;C!==pe||re!==oe||Da||t!==null&&t.dependencies!==null&&qc(t.dependencies)?(typeof k=="function"&&(Ch(r,c,k,h),oe=r.memoizedState),(ge=Da||_g(r,c,ge,h,re,oe,P)||t!==null&&t.dependencies!==null&&qc(t.dependencies))?(te||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,oe,P),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,oe,P)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||C===t.memoizedProps&&re===t.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&re===t.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=oe),b.props=h,b.state=oe,b.context=P,h=ge):(typeof b.componentDidUpdate!="function"||C===t.memoizedProps&&re===t.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&re===t.memoizedState||(r.flags|=1024),h=!1)}return b=h,uu(t,r),h=(r.flags&128)!==0,b||h?(b=r.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,t!==null&&h?(r.child=_s(r,t.child,null,p),r.child=_s(r,null,c,p)):Jn(t,r,c,p),r.memoizedState=b.state,t=r.child):t=Ji(t,r,p),t}function zg(t,r,c,h){return ws(),r.flags|=256,Jn(t,r,c,h),r.child}var Ih={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kh(t){return{baseLanes:t,cachePool:R1()}}function Dh(t,r,c){return t=t!==null?t.childLanes&~c:0,r&&(t|=jr),t}function Vg(t,r,c){var h=r.pendingProps,p=!1,b=(r.flags&128)!==0,C;if((C=b)||(C=t!==null&&t.memoizedState===null?!1:(On.current&2)!==0),C&&(p=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,t===null){if(St){if(p?La(r):Ua(),(t=on)?(t=Km(t,ti),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Na!==null?{id:Di,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},c=v1(t),c.return=r,r.child=c,Kn=r,on=null)):t=null,t===null)throw Ia(r);return md(t)?r.lanes=32:r.lanes=536870912,null}var k=h.children;return h=h.fallback,p?(Ua(),p=r.mode,k=fu({mode:"hidden",children:k},p),h=xs(h,p,c,null),k.return=r,h.return=r,k.sibling=h,r.child=k,h=r.child,h.memoizedState=kh(c),h.childLanes=Dh(t,C,c),r.memoizedState=Ih,Il(null,h)):(La(r),Mh(r,k))}var P=t.memoizedState;if(P!==null&&(k=P.dehydrated,k!==null)){if(b)r.flags&256?(La(r),r.flags&=-257,r=Bh(t,r,c)):r.memoizedState!==null?(Ua(),r.child=t.child,r.flags|=128,r=null):(Ua(),k=h.fallback,p=r.mode,h=fu({mode:"visible",children:h.children},p),k=xs(k,p,c,null),k.flags|=2,h.return=r,k.return=r,h.sibling=k,r.child=h,_s(r,t.child,null,c),h=r.child,h.memoizedState=kh(c),h.childLanes=Dh(t,C,c),r.memoizedState=Ih,r=Il(null,h));else if(La(r),md(k)){if(C=k.nextSibling&&k.nextSibling.dataset,C)var te=C.dgst;C=te,h=Error(o(419)),h.stack="",h.digest=C,wl({value:h,source:null,stack:null}),r=Bh(t,r,c)}else if(Mn||oo(t,r,c,!1),C=(c&t.childLanes)!==0,Mn||C){if(C=$t,C!==null&&(h=qs(C,c),h!==0&&h!==P.retryLane))throw P.retryLane=h,ps(t,h),Ar(C,t,h),Nh;gd(k)||bu(),r=Bh(t,r,c)}else gd(k)?(r.flags|=192,r.child=t.child,r=null):(t=P.treeContext,on=ri(k.nextSibling),Kn=r,St=!0,Ra=null,ti=!1,t!==null&&A1(r,t),r=Mh(r,h.children),r.flags|=4096);return r}return p?(Ua(),k=h.fallback,p=r.mode,P=t.child,te=P.sibling,h=Wi(P,{mode:"hidden",children:h.children}),h.subtreeFlags=P.subtreeFlags&65011712,te!==null?k=Wi(te,k):(k=xs(k,p,c,null),k.flags|=2),k.return=r,h.return=r,h.sibling=k,r.child=h,Il(null,h),h=r.child,k=t.child.memoizedState,k===null?k=kh(c):(p=k.cachePool,p!==null?(P=kn._currentValue,p=p.parent!==P?{parent:P,pool:P}:p):p=R1(),k={baseLanes:k.baseLanes|c,cachePool:p}),h.memoizedState=k,h.childLanes=Dh(t,C,c),r.memoizedState=Ih,Il(t.child,h)):(La(r),c=t.child,t=c.sibling,c=Wi(c,{mode:"visible",children:h.children}),c.return=r,c.sibling=null,t!==null&&(C=r.deletions,C===null?(r.deletions=[t],r.flags|=16):C.push(t)),r.child=c,r.memoizedState=null,c)}function Mh(t,r){return r=fu({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function fu(t,r){return t=Mr(22,t,null,r),t.lanes=0,t}function Bh(t,r,c){return _s(r,t.child,null,c),t=Mh(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Hg(t,r,c){t.lanes|=r;var h=t.alternate;h!==null&&(h.lanes|=r),Kf(t.return,r,c)}function Lh(t,r,c,h,p,b){var C=t.memoizedState;C===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:p,treeForkCount:b}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=h,C.tail=c,C.tailMode=p,C.treeForkCount=b)}function Gg(t,r,c){var h=r.pendingProps,p=h.revealOrder,b=h.tail;h=h.children;var C=On.current,k=(C&2)!==0;if(k?(C=C&1|2,r.flags|=128):C&=1,Z(On,C),Jn(t,r,h,c),h=St?xl:0,!k&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hg(t,c,r);else if(t.tag===19)Hg(t,c,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(p){case"forwards":for(c=r.child,p=null;c!==null;)t=c.alternate,t!==null&&$c(t)===null&&(p=c),c=c.sibling;c=p,c===null?(p=r.child,r.child=null):(p=c.sibling,c.sibling=null),Lh(r,!1,p,c,b,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,p=r.child,r.child=null;p!==null;){if(t=p.alternate,t!==null&&$c(t)===null){r.child=p;break}t=p.sibling,p.sibling=c,c=p,p=t}Lh(r,!0,c,null,b,h);break;case"together":Lh(r,!1,null,null,void 0,h);break;default:r.memoizedState=null}return r.child}function Ji(t,r,c){if(t!==null&&(r.dependencies=t.dependencies),Fa|=r.lanes,(c&r.childLanes)===0)if(t!==null){if(oo(t,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(o(153));if(r.child!==null){for(t=r.child,c=Wi(t,t.pendingProps),r.child=c,c.return=r;t.sibling!==null;)t=t.sibling,c=c.sibling=Wi(t,t.pendingProps),c.return=r;c.sibling=null}return r.child}function Uh(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&qc(t)))}function Gw(t,r,c){switch(r.tag){case 3:We(r,r.stateNode.containerInfo),ka(r,kn,t.memoizedState.cache),ws();break;case 27:case 5:Ye(r);break;case 4:We(r,r.stateNode.containerInfo);break;case 10:ka(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,lh(r),null;break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(La(r),r.flags|=128,null):(c&r.child.childLanes)!==0?Vg(t,r,c):(La(r),t=Ji(t,r,c),t!==null?t.sibling:null);La(r);break;case 19:var p=(t.flags&128)!==0;if(h=(c&r.childLanes)!==0,h||(oo(t,r,c,!1),h=(c&r.childLanes)!==0),p){if(h)return Gg(t,r,c);r.flags|=128}if(p=r.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Z(On,On.current),h)break;return null;case 22:return r.lanes=0,Lg(t,r,c,r.pendingProps);case 24:ka(r,kn,t.memoizedState.cache)}return Ji(t,r,c)}function qg(t,r,c){if(t!==null)if(t.memoizedProps!==r.pendingProps)Mn=!0;else{if(!Uh(t,c)&&(r.flags&128)===0)return Mn=!1,Gw(t,r,c);Mn=(t.flags&131072)!==0}else Mn=!1,St&&(r.flags&1048576)!==0&&S1(r,xl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var h=r.pendingProps;if(t=Ss(r.elementType),r.type=t,typeof t=="function")Vf(t)?(h=Ts(t,h),r.tag=1,r=Fg(null,r,t,h,c)):(r.tag=0,r=Rh(null,r,t,h,c));else{if(t!=null){var p=t.$$typeof;if(p===me){r.tag=11,r=Dg(null,r,t,h,c);break e}else if(p===J){r.tag=14,r=Mg(null,r,t,h,c);break e}}throw r=$e(t)||t,Error(o(306,r,""))}}return r;case 0:return Rh(t,r,r.type,r.pendingProps,c);case 1:return h=r.type,p=Ts(h,r.pendingProps),Fg(t,r,h,p,c);case 3:e:{if(We(r,r.stateNode.containerInfo),t===null)throw Error(o(387));h=r.pendingProps;var b=r.memoizedState;p=b.element,rh(t,r),Cl(r,h,null,c);var C=r.memoizedState;if(h=C.cache,ka(r,kn,h),h!==b.cache&&Qf(r,[kn],c,!0),_l(),h=C.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=zg(t,r,h,c);break e}else if(h!==p){p=Jr(Error(o(424)),r),wl(p),r=zg(t,r,h,c);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,on=ri(t.firstChild),Kn=r,St=!0,Ra=null,ti=!0,c=L1(r,null,h,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ws(),h===p){r=Ji(t,r,c);break e}Jn(t,r,h,c)}r=r.child}return r;case 26:return uu(t,r),t===null?(c=n2(r.type,null,r.pendingProps,null))?r.memoizedState=c:St||(c=r.type,t=r.pendingProps,h=Tu(be.current).createElement(c),h[_n]=r,h[zt]=t,$n(h,c,t),pn(h),r.stateNode=h):r.memoizedState=n2(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Ye(r),t===null&&St&&(h=r.stateNode=$m(r.type,r.pendingProps,be.current),Kn=r,ti=!0,p=on,qa(r.type)?(yd=p,on=ri(h.firstChild)):on=p),Jn(t,r,r.pendingProps.children,c),uu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&St&&((p=h=on)&&(h=bb(h,r.type,r.pendingProps,ti),h!==null?(r.stateNode=h,Kn=r,on=ri(h.firstChild),ti=!1,p=!0):p=!1),p||Ia(r)),Ye(r),p=r.type,b=r.pendingProps,C=t!==null?t.memoizedProps:null,h=b.children,fd(p,b)?h=null:C!==null&&fd(p,C)&&(r.flags|=32),r.memoizedState!==null&&(p=uh(t,r,Bw,null,null,c),Wl._currentValue=p),uu(t,r),Jn(t,r,h,c),r.child;case 6:return t===null&&St&&((t=c=on)&&(c=vb(c,r.pendingProps,ti),c!==null?(r.stateNode=c,Kn=r,on=null,t=!0):t=!1),t||Ia(r)),null;case 13:return Vg(t,r,c);case 4:return We(r,r.stateNode.containerInfo),h=r.pendingProps,t===null?r.child=_s(r,null,h,c):Jn(t,r,h,c),r.child;case 11:return Dg(t,r,r.type,r.pendingProps,c);case 7:return Jn(t,r,r.pendingProps,c),r.child;case 8:return Jn(t,r,r.pendingProps.children,c),r.child;case 12:return Jn(t,r,r.pendingProps.children,c),r.child;case 10:return h=r.pendingProps,ka(r,r.type,h.value),Jn(t,r,h.children,c),r.child;case 9:return p=r.type._context,h=r.pendingProps.children,vs(r),p=Qn(p),h=h(p),r.flags|=1,Jn(t,r,h,c),r.child;case 14:return Mg(t,r,r.type,r.pendingProps,c);case 15:return Bg(t,r,r.type,r.pendingProps,c);case 19:return Gg(t,r,c);case 31:return Hw(t,r,c);case 22:return Lg(t,r,c,r.pendingProps);case 24:return vs(r),h=Qn(kn),t===null?(p=eh(),p===null&&(p=$t,b=Jf(),p.pooledCache=b,b.refCount++,b!==null&&(p.pooledCacheLanes|=c),p=b),r.memoizedState={parent:h,cache:p},nh(r),ka(r,kn,p)):((t.lanes&c)!==0&&(rh(t,r),Cl(r,null,null,c),_l()),p=t.memoizedState,b=r.memoizedState,p.parent!==h?(p={parent:h,cache:h},r.memoizedState=p,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=p),ka(r,kn,h)):(h=b.cache,ka(r,kn,h),h!==p.cache&&Qf(r,[kn],c,!0))),Jn(t,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(o(156,r.tag))}function $i(t){t.flags|=4}function jh(t,r,c,h,p){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(p&335544128)===p)if(t.stateNode.complete)t.flags|=8192;else if(xm())t.flags|=8192;else throw As=Zc,th}else t.flags&=-16777217}function Wg(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!o2(r))if(xm())t.flags|=8192;else throw As=Zc,th}function hu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?jn():536870912,t.lanes|=r,bo|=r)}function kl(t,r){if(!St)switch(t.tailMode){case"hidden":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:h.sibling=null}}function ln(t){var r=t.alternate!==null&&t.alternate.child===t.child,c=0,h=0;if(r)for(var p=t.child;p!==null;)c|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)c|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=h,t.childLanes=c,r}function qw(t,r,c){var h=r.pendingProps;switch(Wf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(r),null;case 1:return ln(r),null;case 3:return c=r.stateNode,h=null,t!==null&&(h=t.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),Zi(kn),Re(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(so(r)?$i(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Xf())),ln(r),null;case 26:var p=r.type,b=r.memoizedState;return t===null?($i(r),b!==null?(ln(r),Wg(r,b)):(ln(r),jh(r,p,null,h,c))):b?b!==t.memoizedState?($i(r),ln(r),Wg(r,b)):(ln(r),r.flags&=-16777217):(t=t.memoizedProps,t!==h&&$i(r),ln(r),jh(r,p,t,h,c)),null;case 27:if(et(r),c=be.current,p=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==h&&$i(r);else{if(!h){if(r.stateNode===null)throw Error(o(166));return ln(r),null}t=ce.current,so(r)?_1(r):(t=$m(p,h,c),r.stateNode=t,$i(r))}return ln(r),null;case 5:if(et(r),p=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==h&&$i(r);else{if(!h){if(r.stateNode===null)throw Error(o(166));return ln(r),null}if(b=ce.current,so(r))_1(r);else{var C=Tu(be.current);switch(b){case 1:b=C.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:b=C.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":b=C.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":b=C.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":b=C.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof h.is=="string"?C.createElement("select",{is:h.is}):C.createElement("select"),h.multiple?b.multiple=!0:h.size&&(b.size=h.size);break;default:b=typeof h.is=="string"?C.createElement(p,{is:h.is}):C.createElement(p)}}b[_n]=r,b[zt]=h;e:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)b.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break e;for(;C.sibling===null;){if(C.return===null||C.return===r)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=b;e:switch($n(b,p,h),p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&$i(r)}}return ln(r),jh(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,c),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==h&&$i(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(o(166));if(t=be.current,so(r)){if(t=r.stateNode,c=r.memoizedProps,h=null,p=Kn,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}t[_n]=r,t=!!(t.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||Vm(t.nodeValue,c)),t||Ia(r,!0)}else t=Tu(t).createTextNode(h),t[_n]=r,r.stateNode=t}return ln(r),null;case 31:if(c=r.memoizedState,t===null||t.memoizedState!==null){if(h=so(r),c!==null){if(t===null){if(!h)throw Error(o(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[_n]=r}else ws(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ln(r),t=!1}else c=Xf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return r.flags&256?(Lr(r),r):(Lr(r),null);if((r.flags&128)!==0)throw Error(o(558))}return ln(r),null;case 13:if(h=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(p=so(r),h!==null&&h.dehydrated!==null){if(t===null){if(!p)throw Error(o(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));p[_n]=r}else ws(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ln(r),p=!1}else p=Xf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=p),p=!0;if(!p)return r.flags&256?(Lr(r),r):(Lr(r),null)}return Lr(r),(r.flags&128)!==0?(r.lanes=c,r):(c=h!==null,t=t!==null&&t.memoizedState!==null,c&&(h=r.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==p&&(h.flags|=2048)),c!==t&&c&&(r.child.flags|=8192),hu(r,r.updateQueue),ln(r),null);case 4:return Re(),t===null&&sd(r.stateNode.containerInfo),ln(r),null;case 10:return Zi(r.type),ln(r),null;case 19:if(z(On),h=r.memoizedState,h===null)return ln(r),null;if(p=(r.flags&128)!==0,b=h.rendering,b===null)if(p)kl(h,!1);else{if(bn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(b=$c(t),b!==null){for(r.flags|=128,kl(h,!1),t=b.updateQueue,r.updateQueue=t,hu(r,t),r.subtreeFlags=0,t=c,c=r.child;c!==null;)b1(c,t),c=c.sibling;return Z(On,On.current&1|2),St&&Yi(r,h.treeForkCount),r.child}t=t.sibling}h.tail!==null&&dn()>pu&&(r.flags|=128,p=!0,kl(h,!1),r.lanes=4194304)}else{if(!p)if(t=$c(b),t!==null){if(r.flags|=128,p=!0,t=t.updateQueue,r.updateQueue=t,hu(r,t),kl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!b.alternate&&!St)return ln(r),null}else 2*dn()-h.renderingStartTime>pu&&c!==536870912&&(r.flags|=128,p=!0,kl(h,!1),r.lanes=4194304);h.isBackwards?(b.sibling=r.child,r.child=b):(t=h.last,t!==null?t.sibling=b:r.child=b,h.last=b)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=dn(),t.sibling=null,c=On.current,Z(On,p?c&1|2:c&1),St&&Yi(r,h.treeForkCount),t):(ln(r),null);case 22:case 23:return Lr(r),oh(),h=r.memoizedState!==null,t!==null?t.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(c&536870912)!==0&&(r.flags&128)===0&&(ln(r),r.subtreeFlags&6&&(r.flags|=8192)):ln(r),c=r.updateQueue,c!==null&&hu(r,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==c&&(r.flags|=2048),t!==null&&z(Es),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Zi(kn),ln(r),null;case 25:return null;case 30:return null}throw Error(o(156,r.tag))}function Ww(t,r){switch(Wf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Zi(kn),Re(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return et(r),null;case 31:if(r.memoizedState!==null){if(Lr(r),r.alternate===null)throw Error(o(340));ws()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Lr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(o(340));ws()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return z(On),null;case 4:return Re(),null;case 10:return Zi(r.type),null;case 22:case 23:return Lr(r),oh(),t!==null&&z(Es),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Zi(kn),null;case 25:return null;default:return null}}function Yg(t,r){switch(Wf(r),r.tag){case 3:Zi(kn),Re();break;case 26:case 27:case 5:et(r);break;case 4:Re();break;case 31:r.memoizedState!==null&&Lr(r);break;case 13:Lr(r);break;case 19:z(On);break;case 10:Zi(r.type);break;case 22:case 23:Lr(r),oh(),t!==null&&z(Es);break;case 24:Zi(kn)}}function Dl(t,r){try{var c=r.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var p=h.next;c=p;do{if((c.tag&t)===t){h=void 0;var b=c.create,C=c.inst;h=b(),C.destroy=h}c=c.next}while(c!==p)}}catch(k){Ht(r,r.return,k)}}function ja(t,r,c){try{var h=r.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var b=p.next;h=b;do{if((h.tag&t)===t){var C=h.inst,k=C.destroy;if(k!==void 0){C.destroy=void 0,p=r;var P=c,te=k;try{te()}catch(ge){Ht(p,P,ge)}}}h=h.next}while(h!==b)}}catch(ge){Ht(r,r.return,ge)}}function Xg(t){var r=t.updateQueue;if(r!==null){var c=t.stateNode;try{j1(r,c)}catch(h){Ht(t,t.return,h)}}}function Zg(t,r,c){c.props=Ts(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(h){Ht(t,r,h)}}function Ml(t,r){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var h=t.stateNode;break;case 30:h=t.stateNode;break;default:h=t.stateNode}typeof c=="function"?t.refCleanup=c(h):c.current=h}}catch(p){Ht(t,r,p)}}function Bi(t,r){var c=t.ref,h=t.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(p){Ht(t,r,p)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){Ht(t,r,p)}else c.current=null}function Kg(t){var r=t.type,c=t.memoizedProps,h=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(p){Ht(t,t.return,p)}}function Ph(t,r,c){try{var h=t.stateNode;gb(h,t.type,c,r),h[zt]=r}catch(p){Ht(t,t.return,p)}}function Qg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&qa(t.type)||t.tag===4}function Fh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&qa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zh(t,r,c){var h=t.tag;if(h===5||h===6)t=t.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(t),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=pr));else if(h!==4&&(h===27&&qa(t.type)&&(c=t.stateNode,r=null),t=t.child,t!==null))for(zh(t,r,c),t=t.sibling;t!==null;)zh(t,r,c),t=t.sibling}function du(t,r,c){var h=t.tag;if(h===5||h===6)t=t.stateNode,r?c.insertBefore(t,r):c.appendChild(t);else if(h!==4&&(h===27&&qa(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(du(t,r,c),t=t.sibling;t!==null;)du(t,r,c),t=t.sibling}function Jg(t){var r=t.stateNode,c=t.memoizedProps;try{for(var h=t.type,p=r.attributes;p.length;)r.removeAttributeNode(p[0]);$n(r,h,c),r[_n]=t,r[zt]=c}catch(b){Ht(t,t.return,b)}}var ea=!1,Bn=!1,Vh=!1,$g=typeof WeakSet=="function"?WeakSet:Set,Wn=null;function Yw(t,r){if(t=t.containerInfo,cd=Mu,t=N(t),I(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var p=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var C=0,k=-1,P=-1,te=0,ge=0,pe=t,re=null;t:for(;;){for(var oe;pe!==c||p!==0&&pe.nodeType!==3||(k=C+p),pe!==b||h!==0&&pe.nodeType!==3||(P=C+h),pe.nodeType===3&&(C+=pe.nodeValue.length),(oe=pe.firstChild)!==null;)re=pe,pe=oe;for(;;){if(pe===t)break t;if(re===c&&++te===p&&(k=C),re===b&&++ge===h&&(P=C),(oe=pe.nextSibling)!==null)break;pe=re,re=pe.parentNode}pe=oe}c=k===-1||P===-1?null:{start:k,end:P}}else c=null}c=c||{start:0,end:0}}else c=null;for(ud={focusedElem:t,selectionRange:c},Mu=!1,Wn=r;Wn!==null;)if(r=Wn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Wn=t;else for(;Wn!==null;){switch(r=Wn,b=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)p=t[c],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&b!==null){t=void 0,c=r,p=b.memoizedProps,b=b.memoizedState,h=c.stateNode;try{var Be=Ts(c.type,p);t=h.getSnapshotBeforeUpdate(Be,b),h.__reactInternalSnapshotBeforeUpdate=t}catch(Ke){Ht(c,c.return,Ke)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,c=t.nodeType,c===9)dd(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":dd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=r.sibling,t!==null){t.return=r.return,Wn=t;break}Wn=r.return}}function em(t,r,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:na(t,c),h&4&&Dl(5,c);break;case 1:if(na(t,c),h&4)if(t=c.stateNode,r===null)try{t.componentDidMount()}catch(C){Ht(c,c.return,C)}else{var p=Ts(c.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(p,r,t.__reactInternalSnapshotBeforeUpdate)}catch(C){Ht(c,c.return,C)}}h&64&&Xg(c),h&512&&Ml(c,c.return);break;case 3:if(na(t,c),h&64&&(t=c.updateQueue,t!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{j1(t,r)}catch(C){Ht(c,c.return,C)}}break;case 27:r===null&&h&4&&Jg(c);case 26:case 5:na(t,c),r===null&&h&4&&Kg(c),h&512&&Ml(c,c.return);break;case 12:na(t,c);break;case 31:na(t,c),h&4&&rm(t,c);break;case 13:na(t,c),h&4&&im(t,c),h&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=nb.bind(null,c),Eb(t,c))));break;case 22:if(h=c.memoizedState!==null||ea,!h){r=r!==null&&r.memoizedState!==null||Bn,p=ea;var b=Bn;ea=h,(Bn=r)&&!b?ra(t,c,(c.subtreeFlags&8772)!==0):na(t,c),ea=p,Bn=b}break;case 30:break;default:na(t,c)}}function tm(t){var r=t.alternate;r!==null&&(t.alternate=null,tm(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&yr(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var hn=null,br=!1;function ta(t,r,c){for(c=c.child;c!==null;)nm(t,r,c),c=c.sibling}function nm(t,r,c){if(Ce&&typeof Ce.onCommitFiberUnmount=="function")try{Ce.onCommitFiberUnmount(tn,c)}catch{}switch(c.tag){case 26:Bn||Bi(c,r),ta(t,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Bn||Bi(c,r);var h=hn,p=br;qa(c.type)&&(hn=c.stateNode,br=!1),ta(t,r,c),Hl(c.stateNode),hn=h,br=p;break;case 5:Bn||Bi(c,r);case 6:if(h=hn,p=br,hn=null,ta(t,r,c),hn=h,br=p,hn!==null)if(br)try{(hn.nodeType===9?hn.body:hn.nodeName==="HTML"?hn.ownerDocument.body:hn).removeChild(c.stateNode)}catch(b){Ht(c,r,b)}else try{hn.removeChild(c.stateNode)}catch(b){Ht(c,r,b)}break;case 18:hn!==null&&(br?(t=hn,Xm(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),Oo(t)):Xm(hn,c.stateNode));break;case 4:h=hn,p=br,hn=c.stateNode.containerInfo,br=!0,ta(t,r,c),hn=h,br=p;break;case 0:case 11:case 14:case 15:ja(2,c,r),Bn||ja(4,c,r),ta(t,r,c);break;case 1:Bn||(Bi(c,r),h=c.stateNode,typeof h.componentWillUnmount=="function"&&Zg(c,r,h)),ta(t,r,c);break;case 21:ta(t,r,c);break;case 22:Bn=(h=Bn)||c.memoizedState!==null,ta(t,r,c),Bn=h;break;default:ta(t,r,c)}}function rm(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Oo(t)}catch(c){Ht(r,r.return,c)}}}function im(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Oo(t)}catch(c){Ht(r,r.return,c)}}function Xw(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new $g),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new $g),r;default:throw Error(o(435,t.tag))}}function gu(t,r){var c=Xw(t);r.forEach(function(h){if(!c.has(h)){c.add(h);var p=rb.bind(null,t,h);h.then(p,p)}})}function vr(t,r){var c=r.deletions;if(c!==null)for(var h=0;h<c.length;h++){var p=c[h],b=t,C=r,k=C;e:for(;k!==null;){switch(k.tag){case 27:if(qa(k.type)){hn=k.stateNode,br=!1;break e}break;case 5:hn=k.stateNode,br=!1;break e;case 3:case 4:hn=k.stateNode.containerInfo,br=!0;break e}k=k.return}if(hn===null)throw Error(o(160));nm(b,C,p),hn=null,br=!1,b=p.alternate,b!==null&&(b.return=null),p.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)am(r,t),r=r.sibling}var yi=null;function am(t,r){var c=t.alternate,h=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:vr(r,t),Er(t),h&4&&(ja(3,t,t.return),Dl(3,t),ja(5,t,t.return));break;case 1:vr(r,t),Er(t),h&512&&(Bn||c===null||Bi(c,c.return)),h&64&&ea&&(t=t.updateQueue,t!==null&&(h=t.callbacks,h!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var p=yi;if(vr(r,t),Er(t),h&512&&(Bn||c===null||Bi(c,c.return)),h&4){var b=c!==null?c.memoizedState:null;if(h=t.memoizedState,c===null)if(h===null)if(t.stateNode===null){e:{h=t.type,c=t.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":b=p.getElementsByTagName("title")[0],(!b||b[ls]||b[_n]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=p.createElement(h),p.head.insertBefore(b,p.querySelector("head > title"))),$n(b,h,c),b[_n]=t,pn(b),h=b;break e;case"link":var C=a2("link","href",p).get(h+(c.href||""));if(C){for(var k=0;k<C.length;k++)if(b=C[k],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){C.splice(k,1);break t}}b=p.createElement(h),$n(b,h,c),p.head.appendChild(b);break;case"meta":if(C=a2("meta","content",p).get(h+(c.content||""))){for(k=0;k<C.length;k++)if(b=C[k],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){C.splice(k,1);break t}}b=p.createElement(h),$n(b,h,c),p.head.appendChild(b);break;default:throw Error(o(468,h))}b[_n]=t,pn(b),h=b}t.stateNode=h}else s2(p,t.type,t.stateNode);else t.stateNode=i2(p,h,t.memoizedProps);else b!==h?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,h===null?s2(p,t.type,t.stateNode):i2(p,h,t.memoizedProps)):h===null&&t.stateNode!==null&&Ph(t,t.memoizedProps,c.memoizedProps)}break;case 27:vr(r,t),Er(t),h&512&&(Bn||c===null||Bi(c,c.return)),c!==null&&h&4&&Ph(t,t.memoizedProps,c.memoizedProps);break;case 5:if(vr(r,t),Er(t),h&512&&(Bn||c===null||Bi(c,c.return)),t.flags&32){p=t.stateNode;try{ba(p,"")}catch(Be){Ht(t,t.return,Be)}}h&4&&t.stateNode!=null&&(p=t.memoizedProps,Ph(t,p,c!==null?c.memoizedProps:p)),h&1024&&(Vh=!0);break;case 6:if(vr(r,t),Er(t),h&4){if(t.stateNode===null)throw Error(o(162));h=t.memoizedProps,c=t.stateNode;try{c.nodeValue=h}catch(Be){Ht(t,t.return,Be)}}break;case 3:if(Ru=null,p=yi,yi=Ou(r.containerInfo),vr(r,t),yi=p,Er(t),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Oo(r.containerInfo)}catch(Be){Ht(t,t.return,Be)}Vh&&(Vh=!1,sm(t));break;case 4:h=yi,yi=Ou(t.stateNode.containerInfo),vr(r,t),Er(t),yi=h;break;case 12:vr(r,t),Er(t);break;case 31:vr(r,t),Er(t),h&4&&(h=t.updateQueue,h!==null&&(t.updateQueue=null,gu(t,h)));break;case 13:vr(r,t),Er(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(yu=dn()),h&4&&(h=t.updateQueue,h!==null&&(t.updateQueue=null,gu(t,h)));break;case 22:p=t.memoizedState!==null;var P=c!==null&&c.memoizedState!==null,te=ea,ge=Bn;if(ea=te||p,Bn=ge||P,vr(r,t),Bn=ge,ea=te,Er(t),h&8192)e:for(r=t.stateNode,r._visibility=p?r._visibility&-2:r._visibility|1,p&&(c===null||P||ea||Bn||Os(t)),c=null,r=t;;){if(r.tag===5||r.tag===26){if(c===null){P=c=r;try{if(b=P.stateNode,p)C=b.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{k=P.stateNode;var pe=P.memoizedProps.style,re=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;k.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(Be){Ht(P,P.return,Be)}}}else if(r.tag===6){if(c===null){P=r;try{P.stateNode.nodeValue=p?"":P.memoizedProps}catch(Be){Ht(P,P.return,Be)}}}else if(r.tag===18){if(c===null){P=r;try{var oe=P.stateNode;p?Zm(oe,!0):Zm(P.stateNode,!1)}catch(Be){Ht(P,P.return,Be)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=t.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,gu(t,c))));break;case 19:vr(r,t),Er(t),h&4&&(h=t.updateQueue,h!==null&&(t.updateQueue=null,gu(t,h)));break;case 30:break;case 21:break;default:vr(r,t),Er(t)}}function Er(t){var r=t.flags;if(r&2){try{for(var c,h=t.return;h!==null;){if(Qg(h)){c=h;break}h=h.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var p=c.stateNode,b=Fh(t);du(t,b,p);break;case 5:var C=c.stateNode;c.flags&32&&(ba(C,""),c.flags&=-33);var k=Fh(t);du(t,k,C);break;case 3:case 4:var P=c.stateNode.containerInfo,te=Fh(t);zh(t,te,P);break;default:throw Error(o(161))}}catch(ge){Ht(t,t.return,ge)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function sm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;sm(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function na(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)em(t,r.alternate,r),r=r.sibling}function Os(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ja(4,r,r.return),Os(r);break;case 1:Bi(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&Zg(r,r.return,c),Os(r);break;case 27:Hl(r.stateNode);case 26:case 5:Bi(r,r.return),Os(r);break;case 22:r.memoizedState===null&&Os(r);break;case 30:Os(r);break;default:Os(r)}t=t.sibling}}function ra(t,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,p=t,b=r,C=b.flags;switch(b.tag){case 0:case 11:case 15:ra(p,b,c),Dl(4,b);break;case 1:if(ra(p,b,c),h=b,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(te){Ht(h,h.return,te)}if(h=b,p=h.updateQueue,p!==null){var k=h.stateNode;try{var P=p.shared.hiddenCallbacks;if(P!==null)for(p.shared.hiddenCallbacks=null,p=0;p<P.length;p++)U1(P[p],k)}catch(te){Ht(h,h.return,te)}}c&&C&64&&Xg(b),Ml(b,b.return);break;case 27:Jg(b);case 26:case 5:ra(p,b,c),c&&h===null&&C&4&&Kg(b),Ml(b,b.return);break;case 12:ra(p,b,c);break;case 31:ra(p,b,c),c&&C&4&&rm(p,b);break;case 13:ra(p,b,c),c&&C&4&&im(p,b);break;case 22:b.memoizedState===null&&ra(p,b,c),Ml(b,b.return);break;case 30:break;default:ra(p,b,c)}r=r.sibling}}function Hh(t,r){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&bl(c))}function Gh(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&bl(t))}function pi(t,r,c,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)om(t,r,c,h),r=r.sibling}function om(t,r,c,h){var p=r.flags;switch(r.tag){case 0:case 11:case 15:pi(t,r,c,h),p&2048&&Dl(9,r);break;case 1:pi(t,r,c,h);break;case 3:pi(t,r,c,h),p&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&bl(t)));break;case 12:if(p&2048){pi(t,r,c,h),t=r.stateNode;try{var b=r.memoizedProps,C=b.id,k=b.onPostCommit;typeof k=="function"&&k(C,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(P){Ht(r,r.return,P)}}else pi(t,r,c,h);break;case 31:pi(t,r,c,h);break;case 13:pi(t,r,c,h);break;case 23:break;case 22:b=r.stateNode,C=r.alternate,r.memoizedState!==null?b._visibility&2?pi(t,r,c,h):Bl(t,r):b._visibility&2?pi(t,r,c,h):(b._visibility|=2,po(t,r,c,h,(r.subtreeFlags&10256)!==0||!1)),p&2048&&Hh(C,r);break;case 24:pi(t,r,c,h),p&2048&&Gh(r.alternate,r);break;default:pi(t,r,c,h)}}function po(t,r,c,h,p){for(p=p&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var b=t,C=r,k=c,P=h,te=C.flags;switch(C.tag){case 0:case 11:case 15:po(b,C,k,P,p),Dl(8,C);break;case 23:break;case 22:var ge=C.stateNode;C.memoizedState!==null?ge._visibility&2?po(b,C,k,P,p):Bl(b,C):(ge._visibility|=2,po(b,C,k,P,p)),p&&te&2048&&Hh(C.alternate,C);break;case 24:po(b,C,k,P,p),p&&te&2048&&Gh(C.alternate,C);break;default:po(b,C,k,P,p)}r=r.sibling}}function Bl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=t,h=r,p=h.flags;switch(h.tag){case 22:Bl(c,h),p&2048&&Hh(h.alternate,h);break;case 24:Bl(c,h),p&2048&&Gh(h.alternate,h);break;default:Bl(c,h)}r=r.sibling}}var Ll=8192;function xo(t,r,c){if(t.subtreeFlags&Ll)for(t=t.child;t!==null;)lm(t,r,c),t=t.sibling}function lm(t,r,c){switch(t.tag){case 26:xo(t,r,c),t.flags&Ll&&t.memoizedState!==null&&Mb(c,yi,t.memoizedState,t.memoizedProps);break;case 5:xo(t,r,c);break;case 3:case 4:var h=yi;yi=Ou(t.stateNode.containerInfo),xo(t,r,c),yi=h;break;case 22:t.memoizedState===null&&(h=t.alternate,h!==null&&h.memoizedState!==null?(h=Ll,Ll=16777216,xo(t,r,c),Ll=h):xo(t,r,c));break;default:xo(t,r,c)}}function cm(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ul(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var h=r[c];Wn=h,fm(h,t)}cm(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)um(t),t=t.sibling}function um(t){switch(t.tag){case 0:case 11:case 15:Ul(t),t.flags&2048&&ja(9,t,t.return);break;case 3:Ul(t);break;case 12:Ul(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,mu(t)):Ul(t);break;default:Ul(t)}}function mu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var h=r[c];Wn=h,fm(h,t)}cm(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ja(8,r,r.return),mu(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,mu(r));break;default:mu(r)}t=t.sibling}}function fm(t,r){for(;Wn!==null;){var c=Wn;switch(c.tag){case 0:case 11:case 15:ja(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:bl(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Wn=h;else e:for(c=t;Wn!==null;){h=Wn;var p=h.sibling,b=h.return;if(tm(h),h===c){Wn=null;break e}if(p!==null){p.return=b,Wn=p;break e}Wn=b}}}var Zw={getCacheForType:function(t){var r=Qn(kn),c=r.data.get(t);return c===void 0&&(c=t(),r.data.set(t,c)),c},cacheSignal:function(){return Qn(kn).controller.signal}},Kw=typeof WeakMap=="function"?WeakMap:Map,kt=0,$t=null,pt=null,vt=0,Vt=0,Ur=null,Pa=!1,wo=!1,qh=!1,ia=0,bn=0,Fa=0,Ns=0,Wh=0,jr=0,bo=0,jl=null,Sr=null,Yh=!1,yu=0,hm=0,pu=1/0,xu=null,za=null,Vn=0,Va=null,vo=null,aa=0,Xh=0,Zh=null,dm=null,Pl=0,Kh=null;function Pr(){return(kt&2)!==0&&vt!==0?vt&-vt:$.T!==null?nd():sr()}function gm(){if(jr===0)if((vt&536870912)===0||St){var t=wt;wt<<=1,(wt&3932160)===0&&(wt=262144),jr=t}else jr=536870912;return t=Br.current,t!==null&&(t.flags|=32),jr}function Ar(t,r,c){(t===$t&&(Vt===2||Vt===9)||t.cancelPendingCommit!==null)&&(Eo(t,0),Ha(t,vt,jr,!1)),Ti(t,c),((kt&2)===0||t!==$t)&&(t===$t&&((kt&2)===0&&(Ns|=c),bn===4&&Ha(t,vt,jr,!1)),Li(t))}function mm(t,r,c){if((kt&6)!==0)throw Error(o(327));var h=!c&&(r&127)===0&&(r&t.expiredLanes)===0||Xn(t,r),p=h?$w(t,r):Jh(t,r,!0),b=h;do{if(p===0){wo&&!h&&Ha(t,r,0,!1);break}else{if(c=t.current.alternate,b&&!Qw(c)){p=Jh(t,r,!1),b=!1;continue}if(p===2){if(b=r,t.errorRecoveryDisabledLanes&b)var C=0;else C=t.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;e:{var k=t;p=jl;var P=k.current.memoizedState.isDehydrated;if(P&&(Eo(k,C).flags|=256),C=Jh(k,C,!1),C!==2){if(qh&&!P){k.errorRecoveryDisabledLanes|=b,Ns|=b,p=4;break e}b=Sr,Sr=p,b!==null&&(Sr===null?Sr=b:Sr.push.apply(Sr,b))}p=C}if(b=!1,p!==2)continue}}if(p===1){Eo(t,0),Ha(t,r,0,!0);break}e:{switch(h=t,b=p,b){case 0:case 1:throw Error(o(345));case 4:if((r&4194048)!==r)break;case 6:Ha(h,r,jr,!Pa);break e;case 2:Sr=null;break;case 3:case 5:break;default:throw Error(o(329))}if((r&62914560)===r&&(p=yu+300-dn(),10<p)){if(Ha(h,r,jr,!Pa),os(h,0,!0)!==0)break e;aa=r,h.timeoutHandle=Wm(ym.bind(null,h,c,Sr,xu,Yh,r,jr,Ns,bo,Pa,b,"Throttled",-0,0),p);break e}ym(h,c,Sr,xu,Yh,r,jr,Ns,bo,Pa,b,null,-0,0)}}break}while(!0);Li(t)}function ym(t,r,c,h,p,b,C,k,P,te,ge,pe,re,oe){if(t.timeoutHandle=-1,pe=r.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pr},lm(r,b,pe);var Be=(b&62914560)===b?yu-dn():(b&4194048)===b?hm-dn():0;if(Be=Bb(pe,Be),Be!==null){aa=b,t.cancelPendingCommit=Be(Am.bind(null,t,r,b,c,h,p,C,k,P,ge,pe,null,re,oe)),Ha(t,b,C,!te);return}}Am(t,r,b,c,h,p,C,k,P)}function Qw(t){for(var r=t;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var p=c[h],b=p.getSnapshot;p=p.value;try{if(!g(b(),p))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ha(t,r,c,h){r&=~Wh,r&=~Ns,t.suspendedLanes|=r,t.pingedLanes&=~r,h&&(t.warmLanes|=r),h=t.expirationTimes;for(var p=r;0<p;){var b=31-lt(p),C=1<<b;h[b]=-1,p&=~C}c!==0&&Ac(t,c,r)}function wu(){return(kt&6)===0?(Fl(0),!1):!0}function Qh(){if(pt!==null){if(Vt===0)var t=pt.return;else t=pt,Xi=bs=null,dh(t),fo=null,El=0,t=pt;for(;t!==null;)Yg(t.alternate,t),t=t.return;pt=null}}function Eo(t,r){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,pb(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),aa=0,Qh(),$t=t,pt=c=Wi(t.current,null),vt=r,Vt=0,Ur=null,Pa=!1,wo=Xn(t,r),qh=!1,bo=jr=Wh=Ns=Fa=bn=0,Sr=jl=null,Yh=!1,(r&8)!==0&&(r|=r&32);var h=t.entangledLanes;if(h!==0)for(t=t.entanglements,h&=r;0<h;){var p=31-lt(h),b=1<<p;r|=t[p],h&=~b}return ia=r,Fc(),c}function pm(t,r){ot=null,$.H=Rl,r===uo||r===Xc?(r=D1(),Vt=3):r===th?(r=D1(),Vt=4):Vt=r===Nh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ur=r,pt===null&&(bn=1,lu(t,Jr(r,t.current)))}function xm(){var t=Br.current;return t===null?!0:(vt&4194048)===vt?ni===null:(vt&62914560)===vt||(vt&536870912)!==0?t===ni:!1}function wm(){var t=$.H;return $.H=Rl,t===null?Rl:t}function bm(){var t=$.A;return $.A=Zw,t}function bu(){bn=4,Pa||(vt&4194048)!==vt&&Br.current!==null||(wo=!0),(Fa&134217727)===0&&(Ns&134217727)===0||$t===null||Ha($t,vt,jr,!1)}function Jh(t,r,c){var h=kt;kt|=2;var p=wm(),b=bm();($t!==t||vt!==r)&&(xu=null,Eo(t,r)),r=!1;var C=bn;e:do try{if(Vt!==0&&pt!==null){var k=pt,P=Ur;switch(Vt){case 8:Qh(),C=6;break e;case 3:case 2:case 9:case 6:Br.current===null&&(r=!0);var te=Vt;if(Vt=0,Ur=null,So(t,k,P,te),c&&wo){C=0;break e}break;default:te=Vt,Vt=0,Ur=null,So(t,k,P,te)}}Jw(),C=bn;break}catch(ge){pm(t,ge)}while(!0);return r&&t.shellSuspendCounter++,Xi=bs=null,kt=h,$.H=p,$.A=b,pt===null&&($t=null,vt=0,Fc()),C}function Jw(){for(;pt!==null;)vm(pt)}function $w(t,r){var c=kt;kt|=2;var h=wm(),p=bm();$t!==t||vt!==r?(xu=null,pu=dn()+500,Eo(t,r)):wo=Xn(t,r);e:do try{if(Vt!==0&&pt!==null){r=pt;var b=Ur;t:switch(Vt){case 1:Vt=0,Ur=null,So(t,r,b,1);break;case 2:case 9:if(I1(b)){Vt=0,Ur=null,Em(r);break}r=function(){Vt!==2&&Vt!==9||$t!==t||(Vt=7),Li(t)},b.then(r,r);break e;case 3:Vt=7;break e;case 4:Vt=5;break e;case 7:I1(b)?(Vt=0,Ur=null,Em(r)):(Vt=0,Ur=null,So(t,r,b,7));break;case 5:var C=null;switch(pt.tag){case 26:C=pt.memoizedState;case 5:case 27:var k=pt;if(C?o2(C):k.stateNode.complete){Vt=0,Ur=null;var P=k.sibling;if(P!==null)pt=P;else{var te=k.return;te!==null?(pt=te,vu(te)):pt=null}break t}}Vt=0,Ur=null,So(t,r,b,5);break;case 6:Vt=0,Ur=null,So(t,r,b,6);break;case 8:Qh(),bn=6;break e;default:throw Error(o(462))}}eb();break}catch(ge){pm(t,ge)}while(!0);return Xi=bs=null,$.H=h,$.A=p,kt=c,pt!==null?0:($t=null,vt=0,Fc(),bn)}function eb(){for(;pt!==null&&!Hs();)vm(pt)}function vm(t){var r=qg(t.alternate,t,ia);t.memoizedProps=t.pendingProps,r===null?vu(t):pt=r}function Em(t){var r=t,c=r.alternate;switch(r.tag){case 15:case 0:r=Pg(c,r,r.pendingProps,r.type,void 0,vt);break;case 11:r=Pg(c,r,r.pendingProps,r.type.render,r.ref,vt);break;case 5:dh(r);default:Yg(c,r),r=pt=b1(r,ia),r=qg(c,r,ia)}t.memoizedProps=t.pendingProps,r===null?vu(t):pt=r}function So(t,r,c,h){Xi=bs=null,dh(r),fo=null,El=0;var p=r.return;try{if(Vw(t,p,r,c,vt)){bn=1,lu(t,Jr(c,t.current)),pt=null;return}}catch(b){if(p!==null)throw pt=p,b;bn=1,lu(t,Jr(c,t.current)),pt=null;return}r.flags&32768?(St||h===1?t=!0:wo||(vt&536870912)!==0?t=!1:(Pa=t=!0,(h===2||h===9||h===3||h===6)&&(h=Br.current,h!==null&&h.tag===13&&(h.flags|=16384))),Sm(r,t)):vu(r)}function vu(t){var r=t;do{if((r.flags&32768)!==0){Sm(r,Pa);return}t=r.return;var c=qw(r.alternate,r,ia);if(c!==null){pt=c;return}if(r=r.sibling,r!==null){pt=r;return}pt=r=t}while(r!==null);bn===0&&(bn=5)}function Sm(t,r){do{var c=Ww(t.alternate,t);if(c!==null){c.flags&=32767,pt=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(t=t.sibling,t!==null)){pt=t;return}pt=t=c}while(t!==null);bn=6,pt=null}function Am(t,r,c,h,p,b,C,k,P){t.cancelPendingCommit=null;do Eu();while(Vn!==0);if((kt&6)!==0)throw Error(o(327));if(r!==null){if(r===t.current)throw Error(o(177));if(b=r.lanes|r.childLanes,b|=Ff,Yr(t,c,b,C,k,P),t===$t&&(pt=$t=null,vt=0),vo=r,Va=t,aa=c,Xh=b,Zh=p,dm=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ib(Tr,function(){return Nm(),null})):(t.callbackNode=null,t.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=$.T,$.T=null,p=he.p,he.p=2,C=kt,kt|=4;try{Yw(t,r,c)}finally{kt=C,he.p=p,$.T=h}}Vn=1,_m(),Cm(),Tm()}}function _m(){if(Vn===1){Vn=0;var t=Va,r=vo,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=$.T,$.T=null;var h=he.p;he.p=2;var p=kt;kt|=4;try{am(r,t);var b=ud,C=N(t.containerInfo),k=b.focusedElem,P=b.selectionRange;if(C!==k&&k&&k.ownerDocument&&_(k.ownerDocument.documentElement,k)){if(P!==null&&I(k)){var te=P.start,ge=P.end;if(ge===void 0&&(ge=te),"selectionStart"in k)k.selectionStart=te,k.selectionEnd=Math.min(ge,k.value.length);else{var pe=k.ownerDocument||document,re=pe&&pe.defaultView||window;if(re.getSelection){var oe=re.getSelection(),Be=k.textContent.length,Ke=Math.min(P.start,Be),Xt=P.end===void 0?Ke:Math.min(P.end,Be);!oe.extend&&Ke>Xt&&(C=Xt,Xt=Ke,Ke=C);var Y=E(k,Ke),G=E(k,Xt);if(Y&&G&&(oe.rangeCount!==1||oe.anchorNode!==Y.node||oe.anchorOffset!==Y.offset||oe.focusNode!==G.node||oe.focusOffset!==G.offset)){var ee=pe.createRange();ee.setStart(Y.node,Y.offset),oe.removeAllRanges(),Ke>Xt?(oe.addRange(ee),oe.extend(G.node,G.offset)):(ee.setEnd(G.node,G.offset),oe.addRange(ee))}}}}for(pe=[],oe=k;oe=oe.parentNode;)oe.nodeType===1&&pe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<pe.length;k++){var ye=pe[k];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}Mu=!!cd,ud=cd=null}finally{kt=p,he.p=h,$.T=c}}t.current=r,Vn=2}}function Cm(){if(Vn===2){Vn=0;var t=Va,r=vo,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=$.T,$.T=null;var h=he.p;he.p=2;var p=kt;kt|=4;try{em(t,r.alternate,r)}finally{kt=p,he.p=h,$.T=c}}Vn=3}}function Tm(){if(Vn===4||Vn===3){Vn=0,Sc();var t=Va,r=vo,c=aa,h=dm;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Vn=5:(Vn=0,vo=Va=null,Om(t,t.pendingLanes));var p=t.pendingLanes;if(p===0&&(za=null),ci(c),r=r.stateNode,Ce&&typeof Ce.onCommitFiberRoot=="function")try{Ce.onCommitFiberRoot(tn,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=$.T,p=he.p,he.p=2,$.T=null;try{for(var b=t.onRecoverableError,C=0;C<h.length;C++){var k=h[C];b(k.value,{componentStack:k.stack})}}finally{$.T=r,he.p=p}}(aa&3)!==0&&Eu(),Li(t),p=t.pendingLanes,(c&261930)!==0&&(p&42)!==0?t===Kh?Pl++:(Pl=0,Kh=t):Pl=0,Fl(0)}}function Om(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,bl(r)))}function Eu(){return _m(),Cm(),Tm(),Nm()}function Nm(){if(Vn!==5)return!1;var t=Va,r=Xh;Xh=0;var c=ci(aa),h=$.T,p=he.p;try{he.p=32>c?32:c,$.T=null,c=Zh,Zh=null;var b=Va,C=aa;if(Vn=0,vo=Va=null,aa=0,(kt&6)!==0)throw Error(o(331));var k=kt;if(kt|=4,um(b.current),om(b,b.current,C,c),kt=k,Fl(0,!1),Ce&&typeof Ce.onPostCommitFiberRoot=="function")try{Ce.onPostCommitFiberRoot(tn,b)}catch{}return!0}finally{he.p=p,$.T=h,Om(t,r)}}function Rm(t,r,c){r=Jr(c,r),r=Oh(t.stateNode,r,2),t=Ba(t,r,2),t!==null&&(Ti(t,2),Li(t))}function Ht(t,r,c){if(t.tag===3)Rm(t,t,c);else for(;r!==null;){if(r.tag===3){Rm(r,t,c);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(za===null||!za.has(h))){t=Jr(c,t),c=Ig(2),h=Ba(r,c,2),h!==null&&(kg(c,h,r,t),Ti(h,2),Li(h));break}}r=r.return}}function $h(t,r,c){var h=t.pingCache;if(h===null){h=t.pingCache=new Kw;var p=new Set;h.set(r,p)}else p=h.get(r),p===void 0&&(p=new Set,h.set(r,p));p.has(c)||(qh=!0,p.add(c),t=tb.bind(null,t,r,c),r.then(t,t))}function tb(t,r,c){var h=t.pingCache;h!==null&&h.delete(r),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,$t===t&&(vt&c)===c&&(bn===4||bn===3&&(vt&62914560)===vt&&300>dn()-yu?(kt&2)===0&&Eo(t,0):Wh|=c,bo===vt&&(bo=0)),Li(t)}function Im(t,r){r===0&&(r=jn()),t=ps(t,r),t!==null&&(Ti(t,r),Li(t))}function nb(t){var r=t.memoizedState,c=0;r!==null&&(c=r.retryLane),Im(t,c)}function rb(t,r){var c=0;switch(t.tag){case 31:case 13:var h=t.stateNode,p=t.memoizedState;p!==null&&(c=p.retryLane);break;case 19:h=t.stateNode;break;case 22:h=t.stateNode._retryCache;break;default:throw Error(o(314))}h!==null&&h.delete(r),Im(t,c)}function ib(t,r){return ga(t,r)}var Su=null,Ao=null,ed=!1,Au=!1,td=!1,Ga=0;function Li(t){t!==Ao&&t.next===null&&(Ao===null?Su=Ao=t:Ao=Ao.next=t),Au=!0,ed||(ed=!0,sb())}function Fl(t,r){if(!td&&Au){td=!0;do for(var c=!1,h=Su;h!==null;){if(t!==0){var p=h.pendingLanes;if(p===0)var b=0;else{var C=h.suspendedLanes,k=h.pingedLanes;b=(1<<31-lt(42|t)+1)-1,b&=p&~(C&~k),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,Bm(h,b))}else b=vt,b=os(h,h===$t?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||Xn(h,b)||(c=!0,Bm(h,b));h=h.next}while(c);td=!1}}function ab(){km()}function km(){Au=ed=!1;var t=0;Ga!==0&&yb()&&(t=Ga);for(var r=dn(),c=null,h=Su;h!==null;){var p=h.next,b=Dm(h,r);b===0?(h.next=null,c===null?Su=p:c.next=p,p===null&&(Ao=c)):(c=h,(t!==0||(b&3)!==0)&&(Au=!0)),h=p}Vn!==0&&Vn!==5||Fl(t),Ga!==0&&(Ga=0)}function Dm(t,r){for(var c=t.suspendedLanes,h=t.pingedLanes,p=t.expirationTimes,b=t.pendingLanes&-62914561;0<b;){var C=31-lt(b),k=1<<C,P=p[C];P===-1?((k&c)===0||(k&h)!==0)&&(p[C]=ol(k,r)):P<=r&&(t.expiredLanes|=k),b&=~k}if(r=$t,c=vt,c=os(t,t===r?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),h=t.callbackNode,c===0||t===r&&(Vt===2||Vt===9)||t.cancelPendingCommit!==null)return h!==null&&h!==null&&Me(h),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||Xn(t,c)){if(r=c&-c,r===t.callbackPriority)return r;switch(h!==null&&Me(h),ci(c)){case 2:case 8:c=il;break;case 32:c=Tr;break;case 268435456:c=al;break;default:c=Tr}return h=Mm.bind(null,t),c=ga(c,h),t.callbackPriority=r,t.callbackNode=c,r}return h!==null&&h!==null&&Me(h),t.callbackPriority=2,t.callbackNode=null,2}function Mm(t,r){if(Vn!==0&&Vn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(Eu()&&t.callbackNode!==c)return null;var h=vt;return h=os(t,t===$t?h:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),h===0?null:(mm(t,h,r),Dm(t,dn()),t.callbackNode!=null&&t.callbackNode===c?Mm.bind(null,t):null)}function Bm(t,r){if(Eu())return null;mm(t,r,!0)}function sb(){xb(function(){(kt&6)!==0?ga(mr,ab):km()})}function nd(){if(Ga===0){var t=lo;t===0&&(t=ss,ss<<=1,(ss&261888)===0&&(ss=256)),Ga=t}return Ga}function Lm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:va(""+t)}function Um(t,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,t.id&&c.setAttribute("form",t.id),r.parentNode.insertBefore(c,r),t=new FormData(t),c.parentNode.removeChild(c),t}function ob(t,r,c,h,p){if(r==="submit"&&c&&c.stateNode===p){var b=Lm((p[zt]||null).action),C=h.submitter;C&&(r=(r=C[zt]||null)?Lm(r.formAction):C.getAttribute("formAction"),r!==null&&(b=r,C=null));var k=new Pn("action","action",null,h,p);t.push({event:k,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ga!==0){var P=C?Um(p,C):new FormData(p);Eh(c,{pending:!0,data:P,method:p.method,action:b},null,P)}}else typeof b=="function"&&(k.preventDefault(),P=C?Um(p,C):new FormData(p),Eh(c,{pending:!0,data:P,method:p.method,action:b},b,P))},currentTarget:p}]})}}for(var rd=0;rd<pl.length;rd++){var id=pl[rd],lb=id.toLowerCase(),cb=id[0].toUpperCase()+id.slice(1);mi(lb,"on"+cb)}mi(wr,"onAnimationEnd"),mi(Zn,"onAnimationIteration"),mi(Ut,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(zn,"onTransitionRun"),mi(fr,"onTransitionStart"),mi(Oa,"onTransitionCancel"),mi(qi,"onTransitionEnd"),Nr("onMouseEnter",["mouseout","mouseover"]),Nr("onMouseLeave",["mouseout","mouseover"]),Nr("onPointerEnter",["pointerout","pointerover"]),Nr("onPointerLeave",["pointerout","pointerover"]),Bt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ub=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function jm(t,r){r=(r&4)!==0;for(var c=0;c<t.length;c++){var h=t[c],p=h.event;h=h.listeners;e:{var b=void 0;if(r)for(var C=h.length-1;0<=C;C--){var k=h[C],P=k.instance,te=k.currentTarget;if(k=k.listener,P!==b&&p.isPropagationStopped())break e;b=k,p.currentTarget=te;try{b(p)}catch(ge){Pc(ge)}p.currentTarget=null,b=P}else for(C=0;C<h.length;C++){if(k=h[C],P=k.instance,te=k.currentTarget,k=k.listener,P!==b&&p.isPropagationStopped())break e;b=k,p.currentTarget=te;try{b(p)}catch(ge){Pc(ge)}p.currentTarget=null,b=P}}}}function xt(t,r){var c=r[ma];c===void 0&&(c=r[ma]=new Set);var h=t+"__bubble";c.has(h)||(Pm(r,t,2,!1),c.add(h))}function ad(t,r,c){var h=0;r&&(h|=4),Pm(c,t,h,r)}var _u="_reactListening"+Math.random().toString(36).slice(2);function sd(t){if(!t[_u]){t[_u]=!0,ve.forEach(function(c){c!=="selectionchange"&&(ub.has(c)||ad(c,!1,t),ad(c,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[_u]||(r[_u]=!0,ad("selectionchange",!1,r))}}function Pm(t,r,c,h){switch(g2(r)){case 2:var p=jb;break;case 8:p=Pb;break;default:p=vd}c=p.bind(null,r,c,t),p=void 0,!ul||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(p=!0),h?p!==void 0?t.addEventListener(r,c,{capture:!0,passive:p}):t.addEventListener(r,c,!0):p!==void 0?t.addEventListener(r,c,{passive:p}):t.addEventListener(r,c,!1)}function od(t,r,c,h,p){var b=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var k=h.stateNode.containerInfo;if(k===p)break;if(C===4)for(C=h.return;C!==null;){var P=C.tag;if((P===3||P===4)&&C.stateNode.containerInfo===p)return;C=C.return}for(;k!==null;){if(C=yn(k),C===null)return;if(P=C.tag,P===5||P===6||P===26||P===27){h=b=C;continue e}k=k.parentNode}}h=h.return}Oc(function(){var te=b,ge=cl(c),pe=[];e:{var re=jc.get(t);if(re!==void 0){var oe=Pn,Be=t;switch(t){case"keypress":if(Ni(c)===0)break e;case"keydown":case"keyup":oe=$s;break;case"focusin":Be="focus",oe=dl;break;case"focusout":Be="blur",oe=dl;break;case"beforeblur":case"afterblur":oe=dl;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=It;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Qs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=Uf;break;case wr:case Zn:case Ut:oe=ct;break;case qi:oe=zi;break;case"scroll":case"scrollend":oe=Nc;break;case"wheel":oe=jf;break;case"copy":case"cut":case"paste":oe=Js;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=Lt;break;case"toggle":case"beforetoggle":oe=ml}var Ke=(r&4)!==0,Xt=!Ke&&(t==="scroll"||t==="scrollend"),Y=Ke?re!==null?re+"Capture":null:re;Ke=[];for(var G=te,ee;G!==null;){var ye=G;if(ee=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||ee===null||Y===null||(ye=it(G,Y),ye!=null&&Ke.push(Vl(G,ye,ee))),Xt)break;G=G.return}0<Ke.length&&(re=new oe(re,Be,null,c,ge),pe.push({event:re,listeners:Ke}))}}if((r&7)===0){e:{if(re=t==="mouseover"||t==="pointerover",oe=t==="mouseout"||t==="pointerout",re&&c!==cs&&(Be=c.relatedTarget||c.fromElement)&&(yn(Be)||Be[Or]))break e;if((oe||re)&&(re=ge.window===ge?ge:(re=ge.ownerDocument)?re.defaultView||re.parentWindow:window,oe?(Be=c.relatedTarget||c.toElement,oe=te,Be=Be?yn(Be):null,Be!==null&&(Xt=m(Be),Ke=Be.tag,Be!==Xt||Ke!==5&&Ke!==27&&Ke!==6)&&(Be=null)):(oe=null,Be=te),oe!==Be)){if(Ke=It,ye="onMouseLeave",Y="onMouseEnter",G="mouse",(t==="pointerout"||t==="pointerover")&&(Ke=Lt,ye="onPointerLeave",Y="onPointerEnter",G="pointer"),Xt=oe==null?re:ya(oe),ee=Be==null?re:ya(Be),re=new Ke(ye,G+"leave",oe,c,ge),re.target=Xt,re.relatedTarget=ee,ye=null,yn(ge)===te&&(Ke=new Ke(Y,G+"enter",Be,c,ge),Ke.target=ee,Ke.relatedTarget=Xt,ye=Ke),Xt=ye,oe&&Be)t:{for(Ke=fb,Y=oe,G=Be,ee=0,ye=Y;ye;ye=Ke(ye))ee++;ye=0;for(var He=G;He;He=Ke(He))ye++;for(;0<ee-ye;)Y=Ke(Y),ee--;for(;0<ye-ee;)G=Ke(G),ye--;for(;ee--;){if(Y===G||G!==null&&Y===G.alternate){Ke=Y;break t}Y=Ke(Y),G=Ke(G)}Ke=null}else Ke=null;oe!==null&&Fm(pe,re,oe,Ke,!1),Be!==null&&Xt!==null&&Fm(pe,Xt,Be,Ke,!0)}}e:{if(re=te?ya(te):window,oe=re.nodeName&&re.nodeName.toLowerCase(),oe==="select"||oe==="input"&&re.type==="file")var Ot=Dr;else if(yl(re))if(Uc)Ot=u;else{Ot=s;var Fe=n}else oe=re.nodeName,!oe||oe.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?te&&Kt(te.elementType)&&(Ot=Dr):Ot=l;if(Ot&&(Ot=Ot(t,te))){kr(pe,Ot,c,ge);break e}Fe&&Fe(t,re,te),t==="focusout"&&te&&re.type==="number"&&te.memoizedProps.value!=null&&M(re,"number",re.value)}switch(Fe=te?ya(te):window,t){case"focusin":(yl(Fe)||Fe.contentEditable==="true")&&(F=Fe,V=te,X=null);break;case"focusout":X=V=F=null;break;case"mousedown":ie=!0;break;case"contextmenu":case"mouseup":case"dragend":ie=!1,_e(pe,c,ge);break;case"selectionchange":if(L)break;case"keydown":case"keyup":_e(pe,c,ge)}var ut;if(hs)e:{switch(t){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else Ta?Lc(t,c)&&(Et="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(Et="onCompositionStart");Et&&(Bc&&c.locale!=="ko"&&(Ta||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&Ta&&(ut=Ea()):(di=ge,gi="value"in di?di.value:di.textContent,Ta=!0)),Fe=Cu(te,Et),0<Fe.length&&(Et=new kc(Et,t,null,c,ge),pe.push({event:Et,listeners:Fe}),ut?Et.data=ut:(ut=Ca(c),ut!==null&&(Et.data=ut)))),(ut=Mc?ki(t,c):to(t,c))&&(Et=Cu(te,"onBeforeInput"),0<Et.length&&(Fe=new kc("onBeforeInput","beforeinput",null,c,ge),pe.push({event:Fe,listeners:Et}),Fe.data=ut)),ob(pe,t,te,c,ge)}jm(pe,r)})}function Vl(t,r,c){return{instance:t,listener:r,currentTarget:c}}function Cu(t,r){for(var c=r+"Capture",h=[];t!==null;){var p=t,b=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||b===null||(p=it(t,c),p!=null&&h.unshift(Vl(t,p,b)),p=it(t,r),p!=null&&h.push(Vl(t,p,b))),t.tag===3)return h;t=t.return}return[]}function fb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Fm(t,r,c,h,p){for(var b=r._reactName,C=[];c!==null&&c!==h;){var k=c,P=k.alternate,te=k.stateNode;if(k=k.tag,P!==null&&P===h)break;k!==5&&k!==26&&k!==27||te===null||(P=te,p?(te=it(c,b),te!=null&&C.unshift(Vl(c,te,P))):p||(te=it(c,b),te!=null&&C.push(Vl(c,te,P)))),c=c.return}C.length!==0&&t.push({event:r,listeners:C})}var hb=/\r\n?/g,db=/\u0000|\uFFFD/g;function zm(t){return(typeof t=="string"?t:""+t).replace(hb,`
`).replace(db,"")}function Vm(t,r){return r=zm(r),zm(t)===r}function Yt(t,r,c,h,p,b){switch(c){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||ba(t,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&ba(t,""+h);break;case"className":xa(t,"class",h);break;case"tabIndex":xa(t,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":xa(t,c,h);break;case"style":Ve(t,h,b);break;case"data":if(r!=="object"){xa(t,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||c!=="href")){t.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){t.removeAttribute(c);break}h=va(""+h),t.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(r!=="input"&&Yt(t,r,"name",p.name,p,null),Yt(t,r,"formEncType",p.formEncType,p,null),Yt(t,r,"formMethod",p.formMethod,p,null),Yt(t,r,"formTarget",p.formTarget,p,null)):(Yt(t,r,"encType",p.encType,p,null),Yt(t,r,"method",p.method,p,null),Yt(t,r,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){t.removeAttribute(c);break}h=va(""+h),t.setAttribute(c,h);break;case"onClick":h!=null&&(t.onclick=pr);break;case"onScroll":h!=null&&xt("scroll",t);break;case"onScrollEnd":h!=null&&xt("scrollend",t);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(o(61));if(c=h.__html,c!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"multiple":t.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":t.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){t.removeAttribute("xlink:href");break}c=va(""+h),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?t.setAttribute(c,""+h):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":h===!0?t.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?t.setAttribute(c,h):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?t.setAttribute(c,h):t.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?t.removeAttribute(c):t.setAttribute(c,h);break;case"popover":xt("beforetoggle",t),xt("toggle",t),pa(t,"popover",h);break;case"xlinkActuate":Rr(t,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Rr(t,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Rr(t,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Rr(t,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Rr(t,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Rr(t,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Rr(t,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Rr(t,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Rr(t,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":pa(t,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Tc.get(c)||c,pa(t,c,h))}}function ld(t,r,c,h,p,b){switch(c){case"style":Ve(t,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(o(61));if(c=h.__html,c!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"children":typeof h=="string"?ba(t,h):(typeof h=="number"||typeof h=="bigint")&&ba(t,""+h);break;case"onScroll":h!=null&&xt("scroll",t);break;case"onScrollEnd":h!=null&&xt("scrollend",t);break;case"onClick":h!=null&&(t.onclick=pr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),r=c.slice(2,p?c.length-7:void 0),b=t[zt]||null,b=b!=null?b[c]:null,typeof b=="function"&&t.removeEventListener(r,b,p),typeof h=="function")){typeof b!="function"&&b!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(r,h,p);break e}c in t?t[c]=h:h===!0?t.setAttribute(c,""):pa(t,c,h)}}}function $n(t,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",t),xt("load",t);var h=!1,p=!1,b;for(b in c)if(c.hasOwnProperty(b)){var C=c[b];if(C!=null)switch(b){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:Yt(t,r,b,C,c,null)}}p&&Yt(t,r,"srcSet",c.srcSet,c,null),h&&Yt(t,r,"src",c.src,c,null);return;case"input":xt("invalid",t);var k=b=C=p=null,P=null,te=null;for(h in c)if(c.hasOwnProperty(h)){var ge=c[h];if(ge!=null)switch(h){case"name":p=ge;break;case"type":C=ge;break;case"checked":P=ge;break;case"defaultChecked":te=ge;break;case"value":b=ge;break;case"defaultValue":k=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(o(137,r));break;default:Yt(t,r,h,ge,c,null)}}K(t,b,k,P,te,C,p,!1);return;case"select":xt("invalid",t),h=C=b=null;for(p in c)if(c.hasOwnProperty(p)&&(k=c[p],k!=null))switch(p){case"value":b=k;break;case"defaultValue":C=k;break;case"multiple":h=k;default:Yt(t,r,p,k,c,null)}r=b,c=C,t.multiple=!!h,r!=null?je(t,!!h,r,!1):c!=null&&je(t,!!h,c,!0);return;case"textarea":xt("invalid",t),b=p=h=null;for(C in c)if(c.hasOwnProperty(C)&&(k=c[C],k!=null))switch(C){case"value":h=k;break;case"defaultValue":p=k;break;case"children":b=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(o(91));break;default:Yt(t,r,C,k,c,null)}cr(t,h,p,b);return;case"option":for(P in c)c.hasOwnProperty(P)&&(h=c[P],h!=null)&&(P==="selected"?t.selected=h&&typeof h!="function"&&typeof h!="symbol":Yt(t,r,P,h,c,null));return;case"dialog":xt("beforetoggle",t),xt("toggle",t),xt("cancel",t),xt("close",t);break;case"iframe":case"object":xt("load",t);break;case"video":case"audio":for(h=0;h<zl.length;h++)xt(zl[h],t);break;case"image":xt("error",t),xt("load",t);break;case"details":xt("toggle",t);break;case"embed":case"source":case"link":xt("error",t),xt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in c)if(c.hasOwnProperty(te)&&(h=c[te],h!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:Yt(t,r,te,h,c,null)}return;default:if(Kt(r)){for(ge in c)c.hasOwnProperty(ge)&&(h=c[ge],h!==void 0&&ld(t,r,ge,h,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(h=c[k],h!=null&&Yt(t,r,k,h,c,null))}function gb(t,r,c,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,b=null,C=null,k=null,P=null,te=null,ge=null;for(oe in c){var pe=c[oe];if(c.hasOwnProperty(oe)&&pe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":P=pe;default:h.hasOwnProperty(oe)||Yt(t,r,oe,null,h,pe)}}for(var re in h){var oe=h[re];if(pe=c[re],h.hasOwnProperty(re)&&(oe!=null||pe!=null))switch(re){case"type":b=oe;break;case"name":p=oe;break;case"checked":te=oe;break;case"defaultChecked":ge=oe;break;case"value":C=oe;break;case"defaultValue":k=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(o(137,r));break;default:oe!==pe&&Yt(t,r,re,oe,h,pe)}}Rn(t,C,k,P,te,ge,b,p);return;case"select":oe=C=k=re=null;for(b in c)if(P=c[b],c.hasOwnProperty(b)&&P!=null)switch(b){case"value":break;case"multiple":oe=P;default:h.hasOwnProperty(b)||Yt(t,r,b,null,h,P)}for(p in h)if(b=h[p],P=c[p],h.hasOwnProperty(p)&&(b!=null||P!=null))switch(p){case"value":re=b;break;case"defaultValue":k=b;break;case"multiple":C=b;default:b!==P&&Yt(t,r,p,b,h,P)}r=k,c=C,h=oe,re!=null?je(t,!!c,re,!1):!!h!=!!c&&(r!=null?je(t,!!c,r,!0):je(t,!!c,c?[]:"",!1));return;case"textarea":oe=re=null;for(k in c)if(p=c[k],c.hasOwnProperty(k)&&p!=null&&!h.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Yt(t,r,k,null,h,p)}for(C in h)if(p=h[C],b=c[C],h.hasOwnProperty(C)&&(p!=null||b!=null))switch(C){case"value":re=p;break;case"defaultValue":oe=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(o(91));break;default:p!==b&&Yt(t,r,C,p,h,b)}Cn(t,re,oe);return;case"option":for(var Be in c)re=c[Be],c.hasOwnProperty(Be)&&re!=null&&!h.hasOwnProperty(Be)&&(Be==="selected"?t.selected=!1:Yt(t,r,Be,null,h,re));for(P in h)re=h[P],oe=c[P],h.hasOwnProperty(P)&&re!==oe&&(re!=null||oe!=null)&&(P==="selected"?t.selected=re&&typeof re!="function"&&typeof re!="symbol":Yt(t,r,P,re,h,oe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in c)re=c[Ke],c.hasOwnProperty(Ke)&&re!=null&&!h.hasOwnProperty(Ke)&&Yt(t,r,Ke,null,h,re);for(te in h)if(re=h[te],oe=c[te],h.hasOwnProperty(te)&&re!==oe&&(re!=null||oe!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(o(137,r));break;default:Yt(t,r,te,re,h,oe)}return;default:if(Kt(r)){for(var Xt in c)re=c[Xt],c.hasOwnProperty(Xt)&&re!==void 0&&!h.hasOwnProperty(Xt)&&ld(t,r,Xt,void 0,h,re);for(ge in h)re=h[ge],oe=c[ge],!h.hasOwnProperty(ge)||re===oe||re===void 0&&oe===void 0||ld(t,r,ge,re,h,oe);return}}for(var Y in c)re=c[Y],c.hasOwnProperty(Y)&&re!=null&&!h.hasOwnProperty(Y)&&Yt(t,r,Y,null,h,re);for(pe in h)re=h[pe],oe=c[pe],!h.hasOwnProperty(pe)||re===oe||re==null&&oe==null||Yt(t,r,pe,re,h,oe)}function Hm(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var p=c[h],b=p.transferSize,C=p.initiatorType,k=p.duration;if(b&&k&&Hm(C)){for(C=0,k=p.responseEnd,h+=1;h<c.length;h++){var P=c[h],te=P.startTime;if(te>k)break;var ge=P.transferSize,pe=P.initiatorType;ge&&Hm(pe)&&(P=P.responseEnd,C+=ge*(P<k?1:(k-te)/(P-te)))}if(--h,r+=8*(b+C)/(p.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var cd=null,ud=null;function Tu(t){return t.nodeType===9?t:t.ownerDocument}function Gm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qm(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function fd(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var hd=null;function yb(){var t=window.event;return t&&t.type==="popstate"?t===hd?!1:(hd=t,!0):(hd=null,!1)}var Wm=typeof setTimeout=="function"?setTimeout:void 0,pb=typeof clearTimeout=="function"?clearTimeout:void 0,Ym=typeof Promise=="function"?Promise:void 0,xb=typeof queueMicrotask=="function"?queueMicrotask:typeof Ym<"u"?function(t){return Ym.resolve(null).then(t).catch(wb)}:Wm;function wb(t){setTimeout(function(){throw t})}function qa(t){return t==="head"}function Xm(t,r){var c=r,h=0;do{var p=c.nextSibling;if(t.removeChild(c),p&&p.nodeType===8)if(c=p.data,c==="/$"||c==="/&"){if(h===0){t.removeChild(p),Oo(r);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")Hl(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,Hl(c);for(var b=c.firstChild;b;){var C=b.nextSibling,k=b.nodeName;b[ls]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=C}}else c==="body"&&Hl(t.ownerDocument.body);c=p}while(c);Oo(r)}function Zm(t,r){var c=t;t=0;do{var h=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=h}while(c)}function dd(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":dd(c),yr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function bb(t,r,c,h){for(;t.nodeType===1;){var p=c;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(h){if(!t[ls])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(b=t.getAttribute("rel"),b==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(b!==p.rel||t.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||t.getAttribute("title")!==(p.title==null?null:p.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(b=t.getAttribute("src"),(b!==(p.src==null?null:p.src)||t.getAttribute("type")!==(p.type==null?null:p.type)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&b&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var b=p.name==null?null:""+p.name;if(p.type==="hidden"&&t.getAttribute("name")===b)return t}else return t;if(t=ri(t.nextSibling),t===null)break}return null}function vb(t,r,c){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=ri(t.nextSibling),t===null))return null;return t}function Km(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=ri(t.nextSibling),t===null))return null;return t}function gd(t){return t.data==="$?"||t.data==="$~"}function md(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Eb(t,r){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||c.readyState!=="loading")r();else{var h=function(){r(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),t._reactRetry=h}}function ri(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var yd=null;function Qm(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(r===0)return ri(t.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}t=t.nextSibling}return null}function Jm(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return t;r--}else c!=="/$"&&c!=="/&"||r++}t=t.previousSibling}return null}function $m(t,r,c){switch(r=Tu(c),t){case"html":if(t=r.documentElement,!t)throw Error(o(452));return t;case"head":if(t=r.head,!t)throw Error(o(453));return t;case"body":if(t=r.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Hl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);yr(t)}var ii=new Map,e2=new Set;function Ou(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var sa=he.d;he.d={f:Sb,r:Ab,D:_b,C:Cb,L:Tb,m:Ob,X:Rb,S:Nb,M:Ib};function Sb(){var t=sa.f(),r=wu();return t||r}function Ab(t){var r=Rt(t);r!==null&&r.tag===5&&r.type==="form"?pg(r):sa.r(t)}var _o=typeof document>"u"?null:document;function t2(t,r,c){var h=_o;if(h&&typeof r=="string"&&r){var p=dt(r);p='link[rel="'+t+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),e2.has(p)||(e2.add(p),t={rel:t,crossOrigin:c,href:r},h.querySelector(p)===null&&(r=h.createElement("link"),$n(r,"link",t),pn(r),h.head.appendChild(r)))}}function _b(t){sa.D(t),t2("dns-prefetch",t,null)}function Cb(t,r){sa.C(t,r),t2("preconnect",t,r)}function Tb(t,r,c){sa.L(t,r,c);var h=_o;if(h&&t&&r){var p='link[rel="preload"][as="'+dt(r)+'"]';r==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+dt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+dt(c.imageSizes)+'"]')):p+='[href="'+dt(t)+'"]';var b=p;switch(r){case"style":b=Co(t);break;case"script":b=To(t)}ii.has(b)||(t=R({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:t,as:r},c),ii.set(b,t),h.querySelector(p)!==null||r==="style"&&h.querySelector(Gl(b))||r==="script"&&h.querySelector(ql(b))||(r=h.createElement("link"),$n(r,"link",t),pn(r),h.head.appendChild(r)))}}function Ob(t,r){sa.m(t,r);var c=_o;if(c&&t){var h=r&&typeof r.as=="string"?r.as:"script",p='link[rel="modulepreload"][as="'+dt(h)+'"][href="'+dt(t)+'"]',b=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=To(t)}if(!ii.has(b)&&(t=R({rel:"modulepreload",href:t},r),ii.set(b,t),c.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(ql(b)))return}h=c.createElement("link"),$n(h,"link",t),pn(h),c.head.appendChild(h)}}}function Nb(t,r,c){sa.S(t,r,c);var h=_o;if(h&&t){var p=lr(h).hoistableStyles,b=Co(t);r=r||"default";var C=p.get(b);if(!C){var k={loading:0,preload:null};if(C=h.querySelector(Gl(b)))k.loading=5;else{t=R({rel:"stylesheet",href:t,"data-precedence":r},c),(c=ii.get(b))&&pd(t,c);var P=C=h.createElement("link");pn(P),$n(P,"link",t),P._p=new Promise(function(te,ge){P.onload=te,P.onerror=ge}),P.addEventListener("load",function(){k.loading|=1}),P.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Nu(C,r,h)}C={type:"stylesheet",instance:C,count:1,state:k},p.set(b,C)}}}function Rb(t,r){sa.X(t,r);var c=_o;if(c&&t){var h=lr(c).hoistableScripts,p=To(t),b=h.get(p);b||(b=c.querySelector(ql(p)),b||(t=R({src:t,async:!0},r),(r=ii.get(p))&&xd(t,r),b=c.createElement("script"),pn(b),$n(b,"link",t),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(p,b))}}function Ib(t,r){sa.M(t,r);var c=_o;if(c&&t){var h=lr(c).hoistableScripts,p=To(t),b=h.get(p);b||(b=c.querySelector(ql(p)),b||(t=R({src:t,async:!0,type:"module"},r),(r=ii.get(p))&&xd(t,r),b=c.createElement("script"),pn(b),$n(b,"link",t),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(p,b))}}function n2(t,r,c,h){var p=(p=be.current)?Ou(p):null;if(!p)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=Co(c.href),c=lr(p).hoistableStyles,h=c.get(r),h||(h={type:"style",instance:null,count:0,state:null},c.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=Co(c.href);var b=lr(p).hoistableStyles,C=b.get(t);if(C||(p=p.ownerDocument||p,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(t,C),(b=p.querySelector(Gl(t)))&&!b._p&&(C.instance=b,C.state.loading=5),ii.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ii.set(t,c),b||kb(p,t,c,C.state))),r&&h===null)throw Error(o(528,""));return C}if(r&&h!==null)throw Error(o(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=To(c),c=lr(p).hoistableScripts,h=c.get(r),h||(h={type:"script",instance:null,count:0,state:null},c.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Co(t){return'href="'+dt(t)+'"'}function Gl(t){return'link[rel="stylesheet"]['+t+"]"}function r2(t){return R({},t,{"data-precedence":t.precedence,precedence:null})}function kb(t,r,c,h){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=t.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),$n(r,"link",c),pn(r),t.head.appendChild(r))}function To(t){return'[src="'+dt(t)+'"]'}function ql(t){return"script[async]"+t}function i2(t,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var h=t.querySelector('style[data-href~="'+dt(c.href)+'"]');if(h)return r.instance=h,pn(h),h;var p=R({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(t.ownerDocument||t).createElement("style"),pn(h),$n(h,"style",p),Nu(h,c.precedence,t),r.instance=h;case"stylesheet":p=Co(c.href);var b=t.querySelector(Gl(p));if(b)return r.state.loading|=4,r.instance=b,pn(b),b;h=r2(c),(p=ii.get(p))&&pd(h,p),b=(t.ownerDocument||t).createElement("link"),pn(b);var C=b;return C._p=new Promise(function(k,P){C.onload=k,C.onerror=P}),$n(b,"link",h),r.state.loading|=4,Nu(b,c.precedence,t),r.instance=b;case"script":return b=To(c.src),(p=t.querySelector(ql(b)))?(r.instance=p,pn(p),p):(h=c,(p=ii.get(b))&&(h=R({},c),xd(h,p)),t=t.ownerDocument||t,p=t.createElement("script"),pn(p),$n(p,"link",h),t.head.appendChild(p),r.instance=p);case"void":return null;default:throw Error(o(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,Nu(h,c.precedence,t));return r.instance}function Nu(t,r,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,b=p,C=0;C<h.length;C++){var k=h[C];if(k.dataset.precedence===r)b=k;else if(b!==p)break}b?b.parentNode.insertBefore(t,b.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(t,r.firstChild))}function pd(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function xd(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Ru=null;function a2(t,r,c){if(Ru===null){var h=new Map,p=Ru=new Map;p.set(c,h)}else p=Ru,h=p.get(c),h||(h=new Map,p.set(c,h));if(h.has(t))return h;for(h.set(t,null),c=c.getElementsByTagName(t),p=0;p<c.length;p++){var b=c[p];if(!(b[ls]||b[_n]||t==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var C=b.getAttribute(r)||"";C=t+C;var k=h.get(C);k?k.push(b):h.set(C,[b])}}return h}function s2(t,r,c){t=t.ownerDocument||t,t.head.insertBefore(c,r==="title"?t.querySelector("head > title"):null)}function Db(t,r,c){if(c===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function o2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Mb(t,r,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var p=Co(h.href),b=r.querySelector(Gl(p));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Iu.bind(t),r.then(t,t)),c.state.loading|=4,c.instance=b,pn(b);return}b=r.ownerDocument||r,h=r2(h),(p=ii.get(p))&&pd(h,p),b=b.createElement("link"),pn(b);var C=b;C._p=new Promise(function(k,P){C.onload=k,C.onerror=P}),$n(b,"link",h),c.instance=b}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=Iu.bind(t),r.addEventListener("load",c),r.addEventListener("error",c))}}var wd=0;function Bb(t,r){return t.stylesheets&&t.count===0&&Du(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var h=setTimeout(function(){if(t.stylesheets&&Du(t,t.stylesheets),t.unsuspend){var b=t.unsuspend;t.unsuspend=null,b()}},6e4+r);0<t.imgBytes&&wd===0&&(wd=62500*mb());var p=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Du(t,t.stylesheets),t.unsuspend)){var b=t.unsuspend;t.unsuspend=null,b()}},(t.imgBytes>wd?50:800)+r);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(h),clearTimeout(p)}}:null}function Iu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Du(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ku=null;function Du(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ku=new Map,r.forEach(Lb,t),ku=null,Iu.call(t))}function Lb(t,r){if(!(r.state.loading&4)){var c=ku.get(t);if(c)var h=c.get(null);else{c=new Map,ku.set(t,c);for(var p=t.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<p.length;b++){var C=p[b];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(c.set(C.dataset.precedence,C),h=C)}h&&c.set(null,h)}p=r.instance,C=p.getAttribute("data-precedence"),b=c.get(C)||h,b===h&&c.set(null,p),c.set(C,p),this.count++,h=Iu.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),b?b.parentNode.insertBefore(p,b.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(p,t.firstChild)),r.state.loading|=4}}var Wl={$$typeof:W,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function Ub(t,r,c,h,p,b,C,k,P){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.hiddenUpdates=Ci(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=b,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function l2(t,r,c,h,p,b,C,k,P,te,ge,pe){return t=new Ub(t,r,c,C,P,te,ge,pe,k),r=1,b===!0&&(r|=24),b=Mr(3,null,null,r),t.current=b,b.stateNode=t,r=Jf(),r.refCount++,t.pooledCache=r,r.refCount++,b.memoizedState={element:h,isDehydrated:c,cache:r},nh(b),t}function c2(t){return t?(t=ro,t):ro}function u2(t,r,c,h,p,b){p=c2(p),h.context===null?h.context=p:h.pendingContext=p,h=Ma(r),h.payload={element:c},b=b===void 0?null:b,b!==null&&(h.callback=b),c=Ba(t,h,r),c!==null&&(Ar(c,t,r),Al(c,t,r))}function f2(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<r?c:r}}function bd(t,r){f2(t,r),(t=t.alternate)&&f2(t,r)}function h2(t){if(t.tag===13||t.tag===31){var r=ps(t,67108864);r!==null&&Ar(r,t,67108864),bd(t,67108864)}}function d2(t){if(t.tag===13||t.tag===31){var r=Pr();r=qn(r);var c=ps(t,r);c!==null&&Ar(c,t,r),bd(t,r)}}var Mu=!0;function jb(t,r,c,h){var p=$.T;$.T=null;var b=he.p;try{he.p=2,vd(t,r,c,h)}finally{he.p=b,$.T=p}}function Pb(t,r,c,h){var p=$.T;$.T=null;var b=he.p;try{he.p=8,vd(t,r,c,h)}finally{he.p=b,$.T=p}}function vd(t,r,c,h){if(Mu){var p=Ed(h);if(p===null)od(t,r,h,Bu,c),m2(t,h);else if(zb(p,t,r,c,h))h.stopPropagation();else if(m2(t,h),r&4&&-1<Fb.indexOf(t)){for(;p!==null;){var b=Rt(p);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var C=_i(b.pendingLanes);if(C!==0){var k=b;for(k.pendingLanes|=2,k.entangledLanes|=2;C;){var P=1<<31-lt(C);k.entanglements[1]|=P,C&=~P}Li(b),(kt&6)===0&&(pu=dn()+500,Fl(0))}}break;case 31:case 13:k=ps(b,2),k!==null&&Ar(k,b,2),wu(),bd(b,2)}if(b=Ed(h),b===null&&od(t,r,h,Bu,c),b===p)break;p=b}p!==null&&h.stopPropagation()}else od(t,r,h,null,c)}}function Ed(t){return t=cl(t),Sd(t)}var Bu=null;function Sd(t){if(Bu=null,t=yn(t),t!==null){var r=m(t);if(r===null)t=null;else{var c=r.tag;if(c===13){if(t=x(r),t!==null)return t;t=null}else if(c===31){if(t=A(r),t!==null)return t;t=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Bu=t,null}function g2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rl()){case mr:return 2;case il:return 8;case Tr:case Yn:return 32;case al:return 268435456;default:return 32}default:return 32}}var Ad=!1,Wa=null,Ya=null,Xa=null,Yl=new Map,Xl=new Map,Za=[],Fb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function m2(t,r){switch(t){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Xa=null;break;case"pointerover":case"pointerout":Yl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(r.pointerId)}}function Zl(t,r,c,h,p,b){return t===null||t.nativeEvent!==b?(t={blockedOn:r,domEventName:c,eventSystemFlags:h,nativeEvent:b,targetContainers:[p]},r!==null&&(r=Rt(r),r!==null&&h2(r)),t):(t.eventSystemFlags|=h,r=t.targetContainers,p!==null&&r.indexOf(p)===-1&&r.push(p),t)}function zb(t,r,c,h,p){switch(r){case"focusin":return Wa=Zl(Wa,t,r,c,h,p),!0;case"dragenter":return Ya=Zl(Ya,t,r,c,h,p),!0;case"mouseover":return Xa=Zl(Xa,t,r,c,h,p),!0;case"pointerover":var b=p.pointerId;return Yl.set(b,Zl(Yl.get(b)||null,t,r,c,h,p)),!0;case"gotpointercapture":return b=p.pointerId,Xl.set(b,Zl(Xl.get(b)||null,t,r,c,h,p)),!0}return!1}function y2(t){var r=yn(t.target);if(r!==null){var c=m(r);if(c!==null){if(r=c.tag,r===13){if(r=x(c),r!==null){t.blockedOn=r,Ie(t.priority,function(){d2(c)});return}}else if(r===31){if(r=A(c),r!==null){t.blockedOn=r,Ie(t.priority,function(){d2(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lu(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var c=Ed(t.nativeEvent);if(c===null){c=t.nativeEvent;var h=new c.constructor(c.type,c);cs=h,c.target.dispatchEvent(h),cs=null}else return r=Rt(c),r!==null&&h2(r),t.blockedOn=c,!1;r.shift()}return!0}function p2(t,r,c){Lu(t)&&c.delete(r)}function Vb(){Ad=!1,Wa!==null&&Lu(Wa)&&(Wa=null),Ya!==null&&Lu(Ya)&&(Ya=null),Xa!==null&&Lu(Xa)&&(Xa=null),Yl.forEach(p2),Xl.forEach(p2)}function Uu(t,r){t.blockedOn===r&&(t.blockedOn=null,Ad||(Ad=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Vb)))}var ju=null;function x2(t){ju!==t&&(ju=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){ju===t&&(ju=null);for(var r=0;r<t.length;r+=3){var c=t[r],h=t[r+1],p=t[r+2];if(typeof h!="function"){if(Sd(h||c)===null)continue;break}var b=Rt(c);b!==null&&(t.splice(r,3),r-=3,Eh(b,{pending:!0,data:p,method:c.method,action:h},h,p))}}))}function Oo(t){function r(P){return Uu(P,t)}Wa!==null&&Uu(Wa,t),Ya!==null&&Uu(Ya,t),Xa!==null&&Uu(Xa,t),Yl.forEach(r),Xl.forEach(r);for(var c=0;c<Za.length;c++){var h=Za[c];h.blockedOn===t&&(h.blockedOn=null)}for(;0<Za.length&&(c=Za[0],c.blockedOn===null);)y2(c),c.blockedOn===null&&Za.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var p=c[h],b=c[h+1],C=p[zt]||null;if(typeof b=="function")C||x2(c);else if(C){var k=null;if(b&&b.hasAttribute("formAction")){if(p=b,C=b[zt]||null)k=C.formAction;else if(Sd(p)!==null)continue}else k=C.action;typeof k=="function"?c[h+1]=k:(c.splice(h,3),h-=3),x2(c)}}}function w2(){function t(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(C){return p=C})},focusReset:"manual",scroll:"manual"})}function r(){p!==null&&(p(),p=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,p=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),p!==null&&(p(),p=null)}}}function _d(t){this._internalRoot=t}Pu.prototype.render=_d.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(o(409));var c=r.current,h=Pr();u2(c,h,t,r,null,null)},Pu.prototype.unmount=_d.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;u2(t.current,2,null,t,null,null),wu(),r[Or]=null}};function Pu(t){this._internalRoot=t}Pu.prototype.unstable_scheduleHydration=function(t){if(t){var r=sr();t={blockedOn:null,target:t,priority:r};for(var c=0;c<Za.length&&r!==0&&r<Za[c].priority;c++);Za.splice(c,0,t),c===0&&y2(t)}};var b2=e.version;if(b2!=="19.2.3")throw Error(o(527,b2,"19.2.3"));he.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=v(r),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var Hb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fu.isDisabled&&Fu.supportsFiber)try{tn=Fu.inject(Hb),Ce=Fu}catch{}}return Ql.createRoot=function(t,r){if(!d(t))throw Error(o(299));var c=!1,h="",p=Tg,b=Og,C=Ng;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=l2(t,1,!1,null,null,c,h,null,p,b,C,w2),t[Or]=r.current,sd(t),new _d(r)},Ql.hydrateRoot=function(t,r,c){if(!d(t))throw Error(o(299));var h=!1,p="",b=Tg,C=Og,k=Ng,P=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.formState!==void 0&&(P=c.formState)),r=l2(t,1,!0,r,c??null,h,p,P,b,C,k,w2),r.context=c2(null),c=r.current,h=Pr(),h=qn(h),p=Ma(h),p.callback=null,Ba(c,p,h),c=h,r.current.lanes=c,Ti(r,c),Li(r),t[Or]=r.current,sd(t),new Pu(r)},Ql.version="19.2.3",Ql}var R2;function ev(){if(R2)return Od.exports;R2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Od.exports=$b(),Od.exports}var tv=ev();const nv=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rv=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,o)=>o?o.toUpperCase():i.toLowerCase()),I2=a=>{const e=rv(a);return e.charAt(0).toUpperCase()+e.slice(1)},Rp=(...a)=>a.filter((e,i,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===i).join(" ").trim(),iv=a=>{for(const e in a)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var av={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const sv=Ge.forwardRef(({color:a="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:m,iconNode:x,...A},S)=>Ge.createElement("svg",{ref:S,...av,width:e,height:e,stroke:a,strokeWidth:o?Number(i)*24/Number(e):i,className:Rp("lucide",d),...!m&&!iv(A)&&{"aria-hidden":"true"},...A},[...x.map(([v,T])=>Ge.createElement(v,T)),...Array.isArray(m)?m:[m]]));const Pt=(a,e)=>{const i=Ge.forwardRef(({className:o,...d},m)=>Ge.createElement(sv,{ref:m,iconNode:e,className:Rp(`lucide-${nv(I2(a))}`,`lucide-${a}`,o),...d}));return i.displayName=I2(a),i};const ov=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],lv=Pt("arrow-right",ov);const cv=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],uv=Pt("bell",cv);const fv=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Ip=Pt("camera",fv);const hv=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],dv=Pt("chart-pie",hv);const gv=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],mv=Pt("check",gv);const yv=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pv=Pt("chevron-down",yv);const xv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],b0=Pt("circle-alert",xv);const wv=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],bv=Pt("copy",wv);const vv=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ev=Pt("dollar-sign",vv);const Sv=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Av=Pt("layout-grid",Sv);const _v=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],Cv=Pt("leaf",_v);const Tv=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],rf=Pt("loader-circle",Tv);const Ov=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Nv=Pt("loader",Ov);const Rv=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Iv=Pt("log-in",Rv);const kv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Dv=Pt("log-out",kv);const Mv=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Bv=Pt("moon",Mv);const Lv=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Uv=Pt("pen-line",Lv);const jv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],af=Pt("plus",jv);const Pv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Fv=Pt("refresh-cw",Pv);const zv=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Vv=Pt("save",zv);const Hv=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],Gv=Pt("scan-line",Hv);const qv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Wv=Pt("search",qv);const Yv=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xv=Pt("settings",Yv);const Zv=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],X0=Pt("shopping-cart",Zv);const Kv=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Qv=Pt("sun",Kv);const Jv=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],xf=Pt("trash-2",Jv);const $v=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],k2=Pt("trending-down",$v);const e3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],t3=Pt("triangle-alert",e3);const n3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],v0=Pt("users",n3);const r3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Z0=Pt("x",r3);function wf(a){return new Promise((e,i)=>{a.oncomplete=a.onsuccess=()=>e(a.result),a.onabort=a.onerror=()=>i(a.error)})}function i3(a,e){let i;const o=()=>{if(i)return i;const d=indexedDB.open(a);return d.onupgradeneeded=()=>d.result.createObjectStore(e),i=wf(d),i.then(m=>{m.onclose=()=>i=void 0},()=>{}),i};return(d,m)=>o().then(x=>m(x.transaction(e,d).objectStore(e)))}let kd;function K0(){return kd||(kd=i3("keyval-store","keyval")),kd}function Q0(a,e=K0()){return e("readonly",i=>wf(i.get(a)))}function sf(a,e,i=K0()){return i("readwrite",o=>(o.put(e,a),wf(o.transaction)))}function J0(a,e,i=K0()){return i("readwrite",o=>new Promise((d,m)=>{o.get(a).onsuccess=function(){try{o.put(e(this.result),a),d(wf(o.transaction))}catch(x){m(x)}}}))}function bf(a,e){var i={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&e.indexOf(o)<0&&(i[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,o=Object.getOwnPropertySymbols(a);d<o.length;d++)e.indexOf(o[d])<0&&Object.prototype.propertyIsEnumerable.call(a,o[d])&&(i[o[d]]=a[o[d]]);return i}function a3(a,e,i,o){function d(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function A(T){try{v(o.next(T))}catch(R){x(R)}}function S(T){try{v(o.throw(T))}catch(R){x(R)}}function v(T){T.done?m(T.value):d(T.value).then(A,S)}v((o=o.apply(a,e||[])).next())})}const s3=a=>a?(...e)=>a(...e):(...e)=>fetch(...e);class $0 extends Error{constructor(e,i="FunctionsError",o){super(e),this.name=i,this.context=o}}class o3 extends $0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class D2 extends $0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class M2 extends $0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var E0;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(E0||(E0={}));class l3{constructor(e,{headers:i={},customFetch:o,region:d=E0.Any}={}){this.url=e,this.headers=i,this.region=d,this.fetch=s3(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return a3(this,arguments,void 0,function*(i,o={}){var d;let m,x;try{const{headers:A,method:S,body:v,signal:T,timeout:R}=o;let U={},{region:j}=o;j||(j=this.region);const H=new URL(`${this.url}/${i}`);j&&j!=="any"&&(U["x-region"]=j,H.searchParams.set("forceFunctionRegion",j));let q;v&&(A&&!Object.prototype.hasOwnProperty.call(A,"Content-Type")||!A)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(U["Content-Type"]="application/octet-stream",q=v):typeof v=="string"?(U["Content-Type"]="text/plain",q=v):typeof FormData<"u"&&v instanceof FormData?q=v:(U["Content-Type"]="application/json",q=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?q=JSON.stringify(v):q=v;let Q=T;R&&(x=new AbortController,m=setTimeout(()=>x.abort(),R),T?(Q=x.signal,T.addEventListener("abort",()=>x.abort())):Q=x.signal);const ue=yield this.fetch(H.toString(),{method:S||"POST",headers:Object.assign(Object.assign(Object.assign({},U),this.headers),A),body:q,signal:Q}).catch(Pe=>{throw new o3(Pe)}),se=ue.headers.get("x-relay-error");if(se&&se==="true")throw new D2(ue);if(!ue.ok)throw new M2(ue);let W=((d=ue.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),me;return W==="application/json"?me=yield ue.json():W==="application/octet-stream"||W==="application/pdf"?me=yield ue.blob():W==="text/event-stream"?me=ue:W==="multipart/form-data"?me=yield ue.formData():me=yield ue.text(),{data:me,error:null,response:ue}}catch(A){return{data:null,error:A,response:A instanceof M2||A instanceof D2?A.context:void 0}}finally{m&&clearTimeout(m)}})}}var c3=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}},u3=class{constructor(a){var e,i;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(e=a.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=a.signal,this.isMaybeSingle=(i=a.isMaybeSingle)!==null&&i!==void 0?i:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,e){return this.headers=new Headers(this.headers),this.headers.set(a,e),this}then(a,e){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let d=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{let x=null,A=null,S=null,v=m.status,T=m.statusText;if(m.ok){var R,U;if(i.method!=="HEAD"){var j;const ue=await m.text();ue===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((j=i.headers.get("Accept"))===null||j===void 0)&&j.includes("application/vnd.pgrst.plan+text"))?A=ue:A=JSON.parse(ue))}const q=(R=i.headers.get("Prefer"))===null||R===void 0?void 0:R.match(/count=(exact|planned|estimated)/),Q=(U=m.headers.get("content-range"))===null||U===void 0?void 0:U.split("/");q&&Q&&Q.length>1&&(S=parseInt(Q[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(A)&&(A.length>1?(x={code:"PGRST116",details:`Results contain ${A.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},A=null,S=null,v=406,T="Not Acceptable"):A.length===1?A=A[0]:A=null)}else{var H;const q=await m.text();try{x=JSON.parse(q),Array.isArray(x)&&m.status===404&&(A=[],x=null,v=200,T="OK")}catch{m.status===404&&q===""?(v=204,T="No Content"):x={message:q}}if(x&&i.isMaybeSingle&&(!(x==null||(H=x.details)===null||H===void 0)&&H.includes("0 rows"))&&(x=null,v=200,T="OK"),x&&i.shouldThrowOnError)throw new c3(x)}return{error:x,data:A,count:S,status:v,statusText:T}});return this.shouldThrowOnError||(d=d.catch(m=>{var x;let A="";const S=m?.cause;if(S){var v,T,R,U;const H=(v=S?.message)!==null&&v!==void 0?v:"",q=(T=S?.code)!==null&&T!==void 0?T:"";A=`${(R=m?.name)!==null&&R!==void 0?R:"FetchError"}: ${m?.message}`,A+=`

Caused by: ${(U=S?.name)!==null&&U!==void 0?U:"Error"}: ${H}`,q&&(A+=` (${q})`),S?.stack&&(A+=`
${S.stack}`)}else{var j;A=(j=m?.stack)!==null&&j!==void 0?j:""}return{error:{message:`${(x=m?.name)!==null&&x!==void 0?x:"FetchError"}: ${m?.message}`,details:A,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(a,e)}returns(){return this}overrideTypes(){return this}},f3=class extends u3{select(a){let e=!1;const i=(a??"*").split("").map(o=>/\s/.test(o)&&!e?"":(o==='"'&&(e=!e),o)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:e=!0,nullsFirst:i,foreignTable:o,referencedTable:d=o}={}){const m=d?`${d}.order`:"order",x=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${x?`${x},`:""}${a}.${e?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:e,referencedTable:i=e}={}){const o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${a}`),this}range(a,e,{foreignTable:i,referencedTable:o=i}={}){const d=typeof o>"u"?"offset":`${o}.offset`,m=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(d,`${a}`),this.url.searchParams.set(m,`${e-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:e=!1,settings:i=!1,buffers:o=!1,wal:d=!1,format:m="text"}={}){var x;const A=[a?"analyze":null,e?"verbose":null,i?"settings":null,o?"buffers":null,d?"wal":null].filter(Boolean).join("|"),S=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${S}"; options=${A};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};const B2=new RegExp("[,()]");var Fo=class extends f3{eq(a,e){return this.url.searchParams.append(a,`eq.${e}`),this}neq(a,e){return this.url.searchParams.append(a,`neq.${e}`),this}gt(a,e){return this.url.searchParams.append(a,`gt.${e}`),this}gte(a,e){return this.url.searchParams.append(a,`gte.${e}`),this}lt(a,e){return this.url.searchParams.append(a,`lt.${e}`),this}lte(a,e){return this.url.searchParams.append(a,`lte.${e}`),this}like(a,e){return this.url.searchParams.append(a,`like.${e}`),this}likeAllOf(a,e){return this.url.searchParams.append(a,`like(all).{${e.join(",")}}`),this}likeAnyOf(a,e){return this.url.searchParams.append(a,`like(any).{${e.join(",")}}`),this}ilike(a,e){return this.url.searchParams.append(a,`ilike.${e}`),this}ilikeAllOf(a,e){return this.url.searchParams.append(a,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(a,e){return this.url.searchParams.append(a,`ilike(any).{${e.join(",")}}`),this}regexMatch(a,e){return this.url.searchParams.append(a,`match.${e}`),this}regexIMatch(a,e){return this.url.searchParams.append(a,`imatch.${e}`),this}is(a,e){return this.url.searchParams.append(a,`is.${e}`),this}isDistinct(a,e){return this.url.searchParams.append(a,`isdistinct.${e}`),this}in(a,e){const i=Array.from(new Set(e)).map(o=>typeof o=="string"&&B2.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(a,`in.(${i})`),this}notIn(a,e){const i=Array.from(new Set(e)).map(o=>typeof o=="string"&&B2.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(a,`not.in.(${i})`),this}contains(a,e){return typeof e=="string"?this.url.searchParams.append(a,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(a,`cs.{${e.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(e)}`),this}containedBy(a,e){return typeof e=="string"?this.url.searchParams.append(a,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(a,`cd.{${e.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(e)}`),this}rangeGt(a,e){return this.url.searchParams.append(a,`sr.${e}`),this}rangeGte(a,e){return this.url.searchParams.append(a,`nxl.${e}`),this}rangeLt(a,e){return this.url.searchParams.append(a,`sl.${e}`),this}rangeLte(a,e){return this.url.searchParams.append(a,`nxr.${e}`),this}rangeAdjacent(a,e){return this.url.searchParams.append(a,`adj.${e}`),this}overlaps(a,e){return typeof e=="string"?this.url.searchParams.append(a,`ov.${e}`):this.url.searchParams.append(a,`ov.{${e.join(",")}}`),this}textSearch(a,e,{config:i,type:o}={}){let d="";o==="plain"?d="pl":o==="phrase"?d="ph":o==="websearch"&&(d="w");const m=i===void 0?"":`(${i})`;return this.url.searchParams.append(a,`${d}fts${m}.${e}`),this}match(a){return Object.entries(a).forEach(([e,i])=>{this.url.searchParams.append(e,`eq.${i}`)}),this}not(a,e,i){return this.url.searchParams.append(a,`not.${e}.${i}`),this}or(a,{foreignTable:e,referencedTable:i=e}={}){const o=i?`${i}.or`:"or";return this.url.searchParams.append(o,`(${a})`),this}filter(a,e,i){return this.url.searchParams.append(a,`${e}.${i}`),this}},h3=class{constructor(a,{headers:e={},schema:i,fetch:o}){this.url=a,this.headers=new Headers(e),this.schema=i,this.fetch=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(a,e){const{head:i=!1,count:o}=e??{},d=i?"HEAD":"GET";let m=!1;const x=(a??"*").split("").map(v=>/\s/.test(v)&&!m?"":(v==='"'&&(m=!m),v)).join(""),{url:A,headers:S}=this.cloneRequestState();return A.searchParams.set("select",x),o&&S.append("Prefer",`count=${o}`),new Fo({method:d,url:A,headers:S,schema:this.schema,fetch:this.fetch})}insert(a,{count:e,defaultToNull:i=!0}={}){var o;const d="POST",{url:m,headers:x}=this.cloneRequestState();if(e&&x.append("Prefer",`count=${e}`),i||x.append("Prefer","missing=default"),Array.isArray(a)){const A=a.reduce((S,v)=>S.concat(Object.keys(v)),[]);if(A.length>0){const S=[...new Set(A)].map(v=>`"${v}"`);m.searchParams.set("columns",S.join(","))}}return new Fo({method:d,url:m,headers:x,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(a,{onConflict:e,ignoreDuplicates:i=!1,count:o,defaultToNull:d=!0}={}){var m;const x="POST",{url:A,headers:S}=this.cloneRequestState();if(S.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),e!==void 0&&A.searchParams.set("on_conflict",e),o&&S.append("Prefer",`count=${o}`),d||S.append("Prefer","missing=default"),Array.isArray(a)){const v=a.reduce((T,R)=>T.concat(Object.keys(R)),[]);if(v.length>0){const T=[...new Set(v)].map(R=>`"${R}"`);A.searchParams.set("columns",T.join(","))}}return new Fo({method:x,url:A,headers:S,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(a,{count:e}={}){var i;const o="PATCH",{url:d,headers:m}=this.cloneRequestState();return e&&m.append("Prefer",`count=${e}`),new Fo({method:o,url:d,headers:m,schema:this.schema,body:a,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:a}={}){var e;const i="DELETE",{url:o,headers:d}=this.cloneRequestState();return a&&d.append("Prefer",`count=${a}`),new Fo({method:i,url:o,headers:d,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},d3=class kp{constructor(e,{headers:i={},schema:o,fetch:d}={}){this.url=e,this.headers=new Headers(i),this.schemaName=o,this.fetch=d}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new h3(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new kp(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,i={},{head:o=!1,get:d=!1,count:m}={}){var x;let A;const S=new URL(`${this.url}/rpc/${e}`);let v;const T=j=>j!==null&&typeof j=="object"&&(!Array.isArray(j)||j.some(T)),R=o&&Object.values(i).some(T);R?(A="POST",v=i):o||d?(A=o?"HEAD":"GET",Object.entries(i).filter(([j,H])=>H!==void 0).map(([j,H])=>[j,Array.isArray(H)?`{${H.join(",")}}`:`${H}`]).forEach(([j,H])=>{S.searchParams.append(j,H)})):(A="POST",v=i);const U=new Headers(this.headers);return R?U.set("Prefer",m?`count=${m},return=minimal`:"return=minimal"):m&&U.set("Prefer",`count=${m}`),new Fo({method:A,url:S,headers:U,schema:this.schemaName,body:v,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}};class g3{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const o=i.versions;if(o&&o.node){const d=o.node,m=parseInt(d.replace(/^v/,"").split(".")[0]);return m>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${m} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${m} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const o=this.getWebSocketConstructor();return new o(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const m3="2.90.1",y3=`realtime-js/${m3}`,Dp="1.0.0",p3="2.0.0",L2=Dp,S0=1e4,x3=1e3,w3=100;var es;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(es||(es={}));var Gn;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(Gn||(Gn={}));var Ei;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(Ei||(Ei={}));var A0;(function(a){a.websocket="websocket"})(A0||(A0={}));var Us;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(Us||(Us={}));class b3{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let o=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,o;const d=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(e){var i,o;const d=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:{},x=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,x)}_encodeUserBroadcastPush(e,i,o){var d,m;const x=e.topic,A=(d=e.ref)!==null&&d!==void 0?d:"",S=(m=e.join_ref)!==null&&m!==void 0?m:"",v=e.payload.event,T=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},R=Object.keys(T).length===0?"":JSON.stringify(T);if(S.length>255)throw new Error(`joinRef length ${S.length} exceeds maximum of 255`);if(A.length>255)throw new Error(`ref length ${A.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`topic length ${x.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(R.length>255)throw new Error(`metadata length ${R.length} exceeds maximum of 255`);const U=this.USER_BROADCAST_PUSH_META_LENGTH+S.length+A.length+x.length+v.length+R.length,j=new ArrayBuffer(this.HEADER_LENGTH+U);let H=new DataView(j),q=0;H.setUint8(q++,this.KINDS.userBroadcastPush),H.setUint8(q++,S.length),H.setUint8(q++,A.length),H.setUint8(q++,x.length),H.setUint8(q++,v.length),H.setUint8(q++,R.length),H.setUint8(q++,i),Array.from(S,ue=>H.setUint8(q++,ue.charCodeAt(0))),Array.from(A,ue=>H.setUint8(q++,ue.charCodeAt(0))),Array.from(x,ue=>H.setUint8(q++,ue.charCodeAt(0))),Array.from(v,ue=>H.setUint8(q++,ue.charCodeAt(0))),Array.from(R,ue=>H.setUint8(q++,ue.charCodeAt(0)));var Q=new Uint8Array(j.byteLength+o.byteLength);return Q.set(new Uint8Array(j),0),Q.set(new Uint8Array(o),j.byteLength),Q.buffer}decode(e,i){if(this._isArrayBuffer(e)){let o=this._binaryDecode(e);return i(o)}if(typeof e=="string"){const o=JSON.parse(e),[d,m,x,A,S]=o;return i({join_ref:d,ref:m,topic:x,event:A,payload:S})}return i({})}_binaryDecode(e){const i=new DataView(e),o=i.getUint8(0),d=new TextDecoder;if(o===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,i,d)}_decodeUserBroadcast(e,i,o){const d=i.getUint8(1),m=i.getUint8(2),x=i.getUint8(3),A=i.getUint8(4);let S=this.HEADER_LENGTH+4;const v=o.decode(e.slice(S,S+d));S=S+d;const T=o.decode(e.slice(S,S+m));S=S+m;const R=o.decode(e.slice(S,S+x));S=S+x;const U=e.slice(S,e.byteLength),j=A===this.JSON_ENCODING?JSON.parse(o.decode(U)):U,H={type:this.BROADCAST_EVENT,event:T,payload:j};return x>0&&(H.meta=JSON.parse(R)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:H}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e?.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(e,i){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([o])=>i.includes(o)))}}class Mp{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nn;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(nn||(nn={}));const U2=(a,e,i={})=>{var o;const d=(o=i.skipTypes)!==null&&o!==void 0?o:[];return e?Object.keys(e).reduce((m,x)=>(m[x]=v3(x,a,e,d),m),{}):{}},v3=(a,e,i,o)=>{const d=e.find(A=>A.name===a),m=d?.type,x=i[a];return m&&!o.includes(m)?Bp(m,x):_0(x)},Bp=(a,e)=>{if(a.charAt(0)==="_"){const i=a.slice(1,a.length);return _3(e,i)}switch(a){case nn.bool:return E3(e);case nn.float4:case nn.float8:case nn.int2:case nn.int4:case nn.int8:case nn.numeric:case nn.oid:return S3(e);case nn.json:case nn.jsonb:return A3(e);case nn.timestamp:return C3(e);case nn.abstime:case nn.date:case nn.daterange:case nn.int4range:case nn.int8range:case nn.money:case nn.reltime:case nn.text:case nn.time:case nn.timestamptz:case nn.timetz:case nn.tsrange:case nn.tstzrange:return _0(e);default:return _0(e)}},_0=a=>a,E3=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},S3=a=>{if(typeof a=="string"){const e=parseFloat(a);if(!Number.isNaN(e))return e}return a},A3=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch{return a}return a},_3=(a,e)=>{if(typeof a!="string")return a;const i=a.length-1,o=a[i];if(a[0]==="{"&&o==="}"){let m;const x=a.slice(1,i);try{m=JSON.parse("["+x+"]")}catch{m=x?x.split(","):[]}return m.map(A=>Bp(e,A))}return a},C3=a=>typeof a=="string"?a.replace(" ","T"):a,Lp=a=>{const e=new URL(a);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Dd{constructor(e,i,o={},d=S0){this.channel=e,this.event=i,this.payload=o,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var o;return this._hasReceived(e)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var j2;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(j2||(j2={}));class oc{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},d=>{const{onJoin:m,onLeave:x,onSync:A}=this.caller;this.joinRef=this.channel._joinRef(),this.state=oc.syncState(this.state,d,m,x),this.pendingDiffs.forEach(S=>{this.state=oc.syncDiff(this.state,S,m,x)}),this.pendingDiffs=[],A()}),this.channel._on(o.diff,{},d=>{const{onJoin:m,onLeave:x,onSync:A}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=oc.syncDiff(this.state,d,m,x),A())}),this.onJoin((d,m,x)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:m,newPresences:x})}),this.onLeave((d,m,x)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:m,leftPresences:x})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,o,d){const m=this.cloneDeep(e),x=this.transformState(i),A={},S={};return this.map(m,(v,T)=>{x[v]||(S[v]=T)}),this.map(x,(v,T)=>{const R=m[v];if(R){const U=T.map(Q=>Q.presence_ref),j=R.map(Q=>Q.presence_ref),H=T.filter(Q=>j.indexOf(Q.presence_ref)<0),q=R.filter(Q=>U.indexOf(Q.presence_ref)<0);H.length>0&&(A[v]=H),q.length>0&&(S[v]=q)}else A[v]=T}),this.syncDiff(m,{joins:A,leaves:S},o,d)}static syncDiff(e,i,o,d){const{joins:m,leaves:x}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),d||(d=()=>{}),this.map(m,(A,S)=>{var v;const T=(v=e[A])!==null&&v!==void 0?v:[];if(e[A]=this.cloneDeep(S),T.length>0){const R=e[A].map(j=>j.presence_ref),U=T.filter(j=>R.indexOf(j.presence_ref)<0);e[A].unshift(...U)}o(A,T,S)}),this.map(x,(A,S)=>{let v=e[A];if(!v)return;const T=S.map(R=>R.presence_ref);v=v.filter(R=>T.indexOf(R.presence_ref)<0),e[A]=v,d(A,v,S),v.length===0&&delete e[A]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(o=>i(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,o)=>{const d=e[o];return"metas"in d?i[o]=d.metas.map(m=>(m.presence_ref=m.phx_ref,delete m.phx_ref,delete m.phx_ref_prev,m)):i[o]=d,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var P2;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(P2||(P2={}));var lc;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(lc||(lc={}));var ua;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(ua||(ua={}));class Ho{constructor(e,i={config:{}},o){var d,m;if(this.topic=e,this.params=i,this.socket=o,this.bindings={},this.state=Gn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Dd(this,Ei.join,this.params,this.timeout),this.rejoinTimer=new Mp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Gn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(x=>x.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Gn.closed,this.socket._remove(this)}),this._onError(x=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,x),this.state=Gn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Gn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",x=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,x),this.state=Gn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ei.reply,{},(x,A)=>{this._trigger(this._replyEventName(A),x)}),this.presence=new oc(this),this.broadcastEndpointURL=Lp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((m=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||m===void 0)&&m.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var o,d,m;if(this.socket.isConnected()||this.socket.connect(),this.state==Gn.closed){const{config:{broadcast:x,presence:A,private:S}}=this.params,v=(d=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(j=>j.filter))!==null&&d!==void 0?d:[],T=!!this.bindings[lc.PRESENCE]&&this.bindings[lc.PRESENCE].length>0||((m=this.params.config.presence)===null||m===void 0?void 0:m.enabled)===!0,R={},U={broadcast:x,presence:Object.assign(Object.assign({},A),{enabled:T}),postgres_changes:v,private:S};this.socket.accessTokenValue&&(R.access_token=this.socket.accessTokenValue),this._onError(j=>e?.(ua.CHANNEL_ERROR,j)),this._onClose(()=>e?.(ua.CLOSED)),this.updateJoinPayload(Object.assign({config:U},R)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:j})=>{var H;if(this.socket._isManualToken()||this.socket.setAuth(),j===void 0){e?.(ua.SUBSCRIBED);return}else{const q=this.bindings.postgres_changes,Q=(H=q?.length)!==null&&H!==void 0?H:0,ue=[];for(let se=0;se<Q;se++){const W=q[se],{filter:{event:me,schema:Pe,table:Ae,filter:J}}=W,xe=j&&j[se];if(xe&&xe.event===me&&Ho.isFilterValueEqual(xe.schema,Pe)&&Ho.isFilterValueEqual(xe.table,Ae)&&Ho.isFilterValueEqual(xe.filter,J))ue.push(Object.assign(Object.assign({},W),{id:xe.id}));else{this.unsubscribe(),this.state=Gn.errored,e?.(ua.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ue,e&&e(ua.SUBSCRIBED);return}}).receive("error",j=>{this.state=Gn.errored,e?.(ua.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{e?.(ua.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,o){return this.state===Gn.joined&&e===lc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,i,o)}async httpSend(e,i,o={}){var d;if(i==null)return Promise.reject("Payload is required for httpSend()");const m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const x={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},A=await this._fetchWithTimeout(this.broadcastEndpointURL,x,(d=o.timeout)!==null&&d!==void 0?d:this.timeout);if(A.status===202)return{success:!0};let S=A.statusText;try{const v=await A.json();S=v.error||v.message||S}catch{}return Promise.reject(new Error(S))}async send(e,i={}){var o,d;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:m,payload:x}=e,A={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(A.Authorization=`Bearer ${this.socket.accessTokenValue}`);const S={method:"POST",headers:A,body:JSON.stringify({messages:[{topic:this.subTopic,event:m,payload:x,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,S,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((d=v.body)===null||d===void 0?void 0:d.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(m=>{var x,A,S;const v=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((S=(A=(x=this.params)===null||x===void 0?void 0:x.config)===null||A===void 0?void 0:A.broadcast)===null||S===void 0)&&S.ack)&&m("ok"),v.receive("ok",()=>m("ok")),v.receive("error",()=>m("error")),v.receive("timeout",()=>m("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Gn.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ei.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(d=>{o=new Dd(this,Ei.leave,{},e),o.receive("ok",()=>{i(),d("ok")}).receive("timeout",()=>{i(),d("timed out")}).receive("error",()=>{d("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Gn.closed,this.bindings={}}async _fetchWithTimeout(e,i,o){const d=new AbortController,m=setTimeout(()=>d.abort(),o),x=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:d.signal}));return clearTimeout(m),x}_push(e,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new Dd(this,e,i,o);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>w3){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,o){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,o){var d,m;const x=e.toLocaleLowerCase(),{close:A,error:S,leave:v,join:T}=Ei;if(o&&[A,S,v,T].indexOf(x)>=0&&o!==this._joinRef())return;let U=this._onMessage(x,i,o);if(i&&!U)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(x)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(j=>{var H,q,Q;return((H=j.filter)===null||H===void 0?void 0:H.event)==="*"||((Q=(q=j.filter)===null||q===void 0?void 0:q.event)===null||Q===void 0?void 0:Q.toLocaleLowerCase())===x}).map(j=>j.callback(U,o)):(m=this.bindings[x])===null||m===void 0||m.filter(j=>{var H,q,Q,ue,se,W,me,Pe;if(["broadcast","presence","postgres_changes"].includes(x))if("id"in j){const Ae=j.id,J=(H=j.filter)===null||H===void 0?void 0:H.event;return Ae&&((q=i.ids)===null||q===void 0?void 0:q.includes(Ae))&&(J==="*"||J?.toLocaleLowerCase()===((Q=i.data)===null||Q===void 0?void 0:Q.type.toLocaleLowerCase()))&&(!(!((ue=j.filter)===null||ue===void 0)&&ue.table)||j.filter.table===((se=i.data)===null||se===void 0?void 0:se.table))}else{const Ae=(me=(W=j?.filter)===null||W===void 0?void 0:W.event)===null||me===void 0?void 0:me.toLocaleLowerCase();return Ae==="*"||Ae===((Pe=i?.event)===null||Pe===void 0?void 0:Pe.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===x}).map(j=>{if(typeof U=="object"&&"ids"in U){const H=U.data,{schema:q,table:Q,commit_timestamp:ue,type:se,errors:W}=H;U=Object.assign(Object.assign({},{schema:q,table:Q,commit_timestamp:ue,eventType:se,new:{},old:{},errors:W}),this._getPayloadRecords(H))}j.callback(U,o)})}_isClosed(){return this.state===Gn.closed}_isJoined(){return this.state===Gn.joined}_isJoining(){return this.state===Gn.joining}_isLeaving(){return this.state===Gn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,o){const d=e.toLocaleLowerCase(),m={type:d,filter:i,callback:o};return this.bindings[d]?this.bindings[d].push(m):this.bindings[d]=[m],this}_off(e,i){const o=e.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(d=>{var m;return!(((m=d.type)===null||m===void 0?void 0:m.toLocaleLowerCase())===o&&Ho.isEqual(d.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const o in e)if(e[o]!==i[o])return!1;return!0}static isFilterValueEqual(e,i){return(e??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ei.close,{},e)}_onError(e){this._on(Ei.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Gn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=U2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=U2(e.columns,e.old_record)),i}}const Md=()=>{},Vu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},T3=[1e3,2e3,5e3,1e4],O3=1e4,N3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class R3{constructor(e,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=S0,this.transport=null,this.heartbeatIntervalMs=Vu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Md,this.ref=0,this.reconnectTimer=null,this.vsn=L2,this.logger=Md,this.conn=null,this.sendBuffer=[],this.serializer=new b3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=d=>d?(...m)=>d(...m):(...m)=>fetch(...m),!(!((o=i?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${A0.websocket}`,this.httpEndpoint=Lp(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=g3.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,o){this.logger(e,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case es.connecting:return Us.Connecting;case es.open:return Us.Open;case es.closing:return Us.Closing;default:return Us.Closed}}isConnected(){return this.connectionState()===Us.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const o=`realtime:${e}`,d=this.getChannels().find(m=>m.topic===o);if(d)return d;{const m=new Ho(`realtime:${e}`,i,this);return this.channels.push(m),m}}push(e){const{topic:i,event:o,payload:d,ref:m}=e,x=()=>{this.encode(e,A=>{var S;(S=this.conn)===null||S===void 0||S.send(A)})};this.log("push",`${i} ${o} (${m})`,d),this.isConnected()?x():this.sendBuffer.push(x)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(x3,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Vu.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",v)}catch(T){this.log("error","error in heartbeat callback",T)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:d,payload:m,ref:x}=i,A=x?`(${x})`:"",S=m.status||"";this.log("receive",`${S} ${o} ${d} ${A}`.trim(),m),this.channels.filter(v=>v._isMember(o)).forEach(v=>v._trigger(d,m,x)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===es.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===es.open||this.conn.readyState===es.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ei.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const o=e.match(/\?/)?"&":"?",d=new URLSearchParams(i);return`${e}${o}${d}`}_workerObjectUrl(e){let i;if(e)i=e;else{const o=new Blob([N3],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i,o=!1;if(e)i=e,o=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(d){this.log("error","Error fetching access token from callback",d),i=this.accessTokenValue}else i=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(d=>{const m={access_token:i,version:y3};i&&d.updateJoinPayload(m),d.joinedOnce&&d._isJoined()&&d._push(Ei.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(o=>{try{o(i)}catch(d){this.log("error",`error in ${e} callback`,d)}})}catch(o){this.log("error",`error triggering ${e} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Mp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Vu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,o,d,m,x,A,S,v,T,R,U,j;switch(this.transport=(i=e?.transport)!==null&&i!==void 0?i:null,this.timeout=(o=e?.timeout)!==null&&o!==void 0?o:S0,this.heartbeatIntervalMs=(d=e?.heartbeatIntervalMs)!==null&&d!==void 0?d:Vu.HEARTBEAT_INTERVAL,this.worker=(m=e?.worker)!==null&&m!==void 0?m:!1,this.accessToken=(x=e?.accessToken)!==null&&x!==void 0?x:null,this.heartbeatCallback=(A=e?.heartbeatCallback)!==null&&A!==void 0?A:Md,this.vsn=(S=e?.vsn)!==null&&S!==void 0?S:L2,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=e?.reconnectAfterMs)!==null&&v!==void 0?v:(H=>T3[H-1]||O3),this.vsn){case Dp:this.encode=(T=e?.encode)!==null&&T!==void 0?T:((H,q)=>q(JSON.stringify(H))),this.decode=(R=e?.decode)!==null&&R!==void 0?R:((H,q)=>q(JSON.parse(H)));break;case p3:this.encode=(U=e?.encode)!==null&&U!==void 0?U:this.serializer.encode.bind(this.serializer),this.decode=(j=e?.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var uc=class extends Error{constructor(a,e){super(a),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function I3(a,e,i){const o=new URL(e,a);if(i)for(const[d,m]of Object.entries(i))m!==void 0&&o.searchParams.set(d,m);return o.toString()}async function k3(a){return!a||a.type==="none"?{}:a.type==="bearer"?{Authorization:`Bearer ${a.token}`}:a.type==="header"?{[a.name]:a.value}:a.type==="custom"?await a.getHeaders():{}}function D3(a){const e=a.fetchImpl??globalThis.fetch;return{async request({method:i,path:o,query:d,body:m,headers:x}){const A=I3(a.baseUrl,o,d),S=await k3(a.auth),v=await e(A,{method:i,headers:{...m?{"Content-Type":"application/json"}:{},...S,...x},body:m?JSON.stringify(m):void 0}),T=await v.text(),R=(v.headers.get("content-type")||"").includes("application/json"),U=R&&T?JSON.parse(T):T;if(!v.ok){const j=R?U:void 0,H=j?.error;throw new uc(H?.message??`Request failed with status ${v.status}`,{status:v.status,icebergType:H?.type,icebergCode:H?.code,details:j})}return{status:v.status,headers:v.headers,data:U}}}}function Hu(a){return a.join("")}var M3=class{constructor(a,e=""){this.client=a,this.prefix=e}async listNamespaces(a){const e=a?{parent:Hu(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(a,e){const i={namespace:a.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Hu(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Hu(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Hu(a.namespace)}`}),!0}catch(e){if(e instanceof uc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(a,e){try{return await this.createNamespace(a,e)}catch(i){if(i instanceof uc&&i.status===409)return;throw i}}};function No(a){return a.join("")}var B3=class{constructor(a,e="",i){this.client=a,this.prefix=e,this.accessDelegation=i}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${No(a.namespace)}/tables`})).data.identifiers}async createTable(a,e){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${No(a.namespace)}/tables`,body:e,headers:i})).data.metadata}async updateTable(a,e){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${No(a.namespace)}/tables/${a.name}`,body:e});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(a,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${No(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(a){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${No(a.namespace)}/tables/${a.name}`,headers:e})).data.metadata}async tableExists(a){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${No(a.namespace)}/tables/${a.name}`,headers:e}),!0}catch(i){if(i instanceof uc&&i.status===404)return!1;throw i}}async createTableIfNotExists(a,e){try{return await this.createTable(a,e)}catch(i){if(i instanceof uc&&i.status===409)return await this.loadTable({namespace:a.namespace,name:e.name});throw i}}},L3=class{constructor(a){let e="v1";a.catalogName&&(e+=`/${a.catalogName}`);const i=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=D3({baseUrl:i,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=a.accessDelegation?.join(","),this.namespaceOps=new M3(this.client,e),this.tableOps=new B3(this.client,e,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,e){return this.namespaceOps.createNamespace(a,e)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,e){return this.tableOps.createTable(a,e)}async updateTable(a,e){return this.tableOps.updateTable(a,e)}async dropTable(a,e){await this.tableOps.dropTable(a,e)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,e){return this.namespaceOps.createNamespaceIfNotExists(a,e)}async createTableIfNotExists(a,e){return this.tableOps.createTableIfNotExists(a,e)}},vf=class extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}};function gn(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}var U3=class extends vf{constructor(a,e,i){super(a),this.name="StorageApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},C0=class extends vf{constructor(a,e){super(a),this.name="StorageUnknownError",this.originalError=e}};const e1=a=>a?(...e)=>a(...e):(...e)=>fetch(...e),j3=()=>Response,T0=a=>{if(Array.isArray(a))return a.map(i=>T0(i));if(typeof a=="function"||a!==Object(a))return a;const e={};return Object.entries(a).forEach(([i,o])=>{const d=i.replace(/([-_][a-z])/gi,m=>m.toUpperCase().replace(/[-_]/g,""));e[d]=T0(o)}),e},P3=a=>{if(typeof a!="object"||a===null)return!1;const e=Object.getPrototypeOf(a);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},F3=a=>!a||typeof a!="string"||a.length===0||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(a);function fc(a){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fc(a)}function z3(a,e){if(fc(a)!="object"||!a)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var o=i.call(a,e);if(fc(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function V3(a){var e=z3(a,"string");return fc(e)=="symbol"?e:e+""}function H3(a,e,i){return(e=V3(e))in a?Object.defineProperty(a,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[e]=i,a}function F2(a,e){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);e&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable})),i.push.apply(i,o)}return i}function Je(a){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?F2(Object(i),!0).forEach(function(o){H3(a,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):F2(Object(i)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(i,o))})}return a}const Bd=a=>{var e;return a.msg||a.message||a.error_description||(typeof a.error=="string"?a.error:(e=a.error)===null||e===void 0?void 0:e.message)||JSON.stringify(a)},G3=async(a,e,i)=>{a instanceof await j3()&&!i?.noResolveJson?a.json().then(o=>{const d=a.status||500,m=o?.statusCode||d+"";e(new U3(Bd(o),d,m))}).catch(o=>{e(new C0(Bd(o),o))}):e(new C0(Bd(a),a))},q3=(a,e,i,o)=>{const d={method:a,headers:e?.headers||{}};return a==="GET"||!o?d:(P3(o)?(d.headers=Je({"Content-Type":"application/json"},e?.headers),d.body=JSON.stringify(o)):d.body=o,e?.duplex&&(d.duplex=e.duplex),Je(Je({},d),i))};async function xc(a,e,i,o,d,m){return new Promise((x,A)=>{a(i,q3(e,o,d,m)).then(S=>{if(!S.ok)throw S;return o?.noResolveJson?S:S.json()}).then(S=>x(S)).catch(S=>G3(S,A,o))})}async function hc(a,e,i,o){return xc(a,"GET",e,i,o)}async function vi(a,e,i,o,d){return xc(a,"POST",e,o,d,i)}async function O0(a,e,i,o,d){return xc(a,"PUT",e,o,d,i)}async function W3(a,e,i,o){return xc(a,"HEAD",e,Je(Je({},i),{},{noResolveJson:!0}),o)}async function t1(a,e,i,o,d){return xc(a,"DELETE",e,o,d,i)}var Y3=class{constructor(a,e){this.downloadFn=a,this.shouldThrowOnError=e}then(a,e){return this.execute().then(a,e)}async execute(){var a=this;try{return{data:(await a.downloadFn()).body,error:null}}catch(e){if(a.shouldThrowOnError)throw e;if(gn(e))return{data:null,error:e};throw e}}};let Up;Up=Symbol.toStringTag;var X3=class{constructor(a,e){this.downloadFn=a,this.shouldThrowOnError=e,this[Up]="BlobDownloadBuilder",this.promise=null}asStream(){return new Y3(this.downloadFn,this.shouldThrowOnError)}then(a,e){return this.getPromise().then(a,e)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var a=this;try{return{data:await(await a.downloadFn()).blob(),error:null}}catch(e){if(a.shouldThrowOnError)throw e;if(gn(e))return{data:null,error:e};throw e}}};const Z3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},z2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var K3=class{constructor(a,e={},i,o){this.shouldThrowOnError=!1,this.url=a,this.headers=e,this.bucketId=i,this.fetch=e1(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(a,e,i,o){var d=this;try{let m;const x=Je(Je({},z2),o);let A=Je(Je({},d.headers),a==="POST"&&{"x-upsert":String(x.upsert)});const S=x.metadata;typeof Blob<"u"&&i instanceof Blob?(m=new FormData,m.append("cacheControl",x.cacheControl),S&&m.append("metadata",d.encodeMetadata(S)),m.append("",i)):typeof FormData<"u"&&i instanceof FormData?(m=i,m.has("cacheControl")||m.append("cacheControl",x.cacheControl),S&&!m.has("metadata")&&m.append("metadata",d.encodeMetadata(S))):(m=i,A["cache-control"]=`max-age=${x.cacheControl}`,A["content-type"]=x.contentType,S&&(A["x-metadata"]=d.toBase64(d.encodeMetadata(S))),(typeof ReadableStream<"u"&&m instanceof ReadableStream||m&&typeof m=="object"&&"pipe"in m&&typeof m.pipe=="function")&&!x.duplex&&(x.duplex="half")),o?.headers&&(A=Je(Je({},A),o.headers));const v=d._removeEmptyFolders(e),T=d._getFinalPath(v),R=await(a=="PUT"?O0:vi)(d.fetch,`${d.url}/object/${T}`,m,Je({headers:A},x?.duplex?{duplex:x.duplex}:{}));return{data:{path:v,id:R.Id,fullPath:R.Key},error:null}}catch(m){if(d.shouldThrowOnError)throw m;if(gn(m))return{data:null,error:m};throw m}}async upload(a,e,i){return this.uploadOrUpdate("POST",a,e,i)}async uploadToSignedUrl(a,e,i,o){var d=this;const m=d._removeEmptyFolders(a),x=d._getFinalPath(m),A=new URL(d.url+`/object/upload/sign/${x}`);A.searchParams.set("token",e);try{let S;const v=Je({upsert:z2.upsert},o),T=Je(Je({},d.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&i instanceof Blob?(S=new FormData,S.append("cacheControl",v.cacheControl),S.append("",i)):typeof FormData<"u"&&i instanceof FormData?(S=i,S.append("cacheControl",v.cacheControl)):(S=i,T["cache-control"]=`max-age=${v.cacheControl}`,T["content-type"]=v.contentType),{data:{path:m,fullPath:(await O0(d.fetch,A.toString(),S,{headers:T})).Key},error:null}}catch(S){if(d.shouldThrowOnError)throw S;if(gn(S))return{data:null,error:S};throw S}}async createSignedUploadUrl(a,e){var i=this;try{let o=i._getFinalPath(a);const d=Je({},i.headers);e?.upsert&&(d["x-upsert"]="true");const m=await vi(i.fetch,`${i.url}/object/upload/sign/${o}`,{},{headers:d}),x=new URL(i.url+m.url),A=x.searchParams.get("token");if(!A)throw new vf("No token returned by API");return{data:{signedUrl:x.toString(),path:a,token:A},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(gn(o))return{data:null,error:o};throw o}}async update(a,e,i){return this.uploadOrUpdate("PUT",a,e,i)}async move(a,e,i){var o=this;try{return{data:await vi(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:a,destinationKey:e,destinationBucket:i?.destinationBucket},{headers:o.headers}),error:null}}catch(d){if(o.shouldThrowOnError)throw d;if(gn(d))return{data:null,error:d};throw d}}async copy(a,e,i){var o=this;try{return{data:{path:(await vi(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:a,destinationKey:e,destinationBucket:i?.destinationBucket},{headers:o.headers})).Key},error:null}}catch(d){if(o.shouldThrowOnError)throw d;if(gn(d))return{data:null,error:d};throw d}}async createSignedUrl(a,e,i){var o=this;try{let d=o._getFinalPath(a),m=await vi(o.fetch,`${o.url}/object/sign/${d}`,Je({expiresIn:e},i?.transform?{transform:i.transform}:{}),{headers:o.headers});const x=i?.download?`&download=${i.download===!0?"":i.download}`:"";return m={signedUrl:encodeURI(`${o.url}${m.signedURL}${x}`)},{data:m,error:null}}catch(d){if(o.shouldThrowOnError)throw d;if(gn(d))return{data:null,error:d};throw d}}async createSignedUrls(a,e,i){var o=this;try{const d=await vi(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:e,paths:a},{headers:o.headers}),m=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:d.map(x=>Je(Je({},x),{},{signedUrl:x.signedURL?encodeURI(`${o.url}${x.signedURL}${m}`):null})),error:null}}catch(d){if(o.shouldThrowOnError)throw d;if(gn(d))return{data:null,error:d};throw d}}download(a,e){const i=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),d=o?`?${o}`:"",m=this._getFinalPath(a),x=()=>hc(this.fetch,`${this.url}/${i}/${m}${d}`,{headers:this.headers,noResolveJson:!0});return new X3(x,this.shouldThrowOnError)}async info(a){var e=this;const i=e._getFinalPath(a);try{return{data:T0(await hc(e.fetch,`${e.url}/object/info/${i}`,{headers:e.headers})),error:null}}catch(o){if(e.shouldThrowOnError)throw o;if(gn(o))return{data:null,error:o};throw o}}async exists(a){var e=this;const i=e._getFinalPath(a);try{return await W3(e.fetch,`${e.url}/object/${i}`,{headers:e.headers}),{data:!0,error:null}}catch(o){if(e.shouldThrowOnError)throw o;if(gn(o)&&o instanceof C0){const d=o.originalError;if([400,404].includes(d?.status))return{data:!1,error:o}}throw o}}getPublicUrl(a,e){const i=this._getFinalPath(a),o=[],d=e?.download?`download=${e.download===!0?"":e.download}`:"";d!==""&&o.push(d);const m=typeof e?.transform<"u"?"render/image":"object",x=this.transformOptsToQueryString(e?.transform||{});x!==""&&o.push(x);let A=o.join("&");return A!==""&&(A=`?${A}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${i}${A}`)}}}async remove(a){var e=this;try{return{data:await t1(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:a},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}async list(a,e,i){var o=this;try{const d=Je(Je(Je({},Z3),e),{},{prefix:a||""});return{data:await vi(o.fetch,`${o.url}/object/list/${o.bucketId}`,d,{headers:o.headers},i),error:null}}catch(d){if(o.shouldThrowOnError)throw d;if(gn(d))return{data:null,error:d};throw d}}async listV2(a,e){var i=this;try{const o=Je({},a);return{data:await vi(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,o,{headers:i.headers},e),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(gn(o))return{data:null,error:o};throw o}}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const e=[];return a.width&&e.push(`width=${a.width}`),a.height&&e.push(`height=${a.height}`),a.resize&&e.push(`resize=${a.resize}`),a.format&&e.push(`format=${a.format}`),a.quality&&e.push(`quality=${a.quality}`),e.join("&")}};const jp="2.90.1",Pp={"X-Client-Info":`storage-js/${jp}`};var Q3=class{constructor(a,e={},i,o){this.shouldThrowOnError=!1;const d=new URL(a);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=Je(Je({},Pp),e),this.fetch=e1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(a){var e=this;try{const i=e.listBucketOptionsToQueryString(a);return{data:await hc(e.fetch,`${e.url}/bucket${i}`,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}async getBucket(a){var e=this;try{return{data:await hc(e.fetch,`${e.url}/bucket/${a}`,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}async createBucket(a,e={public:!1}){var i=this;try{return{data:await vi(i.fetch,`${i.url}/bucket`,{id:a,name:a,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(gn(o))return{data:null,error:o};throw o}}async updateBucket(a,e){var i=this;try{return{data:await O0(i.fetch,`${i.url}/bucket/${a}`,{id:a,name:a,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(gn(o))return{data:null,error:o};throw o}}async emptyBucket(a){var e=this;try{return{data:await vi(e.fetch,`${e.url}/bucket/${a}/empty`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}async deleteBucket(a){var e=this;try{return{data:await t1(e.fetch,`${e.url}/bucket/${a}`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}listBucketOptionsToQueryString(a){const e={};return a&&("limit"in a&&(e.limit=String(a.limit)),"offset"in a&&(e.offset=String(a.offset)),a.search&&(e.search=a.search),a.sortColumn&&(e.sortColumn=a.sortColumn),a.sortOrder&&(e.sortOrder=a.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},J3=class{constructor(a,e={},i){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Je(Je({},Pp),e),this.fetch=e1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){var e=this;try{return{data:await vi(e.fetch,`${e.url}/bucket`,{name:a},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}async listBuckets(a){var e=this;try{const i=new URLSearchParams;a?.limit!==void 0&&i.set("limit",a.limit.toString()),a?.offset!==void 0&&i.set("offset",a.offset.toString()),a?.sortColumn&&i.set("sortColumn",a.sortColumn),a?.sortOrder&&i.set("sortOrder",a.sortOrder),a?.search&&i.set("search",a.search);const o=i.toString(),d=o?`${e.url}/bucket?${o}`:`${e.url}/bucket`;return{data:await hc(e.fetch,d,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}async deleteBucket(a){var e=this;try{return{data:await t1(e.fetch,`${e.url}/bucket/${a}`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}from(a){var e=this;if(!F3(a))throw new vf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new L3({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(i,{get(d,m){const x=d[m];return typeof x!="function"?x:async(...A)=>{try{return{data:await x.apply(d,A),error:null}}catch(S){if(o)throw S;return{data:null,error:S}}}}})}};const n1={"X-Client-Info":`storage-js/${jp}`,"Content-Type":"application/json"};var Fp=class extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Vr(a){return typeof a=="object"&&a!==null&&"__isStorageVectorsError"in a}var Ld=class extends Fp{constructor(a,e,i){super(a),this.name="StorageVectorsApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},$3=class extends Fp{constructor(a,e){super(a),this.name="StorageVectorsUnknownError",this.originalError=e}};const r1=a=>a?(...e)=>a(...e):(...e)=>fetch(...e),eE=a=>{if(typeof a!="object"||a===null)return!1;const e=Object.getPrototypeOf(a);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},V2=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),tE=async(a,e,i)=>{if(a&&typeof a=="object"&&"status"in a&&"ok"in a&&typeof a.status=="number"&&!i?.noResolveJson){const o=a.status||500,d=a;if(typeof d.json=="function")d.json().then(m=>{const x=m?.statusCode||m?.code||o+"";e(new Ld(V2(m),o,x))}).catch(()=>{const m=o+"";e(new Ld(d.statusText||`HTTP ${o} error`,o,m))});else{const m=o+"";e(new Ld(d.statusText||`HTTP ${o} error`,o,m))}}else e(new $3(V2(a),a))},nE=(a,e,i,o)=>{const d={method:a,headers:e?.headers||{}};return o?(eE(o)?(d.headers=Je({"Content-Type":"application/json"},e?.headers),d.body=JSON.stringify(o)):d.body=o,Je(Je({},d),i)):d};async function rE(a,e,i,o,d,m){return new Promise((x,A)=>{a(i,nE(e,o,d,m)).then(S=>{if(!S.ok)throw S;if(o?.noResolveJson)return S;const v=S.headers.get("content-type");return!v||!v.includes("application/json")?{}:S.json()}).then(S=>x(S)).catch(S=>tE(S,A,o))})}async function Hr(a,e,i,o,d){return rE(a,"POST",e,o,d,i)}var iE=class{constructor(a,e={},i){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Je(Je({},n1),e),this.fetch=r1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(a){var e=this;try{return{data:await Hr(e.fetch,`${e.url}/CreateIndex`,a,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vr(i))return{data:null,error:i};throw i}}async getIndex(a,e){var i=this;try{return{data:await Hr(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:a,indexName:e},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Vr(o))return{data:null,error:o};throw o}}async listIndexes(a){var e=this;try{return{data:await Hr(e.fetch,`${e.url}/ListIndexes`,a,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vr(i))return{data:null,error:i};throw i}}async deleteIndex(a,e){var i=this;try{return{data:await Hr(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:a,indexName:e},{headers:i.headers})||{},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Vr(o))return{data:null,error:o};throw o}}},aE=class{constructor(a,e={},i){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Je(Je({},n1),e),this.fetch=r1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(a){var e=this;try{if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Hr(e.fetch,`${e.url}/PutVectors`,a,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vr(i))return{data:null,error:i};throw i}}async getVectors(a){var e=this;try{return{data:await Hr(e.fetch,`${e.url}/GetVectors`,a,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vr(i))return{data:null,error:i};throw i}}async listVectors(a){var e=this;try{if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:await Hr(e.fetch,`${e.url}/ListVectors`,a,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vr(i))return{data:null,error:i};throw i}}async queryVectors(a){var e=this;try{return{data:await Hr(e.fetch,`${e.url}/QueryVectors`,a,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vr(i))return{data:null,error:i};throw i}}async deleteVectors(a){var e=this;try{if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Hr(e.fetch,`${e.url}/DeleteVectors`,a,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vr(i))return{data:null,error:i};throw i}}},sE=class{constructor(a,e={},i){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Je(Je({},n1),e),this.fetch=r1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){var e=this;try{return{data:await Hr(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vr(i))return{data:null,error:i};throw i}}async getBucket(a){var e=this;try{return{data:await Hr(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:a},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vr(i))return{data:null,error:i};throw i}}async listBuckets(a={}){var e=this;try{return{data:await Hr(e.fetch,`${e.url}/ListVectorBuckets`,a,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vr(i))return{data:null,error:i};throw i}}async deleteBucket(a){var e=this;try{return{data:await Hr(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Vr(i))return{data:null,error:i};throw i}}},oE=class extends sE{constructor(a,e={}){super(a,e.headers||{},e.fetch)}from(a){return new lE(this.url,this.headers,a,this.fetch)}async createBucket(a){var e=()=>super.createBucket,i=this;return e().call(i,a)}async getBucket(a){var e=()=>super.getBucket,i=this;return e().call(i,a)}async listBuckets(a={}){var e=()=>super.listBuckets,i=this;return e().call(i,a)}async deleteBucket(a){var e=()=>super.deleteBucket,i=this;return e().call(i,a)}},lE=class extends iE{constructor(a,e,i,o){super(a,e,o),this.vectorBucketName=i}async createIndex(a){var e=()=>super.createIndex,i=this;return e().call(i,Je(Je({},a),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(a={}){var e=()=>super.listIndexes,i=this;return e().call(i,Je(Je({},a),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(a){var e=()=>super.getIndex,i=this;return e().call(i,i.vectorBucketName,a)}async deleteIndex(a){var e=()=>super.deleteIndex,i=this;return e().call(i,i.vectorBucketName,a)}index(a){return new cE(this.url,this.headers,this.vectorBucketName,a,this.fetch)}},cE=class extends aE{constructor(a,e,i,o,d){super(a,e,d),this.vectorBucketName=i,this.indexName=o}async putVectors(a){var e=()=>super.putVectors,i=this;return e().call(i,Je(Je({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(a){var e=()=>super.getVectors,i=this;return e().call(i,Je(Je({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(a={}){var e=()=>super.listVectors,i=this;return e().call(i,Je(Je({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(a){var e=()=>super.queryVectors,i=this;return e().call(i,Je(Je({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(a){var e=()=>super.deleteVectors,i=this;return e().call(i,Je(Je({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},uE=class extends Q3{constructor(a,e={},i,o){super(a,e,i,o)}from(a){return new K3(this.url,this.headers,a,this.fetch)}get vectors(){return new oE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new J3(this.url+"/iceberg",this.headers,this.fetch)}};const zp="2.90.1",zo=30*1e3,N0=3,Ud=N0*zo,fE="http://localhost:9999",hE="supabase.auth.token",dE={"X-Client-Info":`gotrue-js/${zp}`},R0="X-Supabase-Api-Version",Vp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},gE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,mE=600*1e3;class dc extends Error{constructor(e,i,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function ze(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class yE extends dc{constructor(e,i,o){super(e,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function pE(a){return ze(a)&&a.name==="AuthApiError"}class js extends dc{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class da extends dc{constructor(e,i,o,d){super(e,o,d),this.name=i,this.status=o}}class Fr extends da{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xE(a){return ze(a)&&a.name==="AuthSessionMissingError"}class Ro extends da{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gu extends da{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qu extends da{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function wE(a){return ze(a)&&a.name==="AuthImplicitGrantRedirectError"}class H2 extends da{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bE extends da{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class I0 extends da{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function jd(a){return ze(a)&&a.name==="AuthRetryableFetchError"}class G2 extends da{constructor(e,i,o){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class k0 extends da{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const of="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),q2=` 	
\r=`.split(""),vE=(()=>{const a=new Array(128);for(let e=0;e<a.length;e+=1)a[e]=-1;for(let e=0;e<q2.length;e+=1)a[q2[e].charCodeAt(0)]=-2;for(let e=0;e<of.length;e+=1)a[of[e].charCodeAt(0)]=e;return a})();function W2(a,e,i){if(a!==null)for(e.queue=e.queue<<8|a,e.queuedBits+=8;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;i(of[o]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;i(of[o]),e.queuedBits-=6}}function Hp(a,e,i){const o=vE[a];if(o>-1)for(e.queue=e.queue<<6|o,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function Y2(a){const e=[],i=x=>{e.push(String.fromCodePoint(x))},o={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},m=x=>{AE(x,o,i)};for(let x=0;x<a.length;x+=1)Hp(a.charCodeAt(x),d,m);return e.join("")}function EE(a,e){if(a<=127){e(a);return}else if(a<=2047){e(192|a>>6),e(128|a&63);return}else if(a<=65535){e(224|a>>12),e(128|a>>6&63),e(128|a&63);return}else if(a<=1114111){e(240|a>>18),e(128|a>>12&63),e(128|a>>6&63),e(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function SE(a,e){for(let i=0;i<a.length;i+=1){let o=a.charCodeAt(i);if(o>55295&&o<=56319){const d=(o-55296)*1024&65535;o=(a.charCodeAt(i+1)-56320&65535|d)+65536,i+=1}EE(o,e)}}function AE(a,e,i){if(e.utf8seq===0){if(a<=127){i(a);return}for(let o=1;o<6;o+=1)if((a>>7-o&1)===0){e.utf8seq=o;break}if(e.utf8seq===2)e.codepoint=a&31;else if(e.utf8seq===3)e.codepoint=a&15;else if(e.utf8seq===4)e.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|a&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function Wo(a){const e=[],i={queue:0,queuedBits:0},o=d=>{e.push(d)};for(let d=0;d<a.length;d+=1)Hp(a.charCodeAt(d),i,o);return new Uint8Array(e)}function _E(a){const e=[];return SE(a,i=>e.push(i)),new Uint8Array(e)}function Ps(a){const e=[],i={queue:0,queuedBits:0},o=d=>{e.push(d)};return a.forEach(d=>W2(d,i,o)),W2(null,i,o),e.join("")}function CE(a){return Math.round(Date.now()/1e3)+a}function TE(){return Symbol("auth-callback")}const tr=()=>typeof window<"u"&&typeof document<"u",Rs={tested:!1,writable:!1},Gp=()=>{if(!tr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rs.tested)return Rs.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),Rs.tested=!0,Rs.writable=!0}catch{Rs.tested=!0,Rs.writable=!1}return Rs.writable};function OE(a){const e={},i=new URL(a);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((d,m)=>{e[m]=d})}catch{}return i.searchParams.forEach((o,d)=>{e[d]=o}),e}const qp=a=>a?(...e)=>a(...e):(...e)=>fetch(...e),NE=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",Vo=async(a,e,i)=>{await a.setItem(e,JSON.stringify(i))},Is=async(a,e)=>{const i=await a.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},er=async(a,e)=>{await a.removeItem(e)};class Ef{constructor(){this.promise=new Ef.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}Ef.promiseConstructor=Promise;function Pd(a){const e=a.split(".");if(e.length!==3)throw new k0("Invalid JWT structure");for(let o=0;o<e.length;o++)if(!gE.test(e[o]))throw new k0("JWT not in base64url format");return{header:JSON.parse(Y2(e[0])),payload:JSON.parse(Y2(e[1])),signature:Wo(e[2]),raw:{header:e[0],payload:e[1]}}}async function RE(a){return await new Promise(e=>{setTimeout(()=>e(null),a)})}function IE(a,e){return new Promise((o,d)=>{(async()=>{for(let m=0;m<1/0;m++)try{const x=await a(m);if(!e(m,null,x)){o(x);return}}catch(x){if(!e(m,x)){d(x);return}}})()})}function kE(a){return("0"+a.toString(16)).substr(-2)}function DE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let d="";for(let m=0;m<56;m++)d+=i.charAt(Math.floor(Math.random()*o));return d}return crypto.getRandomValues(e),Array.from(e,kE).join("")}async function ME(a){const i=new TextEncoder().encode(a),o=await crypto.subtle.digest("SHA-256",i),d=new Uint8Array(o);return Array.from(d).map(m=>String.fromCharCode(m)).join("")}async function BE(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const i=await ME(a);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Io(a,e,i=!1){const o=DE();let d=o;i&&(d+="/PASSWORD_RECOVERY"),await Vo(a,`${e}-code-verifier`,d);const m=await BE(o);return[m,o===m?"plain":"s256"]}const LE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function UE(a){const e=a.headers.get(R0);if(!e||!e.match(LE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function jE(a){if(!a)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(a<=e)throw new Error("JWT has expired")}function PE(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const FE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ko(a){if(!FE.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Fd(){const a={};return new Proxy(a,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function zE(a,e){return new Proxy(a,{get:(i,o,d)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const m=o.toString();if(m==="Symbol(Symbol.toPrimitive)"||m==="Symbol(Symbol.toStringTag)"||m==="Symbol(util.inspect.custom)"||m==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,o,d)}return!e.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,o,d)}})}function X2(a){return JSON.parse(JSON.stringify(a))}const Bs=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),VE=[502,503,504];async function Z2(a){var e;if(!NE(a))throw new I0(Bs(a),0);if(VE.includes(a.status))throw new I0(Bs(a),a.status);let i;try{i=await a.json()}catch(m){throw new js(Bs(m),m)}let o;const d=UE(a);if(d&&d.getTime()>=Vp["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new G2(Bs(i),a.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new Fr}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((m,x)=>m&&typeof x=="string",!0))throw new G2(Bs(i),a.status,i.weak_password.reasons);throw new yE(Bs(i),a.status||500,o)}const HE=(a,e,i,o)=>{const d={method:a,headers:e?.headers||{}};return a==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),d.body=JSON.stringify(o),Object.assign(Object.assign({},d),i))};async function Qe(a,e,i,o){var d;const m=Object.assign({},o?.headers);m[R0]||(m[R0]=Vp["2024-01-01"].name),o?.jwt&&(m.Authorization=`Bearer ${o.jwt}`);const x=(d=o?.query)!==null&&d!==void 0?d:{};o?.redirectTo&&(x.redirect_to=o.redirectTo);const A=Object.keys(x).length?"?"+new URLSearchParams(x).toString():"",S=await GE(a,e,i+A,{headers:m,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(S):{data:Object.assign({},S),error:null}}async function GE(a,e,i,o,d,m){const x=HE(e,o,d,m);let A;try{A=await a(i,Object.assign({},x))}catch(S){throw console.error(S),new I0(Bs(S),0)}if(A.ok||await Z2(A),o?.noResolveJson)return A;try{return await A.json()}catch(S){await Z2(S)}}function bi(a){var e;let i=null;YE(a)&&(i=Object.assign({},a),a.expires_at||(i.expires_at=CE(a.expires_in)));const o=(e=a.user)!==null&&e!==void 0?e:a;return{data:{session:i,user:o},error:null}}function K2(a){const e=bi(a);return!e.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(e.data.weak_password=a.weak_password),e}function ns(a){var e;return{data:{user:(e=a.user)!==null&&e!==void 0?e:a},error:null}}function qE(a){return{data:a,error:null}}function WE(a){const{action_link:e,email_otp:i,hashed_token:o,redirect_to:d,verification_type:m}=a,x=bf(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),A={action_link:e,email_otp:i,hashed_token:o,redirect_to:d,verification_type:m},S=Object.assign({},x);return{data:{properties:A,user:S},error:null}}function Q2(a){return a}function YE(a){return a.access_token&&a.refresh_token&&a.expires_in}const zd=["global","local","others"];class XE{constructor({url:e="",headers:i={},fetch:o}){this.url=e,this.headers=i,this.fetch=qp(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=zd[0]){if(zd.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zd.join(", ")}`);try{return await Qe(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if(ze(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,i={}){try{return await Qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:ns})}catch(o){if(ze(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:i}=e,o=bf(e,["options"]),d=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(d.new_email=o?.newEmail,delete d.newEmail),await Qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:WE,redirectTo:i?.redirectTo})}catch(i){if(ze(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await Qe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ns})}catch(i){if(ze(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,o,d,m,x,A,S;try{const v={nextPage:null,lastPage:0,total:0},T=await Qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=e?.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(m=(d=e?.perPage)===null||d===void 0?void 0:d.toString())!==null&&m!==void 0?m:""},xform:Q2});if(T.error)throw T.error;const R=await T.json(),U=(x=T.headers.get("x-total-count"))!==null&&x!==void 0?x:0,j=(S=(A=T.headers.get("link"))===null||A===void 0?void 0:A.split(","))!==null&&S!==void 0?S:[];return j.length>0&&(j.forEach(H=>{const q=parseInt(H.split(";")[0].split("=")[1].substring(0,1)),Q=JSON.parse(H.split(";")[1].split("=")[1]);v[`${Q}Page`]=q}),v.total=parseInt(U)),{data:Object.assign(Object.assign({},R),v),error:null}}catch(v){if(ze(v))return{data:{users:[]},error:v};throw v}}async getUserById(e){ko(e);try{return await Qe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ns})}catch(i){if(ze(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){ko(e);try{return await Qe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:ns})}catch(o){if(ze(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,i=!1){ko(e);try{return await Qe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:ns})}catch(o){if(ze(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){ko(e.userId);try{const{data:i,error:o}=await Qe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:i,error:o}}catch(i){if(ze(i))return{data:null,error:i};throw i}}async _deleteFactor(e){ko(e.userId),ko(e.id);try{return{data:await Qe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(ze(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,o,d,m,x,A,S;try{const v={nextPage:null,lastPage:0,total:0},T=await Qe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=e?.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(m=(d=e?.perPage)===null||d===void 0?void 0:d.toString())!==null&&m!==void 0?m:""},xform:Q2});if(T.error)throw T.error;const R=await T.json(),U=(x=T.headers.get("x-total-count"))!==null&&x!==void 0?x:0,j=(S=(A=T.headers.get("link"))===null||A===void 0?void 0:A.split(","))!==null&&S!==void 0?S:[];return j.length>0&&(j.forEach(H=>{const q=parseInt(H.split(";")[0].split("=")[1].substring(0,1)),Q=JSON.parse(H.split(";")[1].split("=")[1]);v[`${Q}Page`]=q}),v.total=parseInt(U)),{data:Object.assign(Object.assign({},R),v),error:null}}catch(v){if(ze(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(e){try{return await Qe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ze(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await Qe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ze(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await Qe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(ze(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(e){try{return await Qe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ze(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await Qe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ze(i))return{data:null,error:i};throw i}}}function J2(a={}){return{getItem:e=>a[e]||null,setItem:(e,i)=>{a[e]=i},removeItem:e=>{delete a[e]}}}const Do={debug:!!(globalThis&&Gp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Wp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ZE extends Wp{}async function KE(a,e,i){Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),Do.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async d=>{if(d){Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,d.name);try{return await i()}finally{Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,d.name)}}else{if(e===0)throw Do.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new ZE(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(Do.debug)try{const m=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(m,null,"  "))}catch(m){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",m)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function QE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Yp(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw new Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}function JE(a){return parseInt(a,16)}function $E(a){const e=new TextEncoder().encode(a);return"0x"+Array.from(e,o=>o.toString(16).padStart(2,"0")).join("")}function eS(a){var e;const{chainId:i,domain:o,expirationTime:d,issuedAt:m=new Date,nonce:x,notBefore:A,requestId:S,resources:v,scheme:T,uri:R,version:U}=a;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(x&&x.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${x}`);if(!R)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(U!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${U}`);if(!((e=a.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`)}const j=Yp(a.address),H=T?`${T}://${o}`:o,q=a.statement?`${a.statement}
`:"",Q=`${H} wants you to sign in with your Ethereum account:
${j}

${q}`;let ue=`URI: ${R}
Version: ${U}
Chain ID: ${i}${x?`
Nonce: ${x}`:""}
Issued At: ${m.toISOString()}`;if(d&&(ue+=`
Expiration Time: ${d.toISOString()}`),A&&(ue+=`
Not Before: ${A.toISOString()}`),S&&(ue+=`
Request ID: ${S}`),v){let se=`
Resources:`;for(const W of v){if(!W||typeof W!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${W}`);se+=`
- ${W}`}ue+=se}return`${Q}
${ue}`}class Ln extends Error{constructor({message:e,code:i,cause:o,name:d}){var m;super(e,{cause:o}),this.__isWebAuthnError=!0,this.name=(m=d??(o instanceof Error?o.name:void 0))!==null&&m!==void 0?m:"Unknown Error",this.code=i}}class lf extends Ln{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function tS({error:a,options:e}){var i,o,d;const{publicKey:m}=e;if(!m)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ln({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if(a.name==="ConstraintError"){if(((i=m.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new Ln({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});if(e.mediation==="conditional"&&((o=m.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Ln({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});if(((d=m.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new Ln({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else{if(a.name==="InvalidStateError")return new Ln({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});if(a.name==="NotAllowedError")return new Ln({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="NotSupportedError")return m.pubKeyCredParams.filter(A=>A.type==="public-key").length===0?new Ln({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}):new Ln({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});if(a.name==="SecurityError"){const x=window.location.hostname;if(Xp(x)){if(m.rp.id!==x)return new Ln({message:`The RP ID "${m.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new Ln({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="TypeError"){if(m.user.id.byteLength<1||m.user.id.byteLength>64)return new Ln({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if(a.name==="UnknownError")return new Ln({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new Ln({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}function nS({error:a,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ln({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else{if(a.name==="NotAllowedError")return new Ln({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="SecurityError"){const o=window.location.hostname;if(Xp(o)){if(i.rpId!==o)return new Ln({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new Ln({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="UnknownError")return new Ln({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new Ln({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}class rS{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const iS=new rS;function aS(a){if(!a)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(a);const{challenge:e,user:i,excludeCredentials:o}=a,d=bf(a,["challenge","user","excludeCredentials"]),m=Wo(e).buffer,x=Object.assign(Object.assign({},i),{id:Wo(i.id).buffer}),A=Object.assign(Object.assign({},d),{challenge:m,user:x});if(o&&o.length>0){A.excludeCredentials=new Array(o.length);for(let S=0;S<o.length;S++){const v=o[S];A.excludeCredentials[S]=Object.assign(Object.assign({},v),{id:Wo(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return A}function sS(a){if(!a)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(a);const{challenge:e,allowCredentials:i}=a,o=bf(a,["challenge","allowCredentials"]),d=Wo(e).buffer,m=Object.assign(Object.assign({},o),{challenge:d});if(i&&i.length>0){m.allowCredentials=new Array(i.length);for(let x=0;x<i.length;x++){const A=i[x];m.allowCredentials[x]=Object.assign(Object.assign({},A),{id:Wo(A.id).buffer,type:A.type||"public-key",transports:A.transports})}}return m}function oS(a){var e;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const i=a;return{id:a.id,rawId:a.id,response:{attestationObject:Ps(new Uint8Array(a.response.attestationObject)),clientDataJSON:Ps(new Uint8Array(a.response.clientDataJSON))},type:"public-key",clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function lS(a){var e;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const i=a,o=a.getClientExtensionResults(),d=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:Ps(new Uint8Array(d.authenticatorData)),clientDataJSON:Ps(new Uint8Array(d.clientDataJSON)),signature:Ps(new Uint8Array(d.signature)),userHandle:d.userHandle?Ps(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Xp(a){return a==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function $2(){var a,e;return!!(tr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function cS(a){try{const e=await navigator.credentials.create(a);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lf("Browser returned unexpected credential type",e)}:{data:null,error:new lf("Empty credential response",e)}}catch(e){return{data:null,error:tS({error:e,options:a})}}}async function uS(a){try{const e=await navigator.credentials.get(a);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lf("Browser returned unexpected credential type",e)}:{data:null,error:new lf("Empty credential response",e)}}catch(e){return{data:null,error:nS({error:e,options:a})}}}const fS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},hS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function cf(...a){const e=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),i=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),o={};for(const d of a)if(d)for(const m in d){const x=d[m];if(x!==void 0)if(Array.isArray(x))o[m]=x;else if(i(x))o[m]=x;else if(e(x)){const A=o[m];e(A)?o[m]=cf(A,x):o[m]=cf(x)}else o[m]=x}return o}function dS(a,e){return cf(fS,a,e||{})}function gS(a,e){return cf(hS,a,e||{})}class mS{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:o,signal:d},m){try{const{data:x,error:A}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!x)return{data:null,error:A};const S=d??iS.createNewAbortSignal();if(x.webauthn.type==="create"){const{user:v}=x.webauthn.credential_options.publicKey;v.name||(v.name=`${v.id}:${o}`),v.displayName||(v.displayName=v.name)}switch(x.webauthn.type){case"create":{const v=dS(x.webauthn.credential_options.publicKey,m?.create),{data:T,error:R}=await cS({publicKey:v,signal:S});return T?{data:{factorId:e,challengeId:x.id,webauthn:{type:x.webauthn.type,credential_response:T}},error:null}:{data:null,error:R}}case"request":{const v=gS(x.webauthn.credential_options.publicKey,m?.request),{data:T,error:R}=await uS(Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:v,signal:S}));return T?{data:{factorId:e,challengeId:x.id,webauthn:{type:x.webauthn.type,credential_response:T}},error:null}:{data:null,error:R}}}}catch(x){return ze(x)?{data:null,error:x}:{data:null,error:new js("Unexpected error in challenge",x)}}}async _verify({challengeId:e,factorId:i,webauthn:o}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:o})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},m){if(!i)return{data:null,error:new dc("rpId is required for WebAuthn authentication")};try{if(!$2())return{data:null,error:new js("Browser does not support WebAuthn",null)};const{data:x,error:A}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:o},signal:d},{request:m});if(!x)return{data:null,error:A};const{webauthn:S}=x;return this._verify({factorId:e,challengeId:x.challengeId,webauthn:{type:S.type,rpId:i,rpOrigins:o,credential_response:S.credential_response}})}catch(x){return ze(x)?{data:null,error:x}:{data:null,error:new js("Unexpected error in authenticate",x)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},m){if(!i)return{data:null,error:new dc("rpId is required for WebAuthn registration")};try{if(!$2())return{data:null,error:new js("Browser does not support WebAuthn",null)};const{data:x,error:A}=await this._enroll({friendlyName:e});if(!x)return await this.client.mfa.listFactors().then(T=>{var R;return(R=T.data)===null||R===void 0?void 0:R.all.find(U=>U.factor_type==="webauthn"&&U.friendly_name===e&&U.status!=="unverified")}).then(T=>T?this.client.mfa.unenroll({factorId:T?.id}):void 0),{data:null,error:A};const{data:S,error:v}=await this._challenge({factorId:x.id,friendlyName:x.friendly_name,webauthn:{rpId:i,rpOrigins:o},signal:d},{create:m});return S?this._verify({factorId:x.id,challengeId:S.challengeId,webauthn:{rpId:i,rpOrigins:o,type:S.webauthn.type,credential_response:S.webauthn.credential_response}}):{data:null,error:v}}catch(x){return ze(x)?{data:null,error:x}:{data:null,error:new js("Unexpected error in register",x)}}}}QE();const yS={url:fE,storageKey:hE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function ey(a,e,i){return await i()}const Mo={};class gc{get jwks(){var e,i;return(i=(e=Mo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){Mo[this.storageKey]=Object.assign(Object.assign({},Mo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=Mo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Mo[this.storageKey]=Object.assign(Object.assign({},Mo[this.storageKey]),{cachedAt:e})}constructor(e){var i,o,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const m=Object.assign(Object.assign({},yS),e);if(this.storageKey=m.storageKey,this.instanceID=(i=gc.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,gc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!m.debug,typeof m.debug=="function"&&(this.logger=m.debug),this.instanceID>0&&tr()){const x=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(x),this.logDebugMessages&&console.trace(x)}if(this.persistSession=m.persistSession,this.autoRefreshToken=m.autoRefreshToken,this.admin=new XE({url:m.url,headers:m.headers,fetch:m.fetch}),this.url=m.url,this.headers=m.headers,this.fetch=qp(m.fetch),this.lock=m.lock||ey,this.detectSessionInUrl=m.detectSessionInUrl,this.flowType=m.flowType,this.hasCustomAuthorizationHeader=m.hasCustomAuthorizationHeader,this.throwOnError=m.throwOnError,this.lockAcquireTimeout=m.lockAcquireTimeout,m.lock?this.lock=m.lock:this.persistSession&&tr()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=KE:this.lock=ey,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new mS(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(m.storage?this.storage=m.storage:Gp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=J2(this.memoryStorage)),m.userStorage&&(this.userStorage=m.userStorage)):(this.memoryStorage={},this.storage=J2(this.memoryStorage)),tr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(x){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",x)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async x=>{this._debug("received broadcast notification from other tab or client",x),await this._notifyAllSubscribers(x.data.event,x.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${zp}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},o="none";if(tr()&&(i=OE(window.location.href),this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce")),tr()&&this.detectSessionInUrl&&o!=="none"){const{data:d,error:m}=await this._getSessionFromURL(i,o);if(m){if(this._debug("#_initialize()","error detecting session from URL",m),wE(m)){const S=(e=m.details)===null||e===void 0?void 0:e.code;if(S==="identity_already_exists"||S==="identity_not_found"||S==="single_identity_not_deletable")return{error:m}}return{error:m}}const{session:x,redirectType:A}=d;return this._debug("#_initialize()","detected session in URL",x,"redirect type",A),await this._saveSession(x),setTimeout(async()=>{A==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",x):await this._notifyAllSubscribers("SIGNED_IN",x)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return ze(i)?this._returnResult({error:i}):this._returnResult({error:new js("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,o,d;try{const m=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=e?.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(d=e?.options)===null||d===void 0?void 0:d.captchaToken}},xform:bi}),{data:x,error:A}=m;if(A||!x)return this._returnResult({data:{user:null,session:null},error:A});const S=x.session,v=x.user;return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",S)),this._returnResult({data:{user:v,session:S},error:null})}catch(m){if(ze(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signUp(e){var i,o,d;try{let m;if("email"in e){const{email:T,password:R,options:U}=e;let j=null,H=null;this.flowType==="pkce"&&([j,H]=await Io(this.storage,this.storageKey)),m=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:U?.emailRedirectTo,body:{email:T,password:R,data:(i=U?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:U?.captchaToken},code_challenge:j,code_challenge_method:H},xform:bi})}else if("phone"in e){const{phone:T,password:R,options:U}=e;m=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:T,password:R,data:(o=U?.data)!==null&&o!==void 0?o:{},channel:(d=U?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:U?.captchaToken}},xform:bi})}else throw new Gu("You must provide either an email or phone number and a password");const{data:x,error:A}=m;if(A||!x)return await er(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:A});const S=x.session,v=x.user;return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",S)),this._returnResult({data:{user:v,session:S},error:null})}catch(m){if(await er(this.storage,`${this.storageKey}-code-verifier`),ze(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithPassword(e){try{let i;if("email"in e){const{email:m,password:x,options:A}=e;i=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:m,password:x,gotrue_meta_security:{captcha_token:A?.captchaToken}},xform:K2})}else if("phone"in e){const{phone:m,password:x,options:A}=e;i=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:m,password:x,gotrue_meta_security:{captcha_token:A?.captchaToken}},xform:K2})}else throw new Gu("You must provide either an email or phone number and a password");const{data:o,error:d}=i;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!o||!o.session||!o.user){const m=new Ro;return this._returnResult({data:{user:null,session:null},error:m})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:d})}catch(i){if(ze(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,o,d,m;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(m=e.options)===null||m===void 0?void 0:m.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,o,d,m,x,A,S,v,T,R,U;let j,H;if("message"in e)j=e.message,H=e.signature;else{const{chain:q,wallet:Q,statement:ue,options:se}=e;let W;if(tr())if(typeof Q=="object")W=Q;else{const fe=window;if("ethereum"in fe&&typeof fe.ethereum=="object"&&"request"in fe.ethereum&&typeof fe.ethereum.request=="function")W=fe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof Q!="object"||!se?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=Q}const me=new URL((i=se?.url)!==null&&i!==void 0?i:window.location.href),Pe=await W.request({method:"eth_requestAccounts"}).then(fe=>fe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Pe||Pe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Ae=Yp(Pe[0]);let J=(o=se?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!J){const fe=await W.request({method:"eth_chainId"});J=JE(fe)}const xe={domain:me.host,address:Ae,statement:ue,uri:me.href,version:"1",chainId:J,nonce:(d=se?.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(x=(m=se?.signInWithEthereum)===null||m===void 0?void 0:m.issuedAt)!==null&&x!==void 0?x:new Date,expirationTime:(A=se?.signInWithEthereum)===null||A===void 0?void 0:A.expirationTime,notBefore:(S=se?.signInWithEthereum)===null||S===void 0?void 0:S.notBefore,requestId:(v=se?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(T=se?.signInWithEthereum)===null||T===void 0?void 0:T.resources};j=eS(xe),H=await W.request({method:"personal_sign",params:[$E(j),Ae]})}try{const{data:q,error:Q}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:H},!((R=e.options)===null||R===void 0)&&R.captchaToken?{gotrue_meta_security:{captcha_token:(U=e.options)===null||U===void 0?void 0:U.captchaToken}}:null),xform:bi});if(Q)throw Q;if(!q||!q.session||!q.user){const ue=new Ro;return this._returnResult({data:{user:null,session:null},error:ue})}return q.session&&(await this._saveSession(q.session),await this._notifyAllSubscribers("SIGNED_IN",q.session)),this._returnResult({data:Object.assign({},q),error:Q})}catch(q){if(ze(q))return this._returnResult({data:{user:null,session:null},error:q});throw q}}async signInWithSolana(e){var i,o,d,m,x,A,S,v,T,R,U,j;let H,q;if("message"in e)H=e.message,q=e.signature;else{const{chain:Q,wallet:ue,statement:se,options:W}=e;let me;if(tr())if(typeof ue=="object")me=ue;else{const Ae=window;if("solana"in Ae&&typeof Ae.solana=="object"&&("signIn"in Ae.solana&&typeof Ae.solana.signIn=="function"||"signMessage"in Ae.solana&&typeof Ae.solana.signMessage=="function"))me=Ae.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ue!="object"||!W?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");me=ue}const Pe=new URL((i=W?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in me&&me.signIn){const Ae=await me.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},W?.signInWithSolana),{version:"1",domain:Pe.host,uri:Pe.href}),se?{statement:se}:null));let J;if(Array.isArray(Ae)&&Ae[0]&&typeof Ae[0]=="object")J=Ae[0];else if(Ae&&typeof Ae=="object"&&"signedMessage"in Ae&&"signature"in Ae)J=Ae;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)H=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),q=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in me)||typeof me.signMessage!="function"||!("publicKey"in me)||typeof me!="object"||!me.publicKey||!("toBase58"in me.publicKey)||typeof me.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");H=[`${Pe.host} wants you to sign in with your Solana account:`,me.publicKey.toBase58(),...se?["",se,""]:[""],"Version: 1",`URI: ${Pe.href}`,`Issued At: ${(d=(o=W?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((m=W?.signInWithSolana)===null||m===void 0)&&m.notBefore?[`Not Before: ${W.signInWithSolana.notBefore}`]:[],...!((x=W?.signInWithSolana)===null||x===void 0)&&x.expirationTime?[`Expiration Time: ${W.signInWithSolana.expirationTime}`]:[],...!((A=W?.signInWithSolana)===null||A===void 0)&&A.chainId?[`Chain ID: ${W.signInWithSolana.chainId}`]:[],...!((S=W?.signInWithSolana)===null||S===void 0)&&S.nonce?[`Nonce: ${W.signInWithSolana.nonce}`]:[],...!((v=W?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${W.signInWithSolana.requestId}`]:[],...!((R=(T=W?.signInWithSolana)===null||T===void 0?void 0:T.resources)===null||R===void 0)&&R.length?["Resources",...W.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);const Ae=await me.signMessage(new TextEncoder().encode(H),"utf8");if(!Ae||!(Ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");q=Ae}}try{const{data:Q,error:ue}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:H,signature:Ps(q)},!((U=e.options)===null||U===void 0)&&U.captchaToken?{gotrue_meta_security:{captcha_token:(j=e.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:bi});if(ue)throw ue;if(!Q||!Q.session||!Q.user){const se=new Ro;return this._returnResult({data:{user:null,session:null},error:se})}return Q.session&&(await this._saveSession(Q.session),await this._notifyAllSubscribers("SIGNED_IN",Q.session)),this._returnResult({data:Object.assign({},Q),error:ue})}catch(Q){if(ze(Q))return this._returnResult({data:{user:null,session:null},error:Q});throw Q}}async _exchangeCodeForSession(e){const i=await Is(this.storage,`${this.storageKey}-code-verifier`),[o,d]=(i??"").split("/");try{if(!o&&this.flowType==="pkce")throw new bE;const{data:m,error:x}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:bi});if(await er(this.storage,`${this.storageKey}-code-verifier`),x)throw x;if(!m||!m.session||!m.user){const A=new Ro;return this._returnResult({data:{user:null,session:null,redirectType:null},error:A})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign(Object.assign({},m),{redirectType:d??null}),error:x})}catch(m){if(await er(this.storage,`${this.storageKey}-code-verifier`),ze(m))return this._returnResult({data:{user:null,session:null,redirectType:null},error:m});throw m}}async signInWithIdToken(e){try{const{options:i,provider:o,token:d,access_token:m,nonce:x}=e,A=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:d,access_token:m,nonce:x,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:bi}),{data:S,error:v}=A;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!S||!S.session||!S.user){const T=new Ro;return this._returnResult({data:{user:null,session:null},error:T})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:S,error:v})}catch(i){if(ze(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,o,d,m,x;try{if("email"in e){const{email:A,options:S}=e;let v=null,T=null;this.flowType==="pkce"&&([v,T]=await Io(this.storage,this.storageKey));const{error:R}=await Qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:A,data:(i=S?.data)!==null&&i!==void 0?i:{},create_user:(o=S?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:S?.captchaToken},code_challenge:v,code_challenge_method:T},redirectTo:S?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:R})}if("phone"in e){const{phone:A,options:S}=e,{data:v,error:T}=await Qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:A,data:(d=S?.data)!==null&&d!==void 0?d:{},create_user:(m=S?.shouldCreateUser)!==null&&m!==void 0?m:!0,gotrue_meta_security:{captcha_token:S?.captchaToken},channel:(x=S?.channel)!==null&&x!==void 0?x:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:T})}throw new Gu("You must provide either an email or phone number.")}catch(A){if(await er(this.storage,`${this.storageKey}-code-verifier`),ze(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async verifyOtp(e){var i,o;try{let d,m;"options"in e&&(d=(i=e.options)===null||i===void 0?void 0:i.redirectTo,m=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:x,error:A}=await Qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:m}}),redirectTo:d,xform:bi});if(A)throw A;if(!x)throw new Error("An error occurred on token verification.");const S=x.session,v=x.user;return S?.access_token&&(await this._saveSession(S),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",S)),this._returnResult({data:{user:v,session:S},error:null})}catch(d){if(ze(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(e){var i,o,d,m,x;try{let A=null,S=null;this.flowType==="pkce"&&([A,S]=await Io(this.storage,this.storageKey));const v=await Qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((d=e?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:A,code_challenge_method:S}),headers:this.headers,xform:qE});return!((m=v.data)===null||m===void 0)&&m.url&&tr()&&!(!((x=e.options)===null||x===void 0)&&x.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(A){if(await er(this.storage,`${this.storageKey}-code-verifier`),ze(A))return this._returnResult({data:null,error:A});throw A}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:o}=e;if(o)throw o;if(!i)throw new Fr;const{error:d}=await Qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(e){if(ze(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:o,type:d,options:m}=e,{error:x}=await Qe(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:d,gotrue_meta_security:{captcha_token:m?.captchaToken}},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}else if("phone"in e){const{phone:o,type:d,options:m}=e,{data:x,error:A}=await Qe(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:d,gotrue_meta_security:{captcha_token:m?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:x?.message_id},error:A})}throw new Gu("You must provide either an email or phone number and a type")}catch(i){if(ze(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await Is(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at*1e3-Date.now()<Ud:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.userStorage){const x=await Is(this.userStorage,this.storageKey+"-user");x?.user?e.user=x.user:e.user=Fd()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const x={value:this.suppressGetSessionWarning};e.user=zE(e.user,x),x.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:d,error:m}=await this._callRefreshToken(e.refresh_token);return m?this._returnResult({data:{session:null},error:m}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(e){try{return e?await Qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ns}):await this._useSession(async i=>{var o,d,m;const{data:x,error:A}=i;if(A)throw A;return!(!((o=x.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fr}:await Qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(m=(d=x.session)===null||d===void 0?void 0:d.access_token)!==null&&m!==void 0?m:void 0,xform:ns})})}catch(i){if(ze(i))return xE(i)&&(await this._removeSession(),await er(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async o=>{const{data:d,error:m}=o;if(m)throw m;if(!d.session)throw new Fr;const x=d.session;let A=null,S=null;this.flowType==="pkce"&&e.email!=null&&([A,S]=await Io(this.storage,this.storageKey));const{data:v,error:T}=await Qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:A,code_challenge_method:S}),jwt:x.access_token,xform:ns});if(T)throw T;return x.user=v.user,await this._saveSession(x),await this._notifyAllSubscribers("USER_UPDATED",x),this._returnResult({data:{user:x.user},error:null})})}catch(o){if(await er(this.storage,`${this.storageKey}-code-verifier`),ze(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Fr;const i=Date.now()/1e3;let o=i,d=!0,m=null;const{payload:x}=Pd(e.access_token);if(x.exp&&(o=x.exp,d=o<=i),d){const{data:A,error:S}=await this._callRefreshToken(e.refresh_token);if(S)return this._returnResult({data:{user:null,session:null},error:S});if(!A)return{data:{user:null,session:null},error:null};m=A}else{const{data:A,error:S}=await this._getUser(e.access_token);if(S)throw S;m={access_token:e.access_token,refresh_token:e.refresh_token,user:A.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(m),await this._notifyAllSubscribers("SIGNED_IN",m)}return this._returnResult({data:{user:m.user,session:m},error:null})}catch(i){if(ze(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var o;if(!e){const{data:x,error:A}=i;if(A)throw A;e=(o=x.session)!==null&&o!==void 0?o:void 0}if(!e?.refresh_token)throw new Fr;const{data:d,error:m}=await this._callRefreshToken(e.refresh_token);return m?this._returnResult({data:{user:null,session:null},error:m}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(ze(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!tr())throw new qu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new H2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qu("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new H2("No code detected.");const{data:se,error:W}=await this._exchangeCodeForSession(e.code);if(W)throw W;const me=new URL(window.location.href);return me.searchParams.delete("code"),window.history.replaceState(window.history.state,"",me.toString()),{data:{session:se.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:d,access_token:m,refresh_token:x,expires_in:A,expires_at:S,token_type:v}=e;if(!m||!A||!x||!v)throw new qu("No session defined in URL");const T=Math.round(Date.now()/1e3),R=parseInt(A);let U=T+R;S&&(U=parseInt(S));const j=U-T;j*1e3<=zo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${R}s`);const H=U-R;T-H>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",H,U,T):T-H<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",H,U,T);const{data:q,error:Q}=await this._getUser(m);if(Q)throw Q;const ue={provider_token:o,provider_refresh_token:d,access_token:m,expires_in:R,expires_at:U,refresh_token:x,token_type:v,user:q.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:ue,redirectType:e.type},error:null})}catch(o){if(ze(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await Is(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:d,error:m}=i;if(m)return this._returnResult({error:m});const x=(o=d.session)===null||o===void 0?void 0:o.access_token;if(x){const{error:A}=await this.admin.signOut(x,e);if(A&&!(pE(A)&&(A.status===404||A.status===401||A.status===403)))return this._returnResult({error:A})}return e!=="others"&&(await this._removeSession(),await er(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=TE(),o={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async i=>{var o,d;try{const{data:{session:m},error:x}=i;if(x)throw x;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",m)),this._debug("INITIAL_SESSION","callback id",e,"session",m)}catch(m){await((d=this.stateChangeEmitters.get(e))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",m),console.error(m)}})}async resetPasswordForEmail(e,i={}){let o=null,d=null;this.flowType==="pkce"&&([o,d]=await Io(this.storage,this.storageKey,!0));try{return await Qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:d,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(m){if(await er(this.storage,`${this.storageKey}-code-verifier`),ze(m))return this._returnResult({data:null,error:m});throw m}}async getUserIdentities(){var e;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(ze(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:o,error:d}=await this._useSession(async m=>{var x,A,S,v,T;const{data:R,error:U}=m;if(U)throw U;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(x=e.options)===null||x===void 0?void 0:x.redirectTo,scopes:(A=e.options)===null||A===void 0?void 0:A.scopes,queryParams:(S=e.options)===null||S===void 0?void 0:S.queryParams,skipBrowserRedirect:!0});return await Qe(this.fetch,"GET",j,{headers:this.headers,jwt:(T=(v=R.session)===null||v===void 0?void 0:v.access_token)!==null&&T!==void 0?T:void 0})});if(d)throw d;return tr()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:e.provider,url:o?.url},error:null})}catch(o){if(ze(o))return this._returnResult({data:{provider:e.provider,url:null},error:o});throw o}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var o;try{const{error:d,data:{session:m}}=i;if(d)throw d;const{options:x,provider:A,token:S,access_token:v,nonce:T}=e,R=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=m?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:A,id_token:S,access_token:v,nonce:T,link_identity:!0,gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:bi}),{data:U,error:j}=R;return j?this._returnResult({data:{user:null,session:null},error:j}):!U||!U.session||!U.user?this._returnResult({data:{user:null,session:null},error:new Ro}):(U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("USER_UPDATED",U.session)),this._returnResult({data:U,error:j}))}catch(d){if(await er(this.storage,`${this.storageKey}-code-verifier`),ze(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var o,d;const{data:m,error:x}=i;if(x)throw x;return await Qe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(d=(o=m.session)===null||o===void 0?void 0:o.access_token)!==null&&d!==void 0?d:void 0})})}catch(i){if(ze(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await IE(async d=>(d>0&&await RE(200*Math.pow(2,d-1)),this._debug(i,"refreshing attempt",d),await Qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:bi})),(d,m)=>{const x=200*Math.pow(2,d);return m&&jd(m)&&Date.now()+x-o<zo})}catch(o){if(this._debug(i,"error",o),ze(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",o),tr()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const d=await Is(this.storage,this.storageKey);if(d&&this.userStorage){let x=await Is(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!x&&(x={user:d.user},await Vo(this.userStorage,this.storageKey+"-user",x)),d.user=(e=x?.user)!==null&&e!==void 0?e:Fd()}else if(d&&!d.user&&!d.user){const x=await Is(this.storage,this.storageKey+"-user");x&&x?.user?(d.user=x.user,await er(this.storage,this.storageKey+"-user"),await Vo(this.storage,this.storageKey,d)):d.user=Fd()}if(this._debug(o,"session from storage",d),!this._isValidSession(d)){this._debug(o,"session is not valid"),d!==null&&await this._removeSession();return}const m=((i=d.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Ud;if(this._debug(o,`session has${m?"":" not"} expired with margin of ${Ud}s`),m){if(this.autoRefreshToken&&d.refresh_token){const{error:x}=await this._callRefreshToken(d.refresh_token);x&&(console.error(x),jd(x)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",x),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:x,error:A}=await this._getUser(d.access_token);!A&&x?.user?(d.user=x.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(x){console.error("Error getting user data:",x),this._debug(o,"error getting user data, skipping SIGNED_IN notification",x)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(o,"error",d),console.error(d);return}finally{this._debug(o,"end")}}async _callRefreshToken(e){var i,o;if(!e)throw new Fr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new Ef;const{data:m,error:x}=await this._refreshAccessToken(e);if(x)throw x;if(!m.session)throw new Fr;await this._saveSession(m.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",m.session);const A={data:m.session,error:null};return this.refreshingDeferred.resolve(A),A}catch(m){if(this._debug(d,"error",m),ze(m)){const x={data:null,error:m};return jd(m)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(x),x}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(m),m}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(e,i,o=!0){const d=`#_notifyAllSubscribers(${e})`;this._debug(d,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:i});const m=[],x=Array.from(this.stateChangeEmitters.values()).map(async A=>{try{await A.callback(e,i)}catch(S){m.push(S)}});if(await Promise.all(x),m.length>0){for(let A=0;A<m.length;A+=1)console.error(m[A]);throw m[0]}}finally{this._debug(d,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await er(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},e),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await Vo(this.userStorage,this.storageKey+"-user",{user:i.user});const d=Object.assign({},i);delete d.user;const m=X2(d);await Vo(this.storage,this.storageKey,m)}else{const d=X2(i);await Vo(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await er(this.storage,this.storageKey),await er(this.storage,this.storageKey+"-code-verifier"),await er(this.storage,this.storageKey+"-user"),this.userStorage&&await er(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&tr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),zo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((o.expires_at*1e3-e)/zo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${zo}ms, refresh threshold is ${N0} ticks`),d<=N0&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Wp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,o){const d=[`provider=${encodeURIComponent(i)}`];if(o?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&d.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[m,x]=await Io(this.storage,this.storageKey),A=new URLSearchParams({code_challenge:`${encodeURIComponent(m)}`,code_challenge_method:`${encodeURIComponent(x)}`});d.push(A.toString())}if(o?.queryParams){const m=new URLSearchParams(o.queryParams);d.push(m.toString())}return o?.skipBrowserRedirect&&d.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${d.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var o;const{data:d,error:m}=i;return m?this._returnResult({data:null,error:m}):await Qe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(ze(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var o,d;const{data:m,error:x}=i;if(x)return this._returnResult({data:null,error:x});const A=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:S,error:v}=await Qe(this.fetch,"POST",`${this.url}/factors`,{body:A,headers:this.headers,jwt:(o=m?.session)===null||o===void 0?void 0:o.access_token});return v?this._returnResult({data:null,error:v}):(e.factorType==="totp"&&S.type==="totp"&&(!((d=S?.totp)===null||d===void 0)&&d.qr_code)&&(S.totp.qr_code=`data:image/svg+xml;utf-8,${S.totp.qr_code}`),this._returnResult({data:S,error:null}))})}catch(i){if(ze(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var o;const{data:d,error:m}=i;if(m)return this._returnResult({data:null,error:m});const x=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?oS(e.webauthn.credential_response):lS(e.webauthn.credential_response)})}:{code:e.code}),{data:A,error:S}=await Qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:x,headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});return S?this._returnResult({data:null,error:S}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+A.expires_in},A)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",A),this._returnResult({data:A,error:S}))})}catch(i){if(ze(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var o;const{data:d,error:m}=i;if(m)return this._returnResult({data:null,error:m});const x=await Qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(o=d?.session)===null||o===void 0?void 0:o.access_token});if(x.error)return x;const{data:A}=x;if(A.type!=="webauthn")return{data:A,error:null};switch(A.webauthn.type){case"create":return{data:Object.assign(Object.assign({},A),{webauthn:Object.assign(Object.assign({},A.webauthn),{credential_options:Object.assign(Object.assign({},A.webauthn.credential_options),{publicKey:aS(A.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},A),{webauthn:Object.assign(Object.assign({},A.webauthn),{credential_options:Object.assign(Object.assign({},A.webauthn.credential_options),{publicKey:sS(A.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(ze(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:o}=await this._challenge({factorId:e.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:o}=await this.getUser();if(o)return{data:null,error:o};const d={all:[],phone:[],totp:[],webauthn:[]};for(const m of(e=i?.factors)!==null&&e!==void 0?e:[])d.all.push(m),m.status==="verified"&&d[m.factor_type].push(m);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var e,i;const{data:{session:o},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=Pd(o.access_token);let x=null;m.aal&&(x=m.aal);let A=x;((i=(e=o.user.factors)===null||e===void 0?void 0:e.filter(T=>T.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(A="aal2");const v=m.amr||[];return{data:{currentLevel:x,nextLevel:A,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:o},error:d}=i;return d?this._returnResult({data:null,error:d}):o?await Qe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:o.access_token,xform:m=>({data:m,error:null})}):this._returnResult({data:null,error:new Fr})})}catch(i){if(ze(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async o=>{const{data:{session:d},error:m}=o;if(m)return this._returnResult({data:null,error:m});if(!d)return this._returnResult({data:null,error:new Fr});const x=await Qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:A=>({data:A,error:null})});return x.data&&x.data.redirect_url&&tr()&&!i?.skipBrowserRedirect&&window.location.assign(x.data.redirect_url),x})}catch(o){if(ze(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(e,i){try{return await this._useSession(async o=>{const{data:{session:d},error:m}=o;if(m)return this._returnResult({data:null,error:m});if(!d)return this._returnResult({data:null,error:new Fr});const x=await Qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:A=>({data:A,error:null})});return x.data&&x.data.redirect_url&&tr()&&!i?.skipBrowserRedirect&&window.location.assign(x.data.redirect_url),x})}catch(o){if(ze(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:o}=e;return o?this._returnResult({data:null,error:o}):i?await Qe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Fr})})}catch(e){if(ze(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:o},error:d}=i;return d?this._returnResult({data:null,error:d}):o?(await Qe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Fr})})}catch(i){if(ze(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let o=i.keys.find(A=>A.kid===e);if(o)return o;const d=Date.now();if(o=this.jwks.keys.find(A=>A.kid===e),o&&this.jwks_cached_at+mE>d)return o;const{data:m,error:x}=await Qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(x)throw x;return!m.keys||m.keys.length===0||(this.jwks=m,this.jwks_cached_at=d,o=m.keys.find(A=>A.kid===e),!o)?null:o}async getClaims(e,i={}){try{let o=e;if(!o){const{data:j,error:H}=await this.getSession();if(H||!j.session)return this._returnResult({data:null,error:H});o=j.session.access_token}const{header:d,payload:m,signature:x,raw:{header:A,payload:S}}=Pd(o);i?.allowExpired||jE(m.exp);const v=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!v){const{error:j}=await this.getUser(o);if(j)throw j;return{data:{claims:m,header:d,signature:x},error:null}}const T=PE(d.alg),R=await crypto.subtle.importKey("jwk",v,T,!0,["verify"]);if(!await crypto.subtle.verify(T,R,x,_E(`${A}.${S}`)))throw new k0("Invalid JWT signature");return{data:{claims:m,header:d,signature:x},error:null}}catch(o){if(ze(o))return this._returnResult({data:null,error:o});throw o}}}gc.nextInstanceID={};const pS=gc,xS="2.90.1";let nc="";typeof Deno<"u"?nc="deno":typeof document<"u"?nc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?nc="react-native":nc="node";const wS={"X-Client-Info":`supabase-js-${nc}/${xS}`},bS={headers:wS},vS={schema:"public"},ES={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},SS={};function mc(a){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mc(a)}function AS(a,e){if(mc(a)!="object"||!a)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var o=i.call(a,e);if(mc(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function _S(a){var e=AS(a,"string");return mc(e)=="symbol"?e:e+""}function CS(a,e,i){return(e=_S(e))in a?Object.defineProperty(a,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[e]=i,a}function ty(a,e){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);e&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable})),i.push.apply(i,o)}return i}function En(a){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?ty(Object(i),!0).forEach(function(o){CS(a,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):ty(Object(i)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(i,o))})}return a}const TS=a=>a?(...e)=>a(...e):(...e)=>fetch(...e),OS=()=>Headers,NS=(a,e,i)=>{const o=TS(i),d=OS();return async(m,x)=>{var A;const S=(A=await e())!==null&&A!==void 0?A:a;let v=new d(x?.headers);return v.has("apikey")||v.set("apikey",a),v.has("Authorization")||v.set("Authorization",`Bearer ${S}`),o(m,En(En({},x),{},{headers:v}))}};function RS(a){return a.endsWith("/")?a:a+"/"}function IS(a,e){var i,o;const{db:d,auth:m,realtime:x,global:A}=a,{db:S,auth:v,realtime:T,global:R}=e,U={db:En(En({},S),d),auth:En(En({},v),m),realtime:En(En({},T),x),storage:{},global:En(En(En({},R),A),{},{headers:En(En({},(i=R?.headers)!==null&&i!==void 0?i:{}),(o=A?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return a.accessToken?U.accessToken=a.accessToken:delete U.accessToken,U}function kS(a){const e=a?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(RS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var DS=class extends pS{constructor(a){super(a)}},MS=class{constructor(a,e,i){var o,d;this.supabaseUrl=a,this.supabaseKey=e;const m=kS(a);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const x=`sb-${m.hostname.split(".")[0]}-auth-token`,A={db:vS,realtime:SS,auth:En(En({},ES),{},{storageKey:x}),global:bS},S=IS(i??{},A);if(this.storageKey=(o=S.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(d=S.global.headers)!==null&&d!==void 0?d:{},S.accessToken)this.accessToken=S.accessToken,this.auth=new Proxy({},{get:(T,R)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(R)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=S.auth)!==null&&v!==void 0?v:{},this.headers,S.global.fetch)}this.fetch=NS(e,this._getAccessToken.bind(this),S.global.fetch),this.realtime=this._initRealtimeClient(En({headers:this.headers,accessToken:this._getAccessToken.bind(this)},S.realtime)),this.accessToken&&this.accessToken().then(T=>this.realtime.setAuth(T)).catch(T=>console.warn("Failed to set initial Realtime auth token:",T)),this.rest=new d3(new URL("rest/v1",m).href,{headers:this.headers,schema:S.db.schema,fetch:this.fetch}),this.storage=new uE(this.storageUrl.href,this.headers,this.fetch,i?.storage),S.accessToken||this._listenForAuthEvents()}get functions(){return new l3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,e={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,e,i)}channel(a,e={config:{}}){return this.realtime.channel(a,e)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a=this,e,i;if(a.accessToken)return await a.accessToken();const{data:o}=await a.auth.getSession();return(e=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&e!==void 0?e:a.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:e,detectSessionInUrl:i,storage:o,userStorage:d,storageKey:m,flowType:x,lock:A,debug:S,throwOnError:v},T,R){const U={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new DS({url:this.authUrl.href,headers:En(En({},U),T),storageKey:m,autoRefreshToken:a,persistSession:e,detectSessionInUrl:i,storage:o,userStorage:d,flowType:x,lock:A,debug:S,throwOnError:v,fetch:R,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new R3(this.realtimeUrl.href,En(En({},a),{},{params:En(En({},{apikey:this.supabaseKey}),a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,e)=>{this._handleTokenChanged(a,"CLIENT",e?.access_token)})}_handleTokenChanged(a,e,i){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const BS=(a,e,i)=>new MS(a,e,i);function LS(){if(typeof window<"u")return!1;const a=globalThis.process;if(!a)return!1;const e=a.version;if(e==null)return!1;const i=e.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}LS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const US="https://dhutlzgnupkxfjcfswnl.supabase.co",jS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRodXRsemdudXBreGZqY2Zzd25sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg4MzA0MDUsImV4cCI6MjA4NDQwNjQwNX0.RM6oCl4i7sd1Nrw3tsdfHJqkDQ4g0A2H4GXnElT-kho",Zt=BS(US,jS),li={async createPantry(a,e){if(!Zt)return{error:"Supabase not configured"};const{data:i,error:o}=await Zt.from("pantries").insert([{name:a,pin:e}]).select();return{data:i,error:o}},async verifyPantry(a,e){if(!Zt)return{error:"Supabase not configured"};const{data:i,error:o}=await Zt.from("pantries").select("*").eq("id",a).eq("pin",e).single();return{data:i,error:o}},async getLocations(a){if(!Zt)return{error:"Supabase not configured"};const{data:e,error:i}=await Zt.from("locations").select("*").eq("pantry_id",a).order("created_at",{ascending:!0});return{data:e,error:i}},async createLocation(a,e){if(!Zt)return{error:"Supabase not configured"};const{data:i,error:o}=await Zt.from("locations").insert([{pantry_id:a,name:e}]).select();return{data:i,error:o}},async deleteLocation(a){if(!Zt)return{error:"Supabase not configured"};const{error:e}=await Zt.from("locations").delete().eq("id",a);return{error:e}},async getLocations(a){if(!Zt)return{error:"Supabase not configured"};const{data:e,error:i}=await Zt.from("locations").select("*").eq("pantry_id",a).order("created_at",{ascending:!0});return{data:e,error:i}},async createLocation(a,e){if(!Zt)return{error:"Supabase not configured"};const{data:i,error:o}=await Zt.from("locations").insert([{pantry_id:a,name:e}]).select();return{data:i,error:o}},async deleteLocation(a){if(!Zt)return{error:"Supabase not configured"};const{error:e}=await Zt.from("locations").delete().eq("id",a);return{error:e}},async addProduct(a){if(!Zt)return{error:"Supabase not configured"};const{data:e,error:i}=await Zt.from("products").insert([a]).select();return{data:e,error:i}},async getProducts(a){if(!Zt)return{error:"Supabase not configured"};let e=Zt.from("products").select("*").order("expiry_date",{ascending:!0});a&&(e=e.eq("pantry_id",a));const{data:i,error:o}=await e;return{data:i,error:o}},async updateProduct(a,e){if(!Zt)return{error:"Supabase not configured"};const{data:i,error:o}=await Zt.from("products").update(e).eq("id",a).select();return{data:i,error:o}},async deleteProduct(a){if(!Zt)return{error:"Supabase not configured"};const{error:e}=await Zt.from("products").delete().eq("id",a);return{error:e}},async getStats(a){if(!Zt)return{error:"Supabase not configured"};const{data:e,error:i}=await Zt.from("stats").select("*").eq("month",a).single();return{data:e,error:i}},async updateStats(a,e){if(!Zt)return{error:"Supabase not configured"};const{data:i,error:o}=await Zt.from("stats").upsert({month:a,...e},{onConflict:"month"}).select();return{data:i,error:o}}},Sf="pantry-shopping-list",i1="pantry-current-id",Af=async()=>{const a=await Q0(i1);return a&&typeof a=="object"&&a.id?a.id:typeof a=="string"?a:null},PS=async()=>await Af()&&await Q0("pantry-saved-family-details")||null,Zp=async a=>{await sf(i1,a.id),await sf("pantry-saved-family-details",a)},FS=async()=>{await sf(i1,null),await sf("pantry-saved-family-details",null)},ny=async a=>{const{data:e,error:i}=await li.getLocations(a);if(i)return[];if(e.length===0){const{data:o}=await li.createLocation(a,"Dispensa Principale");return o?[o[0]]:[]}return e},Kp=async(a,e)=>{const{data:i,error:o}=await li.createLocation(a,e);return{success:!o,location:i?i[0]:null}},zS=async a=>{await li.deleteLocation(a)},VS=async(a,e)=>{const{data:i,error:o}=await li.createPantry(a,e);if(o)return{success:!1,error:"Errore creazione: "+o.message};const d=i[0];return await Zp(d),await Kp(d.id,"Cucina"),{success:!0,pantryId:d.id}},HS=async(a,e)=>{const{data:i,error:o}=await li.verifyPantry(a,e);return o||!i?{success:!1,error:"Codice o PIN non validi."}:(await Zp(i),{success:!0,pantryId:i.id})},GS=async a=>{const e=a||await Af(),{data:i,error:o}=await li.getProducts(e);return o?(console.error("Errore recupero prodotti:",o),[]):i.map(d=>({...d,id:d.id,name:d.name,expiryDate:d.expiry_date,category:d.category,status:d.status,pantryId:d.pantry_id,locationId:d.location_id,finishedAt:d.finished_at}))},qS=async(a,e)=>{const i=e||await Af(),o={name:a.name,expiry_date:a.expiryDate,category:a.category||"Dispensa",status:"active",pantry_id:i,location_id:a.locationId,created_at:new Date().toISOString(),quantity:a.quantity||1,price:a.price||0},{data:d,error:m}=await li.addProduct(o);if(m)return console.error("Errore aggiunta prodotto:",m),null;const x=d[0];return{...x,expiryDate:x.expiry_date}},WS=async(a,e)=>{const i={};e.expiryDate&&(i.expiry_date=e.expiryDate),e.pantryId&&(i.pantry_id=e.pantryId),e.finishedAt&&(i.finished_at=e.finishedAt),e.status&&(i.status=e.status),e.name&&(i.name=e.name),e.locationId&&(i.location_id=e.locationId),e.locationId&&(i.location_id=e.locationId),await li.updateProduct(a,i)},YS=async()=>await Q0(Sf)||[],Qp=async a=>{await J0(Sf,e=>[...e||[],{id:crypto.randomUUID(),name:a.name,isBought:!1,createdAt:new Date().toISOString()}])},XS=async a=>{await J0(Sf,e=>(e||[]).map(o=>o.id===a?{...o,isBought:!o.isBought}:o))},ry=async a=>{await J0(Sf,e=>(e||[]).filter(o=>o.id!==a))},Jp=6048e5,ZS=864e5,$p=6e4,ex=36e5,iy=Symbol.for("constructDateFrom");function fa(a,e){return typeof a=="function"?a(e):a&&typeof a=="object"&&iy in a?a[iy](e):a instanceof Date?new a.constructor(e):new Date(e)}function qr(a,e){return fa(e||a,a)}let KS={};function _f(){return KS}function zs(a,e){const i=_f(),o=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,d=qr(a,e?.in),m=d.getDay(),x=(m<o?7:0)+m-o;return d.setDate(d.getDate()-x),d.setHours(0,0,0,0),d}function uf(a,e){return zs(a,{...e,weekStartsOn:1})}function tx(a,e){const i=qr(a,e?.in),o=i.getFullYear(),d=fa(i,0);d.setFullYear(o+1,0,4),d.setHours(0,0,0,0);const m=uf(d),x=fa(i,0);x.setFullYear(o,0,4),x.setHours(0,0,0,0);const A=uf(x);return i.getTime()>=m.getTime()?o+1:i.getTime()>=A.getTime()?o:o-1}function ay(a){const e=qr(a),i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return i.setUTCFullYear(e.getFullYear()),+a-+i}function a1(a,...e){const i=fa.bind(null,a||e.find(o=>typeof o=="object"));return e.map(i)}function sy(a,e){const i=qr(a,e?.in);return i.setHours(0,0,0,0),i}function nx(a,e,i){const[o,d]=a1(i?.in,a,e),m=sy(o),x=sy(d),A=+m-ay(m),S=+x-ay(x);return Math.round((A-S)/ZS)}function QS(a,e){const i=tx(a,e),o=fa(a,0);return o.setFullYear(i,0,4),o.setHours(0,0,0,0),uf(o)}function JS(a){return a instanceof Date||typeof a=="object"&&Object.prototype.toString.call(a)==="[object Date]"}function $S(a){return!(!JS(a)&&typeof a!="number"||isNaN(+qr(a)))}function rx(a,e,i){const[o,d]=a1(i?.in,a,e),m=oy(o,d),x=Math.abs(nx(o,d));o.setDate(o.getDate()-m*x);const A=+(oy(o,d)===-m),S=m*(x-A);return S===0?0:S}function oy(a,e){const i=a.getFullYear()-e.getFullYear()||a.getMonth()-e.getMonth()||a.getDate()-e.getDate()||a.getHours()-e.getHours()||a.getMinutes()-e.getMinutes()||a.getSeconds()-e.getSeconds()||a.getMilliseconds()-e.getMilliseconds();return i<0?-1:i>0?1:i}function eA(a,e){const i=qr(a,e?.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}const tA={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nA=(a,e,i)=>{let o;const d=tA[a];return typeof d=="string"?o=d:e===1?o=d.one:o=d.other.replace("{{count}}",e.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+o:o+" ago":o};function Yo(a){return(e={})=>{const i=e.width?String(e.width):a.defaultWidth;return a.formats[i]||a.formats[a.defaultWidth]}}const rA={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},iA={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},aA={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sA={date:Yo({formats:rA,defaultWidth:"full"}),time:Yo({formats:iA,defaultWidth:"full"}),dateTime:Yo({formats:aA,defaultWidth:"full"})},oA={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},lA=(a,e,i,o)=>oA[a];function Ui(a){return(e,i)=>{const o=i?.context?String(i.context):"standalone";let d;if(o==="formatting"&&a.formattingValues){const x=a.defaultFormattingWidth||a.defaultWidth,A=i?.width?String(i.width):x;d=a.formattingValues[A]||a.formattingValues[x]}else{const x=a.defaultWidth,A=i?.width?String(i.width):a.defaultWidth;d=a.values[A]||a.values[x]}const m=a.argumentCallback?a.argumentCallback(e):e;return d[m]}}const cA={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},uA={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fA={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hA={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dA={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},gA={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mA=(a,e)=>{const i=Number(a),o=i%100;if(o>20||o<10)switch(o%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},yA={ordinalNumber:mA,era:Ui({values:cA,defaultWidth:"wide"}),quarter:Ui({values:uA,defaultWidth:"wide",argumentCallback:a=>a-1}),month:Ui({values:fA,defaultWidth:"wide"}),day:Ui({values:hA,defaultWidth:"wide"}),dayPeriod:Ui({values:dA,defaultWidth:"wide",formattingValues:gA,defaultFormattingWidth:"wide"})};function ji(a){return(e,i={})=>{const o=i.width,d=o&&a.matchPatterns[o]||a.matchPatterns[a.defaultMatchWidth],m=e.match(d);if(!m)return null;const x=m[0],A=o&&a.parsePatterns[o]||a.parsePatterns[a.defaultParseWidth],S=Array.isArray(A)?xA(A,R=>R.test(x)):pA(A,R=>R.test(x));let v;v=a.valueCallback?a.valueCallback(S):S,v=i.valueCallback?i.valueCallback(v):v;const T=e.slice(x.length);return{value:v,rest:T}}}function pA(a,e){for(const i in a)if(Object.prototype.hasOwnProperty.call(a,i)&&e(a[i]))return i}function xA(a,e){for(let i=0;i<a.length;i++)if(e(a[i]))return i}function ix(a){return(e,i={})=>{const o=e.match(a.matchPattern);if(!o)return null;const d=o[0],m=e.match(a.parsePattern);if(!m)return null;let x=a.valueCallback?a.valueCallback(m[0]):m[0];x=i.valueCallback?i.valueCallback(x):x;const A=e.slice(d.length);return{value:x,rest:A}}}const wA=/^(\d+)(th|st|nd|rd)?/i,bA=/\d+/i,vA={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},EA={any:[/^b/i,/^(a|c)/i]},SA={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},AA={any:[/1/i,/2/i,/3/i,/4/i]},_A={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},CA={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},TA={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},OA={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},NA={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},RA={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},IA={ordinalNumber:ix({matchPattern:wA,parsePattern:bA,valueCallback:a=>parseInt(a,10)}),era:ji({matchPatterns:vA,defaultMatchWidth:"wide",parsePatterns:EA,defaultParseWidth:"any"}),quarter:ji({matchPatterns:SA,defaultMatchWidth:"wide",parsePatterns:AA,defaultParseWidth:"any",valueCallback:a=>a+1}),month:ji({matchPatterns:_A,defaultMatchWidth:"wide",parsePatterns:CA,defaultParseWidth:"any"}),day:ji({matchPatterns:TA,defaultMatchWidth:"wide",parsePatterns:OA,defaultParseWidth:"any"}),dayPeriod:ji({matchPatterns:NA,defaultMatchWidth:"any",parsePatterns:RA,defaultParseWidth:"any"})},kA={code:"en-US",formatDistance:nA,formatLong:sA,formatRelative:lA,localize:yA,match:IA,options:{weekStartsOn:0,firstWeekContainsDate:1}};function DA(a,e){const i=qr(a,e?.in);return nx(i,eA(i))+1}function MA(a,e){const i=qr(a,e?.in),o=+uf(i)-+QS(i);return Math.round(o/Jp)+1}function ax(a,e){const i=qr(a,e?.in),o=i.getFullYear(),d=_f(),m=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??d.firstWeekContainsDate??d.locale?.options?.firstWeekContainsDate??1,x=fa(e?.in||a,0);x.setFullYear(o+1,0,m),x.setHours(0,0,0,0);const A=zs(x,e),S=fa(e?.in||a,0);S.setFullYear(o,0,m),S.setHours(0,0,0,0);const v=zs(S,e);return+i>=+A?o+1:+i>=+v?o:o-1}function BA(a,e){const i=_f(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,d=ax(a,e),m=fa(e?.in||a,0);return m.setFullYear(d,0,o),m.setHours(0,0,0,0),zs(m,e)}function LA(a,e){const i=qr(a,e?.in),o=+zs(i,e)-+BA(i,e);return Math.round(o/Jp)+1}function Gt(a,e){const i=a<0?"-":"",o=Math.abs(a).toString().padStart(e,"0");return i+o}const Qa={y(a,e){const i=a.getFullYear(),o=i>0?i:1-i;return Gt(e==="yy"?o%100:o,e.length)},M(a,e){const i=a.getMonth();return e==="M"?String(i+1):Gt(i+1,2)},d(a,e){return Gt(a.getDate(),e.length)},a(a,e){const i=a.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return i==="am"?"a.m.":"p.m."}},h(a,e){return Gt(a.getHours()%12||12,e.length)},H(a,e){return Gt(a.getHours(),e.length)},m(a,e){return Gt(a.getMinutes(),e.length)},s(a,e){return Gt(a.getSeconds(),e.length)},S(a,e){const i=e.length,o=a.getMilliseconds(),d=Math.trunc(o*Math.pow(10,i-3));return Gt(d,e.length)}},Bo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ly={G:function(a,e,i){const o=a.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return i.era(o,{width:"abbreviated"});case"GGGGG":return i.era(o,{width:"narrow"});default:return i.era(o,{width:"wide"})}},y:function(a,e,i){if(e==="yo"){const o=a.getFullYear(),d=o>0?o:1-o;return i.ordinalNumber(d,{unit:"year"})}return Qa.y(a,e)},Y:function(a,e,i,o){const d=ax(a,o),m=d>0?d:1-d;if(e==="YY"){const x=m%100;return Gt(x,2)}return e==="Yo"?i.ordinalNumber(m,{unit:"year"}):Gt(m,e.length)},R:function(a,e){const i=tx(a);return Gt(i,e.length)},u:function(a,e){const i=a.getFullYear();return Gt(i,e.length)},Q:function(a,e,i){const o=Math.ceil((a.getMonth()+1)/3);switch(e){case"Q":return String(o);case"QQ":return Gt(o,2);case"Qo":return i.ordinalNumber(o,{unit:"quarter"});case"QQQ":return i.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(o,{width:"narrow",context:"formatting"});default:return i.quarter(o,{width:"wide",context:"formatting"})}},q:function(a,e,i){const o=Math.ceil((a.getMonth()+1)/3);switch(e){case"q":return String(o);case"qq":return Gt(o,2);case"qo":return i.ordinalNumber(o,{unit:"quarter"});case"qqq":return i.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(o,{width:"narrow",context:"standalone"});default:return i.quarter(o,{width:"wide",context:"standalone"})}},M:function(a,e,i){const o=a.getMonth();switch(e){case"M":case"MM":return Qa.M(a,e);case"Mo":return i.ordinalNumber(o+1,{unit:"month"});case"MMM":return i.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(o,{width:"narrow",context:"formatting"});default:return i.month(o,{width:"wide",context:"formatting"})}},L:function(a,e,i){const o=a.getMonth();switch(e){case"L":return String(o+1);case"LL":return Gt(o+1,2);case"Lo":return i.ordinalNumber(o+1,{unit:"month"});case"LLL":return i.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(o,{width:"narrow",context:"standalone"});default:return i.month(o,{width:"wide",context:"standalone"})}},w:function(a,e,i,o){const d=LA(a,o);return e==="wo"?i.ordinalNumber(d,{unit:"week"}):Gt(d,e.length)},I:function(a,e,i){const o=MA(a);return e==="Io"?i.ordinalNumber(o,{unit:"week"}):Gt(o,e.length)},d:function(a,e,i){return e==="do"?i.ordinalNumber(a.getDate(),{unit:"date"}):Qa.d(a,e)},D:function(a,e,i){const o=DA(a);return e==="Do"?i.ordinalNumber(o,{unit:"dayOfYear"}):Gt(o,e.length)},E:function(a,e,i){const o=a.getDay();switch(e){case"E":case"EE":case"EEE":return i.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(o,{width:"short",context:"formatting"});default:return i.day(o,{width:"wide",context:"formatting"})}},e:function(a,e,i,o){const d=a.getDay(),m=(d-o.weekStartsOn+8)%7||7;switch(e){case"e":return String(m);case"ee":return Gt(m,2);case"eo":return i.ordinalNumber(m,{unit:"day"});case"eee":return i.day(d,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(d,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(d,{width:"short",context:"formatting"});default:return i.day(d,{width:"wide",context:"formatting"})}},c:function(a,e,i,o){const d=a.getDay(),m=(d-o.weekStartsOn+8)%7||7;switch(e){case"c":return String(m);case"cc":return Gt(m,e.length);case"co":return i.ordinalNumber(m,{unit:"day"});case"ccc":return i.day(d,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(d,{width:"narrow",context:"standalone"});case"cccccc":return i.day(d,{width:"short",context:"standalone"});default:return i.day(d,{width:"wide",context:"standalone"})}},i:function(a,e,i){const o=a.getDay(),d=o===0?7:o;switch(e){case"i":return String(d);case"ii":return Gt(d,e.length);case"io":return i.ordinalNumber(d,{unit:"day"});case"iii":return i.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(o,{width:"short",context:"formatting"});default:return i.day(o,{width:"wide",context:"formatting"})}},a:function(a,e,i){const d=a.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(d,{width:"narrow",context:"formatting"});default:return i.dayPeriod(d,{width:"wide",context:"formatting"})}},b:function(a,e,i){const o=a.getHours();let d;switch(o===12?d=Bo.noon:o===0?d=Bo.midnight:d=o/12>=1?"pm":"am",e){case"b":case"bb":return i.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(d,{width:"narrow",context:"formatting"});default:return i.dayPeriod(d,{width:"wide",context:"formatting"})}},B:function(a,e,i){const o=a.getHours();let d;switch(o>=17?d=Bo.evening:o>=12?d=Bo.afternoon:o>=4?d=Bo.morning:d=Bo.night,e){case"B":case"BB":case"BBB":return i.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(d,{width:"narrow",context:"formatting"});default:return i.dayPeriod(d,{width:"wide",context:"formatting"})}},h:function(a,e,i){if(e==="ho"){let o=a.getHours()%12;return o===0&&(o=12),i.ordinalNumber(o,{unit:"hour"})}return Qa.h(a,e)},H:function(a,e,i){return e==="Ho"?i.ordinalNumber(a.getHours(),{unit:"hour"}):Qa.H(a,e)},K:function(a,e,i){const o=a.getHours()%12;return e==="Ko"?i.ordinalNumber(o,{unit:"hour"}):Gt(o,e.length)},k:function(a,e,i){let o=a.getHours();return o===0&&(o=24),e==="ko"?i.ordinalNumber(o,{unit:"hour"}):Gt(o,e.length)},m:function(a,e,i){return e==="mo"?i.ordinalNumber(a.getMinutes(),{unit:"minute"}):Qa.m(a,e)},s:function(a,e,i){return e==="so"?i.ordinalNumber(a.getSeconds(),{unit:"second"}):Qa.s(a,e)},S:function(a,e){return Qa.S(a,e)},X:function(a,e,i){const o=a.getTimezoneOffset();if(o===0)return"Z";switch(e){case"X":return uy(o);case"XXXX":case"XX":return Ls(o);default:return Ls(o,":")}},x:function(a,e,i){const o=a.getTimezoneOffset();switch(e){case"x":return uy(o);case"xxxx":case"xx":return Ls(o);default:return Ls(o,":")}},O:function(a,e,i){const o=a.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+cy(o,":");default:return"GMT"+Ls(o,":")}},z:function(a,e,i){const o=a.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+cy(o,":");default:return"GMT"+Ls(o,":")}},t:function(a,e,i){const o=Math.trunc(+a/1e3);return Gt(o,e.length)},T:function(a,e,i){return Gt(+a,e.length)}};function cy(a,e=""){const i=a>0?"-":"+",o=Math.abs(a),d=Math.trunc(o/60),m=o%60;return m===0?i+String(d):i+String(d)+e+Gt(m,2)}function uy(a,e){return a%60===0?(a>0?"-":"+")+Gt(Math.abs(a)/60,2):Ls(a,e)}function Ls(a,e=""){const i=a>0?"-":"+",o=Math.abs(a),d=Gt(Math.trunc(o/60),2),m=Gt(o%60,2);return i+d+e+m}const fy=(a,e)=>{switch(a){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},sx=(a,e)=>{switch(a){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},UA=(a,e)=>{const i=a.match(/(P+)(p+)?/)||[],o=i[1],d=i[2];if(!d)return fy(a,e);let m;switch(o){case"P":m=e.dateTime({width:"short"});break;case"PP":m=e.dateTime({width:"medium"});break;case"PPP":m=e.dateTime({width:"long"});break;default:m=e.dateTime({width:"full"});break}return m.replace("{{date}}",fy(o,e)).replace("{{time}}",sx(d,e))},jA={p:sx,P:UA},PA=/^D+$/,FA=/^Y+$/,zA=["D","DD","YY","YYYY"];function VA(a){return PA.test(a)}function HA(a){return FA.test(a)}function GA(a,e,i){const o=qA(a,e,i);if(console.warn(o),zA.includes(a))throw new RangeError(o)}function qA(a,e,i){const o=a[0]==="Y"?"years":"days of the month";return`Use \`${a.toLowerCase()}\` instead of \`${a}\` (in \`${e}\`) for formatting ${o} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const WA=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,YA=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,XA=/^'([^]*?)'?$/,ZA=/''/g,KA=/[a-zA-Z]/;function QA(a,e,i){const o=_f(),d=i?.locale??o.locale??kA,m=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,x=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0,A=qr(a,i?.in);if(!$S(A))throw new RangeError("Invalid time value");let S=e.match(YA).map(T=>{const R=T[0];if(R==="p"||R==="P"){const U=jA[R];return U(T,d.formatLong)}return T}).join("").match(WA).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const R=T[0];if(R==="'")return{isToken:!1,value:JA(T)};if(ly[R])return{isToken:!0,value:T};if(R.match(KA))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return{isToken:!1,value:T}});d.localize.preprocessor&&(S=d.localize.preprocessor(A,S));const v={firstWeekContainsDate:m,weekStartsOn:x,locale:d};return S.map(T=>{if(!T.isToken)return T.value;const R=T.value;(!i?.useAdditionalWeekYearTokens&&HA(R)||!i?.useAdditionalDayOfYearTokens&&VA(R))&&GA(R,e,String(a));const U=ly[R[0]];return U(A,R,d.localize,v)}).join("")}function JA(a){const e=a.match(XA);return e?e[1].replace(ZA,"'"):a}function hy(a,e,i){const[o,d]=a1(i?.in,a,e);return+zs(o,i)==+zs(d,i)}function D0(a,e){const i=()=>fa(e?.in,NaN),d=n_(a);let m;if(d.date){const v=r_(d.date,2);m=i_(v.restDateString,v.year)}if(!m||isNaN(+m))return i();const x=+m;let A=0,S;if(d.time&&(A=a_(d.time),isNaN(A)))return i();if(d.timezone){if(S=s_(d.timezone),isNaN(S))return i()}else{const v=new Date(x+A),T=qr(0,e?.in);return T.setFullYear(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()),T.setHours(v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds(),v.getUTCMilliseconds()),T}return qr(x+A+S,e?.in)}const Wu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},$A=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,e_=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,t_=/^([+-])(\d{2})(?::?(\d{2}))?$/;function n_(a){const e={},i=a.split(Wu.dateTimeDelimiter);let o;if(i.length>2)return e;if(/:/.test(i[0])?o=i[0]:(e.date=i[0],o=i[1],Wu.timeZoneDelimiter.test(e.date)&&(e.date=a.split(Wu.timeZoneDelimiter)[0],o=a.substr(e.date.length,a.length))),o){const d=Wu.timezone.exec(o);d?(e.time=o.replace(d[1],""),e.timezone=d[1]):e.time=o}return e}function r_(a,e){const i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),o=a.match(i);if(!o)return{year:NaN,restDateString:""};const d=o[1]?parseInt(o[1]):null,m=o[2]?parseInt(o[2]):null;return{year:m===null?d:m*100,restDateString:a.slice((o[1]||o[2]).length)}}function i_(a,e){if(e===null)return new Date(NaN);const i=a.match($A);if(!i)return new Date(NaN);const o=!!i[4],d=Jl(i[1]),m=Jl(i[2])-1,x=Jl(i[3]),A=Jl(i[4]),S=Jl(i[5])-1;if(o)return f_(e,A,S)?o_(e,A,S):new Date(NaN);{const v=new Date(0);return!c_(e,m,x)||!u_(e,d)?new Date(NaN):(v.setUTCFullYear(e,m,Math.max(d,x)),v)}}function Jl(a){return a?parseInt(a):1}function a_(a){const e=a.match(e_);if(!e)return NaN;const i=Vd(e[1]),o=Vd(e[2]),d=Vd(e[3]);return h_(i,o,d)?i*ex+o*$p+d*1e3:NaN}function Vd(a){return a&&parseFloat(a.replace(",","."))||0}function s_(a){if(a==="Z")return 0;const e=a.match(t_);if(!e)return 0;const i=e[1]==="+"?-1:1,o=parseInt(e[2]),d=e[3]&&parseInt(e[3])||0;return d_(o,d)?i*(o*ex+d*$p):NaN}function o_(a,e,i){const o=new Date(0);o.setUTCFullYear(a,0,4);const d=o.getUTCDay()||7,m=(e-1)*7+i+1-d;return o.setUTCDate(o.getUTCDate()+m),o}const l_=[31,null,31,30,31,30,31,31,30,31,30,31];function ox(a){return a%400===0||a%4===0&&a%100!==0}function c_(a,e,i){return e>=0&&e<=11&&i>=1&&i<=(l_[e]||(ox(a)?29:28))}function u_(a,e){return e>=1&&e<=(ox(a)?366:365)}function f_(a,e,i){return e>=1&&e<=53&&i>=0&&i<=6}function h_(a,e,i){return a===24?e===0&&i===0:i>=0&&i<60&&e>=0&&e<60&&a>=0&&a<25}function d_(a,e){return e>=0&&e<=59}const g_=async()=>"Notification"in window?await Notification.requestPermission()==="granted":(console.log("This browser does not support desktop notification"),!1),m_=a=>{const e=new Date,i=[],o="pantry_sent_notifications";let d={};try{d=JSON.parse(localStorage.getItem(o))||{}}catch(m){console.error("Error parsing sent notifications",m)}return a.forEach(m=>{if(m.status&&m.status!=="active")return;const x=D0(m.expiryDate),A=rx(x,e);if(A<=3&&A>=0){const S=`${m.id}_${m.expiryDate}`;d[S]||(i.push({...m,daysUntilExpiry:A}),d[S]=new Date().toISOString())}}),localStorage.setItem(o,JSON.stringify(d)),i},y_=(a,e)=>{if(Notification.permission==="granted"){const i={body:e,icon:"/pwa-192x192.png",vibrate:[200,100,200],badge:"/pwa-192x192.png",tag:"pantry-expiry-alert",renotify:!0,requireInteraction:!0,silent:!1},o=` ${a} `;"serviceWorker"in navigator&&navigator.serviceWorker.ready?navigator.serviceWorker.ready.then(d=>{d.showNotification(o,i)}):new Notification(o,i)}},p_={lessThanXSeconds:{one:"meno di un secondo",other:"meno di {{count}} secondi"},xSeconds:{one:"un secondo",other:"{{count}} secondi"},halfAMinute:"alcuni secondi",lessThanXMinutes:{one:"meno di un minuto",other:"meno di {{count}} minuti"},xMinutes:{one:"un minuto",other:"{{count}} minuti"},aboutXHours:{one:"circa un'ora",other:"circa {{count}} ore"},xHours:{one:"un'ora",other:"{{count}} ore"},xDays:{one:"un giorno",other:"{{count}} giorni"},aboutXWeeks:{one:"circa una settimana",other:"circa {{count}} settimane"},xWeeks:{one:"una settimana",other:"{{count}} settimane"},aboutXMonths:{one:"circa un mese",other:"circa {{count}} mesi"},xMonths:{one:"un mese",other:"{{count}} mesi"},aboutXYears:{one:"circa un anno",other:"circa {{count}} anni"},xYears:{one:"un anno",other:"{{count}} anni"},overXYears:{one:"pi di un anno",other:"pi di {{count}} anni"},almostXYears:{one:"quasi un anno",other:"quasi {{count}} anni"}},x_=(a,e,i)=>{let o;const d=p_[a];return typeof d=="string"?o=d:e===1?o=d.one:o=d.other.replace("{{count}}",e.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"tra "+o:o+" fa":o},w_={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},b_={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},v_={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},E_={date:Yo({formats:w_,defaultWidth:"full"}),time:Yo({formats:b_,defaultWidth:"full"}),dateTime:Yo({formats:v_,defaultWidth:"full"})},s1=["domenica","luned","marted","mercoled","gioved","venerd","sabato"];function S_(a){return a===0?"'domenica scorsa alle' p":"'"+s1[a]+" scorso alle' p"}function dy(a){return"'"+s1[a]+" alle' p"}function A_(a){return a===0?"'domenica prossima alle' p":"'"+s1[a]+" prossimo alle' p"}const __={lastWeek:(a,e,i)=>{const o=a.getDay();return hy(a,e,i)?dy(o):S_(o)},yesterday:"'ieri alle' p",today:"'oggi alle' p",tomorrow:"'domani alle' p",nextWeek:(a,e,i)=>{const o=a.getDay();return hy(a,e,i)?dy(o):A_(o)},other:"P"},C_=(a,e,i,o)=>{const d=__[a];return typeof d=="function"?d(e,i,o):d},T_={narrow:["aC","dC"],abbreviated:["a.C.","d.C."],wide:["avanti Cristo","dopo Cristo"]},O_={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},N_={narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],abbreviated:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],wide:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},R_={narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],abbreviated:["dom","lun","mar","mer","gio","ven","sab"],wide:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},I_={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"}},k_={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"}},D_=(a,e)=>{const i=Number(a);return String(i)},M_={ordinalNumber:D_,era:Ui({values:T_,defaultWidth:"wide"}),quarter:Ui({values:O_,defaultWidth:"wide",argumentCallback:a=>a-1}),month:Ui({values:N_,defaultWidth:"wide"}),day:Ui({values:R_,defaultWidth:"wide"}),dayPeriod:Ui({values:I_,defaultWidth:"wide",formattingValues:k_,defaultFormattingWidth:"wide"})},B_=/^(\d+)()?/i,L_=/\d+/i,U_={narrow:/^(aC|dC)/i,abbreviated:/^(a\.?\s?C\.?|a\.?\s?e\.?\s?v\.?|d\.?\s?C\.?|e\.?\s?v\.?)/i,wide:/^(avanti Cristo|avanti Era Volgare|dopo Cristo|Era Volgare)/i},j_={any:[/^a/i,/^(d|e)/i]},P_={narrow:/^[1234]/i,abbreviated:/^t[1234]/i,wide:/^[1234]()? trimestre/i},F_={any:[/1/i,/2/i,/3/i,/4/i]},z_={narrow:/^[gfmalsond]/i,abbreviated:/^(gen|feb|mar|apr|mag|giu|lug|ago|set|ott|nov|dic)/i,wide:/^(gennaio|febbraio|marzo|aprile|maggio|giugno|luglio|agosto|settembre|ottobre|novembre|dicembre)/i},V_={narrow:[/^g/i,/^f/i,/^m/i,/^a/i,/^m/i,/^g/i,/^l/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ge/i,/^f/i,/^mar/i,/^ap/i,/^mag/i,/^gi/i,/^l/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},H_={narrow:/^[dlmgvs]/i,short:/^(do|lu|ma|me|gi|ve|sa)/i,abbreviated:/^(dom|lun|mar|mer|gio|ven|sab)/i,wide:/^(domenica|luned[i|]|marted[i|]|mercoled[i|]|gioved[i|]|venerd[i|]|sabato)/i},G_={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^g/i,/^v/i,/^s/i],any:[/^d/i,/^l/i,/^ma/i,/^me/i,/^g/i,/^v/i,/^s/i]},q_={narrow:/^(a|m\.|p|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i,any:/^([ap]\.?\s?m\.?|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i},W_={any:{am:/^a/i,pm:/^p/i,midnight:/^mezza/i,noon:/^mezzo/i,morning:/mattina/i,afternoon:/pomeriggio/i,evening:/sera/i,night:/notte/i}},Y_={ordinalNumber:ix({matchPattern:B_,parsePattern:L_,valueCallback:a=>parseInt(a,10)}),era:ji({matchPatterns:U_,defaultMatchWidth:"wide",parsePatterns:j_,defaultParseWidth:"any"}),quarter:ji({matchPatterns:P_,defaultMatchWidth:"wide",parsePatterns:F_,defaultParseWidth:"any",valueCallback:a=>a+1}),month:ji({matchPatterns:z_,defaultMatchWidth:"wide",parsePatterns:V_,defaultParseWidth:"any"}),day:ji({matchPatterns:H_,defaultMatchWidth:"wide",parsePatterns:G_,defaultParseWidth:"any"}),dayPeriod:ji({matchPatterns:q_,defaultMatchWidth:"any",parsePatterns:W_,defaultParseWidth:"any"})},X_={code:"it",formatDistance:x_,formatLong:E_,formatRelative:C_,localize:M_,match:Y_,options:{weekStartsOn:1,firstWeekContainsDate:4}};function lx(a){var e,i,o="";if(typeof a=="string"||typeof a=="number")o+=a;else if(typeof a=="object")if(Array.isArray(a)){var d=a.length;for(e=0;e<d;e++)a[e]&&(i=lx(a[e]))&&(o&&(o+=" "),o+=i)}else for(i in a)a[i]&&(o&&(o+=" "),o+=i);return o}function dr(){for(var a,e,i=0,o="",d=arguments.length;i<d;i++)(a=arguments[i])&&(e=lx(a))&&(o&&(o+=" "),o+=e);return o}const Z_=(a,e)=>{const i=new Array(a.length+e.length);for(let o=0;o<a.length;o++)i[o]=a[o];for(let o=0;o<e.length;o++)i[a.length+o]=e[o];return i},K_=(a,e)=>({classGroupId:a,validator:e}),cx=(a=new Map,e=null,i)=>({nextPart:a,validators:e,classGroupId:i}),ff="-",gy=[],Q_="arbitrary..",J_=a=>{const e=eC(a),{conflictingClassGroups:i,conflictingClassGroupModifiers:o}=a;return{getClassGroupId:x=>{if(x.startsWith("[")&&x.endsWith("]"))return $_(x);const A=x.split(ff),S=A[0]===""&&A.length>1?1:0;return ux(A,S,e)},getConflictingClassGroupIds:(x,A)=>{if(A){const S=o[x],v=i[x];return S?v?Z_(v,S):S:v||gy}return i[x]||gy}}},ux=(a,e,i)=>{if(a.length-e===0)return i.classGroupId;const d=a[e],m=i.nextPart.get(d);if(m){const v=ux(a,e+1,m);if(v)return v}const x=i.validators;if(x===null)return;const A=e===0?a.join(ff):a.slice(e).join(ff),S=x.length;for(let v=0;v<S;v++){const T=x[v];if(T.validator(A))return T.classGroupId}},$_=a=>a.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=a.slice(1,-1),i=e.indexOf(":"),o=e.slice(0,i);return o?Q_+o:void 0})(),eC=a=>{const{theme:e,classGroups:i}=a;return tC(i,e)},tC=(a,e)=>{const i=cx();for(const o in a){const d=a[o];o1(d,i,o,e)}return i},o1=(a,e,i,o)=>{const d=a.length;for(let m=0;m<d;m++){const x=a[m];nC(x,e,i,o)}},nC=(a,e,i,o)=>{if(typeof a=="string"){rC(a,e,i);return}if(typeof a=="function"){iC(a,e,i,o);return}aC(a,e,i,o)},rC=(a,e,i)=>{const o=a===""?e:fx(e,a);o.classGroupId=i},iC=(a,e,i,o)=>{if(sC(a)){o1(a(o),e,i,o);return}e.validators===null&&(e.validators=[]),e.validators.push(K_(i,a))},aC=(a,e,i,o)=>{const d=Object.entries(a),m=d.length;for(let x=0;x<m;x++){const[A,S]=d[x];o1(S,fx(e,A),i,o)}},fx=(a,e)=>{let i=a;const o=e.split(ff),d=o.length;for(let m=0;m<d;m++){const x=o[m];let A=i.nextPart.get(x);A||(A=cx(),i.nextPart.set(x,A)),i=A}return i},sC=a=>"isThemeGetter"in a&&a.isThemeGetter===!0,oC=a=>{if(a<1)return{get:()=>{},set:()=>{}};let e=0,i=Object.create(null),o=Object.create(null);const d=(m,x)=>{i[m]=x,e++,e>a&&(e=0,o=i,i=Object.create(null))};return{get(m){let x=i[m];if(x!==void 0)return x;if((x=o[m])!==void 0)return d(m,x),x},set(m,x){m in i?i[m]=x:d(m,x)}}},M0="!",my=":",lC=[],yy=(a,e,i,o,d)=>({modifiers:a,hasImportantModifier:e,baseClassName:i,maybePostfixModifierPosition:o,isExternal:d}),cC=a=>{const{prefix:e,experimentalParseClassName:i}=a;let o=d=>{const m=[];let x=0,A=0,S=0,v;const T=d.length;for(let q=0;q<T;q++){const Q=d[q];if(x===0&&A===0){if(Q===my){m.push(d.slice(S,q)),S=q+1;continue}if(Q==="/"){v=q;continue}}Q==="["?x++:Q==="]"?x--:Q==="("?A++:Q===")"&&A--}const R=m.length===0?d:d.slice(S);let U=R,j=!1;R.endsWith(M0)?(U=R.slice(0,-1),j=!0):R.startsWith(M0)&&(U=R.slice(1),j=!0);const H=v&&v>S?v-S:void 0;return yy(m,j,U,H)};if(e){const d=e+my,m=o;o=x=>x.startsWith(d)?m(x.slice(d.length)):yy(lC,!1,x,void 0,!0)}if(i){const d=o;o=m=>i({className:m,parseClassName:d})}return o},uC=a=>{const e=new Map;return a.orderSensitiveModifiers.forEach((i,o)=>{e.set(i,1e6+o)}),i=>{const o=[];let d=[];for(let m=0;m<i.length;m++){const x=i[m],A=x[0]==="[",S=e.has(x);A||S?(d.length>0&&(d.sort(),o.push(...d),d=[]),o.push(x)):d.push(x)}return d.length>0&&(d.sort(),o.push(...d)),o}},fC=a=>({cache:oC(a.cacheSize),parseClassName:cC(a),sortModifiers:uC(a),...J_(a)}),hC=/\s+/,dC=(a,e)=>{const{parseClassName:i,getClassGroupId:o,getConflictingClassGroupIds:d,sortModifiers:m}=e,x=[],A=a.trim().split(hC);let S="";for(let v=A.length-1;v>=0;v-=1){const T=A[v],{isExternal:R,modifiers:U,hasImportantModifier:j,baseClassName:H,maybePostfixModifierPosition:q}=i(T);if(R){S=T+(S.length>0?" "+S:S);continue}let Q=!!q,ue=o(Q?H.substring(0,q):H);if(!ue){if(!Q){S=T+(S.length>0?" "+S:S);continue}if(ue=o(H),!ue){S=T+(S.length>0?" "+S:S);continue}Q=!1}const se=U.length===0?"":U.length===1?U[0]:m(U).join(":"),W=j?se+M0:se,me=W+ue;if(x.indexOf(me)>-1)continue;x.push(me);const Pe=d(ue,Q);for(let Ae=0;Ae<Pe.length;++Ae){const J=Pe[Ae];x.push(W+J)}S=T+(S.length>0?" "+S:S)}return S},gC=(...a)=>{let e=0,i,o,d="";for(;e<a.length;)(i=a[e++])&&(o=hx(i))&&(d&&(d+=" "),d+=o);return d},hx=a=>{if(typeof a=="string")return a;let e,i="";for(let o=0;o<a.length;o++)a[o]&&(e=hx(a[o]))&&(i&&(i+=" "),i+=e);return i},mC=(a,...e)=>{let i,o,d,m;const x=S=>{const v=e.reduce((T,R)=>R(T),a());return i=fC(v),o=i.cache.get,d=i.cache.set,m=A,A(S)},A=S=>{const v=o(S);if(v)return v;const T=dC(S,i);return d(S,T),T};return m=x,(...S)=>m(gC(...S))},yC=[],Hn=a=>{const e=i=>i[a]||yC;return e.isThemeGetter=!0,e},dx=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,gx=/^\((?:(\w[\w-]*):)?(.+)\)$/i,pC=/^\d+\/\d+$/,xC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,vC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,EC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lo=a=>pC.test(a),gt=a=>!!a&&!Number.isNaN(Number(a)),Ja=a=>!!a&&Number.isInteger(Number(a)),Hd=a=>a.endsWith("%")&&gt(a.slice(0,-1)),oa=a=>xC.test(a),SC=()=>!0,AC=a=>wC.test(a)&&!bC.test(a),mx=()=>!1,_C=a=>vC.test(a),CC=a=>EC.test(a),TC=a=>!Le(a)&&!Ue(a),OC=a=>Qo(a,xx,mx),Le=a=>dx.test(a),ks=a=>Qo(a,wx,AC),Gd=a=>Qo(a,DC,gt),py=a=>Qo(a,yx,mx),NC=a=>Qo(a,px,CC),Yu=a=>Qo(a,bx,_C),Ue=a=>gx.test(a),$l=a=>Jo(a,wx),RC=a=>Jo(a,MC),xy=a=>Jo(a,yx),IC=a=>Jo(a,xx),kC=a=>Jo(a,px),Xu=a=>Jo(a,bx,!0),Qo=(a,e,i)=>{const o=dx.exec(a);return o?o[1]?e(o[1]):i(o[2]):!1},Jo=(a,e,i=!1)=>{const o=gx.exec(a);return o?o[1]?e(o[1]):i:!1},yx=a=>a==="position"||a==="percentage",px=a=>a==="image"||a==="url",xx=a=>a==="length"||a==="size"||a==="bg-size",wx=a=>a==="length",DC=a=>a==="number",MC=a=>a==="family-name",bx=a=>a==="shadow",BC=()=>{const a=Hn("color"),e=Hn("font"),i=Hn("text"),o=Hn("font-weight"),d=Hn("tracking"),m=Hn("leading"),x=Hn("breakpoint"),A=Hn("container"),S=Hn("spacing"),v=Hn("radius"),T=Hn("shadow"),R=Hn("inset-shadow"),U=Hn("text-shadow"),j=Hn("drop-shadow"),H=Hn("blur"),q=Hn("perspective"),Q=Hn("aspect"),ue=Hn("ease"),se=Hn("animate"),W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],me=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Pe=()=>[...me(),Ue,Le],Ae=()=>["auto","hidden","clip","visible","scroll"],J=()=>["auto","contain","none"],xe=()=>[Ue,Le,S],fe=()=>[Lo,"full","auto",...xe()],Mt=()=>[Ja,"none","subgrid",Ue,Le],ft=()=>["auto",{span:["full",Ja,Ue,Le]},Ja,Ue,Le],Oe=()=>[Ja,"auto",Ue,Le],qe=()=>["auto","min","max","fr",Ue,Le],$e=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ne=()=>["start","end","center","stretch","center-safe","end-safe"],$=()=>["auto",...xe()],he=()=>[Lo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...xe()],we=()=>[a,Ue,Le],de=()=>[...me(),xy,py,{position:[Ue,Le]}],le=()=>["no-repeat",{repeat:["","x","y","space","round"]}],B=()=>["auto","cover","contain",IC,OC,{size:[Ue,Le]}],z=()=>[Hd,$l,ks],Z=()=>["","none","full",v,Ue,Le],ce=()=>["",gt,$l,ks],Ne=()=>["solid","dashed","dotted","double"],be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ke=()=>[gt,Hd,xy,py],We=()=>["","none",H,Ue,Le],Re=()=>["none",gt,Ue,Le],Ye=()=>["none",gt,Ue,Le],et=()=>[gt,Ue,Le],en=()=>[Lo,"full",...xe()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[oa],breakpoint:[oa],color:[SC],container:[oa],"drop-shadow":[oa],ease:["in","out","in-out"],font:[TC],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[oa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[oa],shadow:[oa],spacing:["px",gt],text:[oa],"text-shadow":[oa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Lo,Le,Ue,Q]}],container:["container"],columns:[{columns:[gt,Le,Ue,A]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Pe()}],overflow:[{overflow:Ae()}],"overflow-x":[{"overflow-x":Ae()}],"overflow-y":[{"overflow-y":Ae()}],overscroll:[{overscroll:J()}],"overscroll-x":[{"overscroll-x":J()}],"overscroll-y":[{"overscroll-y":J()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:fe()}],"inset-x":[{"inset-x":fe()}],"inset-y":[{"inset-y":fe()}],start:[{start:fe()}],end:[{end:fe()}],top:[{top:fe()}],right:[{right:fe()}],bottom:[{bottom:fe()}],left:[{left:fe()}],visibility:["visible","invisible","collapse"],z:[{z:[Ja,"auto",Ue,Le]}],basis:[{basis:[Lo,"full","auto",A,...xe()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[gt,Lo,"auto","initial","none",Le]}],grow:[{grow:["",gt,Ue,Le]}],shrink:[{shrink:["",gt,Ue,Le]}],order:[{order:[Ja,"first","last","none",Ue,Le]}],"grid-cols":[{"grid-cols":Mt()}],"col-start-end":[{col:ft()}],"col-start":[{"col-start":Oe()}],"col-end":[{"col-end":Oe()}],"grid-rows":[{"grid-rows":Mt()}],"row-start-end":[{row:ft()}],"row-start":[{"row-start":Oe()}],"row-end":[{"row-end":Oe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":qe()}],"auto-rows":[{"auto-rows":qe()}],gap:[{gap:xe()}],"gap-x":[{"gap-x":xe()}],"gap-y":[{"gap-y":xe()}],"justify-content":[{justify:[...$e(),"normal"]}],"justify-items":[{"justify-items":[...ne(),"normal"]}],"justify-self":[{"justify-self":["auto",...ne()]}],"align-content":[{content:["normal",...$e()]}],"align-items":[{items:[...ne(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ne(),{baseline:["","last"]}]}],"place-content":[{"place-content":$e()}],"place-items":[{"place-items":[...ne(),"baseline"]}],"place-self":[{"place-self":["auto",...ne()]}],p:[{p:xe()}],px:[{px:xe()}],py:[{py:xe()}],ps:[{ps:xe()}],pe:[{pe:xe()}],pt:[{pt:xe()}],pr:[{pr:xe()}],pb:[{pb:xe()}],pl:[{pl:xe()}],m:[{m:$()}],mx:[{mx:$()}],my:[{my:$()}],ms:[{ms:$()}],me:[{me:$()}],mt:[{mt:$()}],mr:[{mr:$()}],mb:[{mb:$()}],ml:[{ml:$()}],"space-x":[{"space-x":xe()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":xe()}],"space-y-reverse":["space-y-reverse"],size:[{size:he()}],w:[{w:[A,"screen",...he()]}],"min-w":[{"min-w":[A,"screen","none",...he()]}],"max-w":[{"max-w":[A,"screen","none","prose",{screen:[x]},...he()]}],h:[{h:["screen","lh",...he()]}],"min-h":[{"min-h":["screen","lh","none",...he()]}],"max-h":[{"max-h":["screen","lh",...he()]}],"font-size":[{text:["base",i,$l,ks]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,Ue,Gd]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Hd,Le]}],"font-family":[{font:[RC,Le,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[d,Ue,Le]}],"line-clamp":[{"line-clamp":[gt,"none",Ue,Gd]}],leading:[{leading:[m,...xe()]}],"list-image":[{"list-image":["none",Ue,Le]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ue,Le]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:we()}],"text-color":[{text:we()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[gt,"from-font","auto",Ue,ks]}],"text-decoration-color":[{decoration:we()}],"underline-offset":[{"underline-offset":[gt,"auto",Ue,Le]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:xe()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue,Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue,Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:de()}],"bg-repeat":[{bg:le()}],"bg-size":[{bg:B()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ja,Ue,Le],radial:["",Ue,Le],conic:[Ja,Ue,Le]},kC,NC]}],"bg-color":[{bg:we()}],"gradient-from-pos":[{from:z()}],"gradient-via-pos":[{via:z()}],"gradient-to-pos":[{to:z()}],"gradient-from":[{from:we()}],"gradient-via":[{via:we()}],"gradient-to":[{to:we()}],rounded:[{rounded:Z()}],"rounded-s":[{"rounded-s":Z()}],"rounded-e":[{"rounded-e":Z()}],"rounded-t":[{"rounded-t":Z()}],"rounded-r":[{"rounded-r":Z()}],"rounded-b":[{"rounded-b":Z()}],"rounded-l":[{"rounded-l":Z()}],"rounded-ss":[{"rounded-ss":Z()}],"rounded-se":[{"rounded-se":Z()}],"rounded-ee":[{"rounded-ee":Z()}],"rounded-es":[{"rounded-es":Z()}],"rounded-tl":[{"rounded-tl":Z()}],"rounded-tr":[{"rounded-tr":Z()}],"rounded-br":[{"rounded-br":Z()}],"rounded-bl":[{"rounded-bl":Z()}],"border-w":[{border:ce()}],"border-w-x":[{"border-x":ce()}],"border-w-y":[{"border-y":ce()}],"border-w-s":[{"border-s":ce()}],"border-w-e":[{"border-e":ce()}],"border-w-t":[{"border-t":ce()}],"border-w-r":[{"border-r":ce()}],"border-w-b":[{"border-b":ce()}],"border-w-l":[{"border-l":ce()}],"divide-x":[{"divide-x":ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ne(),"hidden","none"]}],"divide-style":[{divide:[...Ne(),"hidden","none"]}],"border-color":[{border:we()}],"border-color-x":[{"border-x":we()}],"border-color-y":[{"border-y":we()}],"border-color-s":[{"border-s":we()}],"border-color-e":[{"border-e":we()}],"border-color-t":[{"border-t":we()}],"border-color-r":[{"border-r":we()}],"border-color-b":[{"border-b":we()}],"border-color-l":[{"border-l":we()}],"divide-color":[{divide:we()}],"outline-style":[{outline:[...Ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[gt,Ue,Le]}],"outline-w":[{outline:["",gt,$l,ks]}],"outline-color":[{outline:we()}],shadow:[{shadow:["","none",T,Xu,Yu]}],"shadow-color":[{shadow:we()}],"inset-shadow":[{"inset-shadow":["none",R,Xu,Yu]}],"inset-shadow-color":[{"inset-shadow":we()}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:we()}],"ring-offset-w":[{"ring-offset":[gt,ks]}],"ring-offset-color":[{"ring-offset":we()}],"inset-ring-w":[{"inset-ring":ce()}],"inset-ring-color":[{"inset-ring":we()}],"text-shadow":[{"text-shadow":["none",U,Xu,Yu]}],"text-shadow-color":[{"text-shadow":we()}],opacity:[{opacity:[gt,Ue,Le]}],"mix-blend":[{"mix-blend":[...be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[gt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ke()}],"mask-image-linear-to-pos":[{"mask-linear-to":ke()}],"mask-image-linear-from-color":[{"mask-linear-from":we()}],"mask-image-linear-to-color":[{"mask-linear-to":we()}],"mask-image-t-from-pos":[{"mask-t-from":ke()}],"mask-image-t-to-pos":[{"mask-t-to":ke()}],"mask-image-t-from-color":[{"mask-t-from":we()}],"mask-image-t-to-color":[{"mask-t-to":we()}],"mask-image-r-from-pos":[{"mask-r-from":ke()}],"mask-image-r-to-pos":[{"mask-r-to":ke()}],"mask-image-r-from-color":[{"mask-r-from":we()}],"mask-image-r-to-color":[{"mask-r-to":we()}],"mask-image-b-from-pos":[{"mask-b-from":ke()}],"mask-image-b-to-pos":[{"mask-b-to":ke()}],"mask-image-b-from-color":[{"mask-b-from":we()}],"mask-image-b-to-color":[{"mask-b-to":we()}],"mask-image-l-from-pos":[{"mask-l-from":ke()}],"mask-image-l-to-pos":[{"mask-l-to":ke()}],"mask-image-l-from-color":[{"mask-l-from":we()}],"mask-image-l-to-color":[{"mask-l-to":we()}],"mask-image-x-from-pos":[{"mask-x-from":ke()}],"mask-image-x-to-pos":[{"mask-x-to":ke()}],"mask-image-x-from-color":[{"mask-x-from":we()}],"mask-image-x-to-color":[{"mask-x-to":we()}],"mask-image-y-from-pos":[{"mask-y-from":ke()}],"mask-image-y-to-pos":[{"mask-y-to":ke()}],"mask-image-y-from-color":[{"mask-y-from":we()}],"mask-image-y-to-color":[{"mask-y-to":we()}],"mask-image-radial":[{"mask-radial":[Ue,Le]}],"mask-image-radial-from-pos":[{"mask-radial-from":ke()}],"mask-image-radial-to-pos":[{"mask-radial-to":ke()}],"mask-image-radial-from-color":[{"mask-radial-from":we()}],"mask-image-radial-to-color":[{"mask-radial-to":we()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":me()}],"mask-image-conic-pos":[{"mask-conic":[gt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ke()}],"mask-image-conic-to-pos":[{"mask-conic-to":ke()}],"mask-image-conic-from-color":[{"mask-conic-from":we()}],"mask-image-conic-to-color":[{"mask-conic-to":we()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:de()}],"mask-repeat":[{mask:le()}],"mask-size":[{mask:B()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ue,Le]}],filter:[{filter:["","none",Ue,Le]}],blur:[{blur:We()}],brightness:[{brightness:[gt,Ue,Le]}],contrast:[{contrast:[gt,Ue,Le]}],"drop-shadow":[{"drop-shadow":["","none",j,Xu,Yu]}],"drop-shadow-color":[{"drop-shadow":we()}],grayscale:[{grayscale:["",gt,Ue,Le]}],"hue-rotate":[{"hue-rotate":[gt,Ue,Le]}],invert:[{invert:["",gt,Ue,Le]}],saturate:[{saturate:[gt,Ue,Le]}],sepia:[{sepia:["",gt,Ue,Le]}],"backdrop-filter":[{"backdrop-filter":["","none",Ue,Le]}],"backdrop-blur":[{"backdrop-blur":We()}],"backdrop-brightness":[{"backdrop-brightness":[gt,Ue,Le]}],"backdrop-contrast":[{"backdrop-contrast":[gt,Ue,Le]}],"backdrop-grayscale":[{"backdrop-grayscale":["",gt,Ue,Le]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[gt,Ue,Le]}],"backdrop-invert":[{"backdrop-invert":["",gt,Ue,Le]}],"backdrop-opacity":[{"backdrop-opacity":[gt,Ue,Le]}],"backdrop-saturate":[{"backdrop-saturate":[gt,Ue,Le]}],"backdrop-sepia":[{"backdrop-sepia":["",gt,Ue,Le]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":xe()}],"border-spacing-x":[{"border-spacing-x":xe()}],"border-spacing-y":[{"border-spacing-y":xe()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ue,Le]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[gt,"initial",Ue,Le]}],ease:[{ease:["linear","initial",ue,Ue,Le]}],delay:[{delay:[gt,Ue,Le]}],animate:[{animate:["none",se,Ue,Le]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[q,Ue,Le]}],"perspective-origin":[{"perspective-origin":Pe()}],rotate:[{rotate:Re()}],"rotate-x":[{"rotate-x":Re()}],"rotate-y":[{"rotate-y":Re()}],"rotate-z":[{"rotate-z":Re()}],scale:[{scale:Ye()}],"scale-x":[{"scale-x":Ye()}],"scale-y":[{"scale-y":Ye()}],"scale-z":[{"scale-z":Ye()}],"scale-3d":["scale-3d"],skew:[{skew:et()}],"skew-x":[{"skew-x":et()}],"skew-y":[{"skew-y":et()}],transform:[{transform:[Ue,Le,"","none","gpu","cpu"]}],"transform-origin":[{origin:Pe()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:en()}],"translate-x":[{"translate-x":en()}],"translate-y":[{"translate-y":en()}],"translate-z":[{"translate-z":en()}],"translate-none":["translate-none"],accent:[{accent:we()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:we()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue,Le]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":xe()}],"scroll-mx":[{"scroll-mx":xe()}],"scroll-my":[{"scroll-my":xe()}],"scroll-ms":[{"scroll-ms":xe()}],"scroll-me":[{"scroll-me":xe()}],"scroll-mt":[{"scroll-mt":xe()}],"scroll-mr":[{"scroll-mr":xe()}],"scroll-mb":[{"scroll-mb":xe()}],"scroll-ml":[{"scroll-ml":xe()}],"scroll-p":[{"scroll-p":xe()}],"scroll-px":[{"scroll-px":xe()}],"scroll-py":[{"scroll-py":xe()}],"scroll-ps":[{"scroll-ps":xe()}],"scroll-pe":[{"scroll-pe":xe()}],"scroll-pt":[{"scroll-pt":xe()}],"scroll-pr":[{"scroll-pr":xe()}],"scroll-pb":[{"scroll-pb":xe()}],"scroll-pl":[{"scroll-pl":xe()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue,Le]}],fill:[{fill:["none",...we()]}],"stroke-w":[{stroke:[gt,$l,ks,Gd]}],stroke:[{stroke:["none",...we()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},LC=mC(BC);function _r({children:a,className:e,intensity:i="medium",onClick:o}){const d=dr("rounded-[24px] transition-all duration-300 relative overflow-hidden","border border-gray-200 dark:border-white/10","shadow-none"),m={low:"bg-white dark:bg-pantry-bg-secondary",medium:"bg-white dark:bg-pantry-bg-secondary",high:"bg-white dark:bg-pantry-bg-secondary"};return D.jsx("div",{onClick:o,className:LC(d,m[i],o&&"cursor-pointer hover:bg-gray-50 dark:hover:bg-white/5 active:scale-[0.99]",e),children:D.jsx("div",{className:"relative z-10",children:a})})}const wy={Freschi:"",Dispensa:"",Surgelati:"",Bevande:"",Altro:""};function UC({products:a,onUpdate:e}){const[i,o]=Ge.useState("Tutti"),[d,m]=Ge.useState(null),[x,A]=Ge.useState(null),S=H=>{m(H)},v=async(H,q)=>{const Q=new Date().toISOString();await WS(H,{status:q,finishedAt:Q});const ue=a.find(se=>se.id===H);m(null),A(ue),e()},T=async H=>{H&&x&&await Qp({name:x.name}),A(null)},R=a.filter(H=>!H.status||H.status==="active"),j=[...R.filter(H=>i==="Tutti"?!0:H.category===i)].sort((H,q)=>new Date(H.expiryDate)-new Date(q.expiryDate));return R.length===0&&i==="Tutti"?D.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[D.jsx("div",{className:"w-20 h-20 bg-white/30 backdrop-blur-xl rounded-[32px] flex items-center justify-center mb-4 shadow-lg border border-white/40",children:D.jsx("span",{className:"text-4xl",children:""})}),D.jsx("p",{className:"text-lg font-medium",children:"La dispensa  vuota."}),D.jsx("p",{className:"text-sm opacity-70 mt-1",children:"Premi + per iniziare"})]}):D.jsxs(D.Fragment,{children:[D.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-6 -mx-5 pl-8 pr-5 no-scrollbar snap-x",children:[D.jsx("button",{onClick:()=>o("Tutti"),className:dr("px-6 py-2.5 rounded-2xl text-sm font-bold whitespace-nowrap transition-all duration-300 snap-start border",i==="Tutti"?"bg-gray-900 text-white border-transparent dark:bg-white dark:text-gray-900 shadow-md":"bg-white/40 text-gray-600 border-white/40 dark:bg-pantry-bg-secondary dark:text-white hover:bg-white/60 dark:hover:bg-white/10"),children:"Tutti"}),Object.entries(wy).map(([H,q])=>D.jsxs("button",{onClick:()=>o(H),className:dr("px-5 py-2.5 rounded-2xl text-sm font-bold whitespace-nowrap transition-all duration-300 snap-start border",i===H?"bg-gray-900 text-white border-transparent dark:bg-white dark:text-gray-900 shadow-md":"bg-white/40 text-gray-600 border-white/40 dark:bg-pantry-bg-secondary dark:text-white hover:bg-white/60 dark:hover:bg-white/10"),children:[D.jsx("span",{className:"mr-1.5",children:q})," ",H]},H))]}),D.jsx("ul",{className:"space-y-4 pb-24",children:j.map(H=>{const q=rx(D0(H.expiryDate),new Date);let Q=null,ue="",se="text-gray-900 dark:text-pantry-text-primary",W="bg-green-100 text-green-700 dark:bg-green-500/10 dark:text-green-400";return Q=null,q<3?(W="bg-red-100 text-red-700 dark:bg-red-500/10 dark:text-red-400",Q=D.jsx(b0,{size:14,className:"text-red-600 dark:text-red-400"})):q<=5&&(W="bg-yellow-100 text-yellow-800 dark:bg-yellow-500/10 dark:text-yellow-400",Q=D.jsx(b0,{size:14,className:"text-yellow-600 dark:text-yellow-400"})),D.jsx(_r,{className:dr("p-4 sm:p-5 transition-all",ue),children:D.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[D.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-2xl bg-white/60 shadow-sm flex items-center justify-center text-2xl",children:wy[H.category||"Dispensa"]||""}),D.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center min-h-[48px]",children:[D.jsxs("div",{className:"flex items-center justify-between gap-2",children:[D.jsx("h3",{className:dr("font-bold text-lg leading-tight truncate pr-1",se),children:H.name}),D.jsx("button",{onClick:()=>S(H.id),className:"flex-shrink-0 w-8 h-8 flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all active:scale-90 -mr-1",children:D.jsx(xf,{size:18,strokeWidth:2.5})})]}),D.jsxs("div",{className:dr("self-start inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-bold mt-1",W),children:[Q,D.jsxs("span",{children:[q<0?"Scaduto il ":"Scade il ",QA(D0(H.expiryDate),"d MMM yyyy",{locale:X_}).toUpperCase()]}),q>=0&&q<=7&&D.jsxs("span",{className:"opacity-80",children:["(",q,"g)"]})]})]})]})},H.id)})}),d&&D.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center p-6 z-50 animate-fade-in-up",children:D.jsxs(_r,{intensity:"high",className:"w-full max-w-sm p-8 text-center border-white/80 shadow-2xl",children:[D.jsx("h3",{className:"text-2xl font-bold mb-8 text-gray-800",children:"Cosa ne hai fatto?"}),D.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[D.jsxs("button",{onClick:()=>v(d,"consumed"),className:"flex flex-col items-center justify-center p-5 bg-green-50/50 hover:bg-green-100 border border-green-100 text-green-700 rounded-2xl transition hover:scale-105 active:scale-95 duration-200",children:[D.jsx("span",{className:"text-5xl mb-3 drop-shadow-sm",children:""}),D.jsx("span",{className:"font-bold",children:"Mangiato"})]}),D.jsxs("button",{onClick:()=>v(d,"wasted"),className:"flex flex-col items-center justify-center p-5 bg-red-50/50 hover:bg-red-100 border border-red-100 text-red-700 rounded-2xl transition hover:scale-105 active:scale-95 duration-200",children:[D.jsx("span",{className:"text-5xl mb-3 drop-shadow-sm",children:""}),D.jsx("span",{className:"font-bold",children:"Buttato"})]})]}),D.jsx("button",{onClick:()=>m(null),className:"mt-8 text-gray-400 text-sm font-medium hover:text-gray-600",children:"Annulla"})]})}),x&&D.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center p-6 z-50 animate-fade-in-up",children:D.jsxs(_r,{intensity:"high",className:"w-full max-w-sm p-8 text-center border-white/80 shadow-2xl",children:[D.jsx("div",{className:"w-20 h-20 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-inner",children:D.jsx(X0,{size:36,strokeWidth:2.5})}),D.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900 dark:text-white",children:"Lista Spesa?"}),D.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:["Vuoi aggiungere ",D.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:x.name})," alla lista della spesa?"]}),D.jsxs("div",{className:"flex gap-4",children:[D.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-3.5 border border-gray-200 bg-white text-gray-600 font-bold rounded-xl hover:bg-gray-50 dark:bg-white/10 dark:border-white/10 dark:text-gray-300 dark:hover:bg-white/20 transition",children:"No"}),D.jsx("button",{onClick:()=>T(!0),className:"flex-1 py-3.5 bg-gray-900 text-white dark:bg-white dark:text-black font-bold rounded-xl hover:bg-black shadow-lg hover:shadow-xl transition transform hover:-translate-y-0.5",children:"S, aggiungi"})]})]})})]})}function jC({onComplete:a,onCancel:e,isAdding:i}){const[o,d]=Ge.useState("welcome"),[m,x]=Ge.useState({name:"",pin:"",inviteCode:""}),[A,S]=Ge.useState(""),[v,T]=Ge.useState(!1),R=async U=>{U.preventDefault(),S(""),T(!0);try{let j;o==="create"?j=await VS(m.name,m.pin):j=await HS(m.inviteCode,m.pin),j.success?a(j.pantryId):S(j.error)}catch{S("Errore imprevisto. Riprova.")}finally{T(!1)}};return o==="welcome"?D.jsxs("div",{className:"h-[100dvh] flex flex-col items-center justify-center p-6 bg-gradient-to-br from-teal-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:to-gray-800 text-center animate-fade-in-up",children:[D.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center shadow-lg mb-6",children:D.jsx(v0,{size:40,className:"text-white"})}),D.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Pantry Family"}),D.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-12 max-w-xs mx-auto",children:"Gestisci la dispensa insieme ai tuoi coinquilini o familiari."}),D.jsxs("div",{className:"w-full max-w-sm space-y-4",children:[D.jsxs("button",{onClick:()=>d("create"),className:"w-full py-4 bg-blue-600 text-white font-bold rounded-2xl shadow-lg hover:shadow-blue-500/30 hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-3",children:[D.jsx(v0,{size:20}),"Crea Nuova Famiglia"]}),D.jsxs("button",{onClick:()=>d("join"),className:"w-full py-4 bg-white dark:bg-white/10 text-gray-800 dark:text-white font-bold rounded-2xl border border-gray-100 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/20 transition-all flex items-center justify-center gap-3",children:[D.jsx(Iv,{size:20}),"Unisciti ad una Famiglia"]})]})]}):D.jsxs("div",{className:"h-[100dvh] flex flex-col p-6 bg-white dark:bg-gray-900 animate-fade-in-up",children:[D.jsx("button",{onClick:()=>{d("welcome"),S("")},className:"self-start p-2 -ml-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:" Indietro"}),e&&o==="welcome"&&D.jsx("button",{onClick:e,className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 font-bold",children:"Annulla"}),D.jsxs("div",{className:"flex-1 flex flex-col justify-center max-w-sm mx-auto w-full",children:[D.jsxs("div",{className:"mb-8",children:[D.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:o==="create"?"Crea Famiglia":"Unisciti alla Famiglia"}),D.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:o==="create"?"Scegli un nome e un PIN segreto per il tuo gruppo.":"Inserisci il codice invito ricevuto e il PIN di sicurezza."})]}),D.jsxs("form",{onSubmit:R,className:"space-y-5",children:[o==="create"?D.jsxs(D.Fragment,{children:[D.jsxs("div",{children:[D.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Nome Famiglia"}),D.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all dark:text-white font-medium",placeholder:"Es. Casa Mare",value:m.name,onChange:U=>x({...m,name:U.target.value})})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Scegli PIN (4 cifre)"}),D.jsx("input",{type:"tel",required:!0,maxLength:4,pattern:"[0-9]{4}",className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all dark:text-white font-medium tracking-widest text-center text-lg",placeholder:"0000",value:m.pin,onChange:U=>x({...m,pin:U.target.value})})]})]}):D.jsxs(D.Fragment,{children:[D.jsxs("div",{children:[D.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Codice Invito (UUID)"}),D.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all dark:text-white font-mono text-sm",placeholder:"xxxxxxxx-xxxx-...",value:m.inviteCode,onChange:U=>x({...m,inviteCode:U.target.value})})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"PIN di Accesso"}),D.jsx("input",{type:"tel",required:!0,maxLength:4,className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all dark:text-white font-medium tracking-widest text-center text-lg",placeholder:"",value:m.pin,onChange:U=>x({...m,pin:U.target.value})})]})]}),A&&D.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-xl font-medium text-center animate-shake",children:A}),D.jsxs("button",{type:"submit",disabled:v,className:"w-full py-4 bg-blue-600 text-white font-bold rounded-2xl shadow-lg hover:shadow-blue-500/30 hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-2",children:[v?"Attendere...":o==="create"?"Crea Gruppo":"Entra nel Gruppo",!v&&D.jsx(lv,{size:20})]})]})]})]})}const PC="modulepreload",FC=function(a){return"/"+a},by={},zC=function(e,i,o){let d=Promise.resolve();if(i&&i.length>0){let v=function(T){return Promise.all(T.map(R=>Promise.resolve(R).then(U=>({status:"fulfilled",value:U}),U=>({status:"rejected",reason:U}))))};var x=v;document.getElementsByTagName("link");const A=document.querySelector("meta[property=csp-nonce]"),S=A?.nonce||A?.getAttribute("nonce");d=v(i.map(T=>{if(T=FC(T),T in by)return;by[T]=!0;const R=T.endsWith(".css"),U=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${T}"]${U}`))return;const j=document.createElement("link");if(j.rel=R?"stylesheet":PC,R||(j.as="script"),j.crossOrigin="",j.href=T,S&&j.setAttribute("nonce",S),document.head.appendChild(j),R)return new Promise((H,q)=>{j.addEventListener("load",H),j.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${T}`)))})}))}function m(A){const S=new Event("vite:preloadError",{cancelable:!0});if(S.payload=A,window.dispatchEvent(S),!S.defaultPrevented)throw A}return d.then(A=>{for(const S of A||[])S.status==="rejected"&&m(S.reason);return e().catch(m)})};var De;(function(a){a[a.QR_CODE=0]="QR_CODE",a[a.AZTEC=1]="AZTEC",a[a.CODABAR=2]="CODABAR",a[a.CODE_39=3]="CODE_39",a[a.CODE_93=4]="CODE_93",a[a.CODE_128=5]="CODE_128",a[a.DATA_MATRIX=6]="DATA_MATRIX",a[a.MAXICODE=7]="MAXICODE",a[a.ITF=8]="ITF",a[a.EAN_13=9]="EAN_13",a[a.EAN_8=10]="EAN_8",a[a.PDF_417=11]="PDF_417",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(De||(De={}));var vy=new Map([[De.QR_CODE,"QR_CODE"],[De.AZTEC,"AZTEC"],[De.CODABAR,"CODABAR"],[De.CODE_39,"CODE_39"],[De.CODE_93,"CODE_93"],[De.CODE_128,"CODE_128"],[De.DATA_MATRIX,"DATA_MATRIX"],[De.MAXICODE,"MAXICODE"],[De.ITF,"ITF"],[De.EAN_13,"EAN_13"],[De.EAN_8,"EAN_8"],[De.PDF_417,"PDF_417"],[De.RSS_14,"RSS_14"],[De.RSS_EXPANDED,"RSS_EXPANDED"],[De.UPC_A,"UPC_A"],[De.UPC_E,"UPC_E"],[De.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Ey;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.URL=1]="URL"})(Ey||(Ey={}));function VC(a){return Object.values(De).includes(a)}var yc;(function(a){a[a.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",a[a.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(yc||(yc={}));var HC=(function(){function a(){}return a.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",a.SCAN_DEFAULT_FPS=2,a.DEFAULT_DISABLE_FLIP=!1,a.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,a.DEFAULT_SUPPORTED_SCAN_TYPE=[yc.SCAN_TYPE_CAMERA,yc.SCAN_TYPE_FILE],a})(),vx=(function(){function a(e,i){this.format=e,this.formatName=i}return a.prototype.toString=function(){return this.formatName},a.create=function(e){if(!vy.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new a(e,vy.get(e))},a})(),Sy=(function(){function a(){}return a.createFromText=function(e){var i={text:e};return{decodedText:e,result:i}},a.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},a})(),B0;(function(a){a[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(B0||(B0={}));var GC=(function(){function a(){}return a.createFrom=function(e){return{errorMessage:e,type:B0.UNKWOWN_ERROR}},a})(),qC=(function(){function a(e){this.verbose=e}return a.prototype.log=function(e){this.verbose&&console.log(e)},a.prototype.warn=function(e){this.verbose&&console.warn(e)},a.prototype.logError=function(e,i){(this.verbose||i===!0)&&console.error(e)},a.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},a})();function ca(a){return typeof a>"u"||a===null}var Go=(function(){function a(){}return a.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},a.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},a.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},a.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},a.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},a.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},a.scannerPaused=function(){return"Scanner paused"},a})(),Ex=(function(){function a(){}return a.isMediaStreamConstraintsValid=function(e,i){if(typeof e!="object"){var o=typeof e;return i.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var d=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(d),x=Object.keys(e),A=0,S=x;A<S.length;A++){var v=S[A];if(m.has(v))return i.logError("".concat(v," is not supported videoConstaints."),!0),!1}return!0},a})(),rc={exports:{}},WC=rc.exports,Ay;function YC(){return Ay||(Ay=1,(function(a,e){(function(i,o){o(e)})(WC,(function(i){function o(O){return O==null}var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,n){O.__proto__=n}||function(O,n){for(var s in n)n.hasOwnProperty(s)&&(O[s]=n[s])};function m(O,n){d(O,n);function s(){this.constructor=O}O.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}function x(O,n){var s=Object.setPrototypeOf;s?s(O,n):O.__proto__=n}function A(O,n){n===void 0&&(n=O.constructor);var s=Error.captureStackTrace;s&&s(O,n)}var S=(function(O){m(n,O);function n(s){var l=this.constructor,u=O.call(this,s)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),x(u,l.prototype),A(u),u}return n})(Error);class v extends S{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}v.kind="Exception";class T extends v{}T.kind="ArgumentException";class R extends v{}R.kind="IllegalArgumentException";class U{constructor(n){if(this.binarizer=n,n===null)throw new R("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,s){return this.binarizer.getBlackRow(n,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,s,l,u){const f=this.binarizer.getLuminanceSource().crop(n,s,l,u);return new U(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new U(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new U(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class j extends v{static getChecksumInstance(){return new j}}j.kind="ChecksumException";class H{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class q{static arraycopy(n,s,l,u,f){for(;f--;)l[u++]=n[s++]}static currentTimeMillis(){return Date.now()}}class Q extends v{}Q.kind="IndexOutOfBoundsException";class ue extends Q{constructor(n=void 0,s=void 0){super(s),this.index=n,this.message=s}}ue.kind="ArrayIndexOutOfBoundsException";class se{static fill(n,s){for(let l=0,u=n.length;l<u;l++)n[l]=s}static fillWithin(n,s,l,u){se.rangeCheck(n.length,s,l);for(let f=s;f<l;f++)n[f]=u}static rangeCheck(n,s,l){if(s>l)throw new R("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new ue(s);if(l>n)throw new ue(l)}static asList(...n){return n}static create(n,s,l){return Array.from({length:n}).map(f=>Array.from({length:s}).fill(l))}static createInt32Array(n,s,l){return Array.from({length:n}).map(f=>Int32Array.from({length:s}).fill(l))}static equals(n,s){if(!n||!s||!n.length||!s.length||n.length!==s.length)return!1;for(let l=0,u=n.length;l<u;l++)if(n[l]!==s[l])return!1;return!0}static hashCode(n){if(n===null)return 0;let s=1;for(const l of n)s=31*s+l;return s}static fillUint8Array(n,s){for(let l=0;l!==n.length;l++)n[l]=s}static copyOf(n,s){return n.slice(0,s)}static copyOfUint8Array(n,s){if(n.length<=s){const l=new Uint8Array(s);return l.set(n),l}return n.slice(0,s)}static copyOfRange(n,s,l){const u=l-s,f=new Int32Array(u);return q.arraycopy(n,s,f,0,u),f}static binarySearch(n,s,l){l===void 0&&(l=se.numberComparator);let u=0,f=n.length-1;for(;u<=f;){const g=f+u>>1,y=l(s,n[g]);if(y>0)u=g+1;else if(y<0)f=g-1;else return g}return-u-1}static numberComparator(n,s){return n-s}}class W{static numberOfTrailingZeros(n){let s;if(n===0)return 32;let l=31;return s=n<<16,s!==0&&(l-=16,n=s),s=n<<8,s!==0&&(l-=8,n=s),s=n<<4,s!==0&&(l-=4,n=s),s=n<<2,s!==0&&(l-=2,n=s),l-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let s=1;return n>>>16||(s+=16,n<<=16),n>>>24||(s+=8,n<<=8),n>>>28||(s+=4,n<<=4),n>>>30||(s+=2,n<<=2),s-=n>>>31,s}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,s){return Math.trunc(n/s)}static parseInt(n,s=void 0){return parseInt(n,s)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class me{constructor(n,s){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,s==null?this.bits=me.makeArray(n):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const s=me.makeArray(n);q.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const s=this.size;if(n>=s)return s;const l=this.bits;let u=Math.floor(n/32),f=l[u];f&=~((1<<(n&31))-1);const g=l.length;for(;f===0;){if(++u===g)return s;f=l[u]}const y=u*32+W.numberOfTrailingZeros(f);return y>s?s:y}getNextUnset(n){const s=this.size;if(n>=s)return s;const l=this.bits;let u=Math.floor(n/32),f=~l[u];f&=~((1<<(n&31))-1);const g=l.length;for(;f===0;){if(++u===g)return s;f=~l[u]}const y=u*32+W.numberOfTrailingZeros(f);return y>s?s:y}setBulk(n,s){this.bits[Math.floor(n/32)]=s}setRange(n,s){if(s<n||n<0||s>this.size)throw new R;if(s===n)return;s--;const l=Math.floor(n/32),u=Math.floor(s/32),f=this.bits;for(let g=l;g<=u;g++){const y=g>l?0:n&31,E=(2<<(g<u?31:s&31))-(1<<y);f[g]|=E}}clear(){const n=this.bits.length,s=this.bits;for(let l=0;l<n;l++)s[l]=0}isRange(n,s,l){if(s<n||n<0||s>this.size)throw new R;if(s===n)return!0;s--;const u=Math.floor(n/32),f=Math.floor(s/32),g=this.bits;for(let y=u;y<=f;y++){const w=y>u?0:n&31,_=(2<<(y<f?31:s&31))-(1<<w)&4294967295;if((g[y]&_)!==(l?_:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,s){if(s<0||s>32)throw new R("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit((n>>l-1&1)===1)}appendBitArray(n){const s=n.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(n.get(l))}xor(n){if(this.size!==n.size)throw new R("Sizes don't match");const s=this.bits;for(let l=0,u=s.length;l<u;l++)s[l]^=n.bits[l]}toBytes(n,s,l,u){for(let f=0;f<u;f++){let g=0;for(let y=0;y<8;y++)this.get(n)&&(g|=1<<7-y),n++;s[l+f]=g}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,u=this.bits;for(let f=0;f<l;f++){let g=u[f];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,n[s-f]=g}if(this.size!==l*32){const f=l*32-this.size;let g=n[0]>>>f;for(let y=1;y<l;y++){const w=n[y];g|=w<<32-f,n[y-1]=g,g=w>>>f}n[l-1]=g}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof me))return!1;const s=n;return this.size===s.size&&se.equals(this.bits,s.bits)}hashCode(){return 31*this.size+se.hashCode(this.bits)}toString(){let n="";for(let s=0,l=this.size;s<l;s++)(s&7)===0&&(n+=" "),n+=this.get(s)?"X":".";return n}clone(){return new me(this.size,this.bits.slice())}}var Pe;(function(O){O[O.OTHER=0]="OTHER",O[O.PURE_BARCODE=1]="PURE_BARCODE",O[O.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",O[O.TRY_HARDER=3]="TRY_HARDER",O[O.CHARACTER_SET=4]="CHARACTER_SET",O[O.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",O[O.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",O[O.ASSUME_GS1=7]="ASSUME_GS1",O[O.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",O[O.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",O[O.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Pe||(Pe={}));var Ae=Pe;class J extends v{static getFormatInstance(){return new J}}J.kind="FormatException";var xe;(function(O){O[O.Cp437=0]="Cp437",O[O.ISO8859_1=1]="ISO8859_1",O[O.ISO8859_2=2]="ISO8859_2",O[O.ISO8859_3=3]="ISO8859_3",O[O.ISO8859_4=4]="ISO8859_4",O[O.ISO8859_5=5]="ISO8859_5",O[O.ISO8859_6=6]="ISO8859_6",O[O.ISO8859_7=7]="ISO8859_7",O[O.ISO8859_8=8]="ISO8859_8",O[O.ISO8859_9=9]="ISO8859_9",O[O.ISO8859_10=10]="ISO8859_10",O[O.ISO8859_11=11]="ISO8859_11",O[O.ISO8859_13=12]="ISO8859_13",O[O.ISO8859_14=13]="ISO8859_14",O[O.ISO8859_15=14]="ISO8859_15",O[O.ISO8859_16=15]="ISO8859_16",O[O.SJIS=16]="SJIS",O[O.Cp1250=17]="Cp1250",O[O.Cp1251=18]="Cp1251",O[O.Cp1252=19]="Cp1252",O[O.Cp1256=20]="Cp1256",O[O.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",O[O.UTF8=22]="UTF8",O[O.ASCII=23]="ASCII",O[O.Big5=24]="Big5",O[O.GB18030=25]="GB18030",O[O.EUC_KR=26]="EUC_KR"})(xe||(xe={}));class fe{constructor(n,s,l,...u){this.valueIdentifier=n,this.name=l,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,fe.VALUE_IDENTIFIER_TO_ECI.set(n,this),fe.NAME_TO_ECI.set(l,this);const f=this.values;for(let g=0,y=f.length;g!==y;g++){const w=f[g];fe.VALUES_TO_ECI.set(w,this)}for(const g of u)fe.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new J("incorect value");const s=fe.VALUES_TO_ECI.get(n);if(s===void 0)throw new J("incorect value");return s}static getCharacterSetECIByName(n){const s=fe.NAME_TO_ECI.get(n);if(s===void 0)throw new J("incorect value");return s}equals(n){if(!(n instanceof fe))return!1;const s=n;return this.getName()===s.getName()}}fe.VALUE_IDENTIFIER_TO_ECI=new Map,fe.VALUES_TO_ECI=new Map,fe.NAME_TO_ECI=new Map,fe.Cp437=new fe(xe.Cp437,Int32Array.from([0,2]),"Cp437"),fe.ISO8859_1=new fe(xe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),fe.ISO8859_2=new fe(xe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),fe.ISO8859_3=new fe(xe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),fe.ISO8859_4=new fe(xe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),fe.ISO8859_5=new fe(xe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),fe.ISO8859_6=new fe(xe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),fe.ISO8859_7=new fe(xe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),fe.ISO8859_8=new fe(xe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),fe.ISO8859_9=new fe(xe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),fe.ISO8859_10=new fe(xe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),fe.ISO8859_11=new fe(xe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),fe.ISO8859_13=new fe(xe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),fe.ISO8859_14=new fe(xe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),fe.ISO8859_15=new fe(xe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),fe.ISO8859_16=new fe(xe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),fe.SJIS=new fe(xe.SJIS,20,"SJIS","Shift_JIS"),fe.Cp1250=new fe(xe.Cp1250,21,"Cp1250","windows-1250"),fe.Cp1251=new fe(xe.Cp1251,22,"Cp1251","windows-1251"),fe.Cp1252=new fe(xe.Cp1252,23,"Cp1252","windows-1252"),fe.Cp1256=new fe(xe.Cp1256,24,"Cp1256","windows-1256"),fe.UnicodeBigUnmarked=new fe(xe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),fe.UTF8=new fe(xe.UTF8,26,"UTF8","UTF-8"),fe.ASCII=new fe(xe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),fe.Big5=new fe(xe.Big5,28,"Big5"),fe.GB18030=new fe(xe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),fe.EUC_KR=new fe(xe.EUC_KR,30,"EUC_KR","EUC-KR");class Mt extends v{}Mt.kind="UnsupportedOperationException";class ft{static decode(n,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(n,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(n,l):new TextDecoder(l).decode(n)}static shouldDecodeOnFallback(n){return!ft.isBrowser()&&n==="ISO-8859-1"}static encode(n,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(n,l):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof fe?n:fe.getCharacterSetECIByName(n)}static decodeFallback(n,s){const l=this.encodingCharacterSet(s);if(ft.isDecodeFallbackSupported(l)){let u="";for(let f=0,g=n.length;f<g;f++){let y=n[f].toString(16);y.length<2&&(y="0"+y),u+="%"+y}return decodeURIComponent(u)}if(l.equals(fe.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new Mt(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(fe.UTF8)||n.equals(fe.ISO8859_1)||n.equals(fe.ASCII)}static encodeFallback(n){const l=btoa(unescape(encodeURIComponent(n))).split(""),u=[];for(let f=0;f<l.length;f++)u.push(l[f].charCodeAt(0));return new Uint8Array(u)}}class Oe{static castAsNonUtf8Char(n,s=null){const l=s?s.getName():this.ISO88591;return ft.decode(new Uint8Array([n]),l)}static guessEncoding(n,s){if(s!=null&&s.get(Ae.CHARACTER_SET)!==void 0)return s.get(Ae.CHARACTER_SET).toString();const l=n.length;let u=!0,f=!0,g=!0,y=0,w=0,E=0,_=0,N=0,I=0,L=0,F=0,V=0,X=0,ie=0;const _e=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let Se=0;Se<l&&(u||f||g);Se++){const Ee=n[Se]&255;g&&(y>0?(Ee&128)===0?g=!1:y--:(Ee&128)!==0&&((Ee&64)===0?g=!1:(y++,(Ee&32)===0?w++:(y++,(Ee&16)===0?E++:(y++,(Ee&8)===0?_++:g=!1))))),u&&(Ee>127&&Ee<160?u=!1:Ee>159&&(Ee<192||Ee===215||Ee===247)&&ie++),f&&(N>0?Ee<64||Ee===127||Ee>252?f=!1:N--:Ee===128||Ee===160||Ee>239?f=!1:Ee>160&&Ee<224?(I++,F=0,L++,L>V&&(V=L)):Ee>127?(N++,L=0,F++,F>X&&(X=F)):(L=0,F=0))}return g&&y>0&&(g=!1),f&&N>0&&(f=!1),g&&(_e||w+E+_>0)?Oe.UTF8:f&&(Oe.ASSUME_SHIFT_JIS||V>=3||X>=3)?Oe.SHIFT_JIS:u&&f?V===2&&I===2||ie*10>=l?Oe.SHIFT_JIS:Oe.ISO88591:u?Oe.ISO88591:f?Oe.SHIFT_JIS:g?Oe.UTF8:Oe.PLATFORM_DEFAULT_ENCODING}static format(n,...s){let l=-1;function u(g,y,w,E,_,N){if(g==="%%")return"%";if(s[++l]===void 0)return;g=E?parseInt(E.substr(1)):void 0;let I=_?parseInt(_.substr(1)):void 0,L;switch(N){case"s":L=s[l];break;case"c":L=s[l][0];break;case"f":L=parseFloat(s[l]).toFixed(g);break;case"p":L=parseFloat(s[l]).toPrecision(g);break;case"e":L=parseFloat(s[l]).toExponential(g);break;case"x":L=parseInt(s[l]).toString(I||16);break;case"d":L=parseFloat(parseInt(s[l],I||10).toPrecision(g)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(I);let F=parseInt(w),V=w&&w[0]+""=="0"?"0":" ";for(;L.length<F;)L=y!==void 0?L+V:V+L;return L}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(f,u)}static getBytes(n,s){return ft.encode(n,s)}static getCharCode(n,s=0){return n.charCodeAt(s)}static getCharAt(n){return String.fromCharCode(n)}}Oe.SHIFT_JIS=fe.SJIS.getName(),Oe.GB2312="GB2312",Oe.ISO88591=fe.ISO8859_1.getName(),Oe.EUC_JP="EUC_JP",Oe.UTF8=fe.UTF8.getName(),Oe.PLATFORM_DEFAULT_ENCODING=Oe.UTF8,Oe.ASSUME_SHIFT_JIS=!1;class qe{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=Oe.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,s,l){for(let u=s;s<s+l;u++)this.append(n[u]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,s){this.value=this.value.substr(0,n)+s+this.value.substr(n+1)}substring(n,s){return this.value.substring(n,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,s){this.value=this.value.substr(0,n)+s+this.value.substr(n+s.length)}}class $e{constructor(n,s,l,u){if(this.width=n,this.height=s,this.rowSize=l,this.bits=u,s==null&&(s=n),this.height=s,n<1||s<1)throw new R("Both dimensions must be greater than 0");l==null&&(l=Math.floor((n+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const s=n.length,l=n[0].length,u=new $e(l,s);for(let f=0;f<s;f++){const g=n[f];for(let y=0;y<l;y++)g[y]&&u.set(y,f)}return u}static parseFromString(n,s,l){if(n===null)throw new R("stringRepresentation cannot be null");const u=new Array(n.length);let f=0,g=0,y=-1,w=0,E=0;for(;E<n.length;)if(n.charAt(E)===`
`||n.charAt(E)==="\r"){if(f>g){if(y===-1)y=f-g;else if(f-g!==y)throw new R("row lengths do not match");g=f,w++}E++}else if(n.substring(E,E+s.length)===s)E+=s.length,u[f]=!0,f++;else if(n.substring(E,E+l.length)===l)E+=l.length,u[f]=!1,f++;else throw new R("illegal character encountered: "+n.substring(E));if(f>g){if(y===-1)y=f-g;else if(f-g!==y)throw new R("row lengths do not match");w++}const _=new $e(y,w);for(let N=0;N<f;N++)u[N]&&_.set(Math.floor(N%y),Math.floor(N/y));return _}get(n,s){const l=s*this.rowSize+Math.floor(n/32);return(this.bits[l]>>>(n&31)&1)!==0}set(n,s){const l=s*this.rowSize+Math.floor(n/32);this.bits[l]|=1<<(n&31)&4294967295}unset(n,s){const l=s*this.rowSize+Math.floor(n/32);this.bits[l]&=~(1<<(n&31)&4294967295)}flip(n,s){const l=s*this.rowSize+Math.floor(n/32);this.bits[l]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new R("input matrix dimensions do not match");const s=new me(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let f=0,g=this.height;f<g;f++){const y=f*l,w=n.getRow(f,s).getBitArray();for(let E=0;E<l;E++)u[y+E]^=w[E]}}clear(){const n=this.bits,s=n.length;for(let l=0;l<s;l++)n[l]=0}setRegion(n,s,l,u){if(s<0||n<0)throw new R("Left and top must be nonnegative");if(u<1||l<1)throw new R("Height and width must be at least 1");const f=n+l,g=s+u;if(g>this.height||f>this.width)throw new R("The region must fit inside the matrix");const y=this.rowSize,w=this.bits;for(let E=s;E<g;E++){const _=E*y;for(let N=n;N<f;N++)w[_+Math.floor(N/32)]|=1<<(N&31)&4294967295}}getRow(n,s){s==null||s.getSize()<this.width?s=new me(this.width):s.clear();const l=this.rowSize,u=this.bits,f=n*l;for(let g=0;g<l;g++)s.setBulk(g*32,u[f+g]);return s}setRow(n,s){q.arraycopy(s.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),s=this.getHeight();let l=new me(n),u=new me(n);for(let f=0,g=Math.floor((s+1)/2);f<g;f++)l=this.getRow(f,l),u=this.getRow(s-1-f,u),l.reverse(),u.reverse(),this.setRow(f,u),this.setRow(s-1-f,l)}getEnclosingRectangle(){const n=this.width,s=this.height,l=this.rowSize,u=this.bits;let f=n,g=s,y=-1,w=-1;for(let E=0;E<s;E++)for(let _=0;_<l;_++){const N=u[E*l+_];if(N!==0){if(E<g&&(g=E),E>w&&(w=E),_*32<f){let I=0;for(;(N<<31-I&4294967295)===0;)I++;_*32+I<f&&(f=_*32+I)}if(_*32+31>y){let I=31;for(;!(N>>>I);)I--;_*32+I>y&&(y=_*32+I)}}}return y<f||w<g?null:Int32Array.from([f,g,y-f+1,w-g+1])}getTopLeftOnBit(){const n=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&s[l]===0;)l++;if(l===s.length)return null;const u=l/n;let f=l%n*32;const g=s[l];let y=0;for(;(g<<31-y&4294967295)===0;)y++;return f+=y,Int32Array.from([f,u])}getBottomRightOnBit(){const n=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&s[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/n);let f=Math.floor(l%n)*32;const g=s[l];let y=31;for(;!(g>>>y);)y--;return f+=y,Int32Array.from([f,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof $e))return!1;const s=n;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&se.equals(this.bits,s.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+se.hashCode(this.bits),n}toString(n="X ",s="  ",l=`
`){return this.buildToString(n,s,l)}buildToString(n,s,l){let u=new qe;for(let f=0,g=this.height;f<g;f++){for(let y=0,w=this.width;y<w;y++)u.append(this.get(y,f)?n:s);u.append(l)}return u.toString()}clone(){return new $e(this.width,this.height,this.rowSize,this.bits.slice())}}class ne extends v{static getNotFoundInstance(){return new ne}}ne.kind="NotFoundException";class $ extends H{constructor(n){super(n),this.luminances=$.EMPTY,this.buckets=new Int32Array($.LUMINANCE_BUCKETS)}getBlackRow(n,s){const l=this.getLuminanceSource(),u=l.getWidth();s==null||s.getSize()<u?s=new me(u):s.clear(),this.initArrays(u);const f=l.getRow(n,this.luminances),g=this.buckets;for(let w=0;w<u;w++)g[(f[w]&255)>>$.LUMINANCE_SHIFT]++;const y=$.estimateBlackPoint(g);if(u<3)for(let w=0;w<u;w++)(f[w]&255)<y&&s.set(w);else{let w=f[0]&255,E=f[1]&255;for(let _=1;_<u-1;_++){const N=f[_+1]&255;(E*4-w-N)/2<y&&s.set(_),w=E,E=N}}return s}getBlackMatrix(){const n=this.getLuminanceSource(),s=n.getWidth(),l=n.getHeight(),u=new $e(s,l);this.initArrays(s);const f=this.buckets;for(let w=1;w<5;w++){const E=Math.floor(l*w/5),_=n.getRow(E,this.luminances),N=Math.floor(s*4/5);for(let I=Math.floor(s/5);I<N;I++){const L=_[I]&255;f[L>>$.LUMINANCE_SHIFT]++}}const g=$.estimateBlackPoint(f),y=n.getMatrix();for(let w=0;w<l;w++){const E=w*s;for(let _=0;_<s;_++)(y[E+_]&255)<g&&u.set(_,w)}return u}createBinarizer(n){return new $(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const s=this.buckets;for(let l=0;l<$.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(n){const s=n.length;let l=0,u=0,f=0;for(let _=0;_<s;_++)n[_]>f&&(u=_,f=n[_]),n[_]>l&&(l=n[_]);let g=0,y=0;for(let _=0;_<s;_++){const N=_-u,I=n[_]*N*N;I>y&&(g=_,y=I)}if(u>g){const _=u;u=g,g=_}if(g-u<=s/16)throw new ne;let w=g-1,E=-1;for(let _=g-1;_>u;_--){const N=_-u,I=N*N*(g-_)*(l-n[_]);I>E&&(w=_,E=I)}return w<<$.LUMINANCE_SHIFT}}$.LUMINANCE_BITS=5,$.LUMINANCE_SHIFT=8-$.LUMINANCE_BITS,$.LUMINANCE_BUCKETS=1<<$.LUMINANCE_BITS,$.EMPTY=Uint8ClampedArray.from([0]);class he extends ${constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),s=n.getWidth(),l=n.getHeight();if(s>=he.MINIMUM_DIMENSION&&l>=he.MINIMUM_DIMENSION){const u=n.getMatrix();let f=s>>he.BLOCK_SIZE_POWER;(s&he.BLOCK_SIZE_MASK)!==0&&f++;let g=l>>he.BLOCK_SIZE_POWER;(l&he.BLOCK_SIZE_MASK)!==0&&g++;const y=he.calculateBlackPoints(u,f,g,s,l),w=new $e(s,l);he.calculateThresholdForBlock(u,f,g,s,l,y,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new he(n)}static calculateThresholdForBlock(n,s,l,u,f,g,y){const w=f-he.BLOCK_SIZE,E=u-he.BLOCK_SIZE;for(let _=0;_<l;_++){let N=_<<he.BLOCK_SIZE_POWER;N>w&&(N=w);const I=he.cap(_,2,l-3);for(let L=0;L<s;L++){let F=L<<he.BLOCK_SIZE_POWER;F>E&&(F=E);const V=he.cap(L,2,s-3);let X=0;for(let _e=-2;_e<=2;_e++){const Se=g[I+_e];X+=Se[V-2]+Se[V-1]+Se[V]+Se[V+1]+Se[V+2]}const ie=X/25;he.thresholdBlock(n,F,N,ie,u,y)}}}static cap(n,s,l){return n<s?s:n>l?l:n}static thresholdBlock(n,s,l,u,f,g){for(let y=0,w=l*f+s;y<he.BLOCK_SIZE;y++,w+=f)for(let E=0;E<he.BLOCK_SIZE;E++)(n[w+E]&255)<=u&&g.set(s+E,l+y)}static calculateBlackPoints(n,s,l,u,f){const g=f-he.BLOCK_SIZE,y=u-he.BLOCK_SIZE,w=new Array(l);for(let E=0;E<l;E++){w[E]=new Int32Array(s);let _=E<<he.BLOCK_SIZE_POWER;_>g&&(_=g);for(let N=0;N<s;N++){let I=N<<he.BLOCK_SIZE_POWER;I>y&&(I=y);let L=0,F=255,V=0;for(let ie=0,_e=_*u+I;ie<he.BLOCK_SIZE;ie++,_e+=u){for(let Se=0;Se<he.BLOCK_SIZE;Se++){const Ee=n[_e+Se]&255;L+=Ee,Ee<F&&(F=Ee),Ee>V&&(V=Ee)}if(V-F>he.MIN_DYNAMIC_RANGE)for(ie++,_e+=u;ie<he.BLOCK_SIZE;ie++,_e+=u)for(let Se=0;Se<he.BLOCK_SIZE;Se++)L+=n[_e+Se]&255}let X=L>>he.BLOCK_SIZE_POWER*2;if(V-F<=he.MIN_DYNAMIC_RANGE&&(X=F/2,E>0&&N>0)){const ie=(w[E-1][N]+2*w[E][N-1]+w[E-1][N-1])/4;F<ie&&(X=ie)}w[E][N]=X}}return w}}he.BLOCK_SIZE_POWER=3,he.BLOCK_SIZE=1<<he.BLOCK_SIZE_POWER,he.BLOCK_SIZE_MASK=he.BLOCK_SIZE-1,he.MINIMUM_DIMENSION=he.BLOCK_SIZE*5,he.MIN_DYNAMIC_RANGE=24;class we{constructor(n,s){this.width=n,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,s,l,u){throw new Mt("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Mt("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Mt("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let s=new qe;for(let l=0;l<this.height;l++){const u=this.getRow(l,n);for(let f=0;f<this.width;f++){const g=u[f]&255;let y;g<64?y="#":g<128?y="+":g<192?y=".":y=" ",s.append(y)}s.append(`
`)}return s.toString()}}class de extends we{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,s){const l=this.delegate.getRow(n,s),u=this.getWidth();for(let f=0;f<u;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const n=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let u=0;u<s;u++)l[u]=255-(n[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(n,s,l,u){return new de(this.delegate.crop(n,s,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new de(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new de(this.delegate.rotateCounterClockwise45())}}class le extends we{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=le.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const s=n.getContext("2d").getImageData(0,0,n.width,n.height);return le.toGrayscaleBuffer(s.data,n.width,n.height)}static toGrayscaleBuffer(n,s,l){const u=new Uint8ClampedArray(s*l);for(let f=0,g=0,y=n.length;f<y;f+=4,g++){let w;if(n[f+3]===0)w=255;else{const _=n[f],N=n[f+1],I=n[f+2];w=306*_+601*N+117*I+512>>10}u[g]=w}return u}getRow(n,s){if(n<0||n>=this.getHeight())throw new R("Requested row is outside the image: "+n);const l=this.getWidth(),u=n*l;return s===null?s=this.buffer.slice(u,u+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(u,u+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,s,l,u){return super.crop(n,s,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const s=this.getTempCanvasElement(),l=s.getContext("2d"),u=n*le.DEGREE_TO_RADIANS,f=this.canvas.width,g=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(u))*f+Math.abs(Math.sin(u))*g),w=Math.ceil(Math.abs(Math.sin(u))*f+Math.abs(Math.cos(u))*g);return s.width=y,s.height=w,l.translate(y/2,w/2),l.rotate(u),l.drawImage(this.canvas,f/-2,g/-2),this.buffer=le.makeBufferFromCanvasImageData(s),this}invert(){return new de(this)}}le.DEGREE_TO_RADIANS=Math.PI/180;class B{constructor(n,s,l){this.deviceId=n,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var z=(globalThis||zu||self||window||void 0)&&(globalThis||zu||self||window||void 0).__awaiter||function(O,n,s,l){function u(f){return f instanceof s?f:new s(function(g){g(f)})}return new(s||(s=Promise))(function(f,g){function y(_){try{E(l.next(_))}catch(N){g(N)}}function w(_){try{E(l.throw(_))}catch(N){g(N)}}function E(_){_.done?f(_.value):u(_.value).then(y,w)}E((l=l.apply(O,n||[])).next())})};class Z{constructor(n,s=500,l){this.reader=n,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return z(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of n){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const f=l.deviceId||l.id,g=l.label||`Video device ${s.length+1}`,y=l.groupId,w={deviceId:f,label:g,kind:u,groupId:y};s.push(w)}return s})}getVideoInputDevices(){return z(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new B(s.deviceId,s.label))})}findDeviceById(n){return z(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===n):null})}decodeFromInputVideoDevice(n,s){return z(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,s)})}decodeOnceFromVideoDevice(n,s){return z(this,void 0,void 0,function*(){this.reset();let l;n?l={deviceId:{exact:n}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(n,s){return z(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(n,s){return z(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(n,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(n,s,l){return z(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,s,l)})}decodeFromVideoDevice(n,s,l){return z(this,void 0,void 0,function*(){let u;n?u={deviceId:{exact:n}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeFromConstraints(f,s,l)})}decodeFromConstraints(n,s,l){return z(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(u,s,l)})}decodeFromStream(n,s,l){return z(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(n,s);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,s){return z(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,n),this.videoElement=l,this.stream=n,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(n){return new Promise((s,l)=>this.playVideoOnLoad(n,()=>s()))}playVideoOnLoad(n,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",s),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return z(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,s){const l=document.getElementById(n);if(!l)throw new T(`element with id '${n}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new T(`element with id '${n}' must be an ${s} element`);return l}decodeFromImage(n,s){if(!n&&!s)throw new T("either imageElement with a src set or an url must be provided");return s&&!n?this.decodeFromImageUrl(s):this.decodeFromImageElement(n)}decodeFromVideo(n,s){if(!n&&!s)throw new T("Either an element with a src set or an URL must be provided");return s&&!n?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,s,l){if(n===void 0&&s===void 0)throw new T("Either an element with a src set or an URL must be provided");return s&&!n?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(n,l)}decodeFromImageElement(n){if(!n)throw new T("An image element must be provided.");this.reset();const s=this.prepareImageElement(n);this.imageElement=s;let l;return this.isImageLoaded(s)?l=this.decodeOnce(s,!1,!0):l=this._decodeOnLoadImage(s),l}decodeFromVideoElement(n){const s=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(n,s){const l=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(n){if(!n)throw new T("A video element must be provided.");this.reset();const s=this.prepareVideoElement(n);return this.videoElement=s,s}decodeFromImageUrl(n){if(!n)throw new T("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=n,l}decodeFromVideoUrl(n){if(!n)throw new T("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=n,l}decodeFromVideoUrlContinuously(n,s){if(!n)throw new T("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,s);return l.src=n,u}_decodeOnLoadImage(n){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(s,l),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return z(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,s){return z(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,s)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let s;return typeof n>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof n=="string"&&(s=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(s=n),s}prepareVideoElement(n){let s;return!n&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof n=="string"&&(s=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(s=n),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(n,s=!0,l=!0){this._stopAsyncDecode=!1;const u=(f,g)=>{if(this._stopAsyncDecode){g(new ne("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(n);f(y)}catch(y){const w=s&&y instanceof ne,_=(y instanceof j||y instanceof J)&&l;if(w||_)return setTimeout(u,this._timeBetweenDecodingAttempts,f,g);g(y)}};return new Promise((f,g)=>u(f,g))}decodeContinuously(n,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(n);s(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){s(null,u);const f=u instanceof j||u instanceof J,g=u instanceof ne;(f||g)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(n){const s=this.createBinaryBitmap(n);return this.decodeBitmap(s)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,s,l){s||(s={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(n,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(n,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(n,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const s=this.getCaptureCanvas(n),l=new le(s),u=new he(l);return new U(u)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const s=this.createCaptureCanvas(n);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,u;return typeof n<"u"&&(n instanceof HTMLVideoElement?(l=n.videoWidth,u=n.videoHeight):n instanceof HTMLImageElement&&(l=n.naturalWidth||n.width,u=n.naturalHeight||n.height)),s.style.width=l+"px",s.style.height=u+"px",s.width=l,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,s){try{n.srcObject=s}catch{n.src=URL.createObjectURL(s)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class ce{constructor(n,s,l=s==null?0:8*s.length,u,f,g=q.currentTimeMillis()){this.text=n,this.rawBytes=s,this.numBits=l,this.resultPoints=u,this.format=f,this.timestamp=g,this.text=n,this.rawBytes=s,l==null?this.numBits=s==null?0:8*s.length:this.numBits=l,this.resultPoints=u,this.format=f,this.resultMetadata=null,g==null?this.timestamp=q.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,s)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const s=this.resultPoints;if(s===null)this.resultPoints=n;else if(n!==null&&n.length>0){const l=new Array(s.length+n.length);q.arraycopy(s,0,l,0,s.length),q.arraycopy(n,0,l,s.length,n.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ne;(function(O){O[O.AZTEC=0]="AZTEC",O[O.CODABAR=1]="CODABAR",O[O.CODE_39=2]="CODE_39",O[O.CODE_93=3]="CODE_93",O[O.CODE_128=4]="CODE_128",O[O.DATA_MATRIX=5]="DATA_MATRIX",O[O.EAN_8=6]="EAN_8",O[O.EAN_13=7]="EAN_13",O[O.ITF=8]="ITF",O[O.MAXICODE=9]="MAXICODE",O[O.PDF_417=10]="PDF_417",O[O.QR_CODE=11]="QR_CODE",O[O.RSS_14=12]="RSS_14",O[O.RSS_EXPANDED=13]="RSS_EXPANDED",O[O.UPC_A=14]="UPC_A",O[O.UPC_E=15]="UPC_E",O[O.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ne||(Ne={}));var be=Ne,ke;(function(O){O[O.OTHER=0]="OTHER",O[O.ORIENTATION=1]="ORIENTATION",O[O.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",O[O.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",O[O.ISSUE_NUMBER=4]="ISSUE_NUMBER",O[O.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",O[O.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",O[O.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",O[O.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",O[O.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",O[O.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ke||(ke={}));var We=ke;class Re{constructor(n,s,l,u,f=-1,g=-1){this.rawBytes=n,this.text=s,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=g,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ye{exp(n){return this.expTable[n]}log(n){if(n===0)throw new R;return this.logTable[n]}static addOrSubtract(n,s){return n^s}}class et{constructor(n,s){if(s.length===0)throw new R;this.field=n;const l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),q.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const s=this.coefficients;let l;if(n===1){l=0;for(let g=0,y=s.length;g!==y;g++){const w=s[g];l=Ye.addOrSubtract(l,w)}return l}l=s[0];const u=s.length,f=this.field;for(let g=1;g<u;g++)l=Ye.addOrSubtract(f.multiply(n,l),s[g]);return l}addOrSubtract(n){if(!this.field.equals(n.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let s=this.coefficients,l=n.coefficients;if(s.length>l.length){const g=s;s=l,l=g}let u=new Int32Array(l.length);const f=l.length-s.length;q.arraycopy(l,0,u,0,f);for(let g=f;g<l.length;g++)u[g]=Ye.addOrSubtract(s[g-f],l[g]);return new et(this.field,u)}multiply(n){if(!this.field.equals(n.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,u=n.coefficients,f=u.length,g=new Int32Array(l+f-1),y=this.field;for(let w=0;w<l;w++){const E=s[w];for(let _=0;_<f;_++)g[w+_]=Ye.addOrSubtract(g[w+_],y.multiply(E,u[_]))}return new et(y,g)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const s=this.coefficients.length,l=this.field,u=new Int32Array(s),f=this.coefficients;for(let g=0;g<s;g++)u[g]=l.multiply(f[g],n);return new et(l,u)}multiplyByMonomial(n,s){if(n<0)throw new R;if(s===0)return this.field.getZero();const l=this.coefficients,u=l.length,f=new Int32Array(u+n),g=this.field;for(let y=0;y<u;y++)f[y]=g.multiply(l[y],s);return new et(g,f)}divide(n){if(!this.field.equals(n.field))throw new R("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new R("Divide by 0");const s=this.field;let l=s.getZero(),u=this;const f=n.getCoefficient(n.getDegree()),g=s.inverse(f);for(;u.getDegree()>=n.getDegree()&&!u.isZero();){const y=u.getDegree()-n.getDegree(),w=s.multiply(u.getCoefficient(u.getDegree()),g),E=n.multiplyByMonomial(y,w),_=s.buildMonomial(y,w);l=l.addOrSubtract(_),u=u.addOrSubtract(E)}return[l,u]}toString(){let n="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(l!==0){if(l<0?(n+=" - ",l=-l):n.length>0&&(n+=" + "),s===0||l!==1){const u=this.field.log(l);u===0?n+="1":u===1?n+="a":(n+="a^",n+=u)}s!==0&&(s===1?n+="x":(n+="x^",n+=s))}}return n}}class en extends v{}en.kind="ArithmeticException";class tt extends Ye{constructor(n,s,l){super(),this.primitive=n,this.size=s,this.generatorBase=l;const u=new Int32Array(s);let f=1;for(let y=0;y<s;y++)u[y]=f,f*=2,f>=s&&(f^=n,f&=s-1);this.expTable=u;const g=new Int32Array(s);for(let y=0;y<s-1;y++)g[u[y]]=y;this.logTable=g,this.zero=new et(this,Int32Array.from([0])),this.one=new et(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,s){if(n<0)throw new R;if(s===0)return this.zero;const l=new Int32Array(n+1);return l[0]=s,new et(this,l)}inverse(n){if(n===0)throw new en;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,s){return n===0||s===0?0:this.expTable[(this.logTable[n]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}tt.AZTEC_DATA_12=new tt(4201,4096,1),tt.AZTEC_DATA_10=new tt(1033,1024,1),tt.AZTEC_DATA_6=new tt(67,64,1),tt.AZTEC_PARAM=new tt(19,16,1),tt.QR_CODE_FIELD_256=new tt(285,256,0),tt.DATA_MATRIX_FIELD_256=new tt(301,256,1),tt.AZTEC_DATA_8=tt.DATA_MATRIX_FIELD_256,tt.MAXICODE_FIELD_64=tt.AZTEC_DATA_6;class rn extends v{}rn.kind="ReedSolomonException";class ar extends v{}ar.kind="IllegalStateException";class Cr{constructor(n){this.field=n}decode(n,s){const l=this.field,u=new et(l,n),f=new Int32Array(s);let g=!0;for(let L=0;L<s;L++){const F=u.evaluateAt(l.exp(L+l.getGeneratorBase()));f[f.length-1-L]=F,F!==0&&(g=!1)}if(g)return;const y=new et(l,f),w=this.runEuclideanAlgorithm(l.buildMonomial(s,1),y,s),E=w[0],_=w[1],N=this.findErrorLocations(E),I=this.findErrorMagnitudes(_,N);for(let L=0;L<N.length;L++){const F=n.length-1-l.log(N[L]);if(F<0)throw new rn("Bad error location");n[F]=tt.addOrSubtract(n[F],I[L])}}runEuclideanAlgorithm(n,s,l){if(n.getDegree()<s.getDegree()){const L=n;n=s,s=L}const u=this.field;let f=n,g=s,y=u.getZero(),w=u.getOne();for(;g.getDegree()>=(l/2|0);){let L=f,F=y;if(f=g,y=w,f.isZero())throw new rn("r_{i-1} was zero");g=L;let V=u.getZero();const X=f.getCoefficient(f.getDegree()),ie=u.inverse(X);for(;g.getDegree()>=f.getDegree()&&!g.isZero();){const _e=g.getDegree()-f.getDegree(),Se=u.multiply(g.getCoefficient(g.getDegree()),ie);V=V.addOrSubtract(u.buildMonomial(_e,Se)),g=g.addOrSubtract(f.multiplyByMonomial(_e,Se))}if(w=V.multiply(y).addOrSubtract(F),g.getDegree()>=f.getDegree())throw new ar("Division algorithm failed to reduce polynomial?")}const E=w.getCoefficient(0);if(E===0)throw new rn("sigmaTilde(0) was zero");const _=u.inverse(E),N=w.multiplyScalar(_),I=g.multiplyScalar(_);return[N,I]}findErrorLocations(n){const s=n.getDegree();if(s===1)return Int32Array.from([n.getCoefficient(1)]);const l=new Int32Array(s);let u=0;const f=this.field;for(let g=1;g<f.getSize()&&u<s;g++)n.evaluateAt(g)===0&&(l[u]=f.inverse(g),u++);if(u!==s)throw new rn("Error locator degree does not match number of roots");return l}findErrorMagnitudes(n,s){const l=s.length,u=new Int32Array(l),f=this.field;for(let g=0;g<l;g++){const y=f.inverse(s[g]);let w=1;for(let E=0;E<l;E++)if(g!==E){const _=f.multiply(s[E],y),N=(_&1)===0?_|1:_&-2;w=f.multiply(w,N)}u[g]=f.multiply(n.evaluateAt(y),f.inverse(w)),f.getGeneratorBase()!==0&&(u[g]=f.multiply(u[g],y))}return u}}var An;(function(O){O[O.UPPER=0]="UPPER",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.DIGIT=3]="DIGIT",O[O.PUNCT=4]="PUNCT",O[O.BINARY=5]="BINARY"})(An||(An={}));class Ft{decode(n){this.ddata=n;let s=n.getBits(),l=this.extractBits(s),u=this.correctBits(l),f=Ft.convertBoolArrayToByteArray(u),g=Ft.getEncodedData(u),y=new Re(f,g,null,null);return y.setNumBits(u.length),y}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let s=n.length,l=An.UPPER,u=An.UPPER,f="",g=0;for(;g<s;)if(u===An.BINARY){if(s-g<5)break;let y=Ft.readCode(n,g,5);if(g+=5,y===0){if(s-g<11)break;y=Ft.readCode(n,g,11)+31,g+=11}for(let w=0;w<y;w++){if(s-g<8){g=s;break}const E=Ft.readCode(n,g,8);f+=Oe.castAsNonUtf8Char(E),g+=8}u=l}else{let y=u===An.DIGIT?4:5;if(s-g<y)break;let w=Ft.readCode(n,g,y);g+=y;let E=Ft.getCharacter(u,w);E.startsWith("CTRL_")?(l=u,u=Ft.getTable(E.charAt(5)),E.charAt(6)==="L"&&(l=u)):(f+=E,u=l)}return f}static getTable(n){switch(n){case"L":return An.LOWER;case"P":return An.PUNCT;case"M":return An.MIXED;case"D":return An.DIGIT;case"B":return An.BINARY;default:return An.UPPER}}static getCharacter(n,s){switch(n){case An.UPPER:return Ft.UPPER_TABLE[s];case An.LOWER:return Ft.LOWER_TABLE[s];case An.MIXED:return Ft.MIXED_TABLE[s];case An.PUNCT:return Ft.PUNCT_TABLE[s];case An.DIGIT:return Ft.DIGIT_TABLE[s];default:throw new ar("Bad table")}}correctBits(n){let s,l;this.ddata.getNbLayers()<=2?(l=6,s=tt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,s=tt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,s=tt.AZTEC_DATA_10):(l=12,s=tt.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),f=n.length/l;if(f<u)throw new J;let g=n.length%l,y=new Int32Array(f);for(let I=0;I<f;I++,g+=l)y[I]=Ft.readCode(n,g,l);try{new Cr(s).decode(y,f-u)}catch(I){throw new J(I)}let w=(1<<l)-1,E=0;for(let I=0;I<u;I++){let L=y[I];if(L===0||L===w)throw new J;(L===1||L===w-1)&&E++}let _=new Array(u*l-E),N=0;for(let I=0;I<u;I++){let L=y[I];if(L===1||L===w-1)_.fill(L>1,N,N+l-1),N+=l-1;else for(let F=l-1;F>=0;--F)_[N++]=(L&1<<F)!==0}return _}extractBits(n){let s=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(s?11:14)+l*4,f=new Int32Array(u),g=new Array(this.totalBitsInLayer(l,s));if(s)for(let y=0;y<f.length;y++)f[y]=y;else{let y=u+1+2*W.truncDivision(W.truncDivision(u,2)-1,15),w=u/2,E=W.truncDivision(y,2);for(let _=0;_<w;_++){let N=_+W.truncDivision(_,15);f[w-_-1]=E-N-1,f[w+_]=E+N+1}}for(let y=0,w=0;y<l;y++){let E=(l-y)*4+(s?9:12),_=y*2,N=u-1-_;for(let I=0;I<E;I++){let L=I*2;for(let F=0;F<2;F++)g[w+L+F]=n.get(f[_+F],f[_+I]),g[w+2*E+L+F]=n.get(f[_+I],f[N-F]),g[w+4*E+L+F]=n.get(f[N-F],f[N-I]),g[w+6*E+L+F]=n.get(f[N-I],f[_+F])}w+=E*8}return g}static readCode(n,s,l){let u=0;for(let f=s;f<s+l;f++)u<<=1,n[f]&&(u|=1);return u}static readByte(n,s){let l=n.length-s;return l>=8?Ft.readCode(n,s,8):Ft.readCode(n,s,l)<<8-l}static convertBoolArrayToByteArray(n){let s=new Uint8Array((n.length+7)/8);for(let l=0;l<s.length;l++)s[l]=Ft.readByte(n,8*l);return s}totalBitsInLayer(n,s){return((s?88:112)+16*n)*n}}Ft.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ft.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ft.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ft.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ft.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class mt{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,s,l,u){const f=n-l,g=s-u;return Math.sqrt(f*f+g*g)}static sum(n){let s=0;for(let l=0,u=n.length;l!==u;l++){const f=n[l];s+=f}return s}}class ga{static floatToIntBits(n){return n}}ga.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Me{constructor(n,s){this.x=n,this.y=s}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof Me){const s=n;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*ga.floatToIntBits(this.x)+ga.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const s=this.distance(n[0],n[1]),l=this.distance(n[1],n[2]),u=this.distance(n[0],n[2]);let f,g,y;if(l>=s&&l>=u?(g=n[0],f=n[1],y=n[2]):u>=l&&u>=s?(g=n[1],f=n[0],y=n[2]):(g=n[2],f=n[0],y=n[1]),this.crossProductZ(f,g,y)<0){const w=f;f=y,y=w}n[0]=f,n[1]=g,n[2]=y}static distance(n,s){return mt.distance(n.x,n.y,s.x,s.y)}static crossProductZ(n,s,l){const u=s.x,f=s.y;return(l.x-u)*(n.y-f)-(l.y-f)*(n.x-u)}}class Hs{constructor(n,s){this.bits=n,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Sc extends Hs{constructor(n,s,l,u,f){super(n,s),this.compact=l,this.nbDatablocks=u,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class dn{constructor(n,s,l,u){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),s==null&&(s=dn.INIT_SIZE),l==null&&(l=n.getWidth()/2|0),u==null&&(u=n.getHeight()/2|0);const f=s/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=u-f,this.downInit=u+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ne}detect(){let n=this.leftInit,s=this.rightInit,l=this.upInit,u=this.downInit,f=!1,g=!0,y=!1,w=!1,E=!1,_=!1,N=!1;const I=this.width,L=this.height;for(;g;){g=!1;let F=!0;for(;(F||!w)&&s<I;)F=this.containsBlackPoint(l,u,s,!1),F?(s++,g=!0,w=!0):w||s++;if(s>=I){f=!0;break}let V=!0;for(;(V||!E)&&u<L;)V=this.containsBlackPoint(n,s,u,!0),V?(u++,g=!0,E=!0):E||u++;if(u>=L){f=!0;break}let X=!0;for(;(X||!_)&&n>=0;)X=this.containsBlackPoint(l,u,n,!1),X?(n--,g=!0,_=!0):_||n--;if(n<0){f=!0;break}let ie=!0;for(;(ie||!N)&&l>=0;)ie=this.containsBlackPoint(n,s,l,!0),ie?(l--,g=!0,N=!0):N||l--;if(l<0){f=!0;break}g&&(y=!0)}if(!f&&y){const F=s-n;let V=null;for(let Se=1;V===null&&Se<F;Se++)V=this.getBlackPointOnSegment(n,u-Se,n+Se,u);if(V==null)throw new ne;let X=null;for(let Se=1;X===null&&Se<F;Se++)X=this.getBlackPointOnSegment(n,l+Se,n+Se,l);if(X==null)throw new ne;let ie=null;for(let Se=1;ie===null&&Se<F;Se++)ie=this.getBlackPointOnSegment(s,l+Se,s-Se,l);if(ie==null)throw new ne;let _e=null;for(let Se=1;_e===null&&Se<F;Se++)_e=this.getBlackPointOnSegment(s,u-Se,s-Se,u);if(_e==null)throw new ne;return this.centerEdges(_e,V,ie,X)}else throw new ne}getBlackPointOnSegment(n,s,l,u){const f=mt.round(mt.distance(n,s,l,u)),g=(l-n)/f,y=(u-s)/f,w=this.image;for(let E=0;E<f;E++){const _=mt.round(n+E*g),N=mt.round(s+E*y);if(w.get(_,N))return new Me(_,N)}return null}centerEdges(n,s,l,u){const f=n.getX(),g=n.getY(),y=s.getX(),w=s.getY(),E=l.getX(),_=l.getY(),N=u.getX(),I=u.getY(),L=dn.CORR;return f<this.width/2?[new Me(N-L,I+L),new Me(y+L,w+L),new Me(E-L,_-L),new Me(f+L,g-L)]:[new Me(N+L,I+L),new Me(y+L,w-L),new Me(E-L,_+L),new Me(f-L,g-L)]}containsBlackPoint(n,s,l,u){const f=this.image;if(u){for(let g=n;g<=s;g++)if(f.get(g,l))return!0}else for(let g=n;g<=s;g++)if(f.get(l,g))return!0;return!1}}dn.INIT_SIZE=10,dn.CORR=1;class rl{static checkAndNudgePoints(n,s){const l=n.getWidth(),u=n.getHeight();let f=!0;for(let g=0;g<s.length&&f;g+=2){const y=Math.floor(s[g]),w=Math.floor(s[g+1]);if(y<-1||y>l||w<-1||w>u)throw new ne;f=!1,y===-1?(s[g]=0,f=!0):y===l&&(s[g]=l-1,f=!0),w===-1?(s[g+1]=0,f=!0):w===u&&(s[g+1]=u-1,f=!0)}f=!0;for(let g=s.length-2;g>=0&&f;g-=2){const y=Math.floor(s[g]),w=Math.floor(s[g+1]);if(y<-1||y>l||w<-1||w>u)throw new ne;f=!1,y===-1?(s[g]=0,f=!0):y===l&&(s[g]=l-1,f=!0),w===-1?(s[g+1]=0,f=!0):w===u&&(s[g+1]=u-1,f=!0)}}}class mr{constructor(n,s,l,u,f,g,y,w,E){this.a11=n,this.a21=s,this.a31=l,this.a12=u,this.a22=f,this.a32=g,this.a13=y,this.a23=w,this.a33=E}static quadrilateralToQuadrilateral(n,s,l,u,f,g,y,w,E,_,N,I,L,F,V,X){const ie=mr.quadrilateralToSquare(n,s,l,u,f,g,y,w);return mr.squareToQuadrilateral(E,_,N,I,L,F,V,X).times(ie)}transformPoints(n){const s=n.length,l=this.a11,u=this.a12,f=this.a13,g=this.a21,y=this.a22,w=this.a23,E=this.a31,_=this.a32,N=this.a33;for(let I=0;I<s;I+=2){const L=n[I],F=n[I+1],V=f*L+w*F+N;n[I]=(l*L+g*F+E)/V,n[I+1]=(u*L+y*F+_)/V}}transformPointsWithValues(n,s){const l=this.a11,u=this.a12,f=this.a13,g=this.a21,y=this.a22,w=this.a23,E=this.a31,_=this.a32,N=this.a33,I=n.length;for(let L=0;L<I;L++){const F=n[L],V=s[L],X=f*F+w*V+N;n[L]=(l*F+g*V+E)/X,s[L]=(u*F+y*V+_)/X}}static squareToQuadrilateral(n,s,l,u,f,g,y,w){const E=n-l+f-y,_=s-u+g-w;if(E===0&&_===0)return new mr(l-n,f-l,n,u-s,g-u,s,0,0,1);{const N=l-f,I=y-f,L=u-g,F=w-g,V=N*F-I*L,X=(E*F-I*_)/V,ie=(N*_-E*L)/V;return new mr(l-n+X*l,y-n+ie*y,n,u-s+X*u,w-s+ie*w,s,X,ie,1)}}static quadrilateralToSquare(n,s,l,u,f,g,y,w){return mr.squareToQuadrilateral(n,s,l,u,f,g,y,w).buildAdjoint()}buildAdjoint(){return new mr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new mr(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class il extends rl{sampleGrid(n,s,l,u,f,g,y,w,E,_,N,I,L,F,V,X,ie,_e,Se){const Ee=mr.quadrilateralToQuadrilateral(u,f,g,y,w,E,_,N,I,L,F,V,X,ie,_e,Se);return this.sampleGridWithTransform(n,s,l,Ee)}sampleGridWithTransform(n,s,l,u){if(s<=0||l<=0)throw new ne;const f=new $e(s,l),g=new Float32Array(2*s);for(let y=0;y<l;y++){const w=g.length,E=y+.5;for(let _=0;_<w;_+=2)g[_]=_/2+.5,g[_+1]=E;u.transformPoints(g),rl.checkAndNudgePoints(n,g);try{for(let _=0;_<w;_+=2)n.get(Math.floor(g[_]),Math.floor(g[_+1]))&&f.set(_/2,y)}catch{throw new ne}}return f}}class Tr{static setGridSampler(n){Tr.gridSampler=n}static getInstance(){return Tr.gridSampler}}Tr.gridSampler=new il;class Yn{constructor(n,s){this.x=n,this.y=s}toResultPoint(){return new Me(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class al{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(n){let g=l[0];l[0]=l[2],l[2]=g}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new Sc(u,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new ne;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(n[0],n[1],s),this.sampleLine(n[1],n[2],s),this.sampleLine(n[2],n[3],s),this.sampleLine(n[3],n[0],s)]);this.shift=this.getRotation(l,s);let u=0;for(let g=0;g<4;g++){let y=l[(this.shift+g)%4];this.compact?(u<<=7,u+=y>>1&127):(u<<=10,u+=(y>>2&992)+(y>>1&31))}let f=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(n,s){let l=0;n.forEach((u,f,g)=>{let y=(u>>s-2<<1)+(u&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(W.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new ne}getCorrectedParameterData(n,s){let l,u;s?(l=7,u=2):(l=10,u=4);let f=l-u,g=new Int32Array(l);for(let w=l-1;w>=0;--w)g[w]=n&15,n>>=4;try{new Cr(tt.AZTEC_PARAM).decode(g,f)}catch{throw new ne}let y=0;for(let w=0;w<u;w++)y=(y<<4)+g[w];return y}getBullsEyeCorners(n){let s=n,l=n,u=n,f=n,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let N=this.getFirstDifferent(s,g,1,-1),I=this.getFirstDifferent(l,g,1,1),L=this.getFirstDifferent(u,g,-1,1),F=this.getFirstDifferent(f,g,-1,-1);if(this.nbCenterLayers>2){let V=this.distancePoint(F,N)*this.nbCenterLayers/(this.distancePoint(f,s)*(this.nbCenterLayers+2));if(V<.75||V>1.25||!this.isWhiteOrBlackRectangle(N,I,L,F))break}s=N,l=I,u=L,f=F,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ne;this.compact=this.nbCenterLayers===5;let y=new Me(s.getX()+.5,s.getY()-.5),w=new Me(l.getX()+.5,l.getY()+.5),E=new Me(u.getX()-.5,u.getY()+.5),_=new Me(f.getX()-.5,f.getY()-.5);return this.expandSquare([y,w,E,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,s,l,u;try{let y=new dn(this.image).detect();n=y[0],s=y[1],l=y[2],u=y[3]}catch{let w=this.image.getWidth()/2,E=this.image.getHeight()/2;n=this.getFirstDifferent(new Yn(w+7,E-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Yn(w+7,E+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Yn(w-7,E+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Yn(w-7,E-7),!1,-1,-1).toResultPoint()}let f=mt.round((n.getX()+u.getX()+s.getX()+l.getX())/4),g=mt.round((n.getY()+u.getY()+s.getY()+l.getY())/4);try{let y=new dn(this.image,15,f,g).detect();n=y[0],s=y[1],l=y[2],u=y[3]}catch{n=this.getFirstDifferent(new Yn(f+7,g-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Yn(f+7,g+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Yn(f-7,g+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Yn(f-7,g-7),!1,-1,-1).toResultPoint()}return f=mt.round((n.getX()+u.getX()+s.getX()+l.getX())/4),g=mt.round((n.getY()+u.getY()+s.getY()+l.getY())/4),new Yn(f,g)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,s,l,u,f){let g=Tr.getInstance(),y=this.getDimension(),w=y/2-this.nbCenterLayers,E=y/2+this.nbCenterLayers;return g.sampleGrid(n,y,y,w,w,E,w,E,E,w,E,s.getX(),s.getY(),l.getX(),l.getY(),u.getX(),u.getY(),f.getX(),f.getY())}sampleLine(n,s,l){let u=0,f=this.distanceResultPoint(n,s),g=f/l,y=n.getX(),w=n.getY(),E=g*(s.getX()-n.getX())/f,_=g*(s.getY()-n.getY())/f;for(let N=0;N<l;N++)this.image.get(mt.round(y+N*E),mt.round(w+N*_))&&(u|=1<<l-N-1);return u}isWhiteOrBlackRectangle(n,s,l,u){let f=3;n=new Yn(n.getX()-f,n.getY()+f),s=new Yn(s.getX()-f,s.getY()-f),l=new Yn(l.getX()+f,l.getY()-f),u=new Yn(u.getX()+f,u.getY()+f);let g=this.getColor(u,n);if(g===0)return!1;let y=this.getColor(n,s);return y!==g||(y=this.getColor(s,l),y!==g)?!1:(y=this.getColor(l,u),y===g)}getColor(n,s){let l=this.distancePoint(n,s),u=(s.getX()-n.getX())/l,f=(s.getY()-n.getY())/l,g=0,y=n.getX(),w=n.getY(),E=this.image.get(n.getX(),n.getY()),_=Math.ceil(l);for(let I=0;I<_;I++)y+=u,w+=f,this.image.get(mt.round(y),mt.round(w))!==E&&g++;let N=g/l;return N>.1&&N<.9?0:N<=.1===E?1:-1}getFirstDifferent(n,s,l,u){let f=n.getX()+l,g=n.getY()+u;for(;this.isValid(f,g)&&this.image.get(f,g)===s;)f+=l,g+=u;for(f-=l,g-=u;this.isValid(f,g)&&this.image.get(f,g)===s;)f+=l;for(f-=l;this.isValid(f,g)&&this.image.get(f,g)===s;)g+=u;return g-=u,new Yn(f,g)}expandSquare(n,s,l){let u=l/(2*s),f=n[0].getX()-n[2].getX(),g=n[0].getY()-n[2].getY(),y=(n[0].getX()+n[2].getX())/2,w=(n[0].getY()+n[2].getY())/2,E=new Me(y+u*f,w+u*g),_=new Me(y-u*f,w-u*g);f=n[1].getX()-n[3].getX(),g=n[1].getY()-n[3].getY(),y=(n[1].getX()+n[3].getX())/2,w=(n[1].getY()+n[3].getY())/2;let N=new Me(y+u*f,w+u*g),I=new Me(y-u*f,w-u*g);return[E,N,_,I]}isValid(n,s){return n>=0&&n<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(n){let s=mt.round(n.getX()),l=mt.round(n.getY());return this.isValid(s,l)}distancePoint(n,s){return mt.distance(n.getX(),n.getY(),s.getX(),s.getY())}distanceResultPoint(n,s){return mt.distance(n.getX(),n.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class Gs{decode(n,s=null){let l=null,u=new al(n.getBlackMatrix()),f=null,g=null;try{let _=u.detectMirror(!1);f=_.getPoints(),this.reportFoundResultPoints(s,f),g=new Ft().decode(_)}catch(_){l=_}if(g==null)try{let _=u.detectMirror(!0);f=_.getPoints(),this.reportFoundResultPoints(s,f),g=new Ft().decode(_)}catch(_){throw l??_}let y=new ce(g.getText(),g.getRawBytes(),g.getNumBits(),f,be.AZTEC,q.currentTimeMillis()),w=g.getByteSegments();w!=null&&y.putMetadata(We.BYTE_SEGMENTS,w);let E=g.getECLevel();return E!=null&&y.putMetadata(We.ERROR_CORRECTION_LEVEL,E),y}reportFoundResultPoints(n,s){if(n!=null){let l=n.get(Ae.NEED_RESULT_POINT_CALLBACK);l!=null&&s.forEach((u,f,g)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class If extends Z{constructor(n=500){super(new Gs,n)}}class tn{decode(n,s){try{return this.doDecode(n,s)}catch{if(s&&s.get(Ae.TRY_HARDER)===!0&&n.isRotateSupported()){const f=n.rotateCounterClockwise(),g=this.doDecode(f,s),y=g.getResultMetadata();let w=270;y!==null&&y.get(We.ORIENTATION)===!0&&(w=w+y.get(We.ORIENTATION)%360),g.putMetadata(We.ORIENTATION,w);const E=g.getResultPoints();if(E!==null){const _=f.getHeight();for(let N=0;N<E.length;N++)E[N]=new Me(_-E[N].getY()-1,E[N].getX())}return g}else throw new ne}}reset(){}doDecode(n,s){const l=n.getWidth(),u=n.getHeight();let f=new me(l);const g=s&&s.get(Ae.TRY_HARDER)===!0,y=Math.max(1,u>>(g?8:5));let w;g?w=u:w=15;const E=Math.trunc(u/2);for(let _=0;_<w;_++){const N=Math.trunc((_+1)/2),I=(_&1)===0,L=E+y*(I?N:-N);if(L<0||L>=u)break;try{f=n.getBlackRow(L,f)}catch{continue}for(let F=0;F<2;F++){if(F===1&&(f.reverse(),s&&s.get(Ae.NEED_RESULT_POINT_CALLBACK)===!0)){const V=new Map;s.forEach((X,ie)=>V.set(ie,X)),V.delete(Ae.NEED_RESULT_POINT_CALLBACK),s=V}try{const V=this.decodeRow(L,f,s);if(F===1){V.putMetadata(We.ORIENTATION,180);const X=V.getResultPoints();X!==null&&(X[0]=new Me(l-X[0].getX()-1,X[0].getY()),X[1]=new Me(l-X[1].getX()-1,X[1].getY()))}return V}catch{}}}throw new ne}static recordPattern(n,s,l){const u=l.length;for(let E=0;E<u;E++)l[E]=0;const f=n.getSize();if(s>=f)throw new ne;let g=!n.get(s),y=0,w=s;for(;w<f;){if(n.get(w)!==g)l[y]++;else{if(++y===u)break;l[y]=1,g=!g}w++}if(!(y===u||y===u-1&&w===f))throw new ne}static recordPatternInReverse(n,s,l){let u=l.length,f=n.get(s);for(;s>0&&u>=0;)n.get(--s)!==f&&(u--,f=!f);if(u>=0)throw new ne;tn.recordPattern(n,s+1,l)}static patternMatchVariance(n,s,l){const u=n.length;let f=0,g=0;for(let E=0;E<u;E++)f+=n[E],g+=s[E];if(f<g)return Number.POSITIVE_INFINITY;const y=f/g;l*=y;let w=0;for(let E=0;E<u;E++){const _=n[E],N=s[E]*y,I=_>N?_-N:N-_;if(I>l)return Number.POSITIVE_INFINITY;w+=I}return w/f}}class Ce extends tn{static findStartPattern(n){const s=n.getSize(),l=n.getNextSet(0);let u=0,f=Int32Array.from([0,0,0,0,0,0]),g=l,y=!1;const w=6;for(let E=l;E<s;E++)if(n.get(E)!==y)f[u]++;else{if(u===w-1){let _=Ce.MAX_AVG_VARIANCE,N=-1;for(let I=Ce.CODE_START_A;I<=Ce.CODE_START_C;I++){const L=tn.patternMatchVariance(f,Ce.CODE_PATTERNS[I],Ce.MAX_INDIVIDUAL_VARIANCE);L<_&&(_=L,N=I)}if(N>=0&&n.isRange(Math.max(0,g-(E-g)/2),g,!1))return Int32Array.from([g,E,N]);g+=f[0]+f[1],f=f.slice(2,f.length-1),f[u-1]=0,f[u]=0,u--}else u++;f[u]=1,y=!y}throw new ne}static decodeCode(n,s,l){tn.recordPattern(n,l,s);let u=Ce.MAX_AVG_VARIANCE,f=-1;for(let g=0;g<Ce.CODE_PATTERNS.length;g++){const y=Ce.CODE_PATTERNS[g],w=this.patternMatchVariance(s,y,Ce.MAX_INDIVIDUAL_VARIANCE);w<u&&(u=w,f=g)}if(f>=0)return f;throw new ne}decodeRow(n,s,l){const u=l&&l.get(Ae.ASSUME_GS1)===!0,f=Ce.findStartPattern(s),g=f[2];let y=0;const w=new Uint8Array(20);w[y++]=g;let E;switch(g){case Ce.CODE_START_A:E=Ce.CODE_CODE_A;break;case Ce.CODE_START_B:E=Ce.CODE_CODE_B;break;case Ce.CODE_START_C:E=Ce.CODE_CODE_C;break;default:throw new J}let _=!1,N=!1,I="",L=f[0],F=f[1];const V=Int32Array.from([0,0,0,0,0,0]);let X=0,ie=0,_e=g,Se=0,Ee=!0,ht=!1,at=!1;for(;!_;){const qi=N;switch(N=!1,X=ie,ie=Ce.decodeCode(s,V,F),w[y++]=ie,ie!==Ce.CODE_STOP&&(Ee=!0),ie!==Ce.CODE_STOP&&(Se++,_e+=Se*ie),L=F,F+=V.reduce((jc,pl)=>jc+pl,0),ie){case Ce.CODE_START_A:case Ce.CODE_START_B:case Ce.CODE_START_C:throw new J}switch(E){case Ce.CODE_CODE_A:if(ie<64)at===ht?I+=String.fromCharCode(32+ie):I+=String.fromCharCode(32+ie+128),at=!1;else if(ie<96)at===ht?I+=String.fromCharCode(ie-64):I+=String.fromCharCode(ie+64),at=!1;else switch(ie!==Ce.CODE_STOP&&(Ee=!1),ie){case Ce.CODE_FNC_1:u&&(I.length===0?I+="]C1":I+="");break;case Ce.CODE_FNC_2:case Ce.CODE_FNC_3:break;case Ce.CODE_FNC_4_A:!ht&&at?(ht=!0,at=!1):ht&&at?(ht=!1,at=!1):at=!0;break;case Ce.CODE_SHIFT:N=!0,E=Ce.CODE_CODE_B;break;case Ce.CODE_CODE_B:E=Ce.CODE_CODE_B;break;case Ce.CODE_CODE_C:E=Ce.CODE_CODE_C;break;case Ce.CODE_STOP:_=!0;break}break;case Ce.CODE_CODE_B:if(ie<96)at===ht?I+=String.fromCharCode(32+ie):I+=String.fromCharCode(32+ie+128),at=!1;else switch(ie!==Ce.CODE_STOP&&(Ee=!1),ie){case Ce.CODE_FNC_1:u&&(I.length===0?I+="]C1":I+="");break;case Ce.CODE_FNC_2:case Ce.CODE_FNC_3:break;case Ce.CODE_FNC_4_B:!ht&&at?(ht=!0,at=!1):ht&&at?(ht=!1,at=!1):at=!0;break;case Ce.CODE_SHIFT:N=!0,E=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_A:E=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_C:E=Ce.CODE_CODE_C;break;case Ce.CODE_STOP:_=!0;break}break;case Ce.CODE_CODE_C:if(ie<100)ie<10&&(I+="0"),I+=ie;else switch(ie!==Ce.CODE_STOP&&(Ee=!1),ie){case Ce.CODE_FNC_1:u&&(I.length===0?I+="]C1":I+="");break;case Ce.CODE_CODE_A:E=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_B:E=Ce.CODE_CODE_B;break;case Ce.CODE_STOP:_=!0;break}break}qi&&(E=E===Ce.CODE_CODE_A?Ce.CODE_CODE_B:Ce.CODE_CODE_A)}const xn=F-L;if(F=s.getNextUnset(F),!s.isRange(F,Math.min(s.getSize(),F+(F-L)/2),!1))throw new ne;if(_e-=Se*X,_e%103!==X)throw new j;const wr=I.length;if(wr===0)throw new ne;wr>0&&Ee&&(E===Ce.CODE_CODE_C?I=I.substring(0,wr-2):I=I.substring(0,wr-1));const Zn=(f[1]+f[0])/2,Ut=L+xn/2,zn=w.length,fr=new Uint8Array(zn);for(let qi=0;qi<zn;qi++)fr[qi]=w[qi];const Oa=[new Me(Zn,n),new Me(Ut,n)];return new ce(I,fr,0,Oa,be.CODE_128,new Date().getTime())}}Ce.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ce.MAX_AVG_VARIANCE=.25,Ce.MAX_INDIVIDUAL_VARIANCE=.7,Ce.CODE_SHIFT=98,Ce.CODE_CODE_C=99,Ce.CODE_CODE_B=100,Ce.CODE_CODE_A=101,Ce.CODE_FNC_1=102,Ce.CODE_FNC_2=97,Ce.CODE_FNC_3=96,Ce.CODE_FNC_4_A=101,Ce.CODE_FNC_4_B=100,Ce.CODE_START_A=103,Ce.CODE_START_B=104,Ce.CODE_START_C=105,Ce.CODE_STOP=106;class qt extends tn{constructor(n=!1,s=!1){super(),this.usingCheckDigit=n,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,s,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let f=qt.findAsteriskPattern(s,u),g=s.getNextSet(f[1]),y=s.getSize(),w,E;do{qt.recordPattern(s,g,u);let V=qt.toNarrowWidePattern(u);if(V<0)throw new ne;w=qt.patternToChar(V),this.decodeRowResult+=w,E=g;for(let X of u)g+=X;g=s.getNextSet(g)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let _=0;for(let V of u)_+=V;let N=g-E-_;if(g!==y&&N*2<_)throw new ne;if(this.usingCheckDigit){let V=this.decodeRowResult.length-1,X=0;for(let ie=0;ie<V;ie++)X+=qt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ie));if(this.decodeRowResult.charAt(V)!==qt.ALPHABET_STRING.charAt(X%43))throw new j;this.decodeRowResult=this.decodeRowResult.substring(0,V)}if(this.decodeRowResult.length===0)throw new ne;let I;this.extendedMode?I=qt.decodeExtended(this.decodeRowResult):I=this.decodeRowResult;let L=(f[1]+f[0])/2,F=E+_/2;return new ce(I,null,0,[new Me(L,n),new Me(F,n)],be.CODE_39,new Date().getTime())}static findAsteriskPattern(n,s){let l=n.getSize(),u=n.getNextSet(0),f=0,g=u,y=!1,w=s.length;for(let E=u;E<l;E++)if(n.get(E)!==y)s[f]++;else{if(f===w-1){if(this.toNarrowWidePattern(s)===qt.ASTERISK_ENCODING&&n.isRange(Math.max(0,g-Math.floor((E-g)/2)),g,!1))return[g,E];g+=s[0]+s[1],s.copyWithin(0,2,2+f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,y=!y}throw new ne}static toNarrowWidePattern(n){let s=n.length,l=0,u;do{let f=2147483647;for(let w of n)w<f&&w>l&&(f=w);l=f,u=0;let g=0,y=0;for(let w=0;w<s;w++){let E=n[w];E>l&&(y|=1<<s-1-w,u++,g+=E)}if(u===3){for(let w=0;w<s&&u>0;w++){let E=n[w];if(E>l&&(u--,E*2>=g))return-1}return y}}while(u>3);return-1}static patternToChar(n){for(let s=0;s<qt.CHARACTER_ENCODINGS.length;s++)if(qt.CHARACTER_ENCODINGS[s]===n)return qt.ALPHABET_STRING.charAt(s);if(n===qt.ASTERISK_ENCODING)return"*";throw new ne}static decodeExtended(n){let s=n.length,l="";for(let u=0;u<s;u++){let f=n.charAt(u);if(f==="+"||f==="$"||f==="%"||f==="/"){let g=n.charAt(u+1),y="\0";switch(f){case"+":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)+32);else throw new J;break;case"$":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)-64);else throw new J;break;case"%":if(g>="A"&&g<="E")y=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")y=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")y=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")y="\0";else if(g==="V")y="@";else if(g==="W")y="`";else if(g==="X"||g==="Y"||g==="Z")y="";else throw new J;break;case"/":if(g>="A"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")y=":";else throw new J;break}l+=y,u++}else l+=f}return l}}qt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",qt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],qt.ASTERISK_ENCODING=148;class lt extends tn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,s,l){let u=this.decodeStart(s),f=this.decodeEnd(s),g=new qe;lt.decodeMiddle(s,u[1],f[0],g);let y=g.toString(),w=null;l!=null&&(w=l.get(Ae.ALLOWED_LENGTHS)),w==null&&(w=lt.DEFAULT_ALLOWED_LENGTHS);let E=y.length,_=!1,N=0;for(let F of w){if(E===F){_=!0;break}F>N&&(N=F)}if(!_&&E>N&&(_=!0),!_)throw new J;const I=[new Me(u[1],n),new Me(f[0],n)];return new ce(y,null,0,I,be.ITF,new Date().getTime())}static decodeMiddle(n,s,l,u){let f=new Int32Array(10),g=new Int32Array(5),y=new Int32Array(5);for(f.fill(0),g.fill(0),y.fill(0);s<l;){tn.recordPattern(n,s,f);for(let E=0;E<5;E++){let _=2*E;g[E]=f[_],y[E]=f[_+1]}let w=lt.decodeDigit(g);u.append(w.toString()),w=this.decodeDigit(y),u.append(w.toString()),f.forEach(function(E){s+=E})}}decodeStart(n){let s=lt.skipWhiteSpace(n),l=lt.findGuardPattern(n,s,lt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(n,l[0]),l}validateQuietZone(n,s){let l=this.narrowLineWidth*10;l=l<s?l:s;for(let u=s-1;l>0&&u>=0&&!n.get(u);u--)l--;if(l!==0)throw new ne}static skipWhiteSpace(n){const s=n.getSize(),l=n.getNextSet(0);if(l===s)throw new ne;return l}decodeEnd(n){n.reverse();try{let s=lt.skipWhiteSpace(n),l;try{l=lt.findGuardPattern(n,s,lt.END_PATTERN_REVERSED[0])}catch(f){f instanceof ne&&(l=lt.findGuardPattern(n,s,lt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,l[0]);let u=l[0];return l[0]=n.getSize()-l[1],l[1]=n.getSize()-u,l}finally{n.reverse()}}static findGuardPattern(n,s,l){let u=l.length,f=new Int32Array(u),g=n.getSize(),y=!1,w=0,E=s;f.fill(0);for(let _=s;_<g;_++)if(n.get(_)!==y)f[w]++;else{if(w===u-1){if(tn.patternMatchVariance(f,l,lt.MAX_INDIVIDUAL_VARIANCE)<lt.MAX_AVG_VARIANCE)return[E,_];E+=f[0]+f[1],q.arraycopy(f,2,f,0,w-1),f[w-1]=0,f[w]=0,w--}else w++;f[w]=1,y=!y}throw new ne}static decodeDigit(n){let s=lt.MAX_AVG_VARIANCE,l=-1,u=lt.PATTERNS.length;for(let f=0;f<u;f++){let g=lt.PATTERNS[f],y=tn.patternMatchVariance(n,g,lt.MAX_INDIVIDUAL_VARIANCE);y<s?(s=y,l=f):y===s&&(l=-1)}if(l>=0)return l%10;throw new ne}}lt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],lt.MAX_AVG_VARIANCE=.38,lt.MAX_INDIVIDUAL_VARIANCE=.5,lt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],lt.START_PATTERN=Int32Array.from([1,1,1,1]),lt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class un extends tn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let s=!1,l,u=0,f=Int32Array.from([0,0,0]);for(;!s;){f=Int32Array.from([0,0,0]),l=un.findGuardPattern(n,u,!1,this.START_END_PATTERN,f);let g=l[0];u=l[1];let y=g-(u-g);y>=0&&(s=n.isRange(y,g,!1))}return l}static checkChecksum(n){return un.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let s=n.length;if(s===0)return!1;let l=parseInt(n.charAt(s-1),10);return un.getStandardUPCEANChecksum(n.substring(0,s-1))===l}static getStandardUPCEANChecksum(n){let s=n.length,l=0;for(let u=s-1;u>=0;u-=2){let f=n.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new J;l+=f}l*=3;for(let u=s-2;u>=0;u-=2){let f=n.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new J;l+=f}return(1e3-l)%10}static decodeEnd(n,s){return un.findGuardPattern(n,s,!1,un.START_END_PATTERN,new Int32Array(un.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,s,l,u){return this.findGuardPattern(n,s,l,u,new Int32Array(u.length))}static findGuardPattern(n,s,l,u,f){let g=n.getSize();s=l?n.getNextUnset(s):n.getNextSet(s);let y=0,w=s,E=u.length,_=l;for(let N=s;N<g;N++)if(n.get(N)!==_)f[y]++;else{if(y===E-1){if(tn.patternMatchVariance(f,u,un.MAX_INDIVIDUAL_VARIANCE)<un.MAX_AVG_VARIANCE)return Int32Array.from([w,N]);w+=f[0]+f[1];let I=f.slice(2,f.length-1);for(let L=0;L<y-1;L++)f[L]=I[L];f[y-1]=0,f[y]=0,y--}else y++;f[y]=1,_=!_}throw new ne}static decodeDigit(n,s,l,u){this.recordPattern(n,l,s);let f=this.MAX_AVG_VARIANCE,g=-1,y=u.length;for(let w=0;w<y;w++){let E=u[w],_=tn.patternMatchVariance(s,E,un.MAX_INDIVIDUAL_VARIANCE);_<f&&(f=_,g=w)}if(g>=0)return g;throw new ne}}un.MAX_AVG_VARIANCE=.48,un.MAX_INDIVIDUAL_VARIANCE=.7,un.START_END_PATTERN=Int32Array.from([1,1,1]),un.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),un.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),un.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class as{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,s,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(s,l,u),g=u.toString(),y=as.parseExtensionString(g),w=[new Me((l[0]+l[1])/2,n),new Me(f,n)],E=new ce(g,null,0,w,be.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&E.putAllMetadata(y),E}decodeMiddle(n,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=n.getSize(),g=s[1],y=0;for(let E=0;E<5&&g<f;E++){let _=un.decodeDigit(n,u,g,un.L_AND_G_PATTERNS);l+=String.fromCharCode(48+_%10);for(let N of u)g+=N;_>=10&&(y|=1<<4-E),E!==4&&(g=n.getNextSet(g),g=n.getNextUnset(g))}if(l.length!==5)throw new ne;let w=this.determineCheckDigit(y);if(as.extensionChecksum(l.toString())!==w)throw new ne;return g}static extensionChecksum(n){let s=n.length,l=0;for(let u=s-2;u>=0;u-=2)l+=n.charAt(u).charCodeAt(0)-48;l*=3;for(let u=s-1;u>=0;u-=2)l+=n.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(n){for(let s=0;s<10;s++)if(n===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new ne}static parseExtensionString(n){if(n.length!==5)return null;let s=as.parseExtension5String(n);return s==null?null:new Map([[We.SUGGESTED_PRICE,s]])}static parseExtension5String(n){let s;switch(n.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let l=parseInt(n.substring(1)),u=(l/100).toString(),f=l%100,g=f<10?"0"+f:f.toString();return s+u+"."+g}}class sl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,s,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(s,l,u),g=u.toString(),y=sl.parseExtensionString(g),w=[new Me((l[0]+l[1])/2,n),new Me(f,n)],E=new ce(g,null,0,w,be.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&E.putAllMetadata(y),E}decodeMiddle(n,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=n.getSize(),g=s[1],y=0;for(let w=0;w<2&&g<f;w++){let E=un.decodeDigit(n,u,g,un.L_AND_G_PATTERNS);l+=String.fromCharCode(48+E%10);for(let _ of u)g+=_;E>=10&&(y|=1<<1-w),w!==1&&(g=n.getNextSet(g),g=n.getNextUnset(g))}if(l.length!==2)throw new ne;if(parseInt(l.toString())%4!==y)throw new ne;return g}static parseExtensionString(n){return n.length!==2?null:new Map([[We.ISSUE_NUMBER,parseInt(n)]])}}class ss{static decodeRow(n,s,l){let u=un.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new as().decodeRow(n,s,u)}catch{return new sl().decodeRow(n,s,u)}}}ss.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class wt extends un{constructor(){super(),this.decodeRowStringBuffer="",wt.L_AND_G_PATTERNS=wt.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let s=wt.L_PATTERNS[n-10],l=new Int32Array(s.length);for(let u=0;u<s.length;u++)l[u]=s[s.length-u-1];wt.L_AND_G_PATTERNS[n]=l}}decodeRow(n,s,l){let u=wt.findStartGuardPattern(s),f=l==null?null:l.get(Ae.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Ee=new Me((u[0]+u[1])/2,n);f.foundPossibleResultPoint(Ee)}let g=this.decodeMiddle(s,u,this.decodeRowStringBuffer),y=g.rowOffset,w=g.resultString;if(f!=null){const Ee=new Me(y,n);f.foundPossibleResultPoint(Ee)}let E=this.decodeEnd(s,y);if(f!=null){const Ee=new Me((E[0]+E[1])/2,n);f.foundPossibleResultPoint(Ee)}let _=E[1],N=_+(_-E[0]);if(N>=s.getSize()||!s.isRange(_,N,!1))throw new ne;let I=w.toString();if(I.length<8)throw new J;if(!wt.checkChecksum(I))throw new j;let L=(u[1]+u[0])/2,F=(E[1]+E[0])/2,V=this.getBarcodeFormat(),X=[new Me(L,n),new Me(F,n)],ie=new ce(I,null,0,X,V,new Date().getTime()),_e=0;try{let Ee=ss.decodeRow(n,s,E[1]);ie.putMetadata(We.UPC_EAN_EXTENSION,Ee.getText()),ie.putAllMetadata(Ee.getResultMetadata()),ie.addResultPoints(Ee.getResultPoints()),_e=Ee.getText().length}catch{}let Se=l==null?null:l.get(Ae.ALLOWED_EAN_EXTENSIONS);if(Se!=null){let Ee=!1;for(let ht in Se)if(_e.toString()===ht){Ee=!0;break}if(!Ee)throw new ne}return ie}decodeEnd(n,s){return wt.findGuardPattern(n,s,!1,wt.START_END_PATTERN,new Int32Array(wt.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return wt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let s=n.length;if(s===0)return!1;let l=parseInt(n.charAt(s-1),10);return wt.getStandardUPCEANChecksum(n.substring(0,s-1))===l}static getStandardUPCEANChecksum(n){let s=n.length,l=0;for(let u=s-1;u>=0;u-=2){let f=n.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new J;l+=f}l*=3;for(let u=s-2;u>=0;u-=2){let f=n.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new J;l+=f}return(1e3-l)%10}}class Wr extends wt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=n.getSize(),g=s[1],y=0;for(let E=0;E<6&&g<f;E++){let _=wt.decodeDigit(n,u,g,wt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+_%10);for(let N of u)g+=N;_>=10&&(y|=1<<5-E)}l=Wr.determineFirstDigit(l,y),g=wt.findGuardPattern(n,g,!0,wt.MIDDLE_PATTERN,new Int32Array(wt.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&g<f;E++){let _=wt.decodeDigit(n,u,g,wt.L_PATTERNS);l+=String.fromCharCode(48+_);for(let N of u)g+=N}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return be.EAN_13}static determineFirstDigit(n,s){for(let l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return n=String.fromCharCode(48+l)+n,n;throw new ne}}Wr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class _i extends wt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,s,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=n.getSize(),g=s[1];for(let w=0;w<4&&g<f;w++){let E=wt.decodeDigit(n,u,g,wt.L_PATTERNS);l+=String.fromCharCode(48+E);for(let _ of u)g+=_}g=wt.findGuardPattern(n,g,!0,wt.MIDDLE_PATTERN,new Int32Array(wt.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&g<f;w++){let E=wt.decodeDigit(n,u,g,wt.L_PATTERNS);l+=String.fromCharCode(48+E);for(let _ of u)g+=_}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return be.EAN_8}}class os extends wt{constructor(){super(...arguments),this.ean13Reader=new Wr}getBarcodeFormat(){return be.UPC_A}decode(n,s){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,s,l))}decodeMiddle(n,s,l){return this.ean13Reader.decodeMiddle(n,s,l)}maybeReturnResult(n){let s=n.getText();if(s.charAt(0)==="0"){let l=new ce(s.substring(1),null,null,n.getResultPoints(),be.UPC_A);return n.getResultMetadata()!=null&&l.putAllMetadata(n.getResultMetadata()),l}else throw new ne}reset(){this.ean13Reader.reset()}}class Xn extends wt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,s,l){const u=this.decodeMiddleCounters.map(E=>E);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const f=n.getSize();let g=s[1],y=0;for(let E=0;E<6&&g<f;E++){const _=Xn.decodeDigit(n,u,g,Xn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+_%10);for(let N of u)g+=N;_>=10&&(y|=1<<5-E)}let w=Xn.determineNumSysAndCheckDigit(l,y);return{rowOffset:g,resultString:w}}decodeEnd(n,s){return Xn.findGuardPatternWithoutCounters(n,s,!0,Xn.MIDDLE_END_PATTERN)}checkChecksum(n){return wt.checkChecksum(Xn.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,s){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let f=String.fromCharCode(48+l),g=String.fromCharCode(48+u);return f+n+g}throw ne.getNotFoundInstance()}getBarcodeFormat(){return be.UPC_E}static convertUPCEtoUPCA(n){const s=n.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new qe;l.append(n.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(u),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(u);break}return n.length>=8&&l.append(n.charAt(7)),l.toString()}}Xn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Xn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ol extends tn{constructor(n){super();let s=n==null?null:n.get(Ae.POSSIBLE_FORMATS),l=[];o(s)?(l.push(new Wr),l.push(new os),l.push(new _i),l.push(new Xn)):(s.indexOf(be.EAN_13)>-1&&l.push(new Wr),s.indexOf(be.UPC_A)>-1&&l.push(new os),s.indexOf(be.EAN_8)>-1&&l.push(new _i),s.indexOf(be.UPC_E)>-1&&l.push(new Xn)),this.readers=l}decodeRow(n,s,l){for(let u of this.readers)try{const f=u.decodeRow(n,s,l),g=f.getBarcodeFormat()===be.EAN_13&&f.getText().charAt(0)==="0",y=l==null?null:l.get(Ae.POSSIBLE_FORMATS),w=y==null||y.includes(be.UPC_A);if(g&&w){const E=f.getRawBytes(),_=new ce(f.getText().substring(1),E,E?E.length:null,f.getResultPoints(),be.UPC_A);return _.putAllMetadata(f.getResultMetadata()),_}return f}catch{}throw new ne}reset(){for(let n of this.readers)n.reset()}}class jn extends tn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,s){for(let l=0;l<s.length;l++)if(tn.patternMatchVariance(n,s[l],jn.MAX_INDIVIDUAL_VARIANCE)<jn.MAX_AVG_VARIANCE)return l;throw new ne}static count(n){return mt.sum(new Int32Array(n))}static increment(n,s){let l=0,u=s[0];for(let f=1;f<n.length;f++)s[f]>u&&(u=s[f],l=f);n[l]++}static decrement(n,s){let l=0,u=s[0];for(let f=1;f<n.length;f++)s[f]<u&&(u=s[f],l=f);n[l]--}static isFinderPattern(n){let s=n[0]+n[1],l=s+n[2]+n[3],u=s/l;if(u>=jn.MIN_FINDER_PATTERN_RATIO&&u<=jn.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let y of n)y>g&&(g=y),y<f&&(f=y);return g<10*f}return!1}}jn.MAX_AVG_VARIANCE=.2,jn.MAX_INDIVIDUAL_VARIANCE=.45,jn.MIN_FINDER_PATTERN_RATIO=9.5/12,jn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ci{constructor(n,s){this.value=n,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof Ci))return!1;const s=n;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ti{constructor(n,s,l,u,f){this.value=n,this.startEnd=s,this.value=n,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Me(l,f)),this.resultPoints.push(new Me(u,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof Ti))return!1;const s=n;return this.value===s.value}hashCode(){return this.value}}class Yr{constructor(){}static getRSSvalue(n,s,l){let u=0;for(let w of n)u+=w;let f=0,g=0,y=n.length;for(let w=0;w<y-1;w++){let E;for(E=1,g|=1<<w;E<n[w];E++,g&=~(1<<w)){let _=Yr.combins(u-E-1,y-w-2);if(l&&g===0&&u-E-(y-w-1)>=y-w-1&&(_-=Yr.combins(u-E-(y-w),y-w-2)),y-w-1>1){let N=0;for(let I=u-E-(y-w-2);I>s;I--)N+=Yr.combins(u-E-I-1,y-w-3);_-=N*(y-1-w)}else u-E>s&&_--;f+=_}u-=E}return f}static combins(n,s){let l,u;n-s>s?(u=s,l=n-s):(u=n-s,l=s);let f=1,g=1;for(let y=n;y>l;y--)f*=y,g<=u&&(f/=g,g++);for(;g<=u;)f/=g,g++;return f}}class Ac{static buildBitArray(n){let s=n.length*2-1;n[n.length-1].getRightChar()==null&&(s-=1);let l=12*s,u=new me(l),f=0,y=n[0].getRightChar().getValue();for(let w=11;w>=0;--w)(y&1<<w)!=0&&u.set(f),f++;for(let w=1;w<n.length;++w){let E=n[w],_=E.getLeftChar().getValue();for(let N=11;N>=0;--N)(_&1<<N)!=0&&u.set(f),f++;if(E.getRightChar()!=null){let N=E.getRightChar().getValue();for(let I=11;I>=0;--I)(N&1<<I)!=0&&u.set(f),f++}}return u}}class Oi{constructor(n,s){s?this.decodedInformation=null:(this.finished=n,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class qs{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class qn extends qs{constructor(n,s){super(n),this.value=s}getValue(){return this.value}isFNC1(){return this.value===qn.FNC1}}qn.FNC1="$";class ci extends qs{constructor(n,s,l){super(n),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class sr extends qs{constructor(n,s,l){if(super(n),s<0||s>10||l<0||l>10)throw new J;this.firstDigit=s,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===sr.FNC1}isSecondDigitFNC1(){return this.secondDigit===sr.FNC1}isAnyFNC1(){return this.firstDigit===sr.FNC1||this.secondDigit===sr.FNC1}}sr.FNC1=10;class Ie{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new ne;let s=n.substring(0,2);for(let f of Ie.TWO_DIGIT_DATA_LENGTH)if(f[0]===s)return f[1]===Ie.VARIABLE_LENGTH?Ie.processVariableAI(2,f[2],n):Ie.processFixedAI(2,f[1],n);if(n.length<3)throw new ne;let l=n.substring(0,3);for(let f of Ie.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ie.VARIABLE_LENGTH?Ie.processVariableAI(3,f[2],n):Ie.processFixedAI(3,f[1],n);for(let f of Ie.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ie.VARIABLE_LENGTH?Ie.processVariableAI(4,f[2],n):Ie.processFixedAI(4,f[1],n);if(n.length<4)throw new ne;let u=n.substring(0,4);for(let f of Ie.FOUR_DIGIT_DATA_LENGTH)if(f[0]===u)return f[1]===Ie.VARIABLE_LENGTH?Ie.processVariableAI(4,f[2],n):Ie.processFixedAI(4,f[1],n);throw new ne}static processFixedAI(n,s,l){if(l.length<n)throw new ne;let u=l.substring(0,n);if(l.length<n+s)throw new ne;let f=l.substring(n,n+s),g=l.substring(n+s),y="("+u+")"+f,w=Ie.parseFieldsInGeneralPurpose(g);return w==null?y:y+w}static processVariableAI(n,s,l){let u=l.substring(0,n),f;l.length<n+s?f=l.length:f=n+s;let g=l.substring(n,f),y=l.substring(f),w="("+u+")"+g,E=Ie.parseFieldsInGeneralPurpose(y);return E==null?w:w+E}}Ie.VARIABLE_LENGTH=[],Ie.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ie.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ie.VARIABLE_LENGTH,20],["22",Ie.VARIABLE_LENGTH,29],["30",Ie.VARIABLE_LENGTH,8],["37",Ie.VARIABLE_LENGTH,8],["90",Ie.VARIABLE_LENGTH,30],["91",Ie.VARIABLE_LENGTH,30],["92",Ie.VARIABLE_LENGTH,30],["93",Ie.VARIABLE_LENGTH,30],["94",Ie.VARIABLE_LENGTH,30],["95",Ie.VARIABLE_LENGTH,30],["96",Ie.VARIABLE_LENGTH,30],["97",Ie.VARIABLE_LENGTH,3],["98",Ie.VARIABLE_LENGTH,30],["99",Ie.VARIABLE_LENGTH,30]],Ie.THREE_DIGIT_DATA_LENGTH=[["240",Ie.VARIABLE_LENGTH,30],["241",Ie.VARIABLE_LENGTH,30],["242",Ie.VARIABLE_LENGTH,6],["250",Ie.VARIABLE_LENGTH,30],["251",Ie.VARIABLE_LENGTH,30],["253",Ie.VARIABLE_LENGTH,17],["254",Ie.VARIABLE_LENGTH,20],["400",Ie.VARIABLE_LENGTH,30],["401",Ie.VARIABLE_LENGTH,30],["402",17],["403",Ie.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ie.VARIABLE_LENGTH,20],["421",Ie.VARIABLE_LENGTH,15],["422",3],["423",Ie.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ie.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ie.VARIABLE_LENGTH,15],["391",Ie.VARIABLE_LENGTH,18],["392",Ie.VARIABLE_LENGTH,15],["393",Ie.VARIABLE_LENGTH,18],["703",Ie.VARIABLE_LENGTH,30]],Ie.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ie.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ie.VARIABLE_LENGTH,20],["8003",Ie.VARIABLE_LENGTH,30],["8004",Ie.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ie.VARIABLE_LENGTH,30],["8008",Ie.VARIABLE_LENGTH,12],["8018",18],["8020",Ie.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ie.VARIABLE_LENGTH,70],["8200",Ie.VARIABLE_LENGTH,70]];class or{constructor(n){this.buffer=new qe,this.information=n}decodeAllCodes(n,s){let l=s,u=null;do{let f=this.decodeGeneralPurposeField(l,u),g=Ie.parseFieldsInGeneralPurpose(f.getNewString());if(g!=null&&n.append(g),f.isRemaining()?u=""+f.getRemainingValue():u=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let s=n;s<n+3;++s)if(this.information.get(s))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(n,4);return f===0?new sr(this.information.getSize(),sr.FNC1,sr.FNC1):new sr(this.information.getSize(),f-1,sr.FNC1)}let s=this.extractNumericValueFromBitArray(n,7),l=(s-8)/11,u=(s-8)%11;return new sr(n+7,l,u)}extractNumericValueFromBitArray(n,s){return or.extractNumericValueFromBitArray(this.information,n,s)}static extractNumericValueFromBitArray(n,s,l){let u=0;for(let f=0;f<l;++f)n.get(s+f)&&(u|=1<<l-f-1);return u}decodeGeneralPurposeField(n,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(n);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new ci(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new ci(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),n=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),n=s.isFinished()):(s=this.parseNumericBlock(),n=s.isFinished()),!(l!==this.current.getPosition())&&!n)break}while(!n);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let s;return n.isSecondDigitFNC1()?s=new ci(this.current.getPosition(),this.buffer.toString()):s=new ci(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new Oi(!0,s)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let s=new ci(this.current.getPosition(),this.buffer.toString());return new Oi(!0,s)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Oi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let s=new ci(this.current.getPosition(),this.buffer.toString());return new Oi(!0,s)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Oi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let s=new ci(this.current.getPosition(),this.buffer.toString());return new Oi(!0,s)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Oi(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,5);if(s>=5&&s<16)return!0;if(n+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(n,7);if(l>=64&&l<116)return!0;if(n+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(n,8);return u>=232&&u<253}decodeIsoIec646(n){let s=this.extractNumericValueFromBitArray(n,5);if(s===15)return new qn(n+5,qn.FNC1);if(s>=5&&s<15)return new qn(n+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(n,7);if(l>=64&&l<90)return new qn(n+7,""+(l+1));if(l>=90&&l<116)return new qn(n+7,""+(l+7));let u=this.extractNumericValueFromBitArray(n,8),f;switch(u){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new J}return new qn(n+8,f)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,5);if(s>=5&&s<16)return!0;if(n+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(n,6);return l>=16&&l<63}decodeAlphanumeric(n){let s=this.extractNumericValueFromBitArray(n,5);if(s===15)return new qn(n+5,qn.FNC1);if(s>=5&&s<15)return new qn(n+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(n,6);if(l>=32&&l<58)return new qn(n+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new ar("Decoding invalid alphanumeric value: "+l)}return new qn(n+6,u)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let s=0;s<5&&s+n<this.information.getSize();++s)if(s===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+s))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let s=n;s<n+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let s=0;s<4&&s+n<this.information.getSize();++s)if(this.information.get(n+s))return!1;return!0}}class _n{constructor(n){this.information=n,this.generalDecoder=new or(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class zt extends _n{constructor(n){super(n)}encodeCompressedGtin(n,s){n.append("(01)");let l=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,s,l)}encodeCompressedGtinWithoutAI(n,s,l){for(let u=0;u<4;++u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);f/100===0&&n.append("0"),f/10===0&&n.append("0"),n.append(f)}zt.appendCheckDigit(n,l)}static appendCheckDigit(n,s){let l=0;for(let u=0;u<13;u++){let f=n.charAt(u+s).charCodeAt(0)-48;l+=(u&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),n.append(l)}}zt.GTIN_SIZE=40;class Or extends zt{constructor(n){super(n)}parseInformation(){let n=new qe;n.append("(01)");let s=n.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Or.HEADER_SIZE,4);return n.append(l),this.encodeCompressedGtinWithoutAI(n,Or.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(n,Or.HEADER_SIZE+44)}}Or.HEADER_SIZE=4;class ma extends _n{constructor(n){super(n)}parseInformation(){let n=new qe;return this.getGeneralDecoder().decodeAllCodes(n,ma.HEADER_SIZE)}}ma.HEADER_SIZE=5;class Ws extends zt{constructor(n){super(n)}encodeCompressedWeight(n,s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(n,u);let f=this.checkWeight(u),g=1e5;for(let y=0;y<5;++y)f/g===0&&n.append("0"),g/=10;n.append(f)}}class Xr extends Ws{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=Xr.HEADER_SIZE+Ws.GTIN_SIZE+Xr.WEIGHT_SIZE)throw new ne;let n=new qe;return this.encodeCompressedGtin(n,Xr.HEADER_SIZE),this.encodeCompressedWeight(n,Xr.HEADER_SIZE+Ws.GTIN_SIZE,Xr.WEIGHT_SIZE),n.toString()}}Xr.HEADER_SIZE=5,Xr.WEIGHT_SIZE=15;class _c extends Xr{constructor(n){super(n)}addWeightCode(n,s){n.append("(3103)")}checkWeight(n){return n}}class ls extends Xr{constructor(n){super(n)}addWeightCode(n,s){s<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class yr extends zt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<yr.HEADER_SIZE+zt.GTIN_SIZE)throw new ne;let n=new qe;this.encodeCompressedGtin(n,yr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(yr.HEADER_SIZE+zt.GTIN_SIZE,yr.LAST_DIGIT_SIZE);n.append("(392"),n.append(s),n.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(yr.HEADER_SIZE+zt.GTIN_SIZE+yr.LAST_DIGIT_SIZE,null);return n.append(l.getNewString()),n.toString()}}yr.HEADER_SIZE=8,yr.LAST_DIGIT_SIZE=2;class yn extends zt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<yn.HEADER_SIZE+zt.GTIN_SIZE)throw new ne;let n=new qe;this.encodeCompressedGtin(n,yn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(yn.HEADER_SIZE+zt.GTIN_SIZE,yn.LAST_DIGIT_SIZE);n.append("(393"),n.append(s),n.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(yn.HEADER_SIZE+zt.GTIN_SIZE+yn.LAST_DIGIT_SIZE,yn.FIRST_THREE_DIGITS_SIZE);l/100==0&&n.append("0"),l/10==0&&n.append("0"),n.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(yn.HEADER_SIZE+zt.GTIN_SIZE+yn.LAST_DIGIT_SIZE+yn.FIRST_THREE_DIGITS_SIZE,null);return n.append(u.getNewString()),n.toString()}}yn.HEADER_SIZE=8,yn.LAST_DIGIT_SIZE=2,yn.FIRST_THREE_DIGITS_SIZE=10;class Rt extends Ws{constructor(n,s,l){super(n),this.dateCode=l,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE+Rt.DATE_SIZE)throw new ne;let n=new qe;return this.encodeCompressedGtin(n,Rt.HEADER_SIZE),this.encodeCompressedWeight(n,Rt.HEADER_SIZE+Rt.GTIN_SIZE,Rt.WEIGHT_SIZE),this.encodeCompressedDate(n,Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,Rt.DATE_SIZE);if(l==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let u=l%32;l/=32;let f=l%12+1;l/=12;let g=l;g/10==0&&n.append("0"),n.append(g),f/10==0&&n.append("0"),n.append(f),u/10==0&&n.append("0"),n.append(u)}addWeightCode(n,s){n.append("("),n.append(this.firstAIdigits),n.append(s/1e5),n.append(")")}checkWeight(n){return n%1e5}}Rt.HEADER_SIZE=8,Rt.WEIGHT_SIZE=20,Rt.DATE_SIZE=16;function ya(O){try{if(O.get(1))return new Or(O);if(!O.get(2))return new ma(O);switch(or.extractNumericValueFromBitArray(O,1,4)){case 4:return new _c(O);case 5:return new ls(O)}switch(or.extractNumericValueFromBitArray(O,1,5)){case 12:return new yr(O);case 13:return new yn(O)}switch(or.extractNumericValueFromBitArray(O,1,7)){case 56:return new Rt(O,"310","11");case 57:return new Rt(O,"320","11");case 58:return new Rt(O,"310","13");case 59:return new Rt(O,"320","13");case 60:return new Rt(O,"310","15");case 61:return new Rt(O,"320","15");case 62:return new Rt(O,"310","17");case 63:return new Rt(O,"320","17")}}catch(n){throw console.log(n),new ar("unknown decoder: "+O)}}class lr{constructor(n,s,l,u){this.leftchar=n,this.rightchar=s,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,s){return n instanceof lr?lr.equalsOrNull(n.leftchar,s.leftchar)&&lr.equalsOrNull(n.rightchar,s.rightchar)&&lr.equalsOrNull(n.finderpattern,s.finderpattern):!1}static equalsOrNull(n,s){return n===null?s===null:lr.equals(n,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class pn{constructor(n,s,l){this.pairs=n,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,s){return n instanceof pn?this.checkEqualitity(n,s)&&n.wasReversed===s.wasReversed:!1}checkEqualitity(n,s){if(!n||!s)return;let l;return n.forEach((u,f)=>{s.forEach(g=>{u.getLeftChar().getValue()===g.getLeftChar().getValue()&&u.getRightChar().getValue()===g.getRightChar().getValue()&&u.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(l=!0)})}),l}}class ve extends jn{constructor(n){super(...arguments),this.pairs=new Array(ve.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,s,l){this.pairs.length=0,this.startFromEven=!1;try{return ve.constructResult(this.decodeRow2pairs(n,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,ve.constructResult(this.decodeRow2pairs(n,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,s){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,n))}catch(f){if(f instanceof ne){if(!this.pairs.length)throw new ne;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(n,!1),u){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new ne}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return n&&(this.rows=this.rows.reverse()),s}checkRows(n,s){for(let l=s;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let g of n)this.pairs.push(g.getPairs());if(this.pairs.push(u.getPairs()),!ve.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(n);f.push(u);try{return this.checkRows(f,l+1)}catch(g){this.verbose&&console.log(g)}}throw new ne}static isValidSequence(n){for(let s of ve.FINDER_PATTERN_SEQUENCES){if(n.length>s.length)continue;let l=!0;for(let u=0;u<n.length;u++)if(n[u].getFinderPattern().getValue()!=s[u]){l=!1;break}if(l)return!0}return!1}storeRow(n,s){let l=0,u=!1,f=!1;for(;l<this.rows.length;){let g=this.rows[l];if(g.getRowNumber()>n){f=g.isEquivalent(this.pairs);break}u=g.isEquivalent(this.pairs),l++}f||u||ve.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new pn(this.pairs,n,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,s){for(let l of s)if(l.getPairs().length!==n.length){for(let u of l.getPairs())for(let f of n)if(lr.equals(u,f))break}}static isPartialRow(n,s){for(let l of s){let u=!0;for(let f of n){let g=!1;for(let y of l.getPairs())if(f.equals(y)){g=!0;break}if(!g){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(n){let s=Ac.buildBitArray(n),u=ya(s).parseInformation(),f=n[0].getFinderPattern().getResultPoints(),g=n[n.length-1].getFinderPattern().getResultPoints(),y=[f[0],f[1],g[0],g[1]];return new ce(u,null,null,y,be.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),s=n.getLeftChar(),l=n.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),f=2;for(let y=1;y<this.pairs.size();++y){let w=this.pairs.get(y);u+=w.getLeftChar().getChecksumPortion(),f++;let E=w.getRightChar();E!=null&&(u+=E.getChecksumPortion(),f++)}return u%=211,211*(f-4)+u==s.getValue()}static getNextSecondBar(n,s){let l;return n.get(s)?(l=n.getNextUnset(s),l=n.getNextSet(l)):(l=n.getNextSet(s),l=n.getNextUnset(l)),l}retrieveNextPair(n,s,l){let u=s.length%2==0;this.startFromEven&&(u=!u);let f,g=!0,y=-1;do this.findNextPair(n,s,y),f=this.parseFoundFinderPattern(n,l,u),f==null?y=ve.getNextSecondBar(n,this.startEnd[0]):g=!1;while(g);let w=this.decodeDataCharacter(n,f,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new ne;let E;try{E=this.decodeDataCharacter(n,f,u,!1)}catch(_){E=null,this.verbose&&console.log(_)}return new lr(w,E,f,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=n.getSize(),g;l>=0?g=l:this.isEmptyPair(s)?g=0:g=s[s.length-1].getFinderPattern().getStartEnd()[1];let y=s.length%2!=0;this.startFromEven&&(y=!y);let w=!1;for(;g<f&&(w=!n.get(g),!!w);)g++;let E=0,_=g;for(let N=g;N<f;N++)if(n.get(N)!=w)u[E]++;else{if(E==3){if(y&&ve.reverseCounters(u),ve.isFinderPattern(u)){this.startEnd[0]=_,this.startEnd[1]=N;return}y&&ve.reverseCounters(u),_+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,E--}else E++;u[E]=1,w=!w}throw new ne}static reverseCounters(n){let s=n.length;for(let l=0;l<s/2;++l){let u=n[l];n[l]=n[s-l-1],n[s-l-1]=u}}parseFoundFinderPattern(n,s,l){let u,f,g;if(l){let E=this.startEnd[0]-1;for(;E>=0&&!n.get(E);)E--;E++,u=this.startEnd[0]-E,f=E,g=this.startEnd[1]}else f=this.startEnd[0],g=n.getNextUnset(this.startEnd[1]+1),u=g-this.startEnd[1];let y=this.getDecodeFinderCounters();q.arraycopy(y,0,y,1,y.length-1),y[0]=u;let w;try{w=this.parseFinderValue(y,ve.FINDER_PATTERNS)}catch{return null}return new Ti(w,[f,g],f,g,s)}decodeDataCharacter(n,s,l,u){let f=this.getDataCharacterCounters();for(let Ut=0;Ut<f.length;Ut++)f[Ut]=0;if(u)ve.recordPatternInReverse(n,s.getStartEnd()[0],f);else{ve.recordPattern(n,s.getStartEnd()[1],f);for(let Ut=0,zn=f.length-1;Ut<zn;Ut++,zn--){let fr=f[Ut];f[Ut]=f[zn],f[zn]=fr}}let g=17,y=mt.sum(new Int32Array(f))/g,w=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(y-w)/w>.3)throw new ne;let E=this.getOddCounts(),_=this.getEvenCounts(),N=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let Ut=0;Ut<f.length;Ut++){let zn=1*f[Ut]/y,fr=zn+.5;if(fr<1){if(zn<.3)throw new ne;fr=1}else if(fr>8){if(zn>8.7)throw new ne;fr=8}let Oa=Ut/2;(Ut&1)==0?(E[Oa]=fr,N[Oa]=zn-fr):(_[Oa]=fr,I[Oa]=zn-fr)}this.adjustOddEvenCounts(g);let L=4*s.getValue()+(l?0:2)+(u?0:1)-1,F=0,V=0;for(let Ut=E.length-1;Ut>=0;Ut--){if(ve.isNotA1left(s,l,u)){let zn=ve.WEIGHTS[L][2*Ut];V+=E[Ut]*zn}F+=E[Ut]}let X=0;for(let Ut=_.length-1;Ut>=0;Ut--)if(ve.isNotA1left(s,l,u)){let zn=ve.WEIGHTS[L][2*Ut+1];X+=_[Ut]*zn}let ie=V+X;if((F&1)!=0||F>13||F<4)throw new ne;let _e=(13-F)/2,Se=ve.SYMBOL_WIDEST[_e],Ee=9-Se,ht=Yr.getRSSvalue(E,Se,!0),at=Yr.getRSSvalue(_,Ee,!1),xn=ve.EVEN_TOTAL_SUBSET[_e],wr=ve.GSUM[_e],Zn=ht*xn+at+wr;return new Ci(Zn,ie)}static isNotA1left(n,s,l){return!(n.getValue()==0&&s&&l)}adjustOddEvenCounts(n){let s=mt.sum(new Int32Array(this.getOddCounts())),l=mt.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1;s>13?f=!0:s<4&&(u=!0);let g=!1,y=!1;l>13?y=!0:l<4&&(g=!0);let w=s+l-n,E=(s&1)==1,_=(l&1)==0;if(w==1)if(E){if(_)throw new ne;f=!0}else{if(!_)throw new ne;y=!0}else if(w==-1)if(E){if(_)throw new ne;u=!0}else{if(!_)throw new ne;g=!0}else if(w==0){if(E){if(!_)throw new ne;s<l?(u=!0,y=!0):(f=!0,g=!0)}else if(_)throw new ne}else throw new ne;if(u){if(f)throw new ne;ve.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&ve.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new ne;ve.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&ve.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ve.SYMBOL_WIDEST=[7,5,4,3,1],ve.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ve.GSUM=[0,348,1388,2948,3988],ve.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ve.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ve.FINDER_PAT_A=0,ve.FINDER_PAT_B=1,ve.FINDER_PAT_C=2,ve.FINDER_PAT_D=3,ve.FINDER_PAT_E=4,ve.FINDER_PAT_F=5,ve.FINDER_PATTERN_SEQUENCES=[[ve.FINDER_PAT_A,ve.FINDER_PAT_A],[ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B],[ve.FINDER_PAT_A,ve.FINDER_PAT_C,ve.FINDER_PAT_B,ve.FINDER_PAT_D],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_C],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_D,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_D],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_E],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F]],ve.MAX_PAIRS=11;class Cc extends Ci{constructor(n,s,l){super(n,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Bt extends jn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,s,l){const u=this.decodePair(s,!1,n,l);Bt.addOrTally(this.possibleLeftPairs,u),s.reverse();let f=this.decodePair(s,!0,n,l);Bt.addOrTally(this.possibleRightPairs,f),s.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&Bt.checkChecksum(g,y))return Bt.constructResult(g,y)}throw new ne}static addOrTally(n,s){if(s==null)return;let l=!1;for(let u of n)if(u.getValue()===s.getValue()){u.incrementCount(),l=!0;break}l||n.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,s){let l=4537077*n.getValue()+s.getValue(),u=new String(l).toString(),f=new qe;for(let E=13-u.length;E>0;E--)f.append("0");f.append(u);let g=0;for(let E=0;E<13;E++){let _=f.charAt(E).charCodeAt(0)-48;g+=(E&1)===0?3*_:_}g=10-g%10,g===10&&(g=0),f.append(g.toString());let y=n.getFinderPattern().getResultPoints(),w=s.getFinderPattern().getResultPoints();return new ce(f.toString(),null,0,[y[0],y[1],w[0],w[1]],be.RSS_14,new Date().getTime())}static checkChecksum(n,s){let l=(n.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*n.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(n,s,l,u){try{let f=this.findFinderPattern(n,s),g=this.parseFoundFinderPattern(n,l,s,f),y=u==null?null:u.get(Ae.NEED_RESULT_POINT_CALLBACK);if(y!=null){let _=(f[0]+f[1])/2;s&&(_=n.getSize()-1-_),y.foundPossibleResultPoint(new Me(_,l))}let w=this.decodeDataCharacter(n,g,!0),E=this.decodeDataCharacter(n,g,!1);return new Cc(1597*w.getValue()+E.getValue(),w.getChecksumPortion()+4*E.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(n,s,l){let u=this.getDataCharacterCounters();for(let X=0;X<u.length;X++)u[X]=0;if(l)tn.recordPatternInReverse(n,s.getStartEnd()[0],u);else{tn.recordPattern(n,s.getStartEnd()[1]+1,u);for(let X=0,ie=u.length-1;X<ie;X++,ie--){let _e=u[X];u[X]=u[ie],u[ie]=_e}}let f=l?16:15,g=mt.sum(new Int32Array(u))/f,y=this.getOddCounts(),w=this.getEvenCounts(),E=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors();for(let X=0;X<u.length;X++){let ie=u[X]/g,_e=Math.floor(ie+.5);_e<1?_e=1:_e>8&&(_e=8);let Se=Math.floor(X/2);(X&1)===0?(y[Se]=_e,E[Se]=ie-_e):(w[Se]=_e,_[Se]=ie-_e)}this.adjustOddEvenCounts(l,f);let N=0,I=0;for(let X=y.length-1;X>=0;X--)I*=9,I+=y[X],N+=y[X];let L=0,F=0;for(let X=w.length-1;X>=0;X--)L*=9,L+=w[X],F+=w[X];let V=I+3*L;if(l){if((N&1)!==0||N>12||N<4)throw new ne;let X=(12-N)/2,ie=Bt.OUTSIDE_ODD_WIDEST[X],_e=9-ie,Se=Yr.getRSSvalue(y,ie,!1),Ee=Yr.getRSSvalue(w,_e,!0),ht=Bt.OUTSIDE_EVEN_TOTAL_SUBSET[X],at=Bt.OUTSIDE_GSUM[X];return new Ci(Se*ht+Ee+at,V)}else{if((F&1)!==0||F>10||F<4)throw new ne;let X=(10-F)/2,ie=Bt.INSIDE_ODD_WIDEST[X],_e=9-ie,Se=Yr.getRSSvalue(y,ie,!0),Ee=Yr.getRSSvalue(w,_e,!1),ht=Bt.INSIDE_ODD_TOTAL_SUBSET[X],at=Bt.INSIDE_GSUM[X];return new Ci(Ee*ht+Se+at,V)}}findFinderPattern(n,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=n.getSize(),f=!1,g=0;for(;g<u&&(f=!n.get(g),s!==f);)g++;let y=0,w=g;for(let E=g;E<u;E++)if(n.get(E)!==f)l[y]++;else{if(y===3){if(jn.isFinderPattern(l))return[w,E];w+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,f=!f}throw new ne}parseFoundFinderPattern(n,s,l,u){let f=n.get(u[0]),g=u[0]-1;for(;g>=0&&f!==n.get(g);)g--;g++;const y=u[0]-g,w=this.getDecodeFinderCounters(),E=new Int32Array(w.length);q.arraycopy(w,0,E,1,w.length-1),E[0]=y;const _=this.parseFinderValue(E,Bt.FINDER_PATTERNS);let N=g,I=u[1];return l&&(N=n.getSize()-1-N,I=n.getSize()-1-I),new Ti(_,[g,u[1]],N,I,s)}adjustOddEvenCounts(n,s){let l=mt.sum(new Int32Array(this.getOddCounts())),u=mt.sum(new Int32Array(this.getEvenCounts())),f=!1,g=!1,y=!1,w=!1;n?(l>12?g=!0:l<4&&(f=!0),u>12?w=!0:u<4&&(y=!0)):(l>11?g=!0:l<5&&(f=!0),u>10?w=!0:u<4&&(y=!0));let E=l+u-s,_=(l&1)===(n?1:0),N=(u&1)===1;if(E===1)if(_){if(N)throw new ne;g=!0}else{if(!N)throw new ne;w=!0}else if(E===-1)if(_){if(N)throw new ne;f=!0}else{if(!N)throw new ne;y=!0}else if(E===0){if(_){if(!N)throw new ne;l<u?(f=!0,w=!0):(g=!0,y=!0)}else if(N)throw new ne}else throw new ne;if(f){if(g)throw new ne;jn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&jn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(w)throw new ne;jn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&jn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Bt.OUTSIDE_GSUM=[0,161,961,2015,2715],Bt.INSIDE_GSUM=[0,336,1036,1516],Bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Bt.INSIDE_ODD_WIDEST=[2,4,6,8],Bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Nr extends tn{constructor(n,s){super(),this.readers=[],this.verbose=s===!0;const l=n?n.get(Ae.POSSIBLE_FORMATS):null,u=n&&n.get(Ae.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(be.EAN_13)||l.includes(be.UPC_A)||l.includes(be.EAN_8)||l.includes(be.UPC_E))&&this.readers.push(new ol(n)),l.includes(be.CODE_39)&&this.readers.push(new qt(u)),l.includes(be.CODE_128)&&this.readers.push(new Ce),l.includes(be.ITF)&&this.readers.push(new lt),l.includes(be.RSS_14)&&this.readers.push(new Bt),l.includes(be.RSS_EXPANDED)&&this.readers.push(new ve(this.verbose))):(this.readers.push(new ol(n)),this.readers.push(new qt),this.readers.push(new ol(n)),this.readers.push(new Ce),this.readers.push(new lt),this.readers.push(new Bt),this.readers.push(new ve(this.verbose)))}decodeRow(n,s,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(n,s,l)}catch{}throw new ne}reset(){this.readers.forEach(n=>n.reset())}}class kf extends Z{constructor(n=500,s){super(new Nr(s),n,s)}}class _t{constructor(n,s,l){this.ecCodewords=n,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class At{constructor(n,s){this.count=n,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class yt{constructor(n,s,l,u,f,g){this.versionNumber=n,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=f,this.ecBlocks=g;let y=0;const w=g.getECCodewords(),E=g.getECBlocks();for(let _ of E)y+=_.getCount()*(_.getDataCodewords()+w);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,s){if((n&1)!==0||(s&1)!==0)throw new J;for(let l of yt.VERSIONS)if(l.symbolSizeRows===n&&l.symbolSizeColumns===s)return l;throw new J}toString(){return""+this.versionNumber}static buildVersions(){return[new yt(1,10,10,8,8,new _t(5,new At(1,3))),new yt(2,12,12,10,10,new _t(7,new At(1,5))),new yt(3,14,14,12,12,new _t(10,new At(1,8))),new yt(4,16,16,14,14,new _t(12,new At(1,12))),new yt(5,18,18,16,16,new _t(14,new At(1,18))),new yt(6,20,20,18,18,new _t(18,new At(1,22))),new yt(7,22,22,20,20,new _t(20,new At(1,30))),new yt(8,24,24,22,22,new _t(24,new At(1,36))),new yt(9,26,26,24,24,new _t(28,new At(1,44))),new yt(10,32,32,14,14,new _t(36,new At(1,62))),new yt(11,36,36,16,16,new _t(42,new At(1,86))),new yt(12,40,40,18,18,new _t(48,new At(1,114))),new yt(13,44,44,20,20,new _t(56,new At(1,144))),new yt(14,48,48,22,22,new _t(68,new At(1,174))),new yt(15,52,52,24,24,new _t(42,new At(2,102))),new yt(16,64,64,14,14,new _t(56,new At(2,140))),new yt(17,72,72,16,16,new _t(36,new At(4,92))),new yt(18,80,80,18,18,new _t(48,new At(4,114))),new yt(19,88,88,20,20,new _t(56,new At(4,144))),new yt(20,96,96,22,22,new _t(68,new At(4,174))),new yt(21,104,104,24,24,new _t(56,new At(6,136))),new yt(22,120,120,18,18,new _t(68,new At(6,175))),new yt(23,132,132,20,20,new _t(62,new At(8,163))),new yt(24,144,144,22,22,new _t(62,new At(8,156),new At(2,155))),new yt(25,8,18,6,16,new _t(7,new At(1,5))),new yt(26,8,32,6,14,new _t(11,new At(1,10))),new yt(27,12,26,10,24,new _t(14,new At(1,16))),new yt(28,12,36,10,16,new _t(18,new At(1,22))),new yt(29,16,36,14,16,new _t(24,new At(1,32))),new yt(30,16,48,14,22,new _t(28,new At(1,49)))]}}yt.VERSIONS=yt.buildVersions();class pa{constructor(n){const s=n.getHeight();if(s<8||s>144||(s&1)!==0)throw new J;this.version=pa.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new $e(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const s=n.getHeight(),l=n.getWidth();return yt.getVersionForDimensions(s,l)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,u=0;const f=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let y=!1,w=!1,E=!1,_=!1;do if(l===f&&u===0&&!y)n[s++]=this.readCorner1(f,g)&255,l-=2,u+=2,y=!0;else if(l===f-2&&u===0&&(g&3)!==0&&!w)n[s++]=this.readCorner2(f,g)&255,l-=2,u+=2,w=!0;else if(l===f+4&&u===2&&(g&7)===0&&!E)n[s++]=this.readCorner3(f,g)&255,l-=2,u+=2,E=!0;else if(l===f-2&&u===0&&(g&7)===4&&!_)n[s++]=this.readCorner4(f,g)&255,l-=2,u+=2,_=!0;else{do l<f&&u>=0&&!this.readMappingMatrix.get(u,l)&&(n[s++]=this.readUtah(l,u,f,g)&255),l-=2,u+=2;while(l>=0&&u<g);l+=1,u+=3;do l>=0&&u<g&&!this.readMappingMatrix.get(u,l)&&(n[s++]=this.readUtah(l,u,f,g)&255),l+=2,u-=2;while(l<f&&u>=0);l+=3,u+=1}while(l<f||u<g);if(s!==this.version.getTotalCodewords())throw new J;return n}readModule(n,s,l,u){return n<0&&(n+=l,s+=4-(l+4&7)),s<0&&(s+=u,n+=4-(u+4&7)),this.readMappingMatrix.set(s,n),this.mappingBitMatrix.get(s,n)}readUtah(n,s,l,u){let f=0;return this.readModule(n-2,s-2,l,u)&&(f|=1),f<<=1,this.readModule(n-2,s-1,l,u)&&(f|=1),f<<=1,this.readModule(n-1,s-2,l,u)&&(f|=1),f<<=1,this.readModule(n-1,s-1,l,u)&&(f|=1),f<<=1,this.readModule(n-1,s,l,u)&&(f|=1),f<<=1,this.readModule(n,s-2,l,u)&&(f|=1),f<<=1,this.readModule(n,s-1,l,u)&&(f|=1),f<<=1,this.readModule(n,s,l,u)&&(f|=1),f}readCorner1(n,s){let l=0;return this.readModule(n-1,0,n,s)&&(l|=1),l<<=1,this.readModule(n-1,1,n,s)&&(l|=1),l<<=1,this.readModule(n-1,2,n,s)&&(l|=1),l<<=1,this.readModule(0,s-2,n,s)&&(l|=1),l<<=1,this.readModule(0,s-1,n,s)&&(l|=1),l<<=1,this.readModule(1,s-1,n,s)&&(l|=1),l<<=1,this.readModule(2,s-1,n,s)&&(l|=1),l<<=1,this.readModule(3,s-1,n,s)&&(l|=1),l}readCorner2(n,s){let l=0;return this.readModule(n-3,0,n,s)&&(l|=1),l<<=1,this.readModule(n-2,0,n,s)&&(l|=1),l<<=1,this.readModule(n-1,0,n,s)&&(l|=1),l<<=1,this.readModule(0,s-4,n,s)&&(l|=1),l<<=1,this.readModule(0,s-3,n,s)&&(l|=1),l<<=1,this.readModule(0,s-2,n,s)&&(l|=1),l<<=1,this.readModule(0,s-1,n,s)&&(l|=1),l<<=1,this.readModule(1,s-1,n,s)&&(l|=1),l}readCorner3(n,s){let l=0;return this.readModule(n-1,0,n,s)&&(l|=1),l<<=1,this.readModule(n-1,s-1,n,s)&&(l|=1),l<<=1,this.readModule(0,s-3,n,s)&&(l|=1),l<<=1,this.readModule(0,s-2,n,s)&&(l|=1),l<<=1,this.readModule(0,s-1,n,s)&&(l|=1),l<<=1,this.readModule(1,s-3,n,s)&&(l|=1),l<<=1,this.readModule(1,s-2,n,s)&&(l|=1),l<<=1,this.readModule(1,s-1,n,s)&&(l|=1),l}readCorner4(n,s){let l=0;return this.readModule(n-3,0,n,s)&&(l|=1),l<<=1,this.readModule(n-2,0,n,s)&&(l|=1),l<<=1,this.readModule(n-1,0,n,s)&&(l|=1),l<<=1,this.readModule(0,s-2,n,s)&&(l|=1),l<<=1,this.readModule(0,s-1,n,s)&&(l|=1),l<<=1,this.readModule(1,s-1,n,s)&&(l|=1),l<<=1,this.readModule(2,s-1,n,s)&&(l|=1),l<<=1,this.readModule(3,s-1,n,s)&&(l|=1),l}extractDataRegion(n){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(n.getHeight()!==s)throw new R("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),g=s/u|0,y=l/f|0,w=g*u,E=y*f,_=new $e(E,w);for(let N=0;N<g;++N){const I=N*u;for(let L=0;L<y;++L){const F=L*f;for(let V=0;V<u;++V){const X=N*(u+2)+1+V,ie=I+V;for(let _e=0;_e<f;++_e){const Se=L*(f+2)+1+_e;if(n.get(Se,X)){const Ee=F+_e;_.set(Ee,ie)}}}}}return _}}class xa{constructor(n,s){this.numDataCodewords=n,this.codewords=s}static getDataBlocks(n,s){const l=s.getECBlocks();let u=0;const f=l.getECBlocks();for(let V of f)u+=V.getCount();const g=new Array(u);let y=0;for(let V of f)for(let X=0;X<V.getCount();X++){const ie=V.getDataCodewords(),_e=l.getECCodewords()+ie;g[y++]=new xa(ie,new Uint8Array(_e))}const E=g[0].codewords.length-l.getECCodewords(),_=E-1;let N=0;for(let V=0;V<_;V++)for(let X=0;X<y;X++)g[X].codewords[V]=n[N++];const I=s.getVersionNumber()===24,L=I?8:y;for(let V=0;V<L;V++)g[V].codewords[E-1]=n[N++];const F=g[0].codewords.length;for(let V=E;V<F;V++)for(let X=0;X<y;X++){const ie=I?(X+8)%y:X,_e=I&&ie>7?V-1:V;g[ie].codewords[_e]=n[N++]}if(N!==n.length)throw new R;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Rr{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new R(""+n);let s=0,l=this.bitOffset,u=this.byteOffset;const f=this.bytes;if(l>0){const g=8-l,y=n<g?n:g,w=g-y,E=255>>8-y<<w;s=(f[u]&E)>>w,n-=y,l+=y,l===8&&(l=0,u++)}if(n>0){for(;n>=8;)s=s<<8|f[u]&255,u++,n-=8;if(n>0){const g=8-n,y=255>>g<<g;s=s<<n|(f[u]&y)>>g,l+=n}}return this.bitOffset=l,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Tt;(function(O){O[O.PAD_ENCODE=0]="PAD_ENCODE",O[O.ASCII_ENCODE=1]="ASCII_ENCODE",O[O.C40_ENCODE=2]="C40_ENCODE",O[O.TEXT_ENCODE=3]="TEXT_ENCODE",O[O.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",O[O.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",O[O.BASE256_ENCODE=6]="BASE256_ENCODE"})(Tt||(Tt={}));class ui{static decode(n){const s=new Rr(n),l=new qe,u=new qe,f=new Array;let g=Tt.ASCII_ENCODE;do if(g===Tt.ASCII_ENCODE)g=this.decodeAsciiSegment(s,l,u);else{switch(g){case Tt.C40_ENCODE:this.decodeC40Segment(s,l);break;case Tt.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case Tt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case Tt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case Tt.BASE256_ENCODE:this.decodeBase256Segment(s,l,f);break;default:throw new J}g=Tt.ASCII_ENCODE}while(g!==Tt.PAD_ENCODE&&s.available()>0);return u.length()>0&&l.append(u.toString()),new Re(n,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(n,s,l){let u=!1;do{let f=n.readBits(8);if(f===0)throw new J;if(f<=128)return u&&(f+=128),s.append(String.fromCharCode(f-1)),Tt.ASCII_ENCODE;if(f===129)return Tt.PAD_ENCODE;if(f<=229){const g=f-130;g<10&&s.append("0"),s.append(""+g)}else switch(f){case 230:return Tt.C40_ENCODE;case 231:return Tt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),l.insert(0,"");break;case 237:s.append("[)>06"),l.insert(0,"");break;case 238:return Tt.ANSIX12_ENCODE;case 239:return Tt.TEXT_ENCODE;case 240:return Tt.EDIFACT_ENCODE;case 241:break;default:if(f!==254||n.available()!==0)throw new J;break}}while(n.available()>0);return Tt.ASCII_ENCODE}static decodeC40Segment(n,s){let l=!1;const u=[];let f=0;do{if(n.available()===8)return;const g=n.readBits(8);if(g===254)return;this.parseTwoBytes(g,n.readBits(8),u);for(let y=0;y<3;y++){const w=u[y];switch(f){case 0:if(w<3)f=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[w];l?(s.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):s.append(E)}else throw new J;break;case 1:l?(s.append(String.fromCharCode(w+128)),l=!1):s.append(String.fromCharCode(w)),f=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[w];l?(s.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):s.append(E)}else switch(w){case 27:s.append("");break;case 30:l=!0;break;default:throw new J}f=0;break;case 3:l?(s.append(String.fromCharCode(w+224)),l=!1):s.append(String.fromCharCode(w+96)),f=0;break;default:throw new J}}}while(n.available()>0)}static decodeTextSegment(n,s){let l=!1,u=[],f=0;do{if(n.available()===8)return;const g=n.readBits(8);if(g===254)return;this.parseTwoBytes(g,n.readBits(8),u);for(let y=0;y<3;y++){const w=u[y];switch(f){case 0:if(w<3)f=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[w];l?(s.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):s.append(E)}else throw new J;break;case 1:l?(s.append(String.fromCharCode(w+128)),l=!1):s.append(String.fromCharCode(w)),f=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[w];l?(s.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):s.append(E)}else switch(w){case 27:s.append("");break;case 30:l=!0;break;default:throw new J}f=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[w];l?(s.append(String.fromCharCode(E.charCodeAt(0)+128)),l=!1):s.append(E),f=0}else throw new J;break;default:throw new J}}}while(n.available()>0)}static decodeAnsiX12Segment(n,s){const l=[];do{if(n.available()===8)return;const u=n.readBits(8);if(u===254)return;this.parseTwoBytes(u,n.readBits(8),l);for(let f=0;f<3;f++){const g=l[f];switch(g){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(g<14)s.append(String.fromCharCode(g+44));else if(g<40)s.append(String.fromCharCode(g+51));else throw new J;break}}}while(n.available()>0)}static parseTwoBytes(n,s,l){let u=(n<<8)+s-1,f=Math.floor(u/1600);l[0]=f,u-=f*1600,f=Math.floor(u/40),l[1]=f,l[2]=u-f*40}static decodeEdifactSegment(n,s){do{if(n.available()<=16)return;for(let l=0;l<4;l++){let u=n.readBits(6);if(u===31){const f=8-n.getBitOffset();f!==8&&n.readBits(f);return}(u&32)===0&&(u|=64),s.append(String.fromCharCode(u))}}while(n.available()>0)}static decodeBase256Segment(n,s,l){let u=1+n.getByteOffset();const f=this.unrandomize255State(n.readBits(8),u++);let g;if(f===0?g=n.available()/8|0:f<250?g=f:g=250*(f-249)+this.unrandomize255State(n.readBits(8),u++),g<0)throw new J;const y=new Uint8Array(g);for(let w=0;w<g;w++){if(n.available()<8)throw new J;y[w]=this.unrandomize255State(n.readBits(8),u++)}l.push(y);try{s.append(ft.decode(y,Oe.ISO88591))}catch(w){throw new ar("Platform does not support required encoding: "+w.message)}}static unrandomize255State(n,s){const l=149*s%255+1,u=n-l;return u>=0?u:u+256}}ui.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ui.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ui.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ui.TEXT_SHIFT2_SET_CHARS=ui.C40_SHIFT2_SET_CHARS,ui.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Df{constructor(){this.rsDecoder=new Cr(tt.DATA_MATRIX_FIELD_256)}decode(n){const s=new pa(n),l=s.getVersion(),u=s.readCodewords(),f=xa.getDataBlocks(u,l);let g=0;for(let E of f)g+=E.getNumDataCodewords();const y=new Uint8Array(g),w=f.length;for(let E=0;E<w;E++){const _=f[E],N=_.getCodewords(),I=_.getNumDataCodewords();this.correctErrors(N,I);for(let L=0;L<I;L++)y[L*w+E]=N[L]}return ui.decode(y)}correctErrors(n,s){const l=new Int32Array(n);try{this.rsDecoder.decode(l,n.length-s)}catch{throw new j}for(let u=0;u<s;u++)n[u]=l[u]}}class an{constructor(n){this.image=n,this.rectangleDetector=new dn(this.image)}detect(){const n=this.rectangleDetector.detect();let s=this.detectSolid1(n);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new ne;s=this.shiftToModuleCenter(s);const l=s[0],u=s[1],f=s[2],g=s[3];let y=this.transitionsBetween(l,g)+1,w=this.transitionsBetween(f,g)+1;(y&1)===1&&(y+=1),(w&1)===1&&(w+=1),4*y<7*w&&4*w<7*y&&(y=w=Math.max(y,w));let E=an.sampleGrid(this.image,l,u,f,g,y,w);return new Hs(E,[l,u,f,g])}static shiftPoint(n,s,l){let u=(s.getX()-n.getX())/(l+1),f=(s.getY()-n.getY())/(l+1);return new Me(n.getX()+u,n.getY()+f)}static moveAway(n,s,l){let u=n.getX(),f=n.getY();return u<s?u-=1:u+=1,f<l?f-=1:f+=1,new Me(u,f)}detectSolid1(n){let s=n[0],l=n[1],u=n[3],f=n[2],g=this.transitionsBetween(s,l),y=this.transitionsBetween(l,u),w=this.transitionsBetween(u,f),E=this.transitionsBetween(f,s),_=g,N=[f,s,l,u];return _>y&&(_=y,N[0]=s,N[1]=l,N[2]=u,N[3]=f),_>w&&(_=w,N[0]=l,N[1]=u,N[2]=f,N[3]=s),_>E&&(N[0]=u,N[1]=f,N[2]=s,N[3]=l),N}detectSolid2(n){let s=n[0],l=n[1],u=n[2],f=n[3],g=this.transitionsBetween(s,f),y=an.shiftPoint(l,u,(g+1)*4),w=an.shiftPoint(u,l,(g+1)*4),E=this.transitionsBetween(y,s),_=this.transitionsBetween(w,f);return E<_?(n[0]=s,n[1]=l,n[2]=u,n[3]=f):(n[0]=l,n[1]=u,n[2]=f,n[3]=s),n}correctTopRight(n){let s=n[0],l=n[1],u=n[2],f=n[3],g=this.transitionsBetween(s,f),y=this.transitionsBetween(l,f),w=an.shiftPoint(s,l,(y+1)*4),E=an.shiftPoint(u,l,(g+1)*4);g=this.transitionsBetween(w,f),y=this.transitionsBetween(E,f);let _=new Me(f.getX()+(u.getX()-l.getX())/(g+1),f.getY()+(u.getY()-l.getY())/(g+1)),N=new Me(f.getX()+(s.getX()-l.getX())/(y+1),f.getY()+(s.getY()-l.getY())/(y+1));if(!this.isValid(_))return this.isValid(N)?N:null;if(!this.isValid(N))return _;let I=this.transitionsBetween(w,_)+this.transitionsBetween(E,_),L=this.transitionsBetween(w,N)+this.transitionsBetween(E,N);return I>L?_:N}shiftToModuleCenter(n){let s=n[0],l=n[1],u=n[2],f=n[3],g=this.transitionsBetween(s,f)+1,y=this.transitionsBetween(u,f)+1,w=an.shiftPoint(s,l,y*4),E=an.shiftPoint(u,l,g*4);g=this.transitionsBetween(w,f)+1,y=this.transitionsBetween(E,f)+1,(g&1)===1&&(g+=1),(y&1)===1&&(y+=1);let _=(s.getX()+l.getX()+u.getX()+f.getX())/4,N=(s.getY()+l.getY()+u.getY()+f.getY())/4;s=an.moveAway(s,_,N),l=an.moveAway(l,_,N),u=an.moveAway(u,_,N),f=an.moveAway(f,_,N);let I,L;return w=an.shiftPoint(s,l,y*4),w=an.shiftPoint(w,f,g*4),I=an.shiftPoint(l,s,y*4),I=an.shiftPoint(I,u,g*4),E=an.shiftPoint(u,f,y*4),E=an.shiftPoint(E,l,g*4),L=an.shiftPoint(f,u,y*4),L=an.shiftPoint(L,s,g*4),[w,I,E,L]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,s,l,u,f,g,y){return Tr.getInstance().sampleGrid(n,g,y,.5,.5,g-.5,.5,g-.5,y-.5,.5,y-.5,s.getX(),s.getY(),f.getX(),f.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(n,s){let l=Math.trunc(n.getX()),u=Math.trunc(n.getY()),f=Math.trunc(s.getX()),g=Math.trunc(s.getY()),y=Math.abs(g-u)>Math.abs(f-l);if(y){let V=l;l=u,u=V,V=f,f=g,g=V}let w=Math.abs(f-l),E=Math.abs(g-u),_=-w/2,N=u<g?1:-1,I=l<f?1:-1,L=0,F=this.image.get(y?u:l,y?l:u);for(let V=l,X=u;V!==f;V+=I){let ie=this.image.get(y?X:V,y?V:X);if(ie!==F&&(L++,F=ie),_+=E,_>0){if(X===g)break;X+=N,_-=w}}return L}}class fi{constructor(){this.decoder=new Df}decode(n,s=null){let l,u;if(s!=null&&s.has(Ae.PURE_BARCODE)){const E=fi.extractPureBits(n.getBlackMatrix());l=this.decoder.decode(E),u=fi.NO_POINTS}else{const E=new an(n.getBlackMatrix()).detect();l=this.decoder.decode(E.getBits()),u=E.getPoints()}const f=l.getRawBytes(),g=new ce(l.getText(),f,8*f.length,u,be.DATA_MATRIX,q.currentTimeMillis()),y=l.getByteSegments();y!=null&&g.putMetadata(We.BYTE_SEGMENTS,y);const w=l.getECLevel();return w!=null&&g.putMetadata(We.ERROR_CORRECTION_LEVEL,w),g}reset(){}static extractPureBits(n){const s=n.getTopLeftOnBit(),l=n.getBottomRightOnBit();if(s==null||l==null)throw new ne;const u=this.moduleSize(s,n);let f=s[1];const g=l[1];let y=s[0];const E=(l[0]-y+1)/u,_=(g-f+1)/u;if(E<=0||_<=0)throw new ne;const N=u/2;f+=N,y+=N;const I=new $e(E,_);for(let L=0;L<_;L++){const F=f+L*u;for(let V=0;V<E;V++)n.get(y+V*u,F)&&I.set(V,L)}return I}static moduleSize(n,s){const l=s.getWidth();let u=n[0];const f=n[1];for(;u<l&&s.get(u,f);)u++;if(u===l)throw new ne;const g=u-n[0];if(g===0)throw new ne;return g}}fi.NO_POINTS=[];class Ys extends Z{constructor(n=500){super(new fi,n)}}var wa;(function(O){O[O.L=0]="L",O[O.M=1]="M",O[O.Q=2]="Q",O[O.H=3]="H"})(wa||(wa={}));class dt{constructor(n,s,l){this.value=n,this.stringValue=s,this.bits=l,dt.FOR_BITS.set(l,this),dt.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return dt.L;case"M":return dt.M;case"Q":return dt.Q;case"H":return dt.H;default:throw new T(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof dt))return!1;const s=n;return this.value===s.value}static forBits(n){if(n<0||n>=dt.FOR_BITS.size)throw new R;return dt.FOR_BITS.get(n)}}dt.FOR_BITS=new Map,dt.FOR_VALUE=new Map,dt.L=new dt(wa.L,"L",1),dt.M=new dt(wa.M,"M",0),dt.Q=new dt(wa.Q,"Q",3),dt.H=new dt(wa.H,"H",2);class Rn{constructor(n){this.errorCorrectionLevel=dt.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,s){return W.bitCount(n^s)}static decodeFormatInformation(n,s){const l=Rn.doDecodeFormatInformation(n,s);return l!==null?l:Rn.doDecodeFormatInformation(n^Rn.FORMAT_INFO_MASK_QR,s^Rn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,s){let l=Number.MAX_SAFE_INTEGER,u=0;for(const f of Rn.FORMAT_INFO_DECODE_LOOKUP){const g=f[0];if(g===n||g===s)return new Rn(f[1]);let y=Rn.numBitsDiffering(n,g);y<l&&(u=f[1],l=y),n!==s&&(y=Rn.numBitsDiffering(s,g),y<l&&(u=f[1],l=y))}return l<=3?new Rn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof Rn))return!1;const s=n;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Rn.FORMAT_INFO_MASK_QR=21522,Rn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class K{constructor(n,...s){this.ecCodewordsPerBlock=n,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const s=this.ecBlocks;for(const l of s)n+=l.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class M{constructor(n,s){this.count=n,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class je{constructor(n,s,...l){this.versionNumber=n,this.alignmentPatternCenters=s,this.ecBlocks=l;let u=0;const f=l[0].getECCodewordsPerBlock(),g=l[0].getECBlocks();for(const y of g)u+=y.getCount()*(y.getDataCodewords()+f);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new J;try{return this.getVersionForNumber((n-17)/4)}catch{throw new J}}static getVersionForNumber(n){if(n<1||n>40)throw new R;return je.VERSIONS[n-1]}static decodeVersionInformation(n){let s=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<je.VERSION_DECODE_INFO.length;u++){const f=je.VERSION_DECODE_INFO[u];if(f===n)return je.getVersionForNumber(u+7);const g=Rn.numBitsDiffering(n,f);g<s&&(l=u+7,s=g)}return s<=3?je.getVersionForNumber(l):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),s=new $e(n);s.setRegion(0,0,9,9),s.setRegion(n-8,0,8,9),s.setRegion(0,n-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const f=this.alignmentPatternCenters[u]-2;for(let g=0;g<l;g++)u===0&&(g===0||g===l-1)||u===l-1&&g===0||s.setRegion(this.alignmentPatternCenters[g]-2,f,5,5)}return s.setRegion(6,9,1,n-17),s.setRegion(9,6,n-17,1),this.versionNumber>6&&(s.setRegion(n-11,0,3,6),s.setRegion(0,n-11,6,3)),s}toString(){return""+this.versionNumber}}je.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),je.VERSIONS=[new je(1,new Int32Array(0),new K(7,new M(1,19)),new K(10,new M(1,16)),new K(13,new M(1,13)),new K(17,new M(1,9))),new je(2,Int32Array.from([6,18]),new K(10,new M(1,34)),new K(16,new M(1,28)),new K(22,new M(1,22)),new K(28,new M(1,16))),new je(3,Int32Array.from([6,22]),new K(15,new M(1,55)),new K(26,new M(1,44)),new K(18,new M(2,17)),new K(22,new M(2,13))),new je(4,Int32Array.from([6,26]),new K(20,new M(1,80)),new K(18,new M(2,32)),new K(26,new M(2,24)),new K(16,new M(4,9))),new je(5,Int32Array.from([6,30]),new K(26,new M(1,108)),new K(24,new M(2,43)),new K(18,new M(2,15),new M(2,16)),new K(22,new M(2,11),new M(2,12))),new je(6,Int32Array.from([6,34]),new K(18,new M(2,68)),new K(16,new M(4,27)),new K(24,new M(4,19)),new K(28,new M(4,15))),new je(7,Int32Array.from([6,22,38]),new K(20,new M(2,78)),new K(18,new M(4,31)),new K(18,new M(2,14),new M(4,15)),new K(26,new M(4,13),new M(1,14))),new je(8,Int32Array.from([6,24,42]),new K(24,new M(2,97)),new K(22,new M(2,38),new M(2,39)),new K(22,new M(4,18),new M(2,19)),new K(26,new M(4,14),new M(2,15))),new je(9,Int32Array.from([6,26,46]),new K(30,new M(2,116)),new K(22,new M(3,36),new M(2,37)),new K(20,new M(4,16),new M(4,17)),new K(24,new M(4,12),new M(4,13))),new je(10,Int32Array.from([6,28,50]),new K(18,new M(2,68),new M(2,69)),new K(26,new M(4,43),new M(1,44)),new K(24,new M(6,19),new M(2,20)),new K(28,new M(6,15),new M(2,16))),new je(11,Int32Array.from([6,30,54]),new K(20,new M(4,81)),new K(30,new M(1,50),new M(4,51)),new K(28,new M(4,22),new M(4,23)),new K(24,new M(3,12),new M(8,13))),new je(12,Int32Array.from([6,32,58]),new K(24,new M(2,92),new M(2,93)),new K(22,new M(6,36),new M(2,37)),new K(26,new M(4,20),new M(6,21)),new K(28,new M(7,14),new M(4,15))),new je(13,Int32Array.from([6,34,62]),new K(26,new M(4,107)),new K(22,new M(8,37),new M(1,38)),new K(24,new M(8,20),new M(4,21)),new K(22,new M(12,11),new M(4,12))),new je(14,Int32Array.from([6,26,46,66]),new K(30,new M(3,115),new M(1,116)),new K(24,new M(4,40),new M(5,41)),new K(20,new M(11,16),new M(5,17)),new K(24,new M(11,12),new M(5,13))),new je(15,Int32Array.from([6,26,48,70]),new K(22,new M(5,87),new M(1,88)),new K(24,new M(5,41),new M(5,42)),new K(30,new M(5,24),new M(7,25)),new K(24,new M(11,12),new M(7,13))),new je(16,Int32Array.from([6,26,50,74]),new K(24,new M(5,98),new M(1,99)),new K(28,new M(7,45),new M(3,46)),new K(24,new M(15,19),new M(2,20)),new K(30,new M(3,15),new M(13,16))),new je(17,Int32Array.from([6,30,54,78]),new K(28,new M(1,107),new M(5,108)),new K(28,new M(10,46),new M(1,47)),new K(28,new M(1,22),new M(15,23)),new K(28,new M(2,14),new M(17,15))),new je(18,Int32Array.from([6,30,56,82]),new K(30,new M(5,120),new M(1,121)),new K(26,new M(9,43),new M(4,44)),new K(28,new M(17,22),new M(1,23)),new K(28,new M(2,14),new M(19,15))),new je(19,Int32Array.from([6,30,58,86]),new K(28,new M(3,113),new M(4,114)),new K(26,new M(3,44),new M(11,45)),new K(26,new M(17,21),new M(4,22)),new K(26,new M(9,13),new M(16,14))),new je(20,Int32Array.from([6,34,62,90]),new K(28,new M(3,107),new M(5,108)),new K(26,new M(3,41),new M(13,42)),new K(30,new M(15,24),new M(5,25)),new K(28,new M(15,15),new M(10,16))),new je(21,Int32Array.from([6,28,50,72,94]),new K(28,new M(4,116),new M(4,117)),new K(26,new M(17,42)),new K(28,new M(17,22),new M(6,23)),new K(30,new M(19,16),new M(6,17))),new je(22,Int32Array.from([6,26,50,74,98]),new K(28,new M(2,111),new M(7,112)),new K(28,new M(17,46)),new K(30,new M(7,24),new M(16,25)),new K(24,new M(34,13))),new je(23,Int32Array.from([6,30,54,78,102]),new K(30,new M(4,121),new M(5,122)),new K(28,new M(4,47),new M(14,48)),new K(30,new M(11,24),new M(14,25)),new K(30,new M(16,15),new M(14,16))),new je(24,Int32Array.from([6,28,54,80,106]),new K(30,new M(6,117),new M(4,118)),new K(28,new M(6,45),new M(14,46)),new K(30,new M(11,24),new M(16,25)),new K(30,new M(30,16),new M(2,17))),new je(25,Int32Array.from([6,32,58,84,110]),new K(26,new M(8,106),new M(4,107)),new K(28,new M(8,47),new M(13,48)),new K(30,new M(7,24),new M(22,25)),new K(30,new M(22,15),new M(13,16))),new je(26,Int32Array.from([6,30,58,86,114]),new K(28,new M(10,114),new M(2,115)),new K(28,new M(19,46),new M(4,47)),new K(28,new M(28,22),new M(6,23)),new K(30,new M(33,16),new M(4,17))),new je(27,Int32Array.from([6,34,62,90,118]),new K(30,new M(8,122),new M(4,123)),new K(28,new M(22,45),new M(3,46)),new K(30,new M(8,23),new M(26,24)),new K(30,new M(12,15),new M(28,16))),new je(28,Int32Array.from([6,26,50,74,98,122]),new K(30,new M(3,117),new M(10,118)),new K(28,new M(3,45),new M(23,46)),new K(30,new M(4,24),new M(31,25)),new K(30,new M(11,15),new M(31,16))),new je(29,Int32Array.from([6,30,54,78,102,126]),new K(30,new M(7,116),new M(7,117)),new K(28,new M(21,45),new M(7,46)),new K(30,new M(1,23),new M(37,24)),new K(30,new M(19,15),new M(26,16))),new je(30,Int32Array.from([6,26,52,78,104,130]),new K(30,new M(5,115),new M(10,116)),new K(28,new M(19,47),new M(10,48)),new K(30,new M(15,24),new M(25,25)),new K(30,new M(23,15),new M(25,16))),new je(31,Int32Array.from([6,30,56,82,108,134]),new K(30,new M(13,115),new M(3,116)),new K(28,new M(2,46),new M(29,47)),new K(30,new M(42,24),new M(1,25)),new K(30,new M(23,15),new M(28,16))),new je(32,Int32Array.from([6,34,60,86,112,138]),new K(30,new M(17,115)),new K(28,new M(10,46),new M(23,47)),new K(30,new M(10,24),new M(35,25)),new K(30,new M(19,15),new M(35,16))),new je(33,Int32Array.from([6,30,58,86,114,142]),new K(30,new M(17,115),new M(1,116)),new K(28,new M(14,46),new M(21,47)),new K(30,new M(29,24),new M(19,25)),new K(30,new M(11,15),new M(46,16))),new je(34,Int32Array.from([6,34,62,90,118,146]),new K(30,new M(13,115),new M(6,116)),new K(28,new M(14,46),new M(23,47)),new K(30,new M(44,24),new M(7,25)),new K(30,new M(59,16),new M(1,17))),new je(35,Int32Array.from([6,30,54,78,102,126,150]),new K(30,new M(12,121),new M(7,122)),new K(28,new M(12,47),new M(26,48)),new K(30,new M(39,24),new M(14,25)),new K(30,new M(22,15),new M(41,16))),new je(36,Int32Array.from([6,24,50,76,102,128,154]),new K(30,new M(6,121),new M(14,122)),new K(28,new M(6,47),new M(34,48)),new K(30,new M(46,24),new M(10,25)),new K(30,new M(2,15),new M(64,16))),new je(37,Int32Array.from([6,28,54,80,106,132,158]),new K(30,new M(17,122),new M(4,123)),new K(28,new M(29,46),new M(14,47)),new K(30,new M(49,24),new M(10,25)),new K(30,new M(24,15),new M(46,16))),new je(38,Int32Array.from([6,32,58,84,110,136,162]),new K(30,new M(4,122),new M(18,123)),new K(28,new M(13,46),new M(32,47)),new K(30,new M(48,24),new M(14,25)),new K(30,new M(42,15),new M(32,16))),new je(39,Int32Array.from([6,26,54,82,110,138,166]),new K(30,new M(20,117),new M(4,118)),new K(28,new M(40,47),new M(7,48)),new K(30,new M(43,24),new M(22,25)),new K(30,new M(10,15),new M(67,16))),new je(40,Int32Array.from([6,30,58,86,114,142,170]),new K(30,new M(19,118),new M(6,119)),new K(28,new M(18,47),new M(31,48)),new K(30,new M(34,24),new M(34,25)),new K(30,new M(20,15),new M(61,16)))];var Cn;(function(O){O[O.DATA_MASK_000=0]="DATA_MASK_000",O[O.DATA_MASK_001=1]="DATA_MASK_001",O[O.DATA_MASK_010=2]="DATA_MASK_010",O[O.DATA_MASK_011=3]="DATA_MASK_011",O[O.DATA_MASK_100=4]="DATA_MASK_100",O[O.DATA_MASK_101=5]="DATA_MASK_101",O[O.DATA_MASK_110=6]="DATA_MASK_110",O[O.DATA_MASK_111=7]="DATA_MASK_111"})(Cn||(Cn={}));class cr{constructor(n,s){this.value=n,this.isMasked=s}unmaskBitMatrix(n,s){for(let l=0;l<s;l++)for(let u=0;u<s;u++)this.isMasked(l,u)&&n.flip(u,l)}}cr.values=new Map([[Cn.DATA_MASK_000,new cr(Cn.DATA_MASK_000,(O,n)=>(O+n&1)===0)],[Cn.DATA_MASK_001,new cr(Cn.DATA_MASK_001,(O,n)=>(O&1)===0)],[Cn.DATA_MASK_010,new cr(Cn.DATA_MASK_010,(O,n)=>n%3===0)],[Cn.DATA_MASK_011,new cr(Cn.DATA_MASK_011,(O,n)=>(O+n)%3===0)],[Cn.DATA_MASK_100,new cr(Cn.DATA_MASK_100,(O,n)=>(Math.floor(O/2)+Math.floor(n/3)&1)===0)],[Cn.DATA_MASK_101,new cr(Cn.DATA_MASK_101,(O,n)=>O*n%6===0)],[Cn.DATA_MASK_110,new cr(Cn.DATA_MASK_110,(O,n)=>O*n%6<3)],[Cn.DATA_MASK_111,new cr(Cn.DATA_MASK_111,(O,n)=>(O+n+O*n%3&1)===0)]]);class ba{constructor(n){const s=n.getHeight();if(s<21||(s&3)!==1)throw new J;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let f=0;f<6;f++)n=this.copyBit(f,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let f=5;f>=0;f--)n=this.copyBit(8,f,n);const s=this.bitMatrix.getHeight();let l=0;const u=s-7;for(let f=s-1;f>=u;f--)l=this.copyBit(8,f,l);for(let f=s-8;f<s;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=Rn.decodeFormatInformation(n,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new J}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),s=Math.floor((n-17)/4);if(s<=6)return je.getVersionForNumber(s);let l=0;const u=n-11;for(let g=5;g>=0;g--)for(let y=n-9;y>=u;y--)l=this.copyBit(y,g,l);let f=je.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===n)return this.parsedVersion=f,f;l=0;for(let g=5;g>=0;g--)for(let y=n-9;y>=u;y--)l=this.copyBit(g,y,l);if(f=je.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===n)return this.parsedVersion=f,f;throw new J}copyBit(n,s,l){return(this.isMirror?this.bitMatrix.get(s,n):this.bitMatrix.get(n,s))?l<<1|1:l<<1}readCodewords(){const n=this.readFormatInformation(),s=this.readVersion(),l=cr.values.get(n.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const f=s.buildFunctionPattern();let g=!0;const y=new Uint8Array(s.getTotalCodewords());let w=0,E=0,_=0;for(let N=u-1;N>0;N-=2){N===6&&N--;for(let I=0;I<u;I++){const L=g?u-1-I:I;for(let F=0;F<2;F++)f.get(N-F,L)||(_++,E<<=1,this.bitMatrix.get(N-F,L)&&(E|=1),_===8&&(y[w++]=E,_=0,E=0))}g=!g}if(w!==s.getTotalCodewords())throw new J;return y}remask(){if(this.parsedFormatInfo===null)return;const n=cr.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,s)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let s=0,l=n.getWidth();s<l;s++)for(let u=s+1,f=n.getHeight();u<f;u++)n.get(s,u)!==n.get(u,s)&&(n.flip(u,s),n.flip(s,u))}}class ll{constructor(n,s){this.numDataCodewords=n,this.codewords=s}static getDataBlocks(n,s,l){if(n.length!==s.getTotalCodewords())throw new R;const u=s.getECBlocksForLevel(l);let f=0;const g=u.getECBlocks();for(const F of g)f+=F.getCount();const y=new Array(f);let w=0;for(const F of g)for(let V=0;V<F.getCount();V++){const X=F.getDataCodewords(),ie=u.getECCodewordsPerBlock()+X;y[w++]=new ll(X,new Uint8Array(ie))}const E=y[0].codewords.length;let _=y.length-1;for(;_>=0&&y[_].codewords.length!==E;)_--;_++;const N=E-u.getECCodewordsPerBlock();let I=0;for(let F=0;F<N;F++)for(let V=0;V<w;V++)y[V].codewords[F]=n[I++];for(let F=_;F<w;F++)y[F].codewords[N]=n[I++];const L=y[0].codewords.length;for(let F=N;F<L;F++)for(let V=0;V<w;V++){const X=V<_?F:F+1;y[V].codewords[X]=n[I++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ur;(function(O){O[O.TERMINATOR=0]="TERMINATOR",O[O.NUMERIC=1]="NUMERIC",O[O.ALPHANUMERIC=2]="ALPHANUMERIC",O[O.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",O[O.BYTE=4]="BYTE",O[O.ECI=5]="ECI",O[O.KANJI=6]="KANJI",O[O.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",O[O.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",O[O.HANZI=9]="HANZI"})(ur||(ur={}));class Ve{constructor(n,s,l,u){this.value=n,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=u,Ve.FOR_BITS.set(u,this),Ve.FOR_VALUE.set(n,this)}static forBits(n){const s=Ve.FOR_BITS.get(n);if(s===void 0)throw new R;return s}getCharacterCountBits(n){const s=n.getVersionNumber();let l;return s<=9?l=0:s<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof Ve))return!1;const s=n;return this.value===s.value}toString(){return this.stringValue}}Ve.FOR_BITS=new Map,Ve.FOR_VALUE=new Map,Ve.TERMINATOR=new Ve(ur.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ve.NUMERIC=new Ve(ur.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ve.ALPHANUMERIC=new Ve(ur.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ve.STRUCTURED_APPEND=new Ve(ur.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ve.BYTE=new Ve(ur.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ve.ECI=new Ve(ur.ECI,"ECI",Int32Array.from([0,0,0]),7),Ve.KANJI=new Ve(ur.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ve.FNC1_FIRST_POSITION=new Ve(ur.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ve.FNC1_SECOND_POSITION=new Ve(ur.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ve.HANZI=new Ve(ur.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Kt{static decode(n,s,l,u){const f=new Rr(n);let g=new qe;const y=new Array;let w=-1,E=-1;try{let _=null,N=!1,I;do{if(f.available()<4)I=Ve.TERMINATOR;else{const L=f.readBits(4);I=Ve.forBits(L)}switch(I){case Ve.TERMINATOR:break;case Ve.FNC1_FIRST_POSITION:case Ve.FNC1_SECOND_POSITION:N=!0;break;case Ve.STRUCTURED_APPEND:if(f.available()<16)throw new J;w=f.readBits(8),E=f.readBits(8);break;case Ve.ECI:const L=Kt.parseECIValue(f);if(_=fe.getCharacterSetECIByValue(L),_===null)throw new J;break;case Ve.HANZI:const F=f.readBits(4),V=f.readBits(I.getCharacterCountBits(s));F===Kt.GB2312_SUBSET&&Kt.decodeHanziSegment(f,g,V);break;default:const X=f.readBits(I.getCharacterCountBits(s));switch(I){case Ve.NUMERIC:Kt.decodeNumericSegment(f,g,X);break;case Ve.ALPHANUMERIC:Kt.decodeAlphanumericSegment(f,g,X,N);break;case Ve.BYTE:Kt.decodeByteSegment(f,g,X,_,y,u);break;case Ve.KANJI:Kt.decodeKanjiSegment(f,g,X);break;default:throw new J}break}}while(I!==Ve.TERMINATOR)}catch{throw new J}return new Re(n,g.toString(),y.length===0?null:y,l===null?null:l.toString(),w,E)}static decodeHanziSegment(n,s,l){if(l*13>n.available())throw new J;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const g=n.readBits(13);let y=g/96<<8&4294967295|g%96;y<959?y+=41377:y+=42657,u[f]=y>>8&255,u[f+1]=y&255,f+=2,l--}try{s.append(ft.decode(u,Oe.GB2312))}catch(g){throw new J(g)}}static decodeKanjiSegment(n,s,l){if(l*13>n.available())throw new J;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const g=n.readBits(13);let y=g/192<<8&4294967295|g%192;y<7936?y+=33088:y+=49472,u[f]=y>>8,u[f+1]=y,f+=2,l--}try{s.append(ft.decode(u,Oe.SHIFT_JIS))}catch(g){throw new J(g)}}static decodeByteSegment(n,s,l,u,f,g){if(8*l>n.available())throw new J;const y=new Uint8Array(l);for(let E=0;E<l;E++)y[E]=n.readBits(8);let w;u===null?w=Oe.guessEncoding(y,g):w=u.getName();try{s.append(ft.decode(y,w))}catch(E){throw new J(E)}f.push(y)}static toAlphaNumericChar(n){if(n>=Kt.ALPHANUMERIC_CHARS.length)throw new J;return Kt.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,s,l,u){const f=s.length();for(;l>1;){if(n.available()<11)throw new J;const g=n.readBits(11);s.append(Kt.toAlphaNumericChar(Math.floor(g/45))),s.append(Kt.toAlphaNumericChar(g%45)),l-=2}if(l===1){if(n.available()<6)throw new J;s.append(Kt.toAlphaNumericChar(n.readBits(6)))}if(u)for(let g=f;g<s.length();g++)s.charAt(g)==="%"&&(g<s.length()-1&&s.charAt(g+1)==="%"?s.deleteCharAt(g+1):s.setCharAt(g,""))}static decodeNumericSegment(n,s,l){for(;l>=3;){if(n.available()<10)throw new J;const u=n.readBits(10);if(u>=1e3)throw new J;s.append(Kt.toAlphaNumericChar(Math.floor(u/100))),s.append(Kt.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(Kt.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(n.available()<7)throw new J;const u=n.readBits(7);if(u>=100)throw new J;s.append(Kt.toAlphaNumericChar(Math.floor(u/10))),s.append(Kt.toAlphaNumericChar(u%10))}else if(l===1){if(n.available()<4)throw new J;const u=n.readBits(4);if(u>=10)throw new J;s.append(Kt.toAlphaNumericChar(u))}}static parseECIValue(n){const s=n.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const l=n.readBits(8);return(s&63)<<8&4294967295|l}if((s&224)===192){const l=n.readBits(16);return(s&31)<<16&4294967295|l}throw new J}}Kt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Kt.GB2312_SUBSET=1;class Tc{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const s=n[0];n[0]=n[2],n[2]=s}}class Mf{constructor(){this.rsDecoder=new Cr(tt.QR_CODE_FIELD_256)}decodeBooleanArray(n,s){return this.decodeBitMatrix($e.parseFromBooleanArray(n),s)}decodeBitMatrix(n,s){const l=new ba(n);let u=null;try{return this.decodeBitMatrixParser(l,s)}catch(f){u=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,s);return f.setOther(new Tc(!0)),f}catch(f){throw u!==null?u:f}}decodeBitMatrixParser(n,s){const l=n.readVersion(),u=n.readFormatInformation().getErrorCorrectionLevel(),f=n.readCodewords(),g=ll.getDataBlocks(f,l,u);let y=0;for(const _ of g)y+=_.getNumDataCodewords();const w=new Uint8Array(y);let E=0;for(const _ of g){const N=_.getCodewords(),I=_.getNumDataCodewords();this.correctErrors(N,I);for(let L=0;L<I;L++)w[E++]=N[L]}return Kt.decode(w,l,u,s)}correctErrors(n,s){const l=new Int32Array(n);try{this.rsDecoder.decode(l,n.length-s)}catch{throw new j}for(let u=0;u<s;u++)n[u]=l[u]}}class va extends Me{constructor(n,s,l){super(n,s),this.estimatedModuleSize=l}aboutEquals(n,s,l){if(Math.abs(s-this.getY())<=n&&Math.abs(l-this.getX())<=n){const u=Math.abs(n-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(n,s,l){const u=(this.getX()+s)/2,f=(this.getY()+n)/2,g=(this.estimatedModuleSize+l)/2;return new va(u,f,g)}}class pr{constructor(n,s,l,u,f,g,y){this.image=n,this.startX=s,this.startY=l,this.width=u,this.height=f,this.moduleSize=g,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,s=this.height,l=this.width,u=n+l,f=this.startY+s/2,g=new Int32Array(3),y=this.image;for(let w=0;w<s;w++){const E=f+((w&1)===0?Math.floor((w+1)/2):-Math.floor((w+1)/2));g[0]=0,g[1]=0,g[2]=0;let _=n;for(;_<u&&!y.get(_,E);)_++;let N=0;for(;_<u;){if(y.get(_,E))if(N===1)g[1]++;else if(N===2){if(this.foundPatternCross(g)){const I=this.handlePossibleCenter(g,E,_);if(I!==null)return I}g[0]=g[2],g[1]=1,g[2]=0,N=1}else g[++N]++;else N===1&&N++,g[N]++;_++}if(this.foundPatternCross(g)){const I=this.handlePossibleCenter(g,E,u);if(I!==null)return I}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ne}static centerFromEnd(n,s){return s-n[2]-n[1]/2}foundPatternCross(n){const s=this.moduleSize,l=s/2;for(let u=0;u<3;u++)if(Math.abs(s-n[u])>=l)return!1;return!0}crossCheckVertical(n,s,l,u){const f=this.image,g=f.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let w=n;for(;w>=0&&f.get(s,w)&&y[1]<=l;)y[1]++,w--;if(w<0||y[1]>l)return NaN;for(;w>=0&&!f.get(s,w)&&y[0]<=l;)y[0]++,w--;if(y[0]>l)return NaN;for(w=n+1;w<g&&f.get(s,w)&&y[1]<=l;)y[1]++,w++;if(w===g||y[1]>l)return NaN;for(;w<g&&!f.get(s,w)&&y[2]<=l;)y[2]++,w++;if(y[2]>l)return NaN;const E=y[0]+y[1]+y[2];return 5*Math.abs(E-u)>=2*u?NaN:this.foundPatternCross(y)?pr.centerFromEnd(y,w):NaN}handlePossibleCenter(n,s,l){const u=n[0]+n[1]+n[2],f=pr.centerFromEnd(n,l),g=this.crossCheckVertical(s,f,2*n[1],u);if(!isNaN(g)){const y=(n[0]+n[1]+n[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(y,g,f))return E.combineEstimate(g,f,y);const w=new va(f,g,y);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class cs extends Me{constructor(n,s,l,u){super(n,s),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,s,l){if(Math.abs(s-this.getY())<=n&&Math.abs(l-this.getX())<=n){const u=Math.abs(n-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(n,s,l){const u=this.count+1,f=(this.count*this.getX()+s)/u,g=(this.count*this.getY()+n)/u,y=(this.count*this.estimatedModuleSize+l)/u;return new cs(f,g,y,u)}}class cl{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class sn{constructor(n,s){this.image=n,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const s=n!=null&&n.get(Ae.TRY_HARDER)!==void 0,l=n!=null&&n.get(Ae.PURE_BARCODE)!==void 0,u=this.image,f=u.getHeight(),g=u.getWidth();let y=Math.floor(3*f/(4*sn.MAX_MODULES));(y<sn.MIN_SKIP||s)&&(y=sn.MIN_SKIP);let w=!1;const E=new Int32Array(5);for(let N=y-1;N<f&&!w;N+=y){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let I=0;for(let L=0;L<g;L++)if(u.get(L,N))(I&1)===1&&I++,E[I]++;else if((I&1)===0)if(I===4)if(sn.foundPatternCross(E)){if(this.handlePossibleCenter(E,N,L,l)===!0)if(y=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const V=this.findRowSkip();V>E[2]&&(N+=V-E[2]-y,L=g-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,I=3;continue}I=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,I=3;else E[++I]++;else E[I]++;sn.foundPatternCross(E)&&this.handlePossibleCenter(E,N,g,l)===!0&&(y=E[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const _=this.selectBestPatterns();return Me.orderBestPatterns(_),new cl(_)}static centerFromEnd(n,s){return s-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let s=0;for(let f=0;f<5;f++){const g=n[f];if(g===0)return!1;s+=g}if(s<7)return!1;const l=s/7,u=l/2;return Math.abs(l-n[0])<u&&Math.abs(l-n[1])<u&&Math.abs(3*l-n[2])<3*u&&Math.abs(l-n[3])<u&&Math.abs(l-n[4])<u}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,s,l,u){const f=this.getCrossCheckStateCount();let g=0;const y=this.image;for(;n>=g&&s>=g&&y.get(s-g,n-g);)f[2]++,g++;if(n<g||s<g)return!1;for(;n>=g&&s>=g&&!y.get(s-g,n-g)&&f[1]<=l;)f[1]++,g++;if(n<g||s<g||f[1]>l)return!1;for(;n>=g&&s>=g&&y.get(s-g,n-g)&&f[0]<=l;)f[0]++,g++;if(f[0]>l)return!1;const w=y.getHeight(),E=y.getWidth();for(g=1;n+g<w&&s+g<E&&y.get(s+g,n+g);)f[2]++,g++;if(n+g>=w||s+g>=E)return!1;for(;n+g<w&&s+g<E&&!y.get(s+g,n+g)&&f[3]<l;)f[3]++,g++;if(n+g>=w||s+g>=E||f[3]>=l)return!1;for(;n+g<w&&s+g<E&&y.get(s+g,n+g)&&f[4]<l;)f[4]++,g++;if(f[4]>=l)return!1;const _=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(_-u)<2*u&&sn.foundPatternCross(f)}crossCheckVertical(n,s,l,u){const f=this.image,g=f.getHeight(),y=this.getCrossCheckStateCount();let w=n;for(;w>=0&&f.get(s,w);)y[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(s,w)&&y[1]<=l;)y[1]++,w--;if(w<0||y[1]>l)return NaN;for(;w>=0&&f.get(s,w)&&y[0]<=l;)y[0]++,w--;if(y[0]>l)return NaN;for(w=n+1;w<g&&f.get(s,w);)y[2]++,w++;if(w===g)return NaN;for(;w<g&&!f.get(s,w)&&y[3]<l;)y[3]++,w++;if(w===g||y[3]>=l)return NaN;for(;w<g&&f.get(s,w)&&y[4]<l;)y[4]++,w++;if(y[4]>=l)return NaN;const E=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(E-u)>=2*u?NaN:sn.foundPatternCross(y)?sn.centerFromEnd(y,w):NaN}crossCheckHorizontal(n,s,l,u){const f=this.image,g=f.getWidth(),y=this.getCrossCheckStateCount();let w=n;for(;w>=0&&f.get(w,s);)y[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(w,s)&&y[1]<=l;)y[1]++,w--;if(w<0||y[1]>l)return NaN;for(;w>=0&&f.get(w,s)&&y[0]<=l;)y[0]++,w--;if(y[0]>l)return NaN;for(w=n+1;w<g&&f.get(w,s);)y[2]++,w++;if(w===g)return NaN;for(;w<g&&!f.get(w,s)&&y[3]<l;)y[3]++,w++;if(w===g||y[3]>=l)return NaN;for(;w<g&&f.get(w,s)&&y[4]<l;)y[4]++,w++;if(y[4]>=l)return NaN;const E=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(E-u)>=u?NaN:sn.foundPatternCross(y)?sn.centerFromEnd(y,w):NaN}handlePossibleCenter(n,s,l,u){const f=n[0]+n[1]+n[2]+n[3]+n[4];let g=sn.centerFromEnd(n,l),y=this.crossCheckVertical(s,Math.floor(g),n[2],f);if(!isNaN(y)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(y),n[2],f),!isNaN(g)&&(!u||this.crossCheckDiagonal(Math.floor(y),Math.floor(g),n[2],f)))){const w=f/7;let E=!1;const _=this.possibleCenters;for(let N=0,I=_.length;N<I;N++){const L=_[N];if(L.aboutEquals(w,y,g)){_[N]=L.combineEstimate(y,g,w),E=!0;break}}if(!E){const N=new cs(g,y,w);_.push(N),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(N)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const l of this.possibleCenters)if(l.getCount()>=sn.CENTER_QUORUM)if(s==null)s=l;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-l.getX())-Math.abs(s.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,s=0;const l=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=sn.CENTER_QUORUM&&(n++,s+=g.getEstimatedModuleSize());if(n<3)return!1;const u=s/l;let f=0;for(const g of this.possibleCenters)f+=Math.abs(g.getEstimatedModuleSize()-u);return f<=.05*s}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new ne;const s=this.possibleCenters;let l;if(n>3){let u=0,f=0;for(const w of this.possibleCenters){const E=w.getEstimatedModuleSize();u+=E,f+=E*E}l=u/n;let g=Math.sqrt(f/n-l*l);s.sort((w,E)=>{const _=Math.abs(E.getEstimatedModuleSize()-l),N=Math.abs(w.getEstimatedModuleSize()-l);return _<N?-1:_>N?1:0});const y=Math.max(.2*l,g);for(let w=0;w<s.length&&s.length>3;w++){const E=s[w];Math.abs(E.getEstimatedModuleSize()-l)>y&&(s.splice(w,1),w--)}}if(s.length>3){let u=0;for(const f of s)u+=f.getEstimatedModuleSize();l=u/s.length,s.sort((f,g)=>{if(g.getCount()===f.getCount()){const y=Math.abs(g.getEstimatedModuleSize()-l),w=Math.abs(f.getEstimatedModuleSize()-l);return y<w?1:y>w?-1:0}else return g.getCount()-f.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}sn.CENTER_QUORUM=2,sn.MIN_SKIP=3,sn.MAX_MODULES=57;class Zr{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(Ae.NEED_RESULT_POINT_CALLBACK);const l=new sn(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(l)}processFinderPatternInfo(n){const s=n.getTopLeft(),l=n.getTopRight(),u=n.getBottomLeft(),f=this.calculateModuleSize(s,l,u);if(f<1)throw new ne("No pattern found in proccess finder.");const g=Zr.computeDimension(s,l,u,f),y=je.getProvisionalVersionForDimension(g),w=y.getDimensionForVersion()-7;let E=null;if(y.getAlignmentPatternCenters().length>0){const L=l.getX()-s.getX()+u.getX(),F=l.getY()-s.getY()+u.getY(),V=1-3/w,X=Math.floor(s.getX()+V*(L-s.getX())),ie=Math.floor(s.getY()+V*(F-s.getY()));for(let _e=4;_e<=16;_e<<=1)try{E=this.findAlignmentInRegion(f,X,ie,_e);break}catch(Se){if(!(Se instanceof ne))throw Se}}const _=Zr.createTransform(s,l,u,E,g),N=Zr.sampleGrid(this.image,_,g);let I;return E===null?I=[u,s,l]:I=[u,s,l,E],new Hs(N,I)}static createTransform(n,s,l,u,f){const g=f-3.5;let y,w,E,_;return u!==null?(y=u.getX(),w=u.getY(),E=g-3,_=E):(y=s.getX()-n.getX()+l.getX(),w=s.getY()-n.getY()+l.getY(),E=g,_=g),mr.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,E,_,3.5,g,n.getX(),n.getY(),s.getX(),s.getY(),y,w,l.getX(),l.getY())}static sampleGrid(n,s,l){return Tr.getInstance().sampleGridWithTransform(n,l,l,s)}static computeDimension(n,s,l,u){const f=mt.round(Me.distance(n,s)/u),g=mt.round(Me.distance(n,l)/u);let y=Math.floor((f+g)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new ne("Dimensions could be not found.")}return y}calculateModuleSize(n,s,l){return(this.calculateModuleSizeOneWay(n,s)+this.calculateModuleSizeOneWay(n,l))/2}calculateModuleSizeOneWay(n,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(n,s,l,u){let f=this.sizeOfBlackWhiteBlackRun(n,s,l,u),g=1,y=n-(l-n);y<0?(g=n/(n-y),y=0):y>=this.image.getWidth()&&(g=(this.image.getWidth()-1-n)/(y-n),y=this.image.getWidth()-1);let w=Math.floor(s-(u-s)*g);return g=1,w<0?(g=s/(s-w),w=0):w>=this.image.getHeight()&&(g=(this.image.getHeight()-1-s)/(w-s),w=this.image.getHeight()-1),y=Math.floor(n+(y-n)*g),f+=this.sizeOfBlackWhiteBlackRun(n,s,y,w),f-1}sizeOfBlackWhiteBlackRun(n,s,l,u){const f=Math.abs(u-s)>Math.abs(l-n);if(f){let L=n;n=s,s=L,L=l,l=u,u=L}const g=Math.abs(l-n),y=Math.abs(u-s);let w=-g/2;const E=n<l?1:-1,_=s<u?1:-1;let N=0;const I=l+E;for(let L=n,F=s;L!==I;L+=E){const V=f?F:L,X=f?L:F;if(N===1===this.image.get(V,X)){if(N===2)return mt.distance(L,F,n,s);N++}if(w+=y,w>0){if(F===u)break;F+=_,w-=g}}return N===2?mt.distance(l+E,u,n,s):NaN}findAlignmentInRegion(n,s,l,u){const f=Math.floor(u*n),g=Math.max(0,s-f),y=Math.min(this.image.getWidth()-1,s+f);if(y-g<n*3)throw new ne("Alignment top exceeds estimated module size.");const w=Math.max(0,l-f),E=Math.min(this.image.getHeight()-1,l+f);if(E-w<n*3)throw new ne("Alignment bottom exceeds estimated module size.");return new pr(this.image,g,w,y-g,E-w,n,this.resultPointCallback).find()}}class hi{constructor(){this.decoder=new Mf}getDecoder(){return this.decoder}decode(n,s){let l,u;if(s!=null&&s.get(Ae.PURE_BARCODE)!==void 0){const w=hi.extractPureBits(n.getBlackMatrix());l=this.decoder.decodeBitMatrix(w,s),u=hi.NO_POINTS}else{const w=new Zr(n.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(w.getBits(),s),u=w.getPoints()}l.getOther()instanceof Tc&&l.getOther().applyMirroredCorrection(u);const f=new ce(l.getText(),l.getRawBytes(),void 0,u,be.QR_CODE,void 0),g=l.getByteSegments();g!==null&&f.putMetadata(We.BYTE_SEGMENTS,g);const y=l.getECLevel();return y!==null&&f.putMetadata(We.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(f.putMetadata(We.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(We.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(n){const s=n.getTopLeftOnBit(),l=n.getBottomRightOnBit();if(s===null||l===null)throw new ne;const u=this.moduleSize(s,n);let f=s[1],g=l[1],y=s[0],w=l[0];if(y>=w||f>=g)throw new ne;if(g-f!==w-y&&(w=y+(g-f),w>=n.getWidth()))throw new ne;const E=Math.round((w-y+1)/u),_=Math.round((g-f+1)/u);if(E<=0||_<=0)throw new ne;if(_!==E)throw new ne;const N=Math.floor(u/2);f+=N,y+=N;const I=y+Math.floor((E-1)*u)-w;if(I>0){if(I>N)throw new ne;y-=I}const L=f+Math.floor((_-1)*u)-g;if(L>0){if(L>N)throw new ne;f-=L}const F=new $e(E,_);for(let V=0;V<_;V++){const X=f+Math.floor(V*u);for(let ie=0;ie<E;ie++)n.get(y+Math.floor(ie*u),X)&&F.set(ie,V)}return F}static moduleSize(n,s){const l=s.getHeight(),u=s.getWidth();let f=n[0],g=n[1],y=!0,w=0;for(;f<u&&g<l;){if(y!==s.get(f,g)){if(++w===5)break;y=!y}f++,g++}if(f===u||g===l)throw new ne;return(f-n[0])/7}}hi.NO_POINTS=new Array;class Xe{PDF417Common(){}static getBitCountSum(n){return mt.sum(n)}static toIntArray(n){if(n==null||!n.length)return Xe.EMPTY_INT_ARRAY;const s=new Int32Array(n.length);let l=0;for(const u of n)s[l++]=u;return s}static getCodeword(n){const s=se.binarySearch(Xe.SYMBOL_TABLE,n&262143);return s<0?-1:(Xe.CODEWORD_TABLE[s]-1)%Xe.NUMBER_OF_CODEWORDS}}Xe.NUMBER_OF_CODEWORDS=929,Xe.MAX_CODEWORDS_IN_BARCODE=Xe.NUMBER_OF_CODEWORDS-1,Xe.MIN_ROWS_IN_BARCODE=3,Xe.MAX_ROWS_IN_BARCODE=90,Xe.MODULES_IN_CODEWORD=17,Xe.MODULES_IN_STOP_PATTERN=18,Xe.BARS_IN_MODULE=8,Xe.EMPTY_INT_ARRAY=new Int32Array([]),Xe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Xe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Oc{constructor(n,s){this.bits=n,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class it{static detectMultiple(n,s,l){let u=n.getBlackMatrix(),f=it.detect(l,u);return f.length||(u=u.clone(),u.rotate180(),f=it.detect(l,u)),new Oc(u,f)}static detect(n,s){const l=new Array;let u=0,f=0,g=!1;for(;u<s.getHeight();){const y=it.findVertices(s,u,f);if(y[0]==null&&y[3]==null){if(!g)break;g=!1,f=0;for(const w of l)w[1]!=null&&(u=Math.trunc(Math.max(u,w[1].getY()))),w[3]!=null&&(u=Math.max(u,Math.trunc(w[3].getY())));u+=it.ROW_STEP;continue}if(g=!0,l.push(y),!n)break;y[2]!=null?(f=Math.trunc(y[2].getX()),u=Math.trunc(y[2].getY())):(f=Math.trunc(y[4].getX()),u=Math.trunc(y[4].getY()))}return l}static findVertices(n,s,l){const u=n.getHeight(),f=n.getWidth(),g=new Array(8);return it.copyToResult(g,it.findRowsWithPattern(n,u,f,s,l,it.START_PATTERN),it.INDEXES_START_PATTERN),g[4]!=null&&(l=Math.trunc(g[4].getX()),s=Math.trunc(g[4].getY())),it.copyToResult(g,it.findRowsWithPattern(n,u,f,s,l,it.STOP_PATTERN),it.INDEXES_STOP_PATTERN),g}static copyToResult(n,s,l){for(let u=0;u<l.length;u++)n[l[u]]=s[u]}static findRowsWithPattern(n,s,l,u,f,g){const y=new Array(4);let w=!1;const E=new Int32Array(g.length);for(;u<s;u+=it.ROW_STEP){let N=it.findGuardPattern(n,f,u,l,!1,g,E);if(N!=null){for(;u>0;){const I=it.findGuardPattern(n,f,--u,l,!1,g,E);if(I!=null)N=I;else{u++;break}}y[0]=new Me(N[0],u),y[1]=new Me(N[1],u),w=!0;break}}let _=u+1;if(w){let N=0,I=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;_<s;_++){const L=it.findGuardPattern(n,I[0],_,l,!1,g,E);if(L!=null&&Math.abs(I[0]-L[0])<it.MAX_PATTERN_DRIFT&&Math.abs(I[1]-L[1])<it.MAX_PATTERN_DRIFT)I=L,N=0;else{if(N>it.SKIPPED_ROW_COUNT_MAX)break;N++}}_-=N+1,y[2]=new Me(I[0],_),y[3]=new Me(I[1],_)}return _-u<it.BARCODE_MIN_HEIGHT&&se.fill(y,null),y}static findGuardPattern(n,s,l,u,f,g,y){se.fillWithin(y,0,y.length,0);let w=s,E=0;for(;n.get(w,l)&&w>0&&E++<it.MAX_PIXEL_DRIFT;)w--;let _=w,N=0,I=g.length;for(let L=f;_<u;_++)if(n.get(_,l)!==L)y[N]++;else{if(N===I-1){if(it.patternMatchVariance(y,g,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return new Int32Array([w,_]);w+=y[0]+y[1],q.arraycopy(y,2,y,0,N-1),y[N-1]=0,y[N]=0,N--}else N++;y[N]=1,L=!L}return N===I-1&&it.patternMatchVariance(y,g,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE?new Int32Array([w,_-1]):null}static patternMatchVariance(n,s,l){let u=n.length,f=0,g=0;for(let E=0;E<u;E++)f+=n[E],g+=s[E];if(f<g)return 1/0;let y=f/g;l*=y;let w=0;for(let E=0;E<u;E++){let _=n[E],N=s[E]*y,I=_>N?_-N:N-_;if(I>l)return 1/0;w+=I}return w/f}}it.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),it.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),it.MAX_AVG_VARIANCE=.42,it.MAX_INDIVIDUAL_VARIANCE=.8,it.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),it.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),it.MAX_PIXEL_DRIFT=3,it.MAX_PATTERN_DRIFT=5,it.SKIPPED_ROW_COUNT_MAX=25,it.ROW_STEP=5,it.BARCODE_MIN_HEIGHT=10;class Qt{constructor(n,s){if(s.length===0)throw new R;this.field=n;let l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),q.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let u=0;for(let f of this.coefficients)u=this.field.add(u,f);return u}let s=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)s=this.field.add(this.field.multiply(n,s),this.coefficients[u]);return s}add(n){if(!this.field.equals(n.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let s=this.coefficients,l=n.coefficients;if(s.length>l.length){let g=s;s=l,l=g}let u=new Int32Array(l.length),f=l.length-s.length;q.arraycopy(l,0,u,0,f);for(let g=f;g<l.length;g++)u[g]=this.field.add(s[g-f],l[g]);return new Qt(this.field,u)}subtract(n){if(!this.field.equals(n.field))throw new R("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof Qt?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new Qt(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,u=n.coefficients,f=u.length,g=new Int32Array(l+f-1);for(let y=0;y<l;y++){let w=s[y];for(let E=0;E<f;E++)g[y+E]=this.field.add(g[y+E],this.field.multiply(w,u[E]))}return new Qt(this.field,g)}negative(){let n=this.coefficients.length,s=new Int32Array(n);for(let l=0;l<n;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new Qt(this.field,s)}multiplyScalar(n){if(n===0)return new Qt(this.field,new Int32Array([0]));if(n===1)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.multiply(this.coefficients[u],n);return new Qt(this.field,l)}multiplyByMonomial(n,s){if(n<0)throw new R;if(s===0)return new Qt(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+n);for(let f=0;f<l;f++)u[f]=this.field.multiply(this.coefficients[f],s);return new Qt(this.field,u)}toString(){let n=new qe;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);l!==0&&(l<0?(n.append(" - "),l=-l):n.length()>0&&n.append(" + "),(s===0||l!==1)&&n.append(l),s!==0&&(s===1?n.append("x"):(n.append("x^"),n.append(s))))}return n.toString()}}class ul{add(n,s){return(n+s)%this.modulus}subtract(n,s){return(this.modulus+n-s)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new R;return this.logTable[n]}inverse(n){if(n===0)throw new en;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,s){return n===0||s===0?0:this.expTable[(this.logTable[n]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class Pi extends ul{constructor(n,s){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let l=1;for(let u=0;u<n;u++)this.expTable[u]=l,l=l*s%n;for(let u=0;u<n-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Qt(this,new Int32Array([0])),this.one=new Qt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,s){if(n<0)throw new R;if(s===0)return this.zero;let l=new Int32Array(n+1);return l[0]=s,new Qt(this,l)}}Pi.PDF417_GF=new Pi(Xe.NUMBER_OF_CODEWORDS,3);class di{constructor(){this.field=Pi.PDF417_GF}decode(n,s,l){let u=new Qt(this.field,n),f=new Int32Array(s),g=!1;for(let F=s;F>0;F--){let V=u.evaluateAt(this.field.exp(F));f[s-F]=V,V!==0&&(g=!0)}if(!g)return 0;let y=this.field.getOne();if(l!=null)for(const F of l){let V=this.field.exp(n.length-1-F),X=new Qt(this.field,new Int32Array([this.field.subtract(0,V),1]));y=y.multiply(X)}let w=new Qt(this.field,f),E=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),w,s),_=E[0],N=E[1],I=this.findErrorLocations(_),L=this.findErrorMagnitudes(N,_,I);for(let F=0;F<I.length;F++){let V=n.length-1-this.field.log(I[F]);if(V<0)throw j.getChecksumInstance();n[V]=this.field.subtract(n[V],L[F])}return I.length}runEuclideanAlgorithm(n,s,l){if(n.getDegree()<s.getDegree()){let I=n;n=s,s=I}let u=n,f=s,g=this.field.getZero(),y=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let I=u,L=g;if(u=f,g=y,u.isZero())throw j.getChecksumInstance();f=I;let F=this.field.getZero(),V=u.getCoefficient(u.getDegree()),X=this.field.inverse(V);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){let ie=f.getDegree()-u.getDegree(),_e=this.field.multiply(f.getCoefficient(f.getDegree()),X);F=F.add(this.field.buildMonomial(ie,_e)),f=f.subtract(u.multiplyByMonomial(ie,_e))}y=F.multiply(g).subtract(L).negative()}let w=y.getCoefficient(0);if(w===0)throw j.getChecksumInstance();let E=this.field.inverse(w),_=y.multiply(E),N=f.multiply(E);return[_,N]}findErrorLocations(n){let s=n.getDegree(),l=new Int32Array(s),u=0;for(let f=1;f<this.field.getSize()&&u<s;f++)n.evaluateAt(f)===0&&(l[u]=this.field.inverse(f),u++);if(u!==s)throw j.getChecksumInstance();return l}findErrorMagnitudes(n,s,l){let u=s.getDegree(),f=new Int32Array(u);for(let E=1;E<=u;E++)f[u-E]=this.field.multiply(E,s.getCoefficient(E));let g=new Qt(this.field,f),y=l.length,w=new Int32Array(y);for(let E=0;E<y;E++){let _=this.field.inverse(l[E]),N=this.field.subtract(0,n.evaluateAt(_)),I=this.field.inverse(g.evaluateAt(_));w[E]=this.field.multiply(N,I)}return w}}class gi{constructor(n,s,l,u,f){n instanceof gi?this.constructor_2(n):this.constructor_1(n,s,l,u,f)}constructor_1(n,s,l,u,f){const g=s==null||l==null,y=u==null||f==null;if(g&&y)throw new ne;g?(s=new Me(0,u.getY()),l=new Me(0,f.getY())):y&&(u=new Me(n.getWidth()-1,s.getY()),f=new Me(n.getWidth()-1,l.getY())),this.image=n,this.topLeft=s,this.bottomLeft=l,this.topRight=u,this.bottomRight=f,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),f.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,s){return n==null?s:s==null?n:new gi(n.image,n.topLeft,n.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(n,s,l){let u=this.topLeft,f=this.bottomLeft,g=this.topRight,y=this.bottomRight;if(n>0){let w=l?this.topLeft:this.topRight,E=Math.trunc(w.getY()-n);E<0&&(E=0);let _=new Me(w.getX(),E);l?u=_:g=_}if(s>0){let w=l?this.bottomLeft:this.bottomRight,E=Math.trunc(w.getY()+s);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let _=new Me(w.getX(),E);l?f=_:y=_}return new gi(this.image,u,f,g,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Xs{constructor(n,s,l,u){this.columnCount=n,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ea{constructor(){this.buffer=""}static form(n,s){let l=-1;function u(g,y,w,E,_,N){if(g==="%%")return"%";if(s[++l]===void 0)return;g=E?parseInt(E.substr(1)):void 0;let I=_?parseInt(_.substr(1)):void 0,L;switch(N){case"s":L=s[l];break;case"c":L=s[l][0];break;case"f":L=parseFloat(s[l]).toFixed(g);break;case"p":L=parseFloat(s[l]).toPrecision(g);break;case"e":L=parseFloat(s[l]).toExponential(g);break;case"x":L=parseInt(s[l]).toString(I||16);break;case"d":L=parseFloat(parseInt(s[l],I||10).toPrecision(g)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(I);let F=parseInt(w),V=w&&w[0]+""=="0"?"0":" ";for(;L.length<F;)L=y!==void 0?L+V:V+L;return L}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(f,u)}format(n,...s){this.buffer+=Ea.form(n,s)}toString(){return this.buffer}}class Ni{constructor(n){this.boundingBox=new gi(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let s=this.getCodeword(n);if(s!=null)return s;for(let l=1;l<Ni.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(n)-l;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(n)+l,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,s){this.codewords[this.imageRowToCodewordIndex(n)]=s}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new Ea;let s=0;for(const l of this.codewords){if(l==null){n.format("%3d:    |   %n",s++);continue}n.format("%3d: %3d|%3d%n",s++,l.getRowNumber(),l.getValue())}return n.toString()}}Ni.MAX_NEARBY_DISTANCE=5;class Ri{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let s=this.values.get(n);s==null&&(s=0),s++,this.values.set(n,s)}getValue(){let n=-1,s=new Array;for(const[l,u]of this.values.entries()){const f={getKey:()=>l,getValue:()=>u};f.getValue()>n?(n=f.getValue(),s=[],s.push(f.getKey())):f.getValue()===n&&s.push(f.getKey())}return Xe.toIntArray(s)}getConfidence(n){return this.values.get(n)}}class fl extends Ni{constructor(n,s){super(n),this._isLeft=s}setRowNumbers(){for(let n of this.getCodewords())n?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,n);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),w=-1,E=1,_=0;for(let N=g;N<y;N++){if(s[N]==null)continue;let I=s[N],L=I.getRowNumber()-w;if(L===0)_++;else if(L===1)E=Math.max(E,_),_=1,w=I.getRowNumber();else if(L<0||I.getRowNumber()>=n.getRowCount()||L>N)s[N]=null;else{let F;E>2?F=(E-2)*L:F=L;let V=F>=N;for(let X=1;X<=F&&!V;X++)V=s[N-X]!=null;V?s[N]=null:(w=I.getRowNumber(),_=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let s=new Int32Array(n.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(n){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.getCodewords(),w=-1;for(let E=f;E<g;E++){if(y[E]==null)continue;let _=y[E];_.setRowNumberAsRowIndicatorColumn();let N=_.getRowNumber()-w;N===0||(N===1?w=_.getRowNumber():_.getRowNumber()>=n.getRowCount()?y[E]=null:w=_.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),s=new Ri,l=new Ri,u=new Ri,f=new Ri;for(let y of n){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let w=y.getValue()%30,E=y.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:l.setValue(w*3+1);break;case 1:f.setValue(w/3),u.setValue(w%3);break;case 2:s.setValue(w+1);break}}if(s.getValue().length===0||l.getValue().length===0||u.getValue().length===0||f.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<Xe.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>Xe.MAX_ROWS_IN_BARCODE)return null;let g=new Xs(s.getValue()[0],l.getValue()[0],u.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(n,g),g}removeIncorrectCodewords(n,s){for(let l=0;l<n.length;l++){let u=n[l];if(n[l]==null)continue;let f=u.getValue()%30,g=u.getRowNumber();if(g>s.getRowCount()){n[l]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:f*3+1!==s.getRowCountUpperPart()&&(n[l]=null);break;case 1:(Math.trunc(f/3)!==s.getErrorCorrectionLevel()||f%3!==s.getRowCountLowerPart())&&(n[l]=null);break;case 2:f+1!==s.getColumnCount()&&(n[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class In{constructor(n,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=Xe.MAX_CODEWORDS_IN_BARCODE,s;do s=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,l))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<n.length;l++)if(n[l]!=null&&s[l]!=null&&n[l].getRowNumber()===s[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let f=this.detectionResultColumns[u].getCodewords()[l];f!=null&&(f.setRowNumber(n[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),f=0;for(let g=this.barcodeColumnCount+1;g>0&&f<this.ADJUST_ROW_NUMBER_SKIP;g--){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(f=In.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),f=0;for(let g=1;g<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;g++){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(f=In.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,s,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(n)?(l.setRowNumber(n),s=0):++s),s}adjustRowNumbers(n,s,l){if(!this.detectionResultColumns[n-1])return;let u=l[s],f=this.detectionResultColumns[n-1].getCodewords(),g=f;this.detectionResultColumns[n+1]!=null&&(g=this.detectionResultColumns[n+1].getCodewords());let y=new Array(14);y[2]=f[s],y[3]=g[s],s>0&&(y[0]=l[s-1],y[4]=f[s-1],y[5]=g[s-1]),s>1&&(y[8]=l[s-2],y[10]=f[s-2],y[11]=g[s-2]),s<l.length-1&&(y[1]=l[s+1],y[6]=f[s+1],y[7]=g[s+1]),s<l.length-2&&(y[9]=l[s+2],y[12]=f[s+2],y[13]=g[s+2]);for(let w of y)if(In.adjustRowNumber(u,w))return}static adjustRowNumber(n,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===n.getBucket()?(n.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,s){this.detectionResultColumns[n]=s}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Ea;for(let l=0;l<n.getCodewords().length;l++){s.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let f=this.detectionResultColumns[u].getCodewords()[l];if(f==null){s.format("    |   ");continue}s.format(" %3d|%3d",f.getRowNumber(),f.getValue())}s.format("%n")}return s.toString()}}class Ir{constructor(n,s,l,u){this.rowNumber=Ir.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(s),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==Ir.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}Ir.BARCODE_ROW_UNKNOWN=-1;class Pn{static initialize(){for(let n=0;n<Xe.SYMBOL_TABLE.length;n++){let s=Xe.SYMBOL_TABLE[n],l=s&1;for(let u=0;u<Xe.BARS_IN_MODULE;u++){let f=0;for(;(s&1)===l;)f+=1,s>>=1;l=s&1,Pn.RATIOS_TABLE[n]||(Pn.RATIOS_TABLE[n]=new Array(Xe.BARS_IN_MODULE)),Pn.RATIOS_TABLE[n][Xe.BARS_IN_MODULE-u-1]=Math.fround(f/Xe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let s=Pn.getDecodedCodewordValue(Pn.sampleBitCounts(n));return s!==-1?s:Pn.getClosestDecodedValue(n)}static sampleBitCounts(n){let s=mt.sum(n),l=new Int32Array(Xe.BARS_IN_MODULE),u=0,f=0;for(let g=0;g<Xe.MODULES_IN_CODEWORD;g++){let y=s/(2*Xe.MODULES_IN_CODEWORD)+g*s/Xe.MODULES_IN_CODEWORD;f+n[u]<=y&&(f+=n[u],u++),l[u]++}return l}static getDecodedCodewordValue(n){let s=Pn.getBitValue(n);return Xe.getCodeword(s)===-1?-1:s}static getBitValue(n){let s=0;for(let l=0;l<n.length;l++)for(let u=0;u<n[l];u++)s=s<<1|(l%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(n){let s=mt.sum(n),l=new Array(Xe.BARS_IN_MODULE);if(s>1)for(let g=0;g<l.length;g++)l[g]=Math.fround(n[g]/s);let u=ga.MAX_VALUE,f=-1;this.bSymbolTableReady||Pn.initialize();for(let g=0;g<Pn.RATIOS_TABLE.length;g++){let y=0,w=Pn.RATIOS_TABLE[g];for(let E=0;E<Xe.BARS_IN_MODULE;E++){let _=Math.fround(w[E]-l[E]);if(y+=Math.fround(_*_),y>=u)break}y<u&&(u=y,f=Xe.SYMBOL_TABLE[g])}return f}}Pn.bSymbolTableReady=!1,Pn.RATIOS_TABLE=new Array(Xe.SYMBOL_TABLE.length).map(O=>new Array(Xe.BARS_IN_MODULE));class Sa{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class Nc{static parseLong(n,s=void 0){return parseInt(n,s)}}class Zs extends v{}Zs.kind="NullPointerException";class hl{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,s,l){if(n==null)throw new Zs;if(s<0||s>n.length||l<0||s+l>n.length||s+l<0)throw new Q;if(l===0)return;for(let u=0;u<l;u++)this.write(n[s+u])}flush(){}close(){}}class us extends v{}class Ks extends hl{constructor(n=32){if(super(),this.count=0,n<0)throw new R("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let l=this.buf.length<<1;if(l-n<0&&(l=n),l<0){if(n<0)throw new us;l=W.MAX_VALUE}this.buf=se.copyOfUint8Array(this.buf,l)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,s,l){if(s<0||s>n.length||l<0||s+l-n.length>0)throw new Q;this.ensureCapacity(this.count+l),q.arraycopy(n,s,this.buf,this.count,l),this.count+=l}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return se.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var It;(function(O){O[O.ALPHA=0]="ALPHA",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.PUNCT=3]="PUNCT",O[O.ALPHA_SHIFT=4]="ALPHA_SHIFT",O[O.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(It||(It={}));function Rc(){if(typeof window<"u")return window.BigInt||null;if(typeof zu<"u")return zu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Qs;function Ii(O){if(typeof Qs>"u"&&(Qs=Rc()),Qs===null)throw new Error("BigInt is not supported!");return Qs(O)}function dl(){let O=[];O[0]=Ii(1);let n=Ii(900);O[1]=n;for(let s=2;s<16;s++)O[s]=O[s-1]*n;return O}class ae{static decode(n,s){let l=new qe(""),u=fe.ISO8859_1;l.enableDecoding(u);let f=1,g=n[f++],y=new Sa;for(;f<n[0];){switch(g){case ae.TEXT_COMPACTION_MODE_LATCH:f=ae.textCompaction(n,f,l);break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:f=ae.byteCompaction(g,n,u,f,l);break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[f++]);break;case ae.NUMERIC_COMPACTION_MODE_LATCH:f=ae.numericCompaction(n,f,l);break;case ae.ECI_CHARSET:fe.getCharacterSetECIByValue(n[f++]);break;case ae.ECI_GENERAL_PURPOSE:f+=2;break;case ae.ECI_USER_DEFINED:f++;break;case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=ae.decodeMacroBlock(n,f,y);break;case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:throw new J;default:f--,f=ae.textCompaction(n,f,l);break}if(f<n.length)g=n[f++];else throw J.getFormatInstance()}if(l.length()===0)throw J.getFormatInstance();let w=new Re(null,l.toString(),null,s);return w.setOther(y),w}static decodeMacroBlock(n,s,l){if(s+ae.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw J.getFormatInstance();let u=new Int32Array(ae.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<ae.NUMBER_OF_SEQUENCE_CODEWORDS;y++,s++)u[y]=n[s];l.setSegmentIndex(W.parseInt(ae.decodeBase900toBase10(u,ae.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new qe;s=ae.textCompaction(n,s,f),l.setFileId(f.toString());let g=-1;for(n[s]===ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=s+1);s<n[0];)switch(n[s]){case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,n[s]){case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new qe;s=ae.textCompaction(n,s+1,y),l.setFileName(y.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new qe;s=ae.textCompaction(n,s+1,w),l.setSender(w.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new qe;s=ae.textCompaction(n,s+1,E),l.setAddressee(E.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let _=new qe;s=ae.numericCompaction(n,s+1,_),l.setSegmentCount(W.parseInt(_.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let N=new qe;s=ae.numericCompaction(n,s+1,N),l.setTimestamp(Nc.parseLong(N.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let I=new qe;s=ae.numericCompaction(n,s+1,I),l.setChecksum(W.parseInt(I.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let L=new qe;s=ae.numericCompaction(n,s+1,L),l.setFileSize(Nc.parseLong(L.toString()));break;default:throw J.getFormatInstance()}break;case ae.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw J.getFormatInstance()}if(g!==-1){let y=s-g;l.isLastSegment()&&y--,l.setOptionalData(se.copyOfRange(n,g,g+y))}return s}static textCompaction(n,s,l){let u=new Int32Array((n[0]-s)*2),f=new Int32Array((n[0]-s)*2),g=0,y=!1;for(;s<n[0]&&!y;){let w=n[s++];if(w<ae.TEXT_COMPACTION_MODE_LATCH)u[g]=w/30,u[g+1]=w%30,g+=2;else switch(w){case ae.TEXT_COMPACTION_MODE_LATCH:u[g++]=ae.TEXT_COMPACTION_MODE_LATCH;break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:s--,y=!0;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[g]=ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=n[s++],f[g]=w,g++;break}}return ae.decodeTextCompaction(u,f,g,l),s}static decodeTextCompaction(n,s,l,u){let f=It.ALPHA,g=It.ALPHA,y=0;for(;y<l;){let w=n[y],E="";switch(f){case It.ALPHA:if(w<26)E=String.fromCharCode(65+w);else switch(w){case 26:E=" ";break;case ae.LL:f=It.LOWER;break;case ae.ML:f=It.MIXED;break;case ae.PS:g=f,f=It.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case ae.TEXT_COMPACTION_MODE_LATCH:f=It.ALPHA;break}break;case It.LOWER:if(w<26)E=String.fromCharCode(97+w);else switch(w){case 26:E=" ";break;case ae.AS:g=f,f=It.ALPHA_SHIFT;break;case ae.ML:f=It.MIXED;break;case ae.PS:g=f,f=It.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case ae.TEXT_COMPACTION_MODE_LATCH:f=It.ALPHA;break}break;case It.MIXED:if(w<ae.PL)E=ae.MIXED_CHARS[w];else switch(w){case ae.PL:f=It.PUNCT;break;case 26:E=" ";break;case ae.LL:f=It.LOWER;break;case ae.AL:f=It.ALPHA;break;case ae.PS:g=f,f=It.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case ae.TEXT_COMPACTION_MODE_LATCH:f=It.ALPHA;break}break;case It.PUNCT:if(w<ae.PAL)E=ae.PUNCT_CHARS[w];else switch(w){case ae.PAL:f=It.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case ae.TEXT_COMPACTION_MODE_LATCH:f=It.ALPHA;break}break;case It.ALPHA_SHIFT:if(f=g,w<26)E=String.fromCharCode(65+w);else switch(w){case 26:E=" ";break;case ae.TEXT_COMPACTION_MODE_LATCH:f=It.ALPHA;break}break;case It.PUNCT_SHIFT:if(f=g,w<ae.PAL)E=ae.PUNCT_CHARS[w];else switch(w){case ae.PAL:f=It.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case ae.TEXT_COMPACTION_MODE_LATCH:f=It.ALPHA;break}break}E!==""&&u.append(E),y++}}static byteCompaction(n,s,l,u,f){let g=new Ks,y=0,w=0,E=!1;switch(n){case ae.BYTE_COMPACTION_MODE_LATCH:let _=new Int32Array(6),N=s[u++];for(;u<s[0]&&!E;)switch(_[y++]=N,w=900*w+N,N=s[u++],N){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:u--,E=!0;break;default:if(y%5===0&&y>0){for(let I=0;I<6;++I)g.write(Number(Ii(w)>>Ii(8*(5-I))));w=0,y=0}break}u===s[0]&&N<ae.TEXT_COMPACTION_MODE_LATCH&&(_[y++]=N);for(let I=0;I<y;I++)g.write(_[I]);break;case ae.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!E;){let I=s[u++];if(I<ae.TEXT_COMPACTION_MODE_LATCH)y++,w=900*w+I;else switch(I){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:u--,E=!0;break}if(y%5===0&&y>0){for(let L=0;L<6;++L)g.write(Number(Ii(w)>>Ii(8*(5-L))));w=0,y=0}}break}return f.append(ft.decode(g.toByteArray(),l)),u}static numericCompaction(n,s,l){let u=0,f=!1,g=new Int32Array(ae.MAX_NUMERIC_CODEWORDS);for(;s<n[0]&&!f;){let y=n[s++];if(s===n[0]&&(f=!0),y<ae.TEXT_COMPACTION_MODE_LATCH)g[u]=y,u++;else switch(y){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:s--,f=!0;break}(u%ae.MAX_NUMERIC_CODEWORDS===0||y===ae.NUMERIC_COMPACTION_MODE_LATCH||f)&&u>0&&(l.append(ae.decodeBase900toBase10(g,u)),u=0)}return s}static decodeBase900toBase10(n,s){let l=Ii(0);for(let f=0;f<s;f++)l+=ae.EXP900[s-f-1]*Ii(n[f]);let u=l.toString();if(u.charAt(0)!=="1")throw new J;return u.substring(1)}}ae.TEXT_COMPACTION_MODE_LATCH=900,ae.BYTE_COMPACTION_MODE_LATCH=901,ae.NUMERIC_COMPACTION_MODE_LATCH=902,ae.BYTE_COMPACTION_MODE_LATCH_6=924,ae.ECI_USER_DEFINED=925,ae.ECI_GENERAL_PURPOSE=926,ae.ECI_CHARSET=927,ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ae.MACRO_PDF417_TERMINATOR=922,ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ae.MAX_NUMERIC_CODEWORDS=15,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ae.PL=25,ae.LL=27,ae.AS=27,ae.ML=28,ae.AL=28,ae.PS=29,ae.PAL=29,ae.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ae.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ae.EXP900=Rc()?dl():[],ae.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ct{constructor(){}static decode(n,s,l,u,f,g,y){let w=new gi(n,s,l,u,f),E=null,_=null,N;for(let F=!0;;F=!1){if(s!=null&&(E=ct.getRowIndicatorColumn(n,w,s,!0,g,y)),u!=null&&(_=ct.getRowIndicatorColumn(n,w,u,!1,g,y)),N=ct.merge(E,_),N==null)throw ne.getNotFoundInstance();let V=N.getBoundingBox();if(F&&V!=null&&(V.getMinY()<w.getMinY()||V.getMaxY()>w.getMaxY()))w=V;else break}N.setBoundingBox(w);let I=N.getBarcodeColumnCount()+1;N.setDetectionResultColumn(0,E),N.setDetectionResultColumn(I,_);let L=E!=null;for(let F=1;F<=I;F++){let V=L?F:I-F;if(N.getDetectionResultColumn(V)!==void 0)continue;let X;V===0||V===I?X=new fl(w,V===0):X=new Ni(w),N.setDetectionResultColumn(V,X);let ie=-1,_e=ie;for(let Se=w.getMinY();Se<=w.getMaxY();Se++){if(ie=ct.getStartColumn(N,V,Se,L),ie<0||ie>w.getMaxX()){if(_e===-1)continue;ie=_e}let Ee=ct.detectCodeword(n,w.getMinX(),w.getMaxX(),L,ie,Se,g,y);Ee!=null&&(X.setCodeword(Se,Ee),_e=ie,g=Math.min(g,Ee.getWidth()),y=Math.max(y,Ee.getWidth()))}}return ct.createDecoderResult(N)}static merge(n,s){if(n==null&&s==null)return null;let l=ct.getBarcodeMetadata(n,s);if(l==null)return null;let u=gi.merge(ct.adjustBoundingBox(n),ct.adjustBoundingBox(s));return new In(l,u)}static adjustBoundingBox(n){if(n==null)return null;let s=n.getRowHeights();if(s==null)return null;let l=ct.getMax(s),u=0;for(let y of s)if(u+=l-y,y>0)break;let f=n.getCodewords();for(let y=0;u>0&&f[y]==null;y++)u--;let g=0;for(let y=s.length-1;y>=0&&(g+=l-s[y],!(s[y]>0));y--);for(let y=f.length-1;g>0&&f[y]==null;y--)g--;return n.getBoundingBox().addMissingRows(u,g,n.isLeft())}static getMax(n){let s=-1;for(let l of n)s=Math.max(s,l);return s}static getBarcodeMetadata(n,s){let l;if(n==null||(l=n.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(n,s,l,u,f,g){let y=new fl(s,u);for(let w=0;w<2;w++){let E=w===0?1:-1,_=Math.trunc(Math.trunc(l.getX()));for(let N=Math.trunc(Math.trunc(l.getY()));N<=s.getMaxY()&&N>=s.getMinY();N+=E){let I=ct.detectCodeword(n,0,n.getWidth(),u,_,N,f,g);I!=null&&(y.setCodeword(N,I),u?_=I.getStartX():_=I.getEndX())}}return y}static adjustCodewordCount(n,s){let l=s[0][1],u=l.getValue(),f=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-ct.getNumberOfECCodeWords(n.getBarcodeECLevel());if(u.length===0){if(f<1||f>Xe.MAX_CODEWORDS_IN_BARCODE)throw ne.getNotFoundInstance();l.setValue(f)}else u[0]!==f&&l.setValue(f)}static createDecoderResult(n){let s=ct.createBarcodeMatrix(n);ct.adjustCodewordCount(n,s);let l=new Array,u=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),f=[],g=new Array;for(let w=0;w<n.getBarcodeRowCount();w++)for(let E=0;E<n.getBarcodeColumnCount();E++){let _=s[w][E+1].getValue(),N=w*n.getBarcodeColumnCount()+E;_.length===0?l.push(N):_.length===1?u[N]=_[0]:(g.push(N),f.push(_))}let y=new Array(f.length);for(let w=0;w<y.length;w++)y[w]=f[w];return ct.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),u,Xe.toIntArray(l),Xe.toIntArray(g),y)}static createDecoderResultFromAmbiguousValues(n,s,l,u,f){let g=new Int32Array(u.length),y=100;for(;y-- >0;){for(let w=0;w<g.length;w++)s[u[w]]=f[w][g[w]];try{return ct.decodeCodewords(s,n,l)}catch(w){if(!(w instanceof j))throw w}if(g.length===0)throw j.getChecksumInstance();for(let w=0;w<g.length;w++)if(g[w]<f[w].length-1){g[w]++;break}else if(g[w]=0,w===g.length-1)throw j.getChecksumInstance()}throw j.getChecksumInstance()}static createBarcodeMatrix(n){let s=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let f=0;f<s[u].length;f++)s[u][f]=new Ri;let l=0;for(let u of n.getDetectionResultColumns()){if(u!=null){for(let f of u.getCodewords())if(f!=null){let g=f.getRowNumber();if(g>=0){if(g>=s.length)continue;s[g][l].setValue(f.getValue())}}}l++}return s}static isValidBarcodeColumn(n,s){return s>=0&&s<=n.getBarcodeColumnCount()+1}static getStartColumn(n,s,l,u){let f=u?1:-1,g=null;if(ct.isValidBarcodeColumn(n,s-f)&&(g=n.getDetectionResultColumn(s-f).getCodeword(l)),g!=null)return u?g.getEndX():g.getStartX();if(g=n.getDetectionResultColumn(s).getCodewordNearby(l),g!=null)return u?g.getStartX():g.getEndX();if(ct.isValidBarcodeColumn(n,s-f)&&(g=n.getDetectionResultColumn(s-f).getCodewordNearby(l)),g!=null)return u?g.getEndX():g.getStartX();let y=0;for(;ct.isValidBarcodeColumn(n,s-f);){s-=f;for(let w of n.getDetectionResultColumn(s).getCodewords())if(w!=null)return(u?w.getEndX():w.getStartX())+f*y*(w.getEndX()-w.getStartX());y++}return u?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,s,l,u,f,g,y,w){f=ct.adjustCodewordStartColumn(n,s,l,u,f,g);let E=ct.getModuleBitCount(n,s,l,u,f,g);if(E==null)return null;let _,N=mt.sum(E);if(u)_=f+N;else{for(let F=0;F<E.length/2;F++){let V=E[F];E[F]=E[E.length-1-F],E[E.length-1-F]=V}_=f,f=_-N}if(!ct.checkCodewordSkew(N,y,w))return null;let I=Pn.getDecodedValue(E),L=Xe.getCodeword(I);return L===-1?null:new Ir(f,_,ct.getCodewordBucketNumber(I),L)}static getModuleBitCount(n,s,l,u,f,g){let y=f,w=new Int32Array(8),E=0,_=u?1:-1,N=u;for(;(u?y<l:y>=s)&&E<w.length;)n.get(y,g)===N?(w[E]++,y+=_):(E++,N=!N);return E===w.length||y===(u?l:s)&&E===w.length-1?w:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,s,l,u,f,g){let y=f,w=u?-1:1;for(let E=0;E<2;E++){for(;(u?y>=s:y<l)&&u===n.get(y,g);){if(Math.abs(f-y)>ct.CODEWORD_SKEW_SIZE)return f;y+=w}w=-w,u=!u}return y}static checkCodewordSkew(n,s,l){return s-ct.CODEWORD_SKEW_SIZE<=n&&n<=l+ct.CODEWORD_SKEW_SIZE}static decodeCodewords(n,s,l){if(n.length===0)throw J.getFormatInstance();let u=1<<s+1,f=ct.correctErrors(n,l,u);ct.verifyCodewordCount(n,u);let g=ae.decode(n,""+s);return g.setErrorsCorrected(f),g.setErasures(l.length),g}static correctErrors(n,s,l){if(s!=null&&s.length>l/2+ct.MAX_ERRORS||l<0||l>ct.MAX_EC_CODEWORDS)throw j.getChecksumInstance();return ct.errorCorrection.decode(n,l,s)}static verifyCodewordCount(n,s){if(n.length<4)throw J.getFormatInstance();let l=n[0];if(l>n.length)throw J.getFormatInstance();if(l===0)if(s<n.length)n[0]=n.length-s;else throw J.getFormatInstance()}static getBitCountForCodeword(n){let s=new Int32Array(8),l=0,u=s.length-1;for(;!((n&1)!==l&&(l=n&1,u--,u<0));)s[u]++,n>>=1;return s}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return ct.getCodewordBucketNumber(ct.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let s=new Ea;for(let l=0;l<n.length;l++){s.format("Row %2d: ",l);for(let u=0;u<n[l].length;u++){let f=n[l][u];f.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}s.format("%n")}return s.toString()}}ct.CODEWORD_SKEW_SIZE=2,ct.MAX_ERRORS=3,ct.MAX_EC_CODEWORDS=512,ct.errorCorrection=new di;class Fn{decode(n,s=null){let l=Fn.decode(n,s,!1);if(l==null||l.length===0||l[0]==null)throw ne.getNotFoundInstance();return l[0]}decodeMultiple(n,s=null){try{return Fn.decode(n,s,!0)}catch(l){throw l instanceof J||l instanceof j?ne.getNotFoundInstance():l}}static decode(n,s,l){const u=new Array,f=it.detectMultiple(n,s,l);for(const g of f.getPoints()){const y=ct.decode(f.getBits(),g[4],g[5],g[6],g[7],Fn.getMinCodewordWidth(g),Fn.getMaxCodewordWidth(g)),w=new ce(y.getText(),y.getRawBytes(),void 0,g,be.PDF_417);w.putMetadata(We.ERROR_CORRECTION_LEVEL,y.getECLevel());const E=y.getOther();E!=null&&w.putMetadata(We.PDF417_EXTRA_METADATA,E),u.push(w)}return u.map(g=>g)}static getMaxWidth(n,s){return n==null||s==null?0:Math.trunc(Math.abs(n.getX()-s.getX()))}static getMinWidth(n,s){return n==null||s==null?W.MAX_VALUE:Math.trunc(Math.abs(n.getX()-s.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(Fn.getMaxWidth(n[0],n[4]),Fn.getMaxWidth(n[6],n[2])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN),Math.max(Fn.getMaxWidth(n[1],n[5]),Fn.getMaxWidth(n[7],n[3])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(Fn.getMinWidth(n[0],n[4]),Fn.getMinWidth(n[6],n[2])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN),Math.min(Fn.getMinWidth(n[1],n[5]),Fn.getMinWidth(n[7],n[3])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN)))}reset(){}}class Js extends v{}Js.kind="ReaderException";class Ic{constructor(n,s){this.verbose=n===!0,s&&this.setHints(s)}decode(n,s){return s&&this.setHints(s),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const s=!o(n)&&n.get(Ae.TRY_HARDER)===!0,l=o(n)?null:n.get(Ae.POSSIBLE_FORMATS),u=new Array;if(!o(l)){const f=l.some(g=>g===be.UPC_A||g===be.UPC_E||g===be.EAN_13||g===be.EAN_8||g===be.CODABAR||g===be.CODE_39||g===be.CODE_93||g===be.CODE_128||g===be.ITF||g===be.RSS_14||g===be.RSS_EXPANDED);f&&!s&&u.push(new Nr(n,this.verbose)),l.includes(be.QR_CODE)&&u.push(new hi),l.includes(be.DATA_MATRIX)&&u.push(new fi),l.includes(be.AZTEC)&&u.push(new Gs),l.includes(be.PDF_417)&&u.push(new Fn),f&&s&&u.push(new Nr(n,this.verbose))}u.length===0&&(s||u.push(new Nr(n,this.verbose)),u.push(new hi),u.push(new fi),u.push(new Gs),u.push(new Fn),s&&u.push(new Nr(n,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new Js("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(n,this.hints)}catch(l){if(l instanceof Js)continue}throw new ne("No MultiFormat Readers were able to detect the code.")}}class kc extends Z{constructor(n=null,s=500){const l=new Ic;l.setHints(n),super(l,s)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class Bf extends Z{constructor(n=500){super(new Fn,n)}}class Lf extends Z{constructor(n=500){super(new hi,n)}}var gl;(function(O){O[O.ERROR_CORRECTION=0]="ERROR_CORRECTION",O[O.CHARACTER_SET=1]="CHARACTER_SET",O[O.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",O[O.MIN_SIZE=3]="MIN_SIZE",O[O.MAX_SIZE=4]="MAX_SIZE",O[O.MARGIN=5]="MARGIN",O[O.PDF417_COMPACT=6]="PDF417_COMPACT",O[O.PDF417_COMPACTION=7]="PDF417_COMPACTION",O[O.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",O[O.AZTEC_LAYERS=9]="AZTEC_LAYERS",O[O.QR_VERSION=10]="QR_VERSION"})(gl||(gl={}));var Tn=gl;class fs{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new et(n,Int32Array.from([1])))}buildGenerator(n){const s=this.cachedGenerators;if(n>=s.length){let l=s[s.length-1];const u=this.field;for(let f=s.length;f<=n;f++){const g=l.multiply(new et(u,Int32Array.from([1,u.exp(f-1+u.getGeneratorBase())])));s.push(g),l=g}}return s[n]}encode(n,s){if(s===0)throw new R("No error correction bytes");const l=n.length-s;if(l<=0)throw new R("No data bytes provided");const u=this.buildGenerator(s),f=new Int32Array(l);q.arraycopy(n,0,f,0,l);let g=new et(this.field,f);g=g.multiplyByMonomial(s,1);const w=g.divide(u)[1].getCoefficients(),E=s-w.length;for(let _=0;_<E;_++)n[l+_]=0;q.arraycopy(w,0,n,l+E,w.length)}}class fn{constructor(){}static applyMaskPenaltyRule1(n){return fn.applyMaskPenaltyRule1Internal(n,!0)+fn.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let s=0;const l=n.getArray(),u=n.getWidth(),f=n.getHeight();for(let g=0;g<f-1;g++){const y=l[g];for(let w=0;w<u-1;w++){const E=y[w];E===y[w+1]&&E===l[g+1][w]&&E===l[g+1][w+1]&&s++}}return fn.N2*s}static applyMaskPenaltyRule3(n){let s=0;const l=n.getArray(),u=n.getWidth(),f=n.getHeight();for(let g=0;g<f;g++)for(let y=0;y<u;y++){const w=l[g];y+6<u&&w[y]===1&&w[y+1]===0&&w[y+2]===1&&w[y+3]===1&&w[y+4]===1&&w[y+5]===0&&w[y+6]===1&&(fn.isWhiteHorizontal(w,y-4,y)||fn.isWhiteHorizontal(w,y+7,y+11))&&s++,g+6<f&&l[g][y]===1&&l[g+1][y]===0&&l[g+2][y]===1&&l[g+3][y]===1&&l[g+4][y]===1&&l[g+5][y]===0&&l[g+6][y]===1&&(fn.isWhiteVertical(l,y,g-4,g)||fn.isWhiteVertical(l,y,g+7,g+11))&&s++}return s*fn.N3}static isWhiteHorizontal(n,s,l){s=Math.max(s,0),l=Math.min(l,n.length);for(let u=s;u<l;u++)if(n[u]===1)return!1;return!0}static isWhiteVertical(n,s,l,u){l=Math.max(l,0),u=Math.min(u,n.length);for(let f=l;f<u;f++)if(n[f][s]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let s=0;const l=n.getArray(),u=n.getWidth(),f=n.getHeight();for(let w=0;w<f;w++){const E=l[w];for(let _=0;_<u;_++)E[_]===1&&s++}const g=n.getHeight()*n.getWidth();return Math.floor(Math.abs(s*2-g)*10/g)*fn.N4}static getDataMaskBit(n,s,l){let u,f;switch(n){case 0:u=l+s&1;break;case 1:u=l&1;break;case 2:u=s%3;break;case 3:u=(l+s)%3;break;case 4:u=Math.floor(l/2)+Math.floor(s/3)&1;break;case 5:f=l*s,u=(f&1)+f%3;break;case 6:f=l*s,u=(f&1)+f%3&1;break;case 7:f=l*s,u=f%3+(l+s&1)&1;break;default:throw new R("Invalid mask pattern: "+n)}return u===0}static applyMaskPenaltyRule1Internal(n,s){let l=0;const u=s?n.getHeight():n.getWidth(),f=s?n.getWidth():n.getHeight(),g=n.getArray();for(let y=0;y<u;y++){let w=0,E=-1;for(let _=0;_<f;_++){const N=s?g[y][_]:g[_][y];N===E?w++:(w>=5&&(l+=fn.N1+(w-5)),w=1,E=N)}w>=5&&(l+=fn.N1+(w-5))}return l}}fn.N1=3,fn.N2=3,fn.N3=40,fn.N4=10;class $s{constructor(n,s){this.width=n,this.height=s;const l=new Array(s);for(let u=0;u!==s;u++)l[u]=new Uint8Array(n);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(n,s){return this.bytes[s][n]}getArray(){return this.bytes}setNumber(n,s,l){this.bytes[s][n]=l}setBoolean(n,s,l){this.bytes[s][n]=l?1:0}clear(n){for(const s of this.bytes)se.fill(s,n)}equals(n){if(!(n instanceof $s))return!1;const s=n;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,u=this.height;l<u;++l){const f=this.bytes[l],g=s.bytes[l];for(let y=0,w=this.width;y<w;++y)if(f[y]!==g[y])return!1}return!0}toString(){const n=new qe;for(let s=0,l=this.height;s<l;++s){const u=this.bytes[s];for(let f=0,g=this.width;f<g;++f)switch(u[f]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class Fi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new qe;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<Fi.NUM_MASK_PATTERNS}}Fi.NUM_MASK_PATTERNS=8;class Lt extends v{}Lt.kind="WriterException";class Ze{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,s,l,u,f){Ze.clearMatrix(f),Ze.embedBasicPatterns(l,f),Ze.embedTypeInfo(s,u,f),Ze.maybeEmbedVersionInfo(l,f),Ze.embedDataBits(n,u,f)}static embedBasicPatterns(n,s){Ze.embedPositionDetectionPatternsAndSeparators(s),Ze.embedDarkDotAtLeftBottomCorner(s),Ze.maybeEmbedPositionAdjustmentPatterns(n,s),Ze.embedTimingPatterns(s)}static embedTypeInfo(n,s,l){const u=new me;Ze.makeTypeInfoBits(n,s,u);for(let f=0,g=u.getSize();f<g;++f){const y=u.get(u.getSize()-1-f),w=Ze.TYPE_INFO_COORDINATES[f],E=w[0],_=w[1];if(l.setBoolean(E,_,y),f<8){const N=l.getWidth()-f-1;l.setBoolean(N,8,y)}else{const I=l.getHeight()-7+(f-8);l.setBoolean(8,I,y)}}}static maybeEmbedVersionInfo(n,s){if(n.getVersionNumber()<7)return;const l=new me;Ze.makeVersionInfoBits(n,l);let u=17;for(let f=0;f<6;++f)for(let g=0;g<3;++g){const y=l.get(u);u--,s.setBoolean(f,s.getHeight()-11+g,y),s.setBoolean(s.getHeight()-11+g,f,y)}}static embedDataBits(n,s,l){let u=0,f=-1,g=l.getWidth()-1,y=l.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);y>=0&&y<l.getHeight();){for(let w=0;w<2;++w){const E=g-w;if(!Ze.isEmpty(l.get(E,y)))continue;let _;u<n.getSize()?(_=n.get(u),++u):_=!1,s!==255&&fn.getDataMaskBit(s,E,y)&&(_=!_),l.setBoolean(E,y,_)}y+=f}f=-f,y+=f,g-=2}if(u!==n.getSize())throw new Lt("Not all bits consumed: "+u+"/"+n.getSize())}static findMSBSet(n){return 32-W.numberOfLeadingZeros(n)}static calculateBCHCode(n,s){if(s===0)throw new R("0 polynomial");const l=Ze.findMSBSet(s);for(n<<=l-1;Ze.findMSBSet(n)>=l;)n^=s<<Ze.findMSBSet(n)-l;return n}static makeTypeInfoBits(n,s,l){if(!Fi.isValidMaskPattern(s))throw new Lt("Invalid mask pattern");const u=n.getBits()<<3|s;l.appendBits(u,5);const f=Ze.calculateBCHCode(u,Ze.TYPE_INFO_POLY);l.appendBits(f,10);const g=new me;if(g.appendBits(Ze.TYPE_INFO_MASK_PATTERN,15),l.xor(g),l.getSize()!==15)throw new Lt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(n,s){s.appendBits(n.getVersionNumber(),6);const l=Ze.calculateBCHCode(n.getVersionNumber(),Ze.VERSION_INFO_POLY);if(s.appendBits(l,12),s.getSize()!==18)throw new Lt("should not happen but we got: "+s.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let s=8;s<n.getWidth()-8;++s){const l=(s+1)%2;Ze.isEmpty(n.get(s,6))&&n.setNumber(s,6,l),Ze.isEmpty(n.get(6,s))&&n.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new Lt;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,s,l){for(let u=0;u<8;++u){if(!Ze.isEmpty(l.get(n+u,s)))throw new Lt;l.setNumber(n+u,s,0)}}static embedVerticalSeparationPattern(n,s,l){for(let u=0;u<7;++u){if(!Ze.isEmpty(l.get(n,s+u)))throw new Lt;l.setNumber(n,s+u,0)}}static embedPositionAdjustmentPattern(n,s,l){for(let u=0;u<5;++u){const f=Ze.POSITION_ADJUSTMENT_PATTERN[u];for(let g=0;g<5;++g)l.setNumber(n+g,s+u,f[g])}}static embedPositionDetectionPattern(n,s,l){for(let u=0;u<7;++u){const f=Ze.POSITION_DETECTION_PATTERN[u];for(let g=0;g<7;++g)l.setNumber(n+g,s+u,f[g])}}static embedPositionDetectionPatternsAndSeparators(n){const s=Ze.POSITION_DETECTION_PATTERN[0].length;Ze.embedPositionDetectionPattern(0,0,n),Ze.embedPositionDetectionPattern(n.getWidth()-s,0,n),Ze.embedPositionDetectionPattern(0,n.getWidth()-s,n);const l=8;Ze.embedHorizontalSeparationPattern(0,l-1,n),Ze.embedHorizontalSeparationPattern(n.getWidth()-l,l-1,n),Ze.embedHorizontalSeparationPattern(0,n.getWidth()-l,n);const u=7;Ze.embedVerticalSeparationPattern(u,0,n),Ze.embedVerticalSeparationPattern(n.getHeight()-u-1,0,n),Ze.embedVerticalSeparationPattern(u,n.getHeight()-u,n)}static maybeEmbedPositionAdjustmentPatterns(n,s){if(n.getVersionNumber()<2)return;const l=n.getVersionNumber()-1,u=Ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,g=u.length;f!==g;f++){const y=u[f];if(y>=0)for(let w=0;w!==g;w++){const E=u[w];E>=0&&Ze.isEmpty(s.get(E,y))&&Ze.embedPositionAdjustmentPattern(E-2,y-2,s)}}}}Ze.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ze.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ze.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ze.VERSION_INFO_POLY=7973,Ze.TYPE_INFO_POLY=1335,Ze.TYPE_INFO_MASK_PATTERN=21522;class Uf{constructor(n,s){this.dataBytes=n,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Jt{constructor(){}static calculateMaskPenalty(n){return fn.applyMaskPenaltyRule1(n)+fn.applyMaskPenaltyRule2(n)+fn.applyMaskPenaltyRule3(n)+fn.applyMaskPenaltyRule4(n)}static encode(n,s,l=null){let u=Jt.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(Tn.CHARACTER_SET)!==void 0;f&&(u=l.get(Tn.CHARACTER_SET).toString());const g=this.chooseMode(n,u),y=new me;if(g===Ve.BYTE&&(f||Jt.DEFAULT_BYTE_MODE_ENCODING!==u)){const Se=fe.getCharacterSetECIByName(u);Se!==void 0&&this.appendECI(Se,y)}this.appendModeInfo(g,y);const w=new me;this.appendBytes(n,g,w,u);let E;if(l!==null&&l.get(Tn.QR_VERSION)!==void 0){const Se=Number.parseInt(l.get(Tn.QR_VERSION).toString(),10);E=je.getVersionForNumber(Se);const Ee=this.calculateBitsNeeded(g,y,w,E);if(!this.willFit(Ee,E,s))throw new Lt("Data too big for requested version")}else E=this.recommendVersion(s,g,y,w);const _=new me;_.appendBitArray(y);const N=g===Ve.BYTE?w.getSizeInBytes():n.length;this.appendLengthInfo(N,E,g,_),_.appendBitArray(w);const I=E.getECBlocksForLevel(s),L=E.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(L,_);const F=this.interleaveWithECBytes(_,E.getTotalCodewords(),L,I.getNumBlocks()),V=new Fi;V.setECLevel(s),V.setMode(g),V.setVersion(E);const X=E.getDimensionForVersion(),ie=new $s(X,X),_e=this.chooseMaskPattern(F,s,E,ie);return V.setMaskPattern(_e),Ze.buildMatrix(F,s,E,_e,ie),V.setMatrix(ie),V}static recommendVersion(n,s,l,u){const f=this.calculateBitsNeeded(s,l,u,je.getVersionForNumber(1)),g=this.chooseVersion(f,n),y=this.calculateBitsNeeded(s,l,u,g);return this.chooseVersion(y,n)}static calculateBitsNeeded(n,s,l,u){return s.getSize()+n.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(n){return n<Jt.ALPHANUMERIC_TABLE.length?Jt.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,s=null){if(fe.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(n))return Ve.KANJI;let l=!1,u=!1;for(let f=0,g=n.length;f<g;++f){const y=n.charAt(f);if(Jt.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)u=!0;else return Ve.BYTE}return u?Ve.ALPHANUMERIC:l?Ve.NUMERIC:Ve.BYTE}static isOnlyDoubleByteKanji(n){let s;try{s=ft.encode(n,fe.SJIS)}catch{return!1}const l=s.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const f=s[u]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(n,s,l,u){let f=Number.MAX_SAFE_INTEGER,g=-1;for(let y=0;y<Fi.NUM_MASK_PATTERNS;y++){Ze.buildMatrix(n,s,l,y,u);let w=this.calculateMaskPenalty(u);w<f&&(f=w,g=y)}return g}static chooseVersion(n,s){for(let l=1;l<=40;l++){const u=je.getVersionForNumber(l);if(Jt.willFit(n,u,s))return u}throw new Lt("Data too big")}static willFit(n,s,l){const u=s.getTotalCodewords(),g=s.getECBlocksForLevel(l).getTotalECCodewords(),y=u-g,w=(n+7)/8;return y>=w}static terminateBits(n,s){const l=n*8;if(s.getSize()>l)throw new Lt("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let g=0;g<4&&s.getSize()<l;++g)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let g=u;g<8;g++)s.appendBit(!1);const f=n-s.getSizeInBytes();for(let g=0;g<f;++g)s.appendBits((g&1)===0?236:17,8);if(s.getSize()!==l)throw new Lt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,s,l,u,f,g){if(u>=l)throw new Lt("Block ID too large");const y=n%l,w=l-y,E=Math.floor(n/l),_=E+1,N=Math.floor(s/l),I=N+1,L=E-N,F=_-I;if(L!==F)throw new Lt("EC bytes mismatch");if(l!==w+y)throw new Lt("RS blocks mismatch");if(n!==(N+L)*w+(I+F)*y)throw new Lt("Total bytes mismatch");u<w?(f[0]=N,g[0]=L):(f[0]=I,g[0]=F)}static interleaveWithECBytes(n,s,l,u){if(n.getSizeInBytes()!==l)throw new Lt("Number of bits and data bytes does not match");let f=0,g=0,y=0;const w=new Array;for(let _=0;_<u;++_){const N=new Int32Array(1),I=new Int32Array(1);Jt.getNumDataBytesAndNumECBytesForBlockID(s,l,u,_,N,I);const L=N[0],F=new Uint8Array(L);n.toBytes(8*f,F,0,L);const V=Jt.generateECBytes(F,I[0]);w.push(new Uf(F,V)),g=Math.max(g,L),y=Math.max(y,V.length),f+=N[0]}if(l!==f)throw new Lt("Data bytes does not match offset");const E=new me;for(let _=0;_<g;++_)for(const N of w){const I=N.getDataBytes();_<I.length&&E.appendBits(I[_],8)}for(let _=0;_<y;++_)for(const N of w){const I=N.getErrorCorrectionBytes();_<I.length&&E.appendBits(I[_],8)}if(s!==E.getSizeInBytes())throw new Lt("Interleaving error: "+s+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(n,s){const l=n.length,u=new Int32Array(l+s);for(let g=0;g<l;g++)u[g]=n[g]&255;new fs(tt.QR_CODE_FIELD_256).encode(u,s);const f=new Uint8Array(s);for(let g=0;g<s;g++)f[g]=u[l+g];return f}static appendModeInfo(n,s){s.appendBits(n.getBits(),4)}static appendLengthInfo(n,s,l,u){const f=l.getCharacterCountBits(s);if(n>=1<<f)throw new Lt(n+" is bigger than "+((1<<f)-1));u.appendBits(n,f)}static appendBytes(n,s,l,u){switch(s){case Ve.NUMERIC:Jt.appendNumericBytes(n,l);break;case Ve.ALPHANUMERIC:Jt.appendAlphanumericBytes(n,l);break;case Ve.BYTE:Jt.append8BitBytes(n,l,u);break;case Ve.KANJI:Jt.appendKanjiBytes(n,l);break;default:throw new Lt("Invalid mode: "+s)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const s=Jt.getDigit(n);return s>=0&&s<=9}static appendNumericBytes(n,s){const l=n.length;let u=0;for(;u<l;){const f=Jt.getDigit(n.charAt(u));if(u+2<l){const g=Jt.getDigit(n.charAt(u+1)),y=Jt.getDigit(n.charAt(u+2));s.appendBits(f*100+g*10+y,10),u+=3}else if(u+1<l){const g=Jt.getDigit(n.charAt(u+1));s.appendBits(f*10+g,7),u+=2}else s.appendBits(f,4),u++}}static appendAlphanumericBytes(n,s){const l=n.length;let u=0;for(;u<l;){const f=Jt.getAlphanumericCode(n.charCodeAt(u));if(f===-1)throw new Lt;if(u+1<l){const g=Jt.getAlphanumericCode(n.charCodeAt(u+1));if(g===-1)throw new Lt;s.appendBits(f*45+g,11),u+=2}else s.appendBits(f,6),u++}}static append8BitBytes(n,s,l){let u;try{u=ft.encode(n,l)}catch(f){throw new Lt(f)}for(let f=0,g=u.length;f!==g;f++){const y=u[f];s.appendBits(y,8)}}static appendKanjiBytes(n,s){let l;try{l=ft.encode(n,fe.SJIS)}catch(f){throw new Lt(f)}const u=l.length;for(let f=0;f<u;f+=2){const g=l[f]&255,y=l[f+1]&255,w=g<<8&4294967295|y;let E=-1;if(w>=33088&&w<=40956?E=w-33088:w>=57408&&w<=60351&&(E=w-49472),E===-1)throw new Lt("Invalid byte sequence");const _=(E>>8)*192+(E&255);s.appendBits(_,13)}}static appendECI(n,s){s.appendBits(Ve.ECI.getBits(),4),s.appendBits(n.getValue(),8)}}Jt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Jt.DEFAULT_BYTE_MODE_ENCODING=fe.UTF8.getName();class zi{write(n,s,l,u=null){if(n.length===0)throw new R("Found empty contents");if(s<0||l<0)throw new R("Requested dimensions are too small: "+s+"x"+l);let f=dt.L,g=zi.QUIET_ZONE_SIZE;u!==null&&(u.get(Tn.ERROR_CORRECTION)!==void 0&&(f=dt.fromString(u.get(Tn.ERROR_CORRECTION).toString())),u.get(Tn.MARGIN)!==void 0&&(g=Number.parseInt(u.get(Tn.MARGIN).toString(),10)));const y=Jt.encode(n,f,u);return this.renderResult(y,s,l,g)}writeToDom(n,s,l,u,f=null){typeof n=="string"&&(n=document.querySelector(n));const g=this.write(s,l,u,f);n&&n.appendChild(g)}renderResult(n,s,l,u){const f=n.getMatrix();if(f===null)throw new ar;const g=f.getWidth(),y=f.getHeight(),w=g+u*2,E=y+u*2,_=Math.max(s,w),N=Math.max(l,E),I=Math.min(Math.floor(_/w),Math.floor(N/E)),L=Math.floor((_-g*I)/2),F=Math.floor((N-y*I)/2),V=this.createSVGElement(_,N);for(let X=0,ie=F;X<y;X++,ie+=I)for(let _e=0,Se=L;_e<g;_e++,Se+=I)if(f.get(_e,X)===1){const Ee=this.createSvgRectElement(Se,ie,I,I);V.appendChild(Ee)}return V}createSVGElement(n,s){const l=document.createElementNS(zi.SVG_NS,"svg");return l.setAttributeNS(null,"height",n.toString()),l.setAttributeNS(null,"width",s.toString()),l}createSvgRectElement(n,s,l,u){const f=document.createElementNS(zi.SVG_NS,"rect");return f.setAttributeNS(null,"x",n.toString()),f.setAttributeNS(null,"y",s.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",u.toString()),f.setAttributeNS(null,"fill","#000000"),f}}zi.QUIET_ZONE_SIZE=4,zi.SVG_NS="http://www.w3.org/2000/svg";class Aa{encode(n,s,l,u,f){if(n.length===0)throw new R("Found empty contents");if(s!==be.QR_CODE)throw new R("Can only encode QR_CODE, but got "+s);if(l<0||u<0)throw new R(`Requested dimensions are too small: ${l}x${u}`);let g=dt.L,y=Aa.QUIET_ZONE_SIZE;f!==null&&(f.get(Tn.ERROR_CORRECTION)!==void 0&&(g=dt.fromString(f.get(Tn.ERROR_CORRECTION).toString())),f.get(Tn.MARGIN)!==void 0&&(y=Number.parseInt(f.get(Tn.MARGIN).toString(),10)));const w=Jt.encode(n,g,f);return Aa.renderResult(w,l,u,y)}static renderResult(n,s,l,u){const f=n.getMatrix();if(f===null)throw new ar;const g=f.getWidth(),y=f.getHeight(),w=g+u*2,E=y+u*2,_=Math.max(s,w),N=Math.max(l,E),I=Math.min(Math.floor(_/w),Math.floor(N/E)),L=Math.floor((_-g*I)/2),F=Math.floor((N-y*I)/2),V=new $e(_,N);for(let X=0,ie=F;X<y;X++,ie+=I)for(let _e=0,Se=L;_e<g;_e++,Se+=I)f.get(_e,X)===1&&V.setRegion(Se,ie,I,I);return V}}Aa.QUIET_ZONE_SIZE=4;class jf{encode(n,s,l,u,f){let g;if(s===be.QR_CODE)g=new Aa;else throw new R("No encoder available for format "+s);return g.encode(n,s,l,u,f)}}class Kr extends we{constructor(n,s,l,u,f,g,y,w){if(super(g,y),this.yuvData=n,this.dataWidth=s,this.dataHeight=l,this.left=u,this.top=f,u+g>s||f+y>l)throw new R("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(g,y)}getRow(n,s){if(n<0||n>=this.getHeight())throw new R("Requested row is outside the image: "+n);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(n+this.top)*this.dataWidth+this.left;return q.arraycopy(this.yuvData,u,s,0,l),s}getMatrix(){const n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.yuvData;const l=n*s,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return q.arraycopy(this.yuvData,f,u,0,l),u;for(let g=0;g<s;g++){const y=g*n;q.arraycopy(this.yuvData,f,u,y,n),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(n,s,l,u){return new Kr(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+s,l,u,!1)}renderThumbnail(){const n=this.getWidth()/Kr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Kr.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(n*s),u=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let g=0;g<s;g++){const y=g*n;for(let w=0;w<n;w++){const E=u[f+w*Kr.THUMBNAIL_SCALE_FACTOR]&255;l[y+w]=4278190080|E*65793}f+=this.dataWidth*Kr.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Kr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Kr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,s){const l=this.yuvData;for(let u=0,f=this.top*this.dataWidth+this.left;u<s;u++,f+=this.dataWidth){const g=f+n/2;for(let y=f,w=f+n-1;y<g;y++,w--){const E=l[y];l[y]=l[w],l[w]=E}}}invert(){return new de(this)}}Kr.THUMBNAIL_SCALE_FACTOR=2;class ml extends we{constructor(n,s,l,u,f,g,y){if(super(s,l),this.dataWidth=u,this.dataHeight=f,this.left=g,this.top=y,n.BYTES_PER_ELEMENT===4){const w=s*l,E=new Uint8ClampedArray(w);for(let _=0;_<w;_++){const N=n[_],I=N>>16&255,L=N>>7&510,F=N&255;E[_]=(I+L+F)/4&255}this.luminances=E}else this.luminances=n;if(u===void 0&&(this.dataWidth=s),f===void 0&&(this.dataHeight=l),g===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new R("Crop rectangle does not fit within image data.")}getRow(n,s){if(n<0||n>=this.getHeight())throw new R("Requested row is outside the image: "+n);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(n+this.top)*this.dataWidth+this.left;return q.arraycopy(this.luminances,u,s,0,l),s}getMatrix(){const n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=n*s,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return q.arraycopy(this.luminances,f,u,0,l),u;for(let g=0;g<s;g++){const y=g*n;q.arraycopy(this.luminances,f,u,y,n),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(n,s,l,u){return new ml(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+n,this.top+s)}invert(){return new de(this)}}class Dc extends fe{static forName(n){return this.getCharacterSetECIByName(n)}}class hs{}hs.ISO_8859_1=fe.ISO8859_1;class _a{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class Mc{static singletonList(n){return[n]}static min(n,s){return n.sort(s)[0]}}class Bc{constructor(n){this.previous=n}getPrevious(){return this.previous}}class Vi extends Bc{constructor(n,s,l){super(n),this.value=s,this.bitCount=l}appendTo(n,s){n.appendBits(this.value,this.bitCount)}add(n,s){return new Vi(this,n,s)}addBinaryShift(n,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Vi(this,n,s)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+W.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class eo extends Vi{constructor(n,s,l){super(n,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(n,s){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):l===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(n,s){return new eo(this,n,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Lc(O,n,s){return new eo(O,n,s)}function Ca(O,n,s){return new Vi(O,n,s)}const Ta=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ki=0,to=1,xr=2,yl=3,kr=4,ds=new Vi(null,0,0),Hi=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Pf(O){for(let n of O)se.fill(n,-1);return O[ki][kr]=0,O[to][kr]=0,O[to][ki]=28,O[yl][kr]=0,O[xr][kr]=0,O[xr][ki]=15,O}const gs=Pf(se.createInt32Array(6,6));class Dr{constructor(n,s,l,u){this.token=n,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,s){let l=this.bitCount,u=this.token;if(n!==this.mode){let g=Hi[this.mode][n];u=Ca(u,g&65535,g>>16),l+=g>>16}let f=n===xr?4:5;return u=Ca(u,s,f),new Dr(u,n,0,l+f)}shiftAndAppend(n,s){let l=this.token,u=this.mode===xr?4:5;return l=Ca(l,gs[this.mode][n],u),l=Ca(l,s,5),new Dr(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(n){let s=this.token,l=this.mode,u=this.bitCount;if(this.mode===kr||this.mode===xr){let y=Hi[l][ki];s=Ca(s,y&65535,y>>16),u+=y>>16,l=ki}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new Dr(s,l,this.binaryShiftByteCount+1,u+f);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(n+1)),g}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Lc(s,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new Dr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let s=this.bitCount+(Hi[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?s+=Dr.calculateBinaryShiftCost(n)-Dr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(s+=10),s<=n.bitCount}toBitArray(n){let s=[];for(let u=this.endBinaryShift(n.length).token;u!==null;u=u.getPrevious())s.unshift(u);let l=new me;for(const u of s)u.appendTo(l,n);return l}toString(){return Oe.format("%s bits=%d bytes=%d",Ta[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}Dr.INITIAL_STATE=new Dr(ds,ki,0,0);function Uc(O){const n=Oe.getCharCode(" "),s=Oe.getCharCode("."),l=Oe.getCharCode(",");O[ki][n]=1;const u=Oe.getCharCode("Z"),f=Oe.getCharCode("A");for(let I=f;I<=u;I++)O[ki][I]=I-f+2;O[to][n]=1;const g=Oe.getCharCode("z"),y=Oe.getCharCode("a");for(let I=y;I<=g;I++)O[to][I]=I-y+2;O[xr][n]=1;const w=Oe.getCharCode("9"),E=Oe.getCharCode("0");for(let I=E;I<=w;I++)O[xr][I]=I-E+2;O[xr][l]=12,O[xr][s]=13;const _=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let I=0;I<_.length;I++)O[yl][Oe.getCharCode(_[I])]=I;const N=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let I=0;I<N.length;I++)Oe.getCharCode(N[I])>0&&(O[kr][Oe.getCharCode(N[I])]=I);return O}const ms=Uc(se.createInt32Array(5,256));class Gi{constructor(n){this.text=n}encode(){const n=Oe.getCharCode(" "),s=Oe.getCharCode(`
`);let l=Mc.singletonList(Dr.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let g,y=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case Oe.getCharCode("\r"):g=y===s?2:0;break;case Oe.getCharCode("."):g=y===n?3:0;break;case Oe.getCharCode(","):g=y===n?4:0;break;case Oe.getCharCode(":"):g=y===n?5:0;break;default:g=0}g>0?(l=Gi.updateStateListForPair(l,f,g),f++):l=this.updateStateListForChar(l,f)}return Mc.min(l,(f,g)=>f.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,s){const l=[];for(let u of n)this.updateStateForChar(u,s,l);return Gi.simplifyStates(l)}updateStateForChar(n,s,l){let u=this.text[s]&255,f=ms[n.getMode()][u]>0,g=null;for(let y=0;y<=kr;y++){let w=ms[y][u];if(w>0){if(g==null&&(g=n.endBinaryShift(s)),!f||y===n.getMode()||y===xr){const E=g.latchAndAppend(y,w);l.push(E)}if(!f&&gs[n.getMode()][y]>=0){const E=g.shiftAndAppend(y,w);l.push(E)}}}if(n.getBinaryShiftByteCount()>0||ms[n.getMode()][u]===0){let y=n.addBinaryShiftChar(s);l.push(y)}}static updateStateListForPair(n,s,l){const u=[];for(let f of n)this.updateStateForPair(f,s,l,u);return this.simplifyStates(u)}static updateStateForPair(n,s,l,u){let f=n.endBinaryShift(s);if(u.push(f.latchAndAppend(kr,l)),n.getMode()!==kr&&u.push(f.shiftAndAppend(kr,l)),l===3||l===4){let g=f.latchAndAppend(xr,16-l).latchAndAppend(xr,1);u.push(g)}if(n.getBinaryShiftByteCount()>0){let g=n.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(g)}}static simplifyStates(n){let s=[];for(const l of n){let u=!0;for(const f of s){if(f.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(f)&&(s=s.filter(g=>g!==f))}u&&s.push(l)}return s}}class bt{constructor(){}static encodeBytes(n){return bt.encode(n,bt.DEFAULT_EC_PERCENT,bt.DEFAULT_AZTEC_LAYERS)}static encode(n,s,l){let u=new Gi(n).encode(),f=W.truncDivision(u.getSize()*s,100)+11,g=u.getSize()+f,y,w,E,_,N;if(l!==bt.DEFAULT_AZTEC_LAYERS){if(y=l<0,w=Math.abs(l),w>(y?bt.MAX_NB_BITS_COMPACT:bt.MAX_NB_BITS))throw new R(Oe.format("Illegal value %s for layers",l));E=bt.totalBitsInLayer(w,y),_=bt.WORD_SIZE[w];let Ee=E-E%_;if(N=bt.stuffBits(u,_),N.getSize()+f>Ee)throw new R("Data to large for user specified layer");if(y&&N.getSize()>_*64)throw new R("Data to large for user specified layer")}else{_=0,N=null;for(let Ee=0;;Ee++){if(Ee>bt.MAX_NB_BITS)throw new R("Data too large for an Aztec code");if(y=Ee<=3,w=y?Ee+1:Ee,E=bt.totalBitsInLayer(w,y),g>E)continue;(N==null||_!==bt.WORD_SIZE[w])&&(_=bt.WORD_SIZE[w],N=bt.stuffBits(u,_));let ht=E-E%_;if(!(y&&N.getSize()>_*64)&&N.getSize()+f<=ht)break}}let I=bt.generateCheckWords(N,E,_),L=N.getSize()/_,F=bt.generateModeMessage(y,w,L),V=(y?11:14)+w*4,X=new Int32Array(V),ie;if(y){ie=V;for(let Ee=0;Ee<X.length;Ee++)X[Ee]=Ee}else{ie=V+1+2*W.truncDivision(W.truncDivision(V,2)-1,15);let Ee=W.truncDivision(V,2),ht=W.truncDivision(ie,2);for(let at=0;at<Ee;at++){let xn=at+W.truncDivision(at,15);X[Ee-at-1]=ht-xn-1,X[Ee+at]=ht+xn+1}}let _e=new $e(ie);for(let Ee=0,ht=0;Ee<w;Ee++){let at=(w-Ee)*4+(y?9:12);for(let xn=0;xn<at;xn++){let wr=xn*2;for(let Zn=0;Zn<2;Zn++)I.get(ht+wr+Zn)&&_e.set(X[Ee*2+Zn],X[Ee*2+xn]),I.get(ht+at*2+wr+Zn)&&_e.set(X[Ee*2+xn],X[V-1-Ee*2-Zn]),I.get(ht+at*4+wr+Zn)&&_e.set(X[V-1-Ee*2-Zn],X[V-1-Ee*2-xn]),I.get(ht+at*6+wr+Zn)&&_e.set(X[V-1-Ee*2-xn],X[Ee*2+Zn])}ht+=at*8}if(bt.drawModeMessage(_e,y,ie,F),y)bt.drawBullsEye(_e,W.truncDivision(ie,2),5);else{bt.drawBullsEye(_e,W.truncDivision(ie,2),7);for(let Ee=0,ht=0;Ee<W.truncDivision(V,2)-1;Ee+=15,ht+=16)for(let at=W.truncDivision(ie,2)&1;at<ie;at+=2)_e.set(W.truncDivision(ie,2)-ht,at),_e.set(W.truncDivision(ie,2)+ht,at),_e.set(at,W.truncDivision(ie,2)-ht),_e.set(at,W.truncDivision(ie,2)+ht)}let Se=new _a;return Se.setCompact(y),Se.setSize(ie),Se.setLayers(w),Se.setCodeWords(L),Se.setMatrix(_e),Se}static drawBullsEye(n,s,l){for(let u=0;u<l;u+=2)for(let f=s-u;f<=s+u;f++)n.set(f,s-u),n.set(f,s+u),n.set(s-u,f),n.set(s+u,f);n.set(s-l,s-l),n.set(s-l+1,s-l),n.set(s-l,s-l+1),n.set(s+l,s-l),n.set(s+l,s-l+1),n.set(s+l,s+l-1)}static generateModeMessage(n,s,l){let u=new me;return n?(u.appendBits(s-1,2),u.appendBits(l-1,6),u=bt.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(l-1,11),u=bt.generateCheckWords(u,40,4)),u}static drawModeMessage(n,s,l,u){let f=W.truncDivision(l,2);if(s)for(let g=0;g<7;g++){let y=f-3+g;u.get(g)&&n.set(y,f-5),u.get(g+7)&&n.set(f+5,y),u.get(20-g)&&n.set(y,f+5),u.get(27-g)&&n.set(f-5,y)}else for(let g=0;g<10;g++){let y=f-5+g+W.truncDivision(g,5);u.get(g)&&n.set(y,f-7),u.get(g+10)&&n.set(f+7,y),u.get(29-g)&&n.set(y,f+7),u.get(39-g)&&n.set(f-7,y)}}static generateCheckWords(n,s,l){let u=n.getSize()/l,f=new fs(bt.getGF(l)),g=W.truncDivision(s,l),y=bt.bitsToWords(n,l,g);f.encode(y,g-u);let w=s%l,E=new me;E.appendBits(0,w);for(const _ of Array.from(y))E.appendBits(_,l);return E}static bitsToWords(n,s,l){let u=new Int32Array(l),f,g;for(f=0,g=n.getSize()/s;f<g;f++){let y=0;for(let w=0;w<s;w++)y|=n.get(f*s+w)?1<<s-w-1:0;u[f]=y}return u}static getGF(n){switch(n){case 4:return tt.AZTEC_PARAM;case 6:return tt.AZTEC_DATA_6;case 8:return tt.AZTEC_DATA_8;case 10:return tt.AZTEC_DATA_10;case 12:return tt.AZTEC_DATA_12;default:throw new R("Unsupported word size "+n)}}static stuffBits(n,s){let l=new me,u=n.getSize(),f=(1<<s)-2;for(let g=0;g<u;g+=s){let y=0;for(let w=0;w<s;w++)(g+w>=u||n.get(g+w))&&(y|=1<<s-1-w);(y&f)===f?(l.appendBits(y&f,s),g--):(y&f)===0?(l.appendBits(y|1,s),g--):l.appendBits(y,s)}return l}static totalBitsInLayer(n,s){return((s?88:112)+16*n)*n}}bt.DEFAULT_EC_PERCENT=33,bt.DEFAULT_AZTEC_LAYERS=0,bt.MAX_NB_BITS=32,bt.MAX_NB_BITS_COMPACT=4,bt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ys{encode(n,s,l,u){return this.encodeWithHints(n,s,l,u,null)}encodeWithHints(n,s,l,u,f){let g=hs.ISO_8859_1,y=bt.DEFAULT_EC_PERCENT,w=bt.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(Tn.CHARACTER_SET)&&(g=Dc.forName(f.get(Tn.CHARACTER_SET).toString())),f.has(Tn.ERROR_CORRECTION)&&(y=W.parseInt(f.get(Tn.ERROR_CORRECTION).toString())),f.has(Tn.AZTEC_LAYERS)&&(w=W.parseInt(f.get(Tn.AZTEC_LAYERS).toString()))),ys.encodeLayers(n,s,l,u,g,y,w)}static encodeLayers(n,s,l,u,f,g,y){if(s!==be.AZTEC)throw new R("Can only encode AZTEC, but got "+s);let w=bt.encode(Oe.getBytes(n,f),g,y);return ys.renderResult(w,l,u)}static renderResult(n,s,l){let u=n.getMatrix();if(u==null)throw new ar;let f=u.getWidth(),g=u.getHeight(),y=Math.max(s,f),w=Math.max(l,g),E=Math.min(y/f,w/g),_=(y-f*E)/2,N=(w-g*E)/2,I=new $e(y,w);for(let L=0,F=N;L<g;L++,F+=E)for(let V=0,X=_;V<f;V++,X+=E)u.get(V,L)&&I.setRegion(X,F,E,E);return I}}i.AbstractExpandedDecoder=_n,i.ArgumentException=T,i.ArithmeticException=en,i.AztecCode=_a,i.AztecCodeReader=Gs,i.AztecCodeWriter=ys,i.AztecDecoder=Ft,i.AztecDetector=al,i.AztecDetectorResult=Sc,i.AztecEncoder=bt,i.AztecHighLevelEncoder=Gi,i.AztecPoint=Yn,i.BarcodeFormat=be,i.Binarizer=H,i.BinaryBitmap=U,i.BitArray=me,i.BitMatrix=$e,i.BitSource=Rr,i.BrowserAztecCodeReader=If,i.BrowserBarcodeReader=kf,i.BrowserCodeReader=Z,i.BrowserDatamatrixCodeReader=Ys,i.BrowserMultiFormatReader=kc,i.BrowserPDF417Reader=Bf,i.BrowserQRCodeReader=Lf,i.BrowserQRCodeSvgWriter=zi,i.CharacterSetECI=fe,i.ChecksumException=j,i.Code128Reader=Ce,i.Code39Reader=qt,i.DataMatrixDecodedBitStreamParser=ui,i.DataMatrixReader=fi,i.DecodeHintType=Ae,i.DecoderResult=Re,i.DefaultGridSampler=il,i.DetectorResult=Hs,i.EAN13Reader=Wr,i.EncodeHintType=Tn,i.Exception=v,i.FormatException=J,i.GenericGF=tt,i.GenericGFPoly=et,i.GlobalHistogramBinarizer=$,i.GridSampler=rl,i.GridSamplerInstance=Tr,i.HTMLCanvasElementLuminanceSource=le,i.HybridBinarizer=he,i.ITFReader=lt,i.IllegalArgumentException=R,i.IllegalStateException=ar,i.InvertedLuminanceSource=de,i.LuminanceSource=we,i.MathUtils=mt,i.MultiFormatOneDReader=Nr,i.MultiFormatReader=Ic,i.MultiFormatWriter=jf,i.NotFoundException=ne,i.OneDReader=tn,i.PDF417DecodedBitStreamParser=ae,i.PDF417DecoderErrorCorrection=di,i.PDF417Reader=Fn,i.PDF417ResultMetadata=Sa,i.PerspectiveTransform=mr,i.PlanarYUVLuminanceSource=Kr,i.QRCodeByteMatrix=$s,i.QRCodeDataMask=cr,i.QRCodeDecodedBitStreamParser=Kt,i.QRCodeDecoderErrorCorrectionLevel=dt,i.QRCodeDecoderFormatInformation=Rn,i.QRCodeEncoder=Jt,i.QRCodeEncoderQRCode=Fi,i.QRCodeMaskUtil=fn,i.QRCodeMatrixUtil=Ze,i.QRCodeMode=Ve,i.QRCodeReader=hi,i.QRCodeVersion=je,i.QRCodeWriter=Aa,i.RGBLuminanceSource=ml,i.RSS14Reader=Bt,i.RSSExpandedReader=ve,i.ReaderException=Js,i.ReedSolomonDecoder=Cr,i.ReedSolomonEncoder=fs,i.ReedSolomonException=rn,i.Result=ce,i.ResultMetadataType=We,i.ResultPoint=Me,i.StringUtils=Oe,i.UnsupportedOperationException=Mt,i.VideoInputDevice=B,i.WhiteRectangleDetector=dn,i.WriterException=Lt,i.ZXingArrays=se,i.ZXingCharset=Dc,i.ZXingInteger=W,i.ZXingStandardCharsets=hs,i.ZXingStringBuilder=qe,i.ZXingStringEncoding=ft,i.ZXingSystem=q,i.createAbstractExpandedDecoder=ya,Object.defineProperty(i,"__esModule",{value:!0})}))})(rc,rc.exports)),rc.exports}var cn=YC();const XC=Np(cn),ZC=qb({__proto__:null,default:XC},[cn]);var _y=(function(){function a(e,i,o){if(this.formatMap=new Map([[De.QR_CODE,cn.BarcodeFormat.QR_CODE],[De.AZTEC,cn.BarcodeFormat.AZTEC],[De.CODABAR,cn.BarcodeFormat.CODABAR],[De.CODE_39,cn.BarcodeFormat.CODE_39],[De.CODE_93,cn.BarcodeFormat.CODE_93],[De.CODE_128,cn.BarcodeFormat.CODE_128],[De.DATA_MATRIX,cn.BarcodeFormat.DATA_MATRIX],[De.MAXICODE,cn.BarcodeFormat.MAXICODE],[De.ITF,cn.BarcodeFormat.ITF],[De.EAN_13,cn.BarcodeFormat.EAN_13],[De.EAN_8,cn.BarcodeFormat.EAN_8],[De.PDF_417,cn.BarcodeFormat.PDF_417],[De.RSS_14,cn.BarcodeFormat.RSS_14],[De.RSS_EXPANDED,cn.BarcodeFormat.RSS_EXPANDED],[De.UPC_A,cn.BarcodeFormat.UPC_A],[De.UPC_E,cn.BarcodeFormat.UPC_E],[De.UPC_EAN_EXTENSION,cn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ZC)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=i,this.logger=o;var d=this.createZXingFormats(e),m=new Map;m.set(cn.DecodeHintType.POSSIBLE_FORMATS,d),m.set(cn.DecodeHintType.TRY_HARDER,!1),this.hints=m}return a.prototype.decodeAsync=function(e){var i=this;return new Promise(function(o,d){try{o(i.decode(e))}catch(m){d(m)}})},a.prototype.decode=function(e){var i=new cn.MultiFormatReader(this.verbose,this.hints),o=new cn.HTMLCanvasElementLuminanceSource(e),d=new cn.BinaryBitmap(new cn.HybridBinarizer(o)),m=i.decode(d);return{text:m.text,format:vx.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(i,o,d){e.set(i,o)}),e},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createZXingFormats=function(e){for(var i=[],o=0,d=e;o<d.length;o++){var m=d[o];this.formatMap.has(m)?i.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return i},a.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},a})(),KC=function(a,e,i,o){function d(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function A(T){try{v(o.next(T))}catch(R){x(R)}}function S(T){try{v(o.throw(T))}catch(R){x(R)}}function v(T){T.done?m(T.value):d(T.value).then(A,S)}v((o=o.apply(a,e||[])).next())})},QC=function(a,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,d,m,x;return x={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function A(v){return function(T){return S([v,T])}}function S(v){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,v[0]&&(i=0)),i;)try{if(o=1,d&&(m=v[0]&2?d.return:v[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,v[1])).done)return m;switch(d=0,m&&(v=[v[0]&2,m.value]),v[0]){case 0:case 1:m=v;break;case 4:return i.label++,{value:v[1],done:!1};case 5:i.label++,d=v[1],v=[0];continue;case 7:v=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(v[0]===6||v[0]===2)){i=0;continue}if(v[0]===3&&(!m||v[1]>m[0]&&v[1]<m[3])){i.label=v[1];break}if(v[0]===6&&i.label<m[1]){i.label=m[1],m=v;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(v);break}m[2]&&i.ops.pop(),i.trys.pop();continue}v=e.call(a,i)}catch(T){v=[6,T],d=0}finally{o=m=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Cy=(function(){function a(e,i,o){if(this.formatMap=new Map([[De.QR_CODE,"qr_code"],[De.AZTEC,"aztec"],[De.CODABAR,"codabar"],[De.CODE_39,"code_39"],[De.CODE_93,"code_93"],[De.CODE_128,"code_128"],[De.DATA_MATRIX,"data_matrix"],[De.ITF,"itf"],[De.EAN_13,"ean_13"],[De.EAN_8,"ean_8"],[De.PDF_417,"pdf417"],[De.UPC_A,"upc_a"],[De.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!a.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=i,this.logger=o;var d=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(d),!this.detector)throw"BarcodeDetector detector not supported"}return a.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},a.prototype.decodeAsync=function(e){return KC(this,void 0,void 0,function(){var i,o;return QC(this,function(d){switch(d.label){case 0:return[4,this.detector.detect(e)];case 1:if(i=d.sent(),!i||i.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(i),[2,{text:o.rawValue,format:vx.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},a.prototype.selectLargestBarcode=function(e){for(var i=null,o=0,d=0,m=e;d<m.length;d++){var x=m[d],A=x.boundingBox.width*x.boundingBox.height;A>o&&(o=A,i=x)}if(!i)throw"No largest barcode found";return i},a.prototype.createBarcodeDetectorFormats=function(e){for(var i=[],o=0,d=e;o<d.length;o++){var m=d[o];this.formatMap.has(m)?i.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:i}},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(i,o,d){e.set(i,o)}),e},a.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},a})(),Ty=function(a,e,i,o){function d(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function A(T){try{v(o.next(T))}catch(R){x(R)}}function S(T){try{v(o.throw(T))}catch(R){x(R)}}function v(T){T.done?m(T.value):d(T.value).then(A,S)}v((o=o.apply(a,e||[])).next())})},Oy=function(a,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,d,m,x;return x={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function A(v){return function(T){return S([v,T])}}function S(v){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,v[0]&&(i=0)),i;)try{if(o=1,d&&(m=v[0]&2?d.return:v[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,v[1])).done)return m;switch(d=0,m&&(v=[v[0]&2,m.value]),v[0]){case 0:case 1:m=v;break;case 4:return i.label++,{value:v[1],done:!1};case 5:i.label++,d=v[1],v=[0];continue;case 7:v=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(v[0]===6||v[0]===2)){i=0;continue}if(v[0]===3&&(!m||v[1]>m[0]&&v[1]<m[3])){i.label=v[1];break}if(v[0]===6&&i.label<m[1]){i.label=m[1],m=v;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(v);break}m[2]&&i.ops.pop(),i.trys.pop();continue}v=e.call(a,i)}catch(T){v=[6,T],d=0}finally{o=m=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},JC=(function(){function a(e,i,o,d){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,i&&Cy.isSupported()?(this.primaryDecoder=new Cy(e,o,d),this.secondaryDecoder=new _y(e,o,d)):this.primaryDecoder=new _y(e,o,d)}return a.prototype.decodeAsync=function(e){return Ty(this,void 0,void 0,function(){var i;return Oy(this,function(o){switch(o.label){case 0:i=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(i),[7];case 4:return[2]}})})},a.prototype.decodeRobustlyAsync=function(e){return Ty(this,void 0,void 0,function(){var i,o;return Oy(this,function(d){switch(d.label){case 0:i=performance.now(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,d.sent()];case 3:if(o=d.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(i),[7];case 5:return[2]}})})},a.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},a.prototype.possiblyLogPerformance=function(e){if(this.verbose){var i=performance.now()-e;this.executionResults.push(i),this.executions++,this.possiblyFlushPerformanceReport()}},a.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,i=0,o=this.executionResults;i<o.length;i++){var d=o[i];e+=d}var m=e/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},a})(),l1=(function(){var a=function(e,i){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,d){o.__proto__=d}||function(o,d){for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(o[m]=d[m])},a(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");a(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}})(),hf=function(a,e,i,o){function d(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function A(T){try{v(o.next(T))}catch(R){x(R)}}function S(T){try{v(o.throw(T))}catch(R){x(R)}}function v(T){T.done?m(T.value):d(T.value).then(A,S)}v((o=o.apply(a,e||[])).next())})},df=function(a,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,d,m,x;return x={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function A(v){return function(T){return S([v,T])}}function S(v){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,v[0]&&(i=0)),i;)try{if(o=1,d&&(m=v[0]&2?d.return:v[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,v[1])).done)return m;switch(d=0,m&&(v=[v[0]&2,m.value]),v[0]){case 0:case 1:m=v;break;case 4:return i.label++,{value:v[1],done:!1};case 5:i.label++,d=v[1],v=[0];continue;case 7:v=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(v[0]===6||v[0]===2)){i=0;continue}if(v[0]===3&&(!m||v[1]>m[0]&&v[1]<m[3])){i.label=v[1];break}if(v[0]===6&&i.label<m[1]){i.label=m[1],m=v;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(v);break}m[2]&&i.ops.pop(),i.trys.pop();continue}v=e.call(a,i)}catch(T){v=[6,T],d=0}finally{o=m=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Sx=(function(){function a(e,i){this.name=e,this.track=i}return a.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},a.prototype.apply=function(e){var i={};i[this.name]=e;var o={advanced:[i]};return this.track.applyConstraints(o)},a.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var i=e[this.name];return i}return null},a})(),$C=(function(a){l1(e,a);function e(i,o){return a.call(this,i,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(i){var o={};o[this.name]=i;var d={advanced:[o]};return this.track.applyConstraints(d)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var i=this.track.getCapabilities(),o=i[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(Sx),e4=(function(a){l1(e,a);function e(i){return a.call(this,"zoom",i)||this}return e})($C),t4=(function(a){l1(e,a);function e(i){return a.call(this,"torch",i)||this}return e})(Sx),n4=(function(){function a(e){this.track=e}return a.prototype.zoomFeature=function(){return new e4(this.track)},a.prototype.torchFeature=function(){return new t4(this.track)},a})(),r4=(function(){function a(e,i,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=i,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return a.prototype.createVideoElement=function(e){var i=document.createElement("video");return i.style.width="".concat(e,"px"),i.style.display="block",i.muted=!0,i.setAttribute("muted","true"),i.playsInline=!0,i},a.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var i=function(){var o=e.surface.clientWidth,d=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,d),e.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.srcObject=this.mediaStream,this.surface.play()},a.create=function(e,i,o,d){return hf(this,void 0,void 0,function(){var m,x;return df(this,function(A){switch(A.label){case 0:return m=new a(e,i,d),o.aspectRatio?(x={aspectRatio:o.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:A.sent(),A.label=2;case 2:return m.setupSurface(),[2,m]}})})},a.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},a.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},a.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},a.prototype.resume=function(e){this.failIfClosed();var i=this,o=function(){setTimeout(e,200),i.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},a.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},a.prototype.getSurface=function(){return this.failIfClosed(),this.surface},a.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},a.prototype.applyVideoConstraints=function(e){return hf(this,void 0,void 0,function(){return df(this,function(i){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},a.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(i,o){var d=e.mediaStream.getVideoTracks(),m=d.length,x=0;e.mediaStream.getVideoTracks().forEach(function(A){e.mediaStream.removeTrack(A),A.stop(),++x,x>=m&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),i())})})},a.prototype.getCapabilities=function(){return new n4(this.getFirstTrackOrFail())},a})(),i4=(function(){function a(e){this.mediaStream=e}return a.prototype.render=function(e,i,o){return hf(this,void 0,void 0,function(){return df(this,function(d){return[2,r4.create(e,this.mediaStream,i,o)]})})},a.create=function(e){return hf(this,void 0,void 0,function(){var i,o;return df(this,function(d){switch(d.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return i={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(i)];case 1:return o=d.sent(),[2,new a(o)]}})})},a})(),Ny=function(a,e,i,o){function d(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function A(T){try{v(o.next(T))}catch(R){x(R)}}function S(T){try{v(o.throw(T))}catch(R){x(R)}}function v(T){T.done?m(T.value):d(T.value).then(A,S)}v((o=o.apply(a,e||[])).next())})},Ry=function(a,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,d,m,x;return x={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function A(v){return function(T){return S([v,T])}}function S(v){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,v[0]&&(i=0)),i;)try{if(o=1,d&&(m=v[0]&2?d.return:v[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,v[1])).done)return m;switch(d=0,m&&(v=[v[0]&2,m.value]),v[0]){case 0:case 1:m=v;break;case 4:return i.label++,{value:v[1],done:!1};case 5:i.label++,d=v[1],v=[0];continue;case 7:v=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(v[0]===6||v[0]===2)){i=0;continue}if(v[0]===3&&(!m||v[1]>m[0]&&v[1]<m[3])){i.label=v[1];break}if(v[0]===6&&i.label<m[1]){i.label=m[1],m=v;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(v);break}m[2]&&i.ops.pop(),i.trys.pop();continue}v=e.call(a,i)}catch(T){v=[6,T],d=0}finally{o=m=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},a4=(function(){function a(){}return a.failIfNotSupported=function(){return Ny(this,void 0,void 0,function(){return Ry(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new a]})})},a.prototype.create=function(e){return Ny(this,void 0,void 0,function(){return Ry(this,function(i){return[2,i4.create(e)]})})},a})(),s4=function(a,e,i,o){function d(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function A(T){try{v(o.next(T))}catch(R){x(R)}}function S(T){try{v(o.throw(T))}catch(R){x(R)}}function v(T){T.done?m(T.value):d(T.value).then(A,S)}v((o=o.apply(a,e||[])).next())})},o4=function(a,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,d,m,x;return x={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function A(v){return function(T){return S([v,T])}}function S(v){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,v[0]&&(i=0)),i;)try{if(o=1,d&&(m=v[0]&2?d.return:v[0]?d.throw||((m=d.return)&&m.call(d),0):d.next)&&!(m=m.call(d,v[1])).done)return m;switch(d=0,m&&(v=[v[0]&2,m.value]),v[0]){case 0:case 1:m=v;break;case 4:return i.label++,{value:v[1],done:!1};case 5:i.label++,d=v[1],v=[0];continue;case 7:v=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(v[0]===6||v[0]===2)){i=0;continue}if(v[0]===3&&(!m||v[1]>m[0]&&v[1]<m[3])){i.label=v[1];break}if(v[0]===6&&i.label<m[1]){i.label=m[1],m=v;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(v);break}m[2]&&i.ops.pop(),i.trys.pop();continue}v=e.call(a,i)}catch(T){v=[6,T],d=0}finally{o=m=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},l4=(function(){function a(){}return a.retrieve=function(){if(navigator.mediaDevices)return a.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?a.getCamerasFromMediaStreamTrack():a.rejectWithError()},a.rejectWithError=function(){var e=Go.unableToQuerySupportedDevices();return a.isHttpsOrLocalhost()||(e=Go.insecureContextCameraQueryError()),Promise.reject(e)},a.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},a.getCamerasFromMediaDevices=function(){return s4(this,void 0,void 0,function(){var e,i,o,d,m,x,A;return o4(this,function(S){switch(S.label){case 0:return e=function(v){for(var T=v.getVideoTracks(),R=0,U=T;R<U.length;R++){var j=U[R];j.enabled=!1,j.stop(),v.removeTrack(j)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return i=S.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=S.sent(),d=[],m=0,x=o;m<x.length;m++)A=x[m],A.kind==="videoinput"&&d.push({id:A.deviceId,label:A.label});return e(i),[2,d]}})})},a.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,i){var o=function(m){for(var x=[],A=0,S=m;A<S.length;A++){var v=S[A];v.kind==="video"&&x.push({id:v.id,label:v.label})}e(x)},d=MediaStreamTrack;d.getSources(o)})},a})(),mn;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.NOT_STARTED=1]="NOT_STARTED",a[a.SCANNING=2]="SCANNING",a[a.PAUSED=3]="PAUSED"})(mn||(mn={}));var c4=(function(){function a(){this.state=mn.NOT_STARTED,this.onGoingTransactionNewState=mn.UNKNOWN}return a.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},a.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},a.prototype.execute=function(){if(this.onGoingTransactionNewState===mn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=mn.UNKNOWN,this.directTransition(e)},a.prototype.cancel=function(){if(this.onGoingTransactionNewState===mn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=mn.UNKNOWN},a.prototype.getState=function(){return this.state},a.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==mn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},a.prototype.validateTransition=function(e){switch(this.state){case mn.UNKNOWN:throw"Transition from unknown is not allowed";case mn.NOT_STARTED:this.failIfNewStateIs(e,[mn.PAUSED]);break;case mn.SCANNING:break;case mn.PAUSED:break}},a.prototype.failIfNewStateIs=function(e,i){for(var o=0,d=i;o<d.length;o++){var m=d[o];if(e===m)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},a})(),u4=(function(){function a(e){this.stateManager=e}return a.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},a.prototype.directTransition=function(e){this.stateManager.directTransition(e)},a.prototype.getState=function(){return this.stateManager.getState()},a.prototype.canScanFile=function(){return this.stateManager.getState()===mn.NOT_STARTED},a.prototype.isScanning=function(){return this.stateManager.getState()!==mn.NOT_STARTED},a.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===mn.SCANNING},a.prototype.isPaused=function(){return this.stateManager.getState()===mn.PAUSED},a})(),f4=(function(){function a(){}return a.create=function(){return new u4(new c4)},a})(),h4=(function(){var a=function(e,i){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,d){o.__proto__=d}||function(o,d){for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(o[m]=d[m])},a(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");a(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}})(),zr=(function(a){h4(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(HC),d4=(function(){function a(e,i){this.logger=i,this.fps=zr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=zr.DEFAULT_DISABLE_FLIP}return a.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Ex.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},a.prototype.isShadedBoxEnabled=function(){return!ca(this.qrbox)},a.create=function(e,i){return new a(e,i)},a})(),g4=(function(){function a(e,i){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof i=="boolean"?this.verbose=i===!0:i&&(o=i,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new qC(this.verbose),this.qrcode=new JC(this.getSupportedFormats(i),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=f4.create()}return a.prototype.start=function(e,i,o,d){var m=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;d?x=d:x=this.verbose?this.logger.log:function(){};var A=d4.create(i,this.logger);this.clearElement();var S=!1;A.videoConstraints&&(A.isMediaStreamConstraintsValid()?S=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var v=S,T=document.getElementById(this.elementId);T.clientWidth?T.clientWidth:zr.DEFAULT_WIDTH,T.style.position="relative",this.shouldScan=!0,this.element=T;var R=this,U=this.stateManagerProxy.startTransition(mn.SCANNING);return new Promise(function(j,H){var q=v?A.videoConstraints:R.createVideoConstraints(e);if(!q){U.cancel(),H("videoConstraints should be defined");return}var Q={};(!v||A.aspectRatio)&&(Q.aspectRatio=A.aspectRatio);var ue={onRenderSurfaceReady:function(se,W){R.setupUi(se,W,A),R.isScanning=!0,R.foreverScan(A,o,x)}};a4.failIfNotSupported().then(function(se){se.create(q).then(function(W){return W.render(m.element,Q,ue).then(function(me){R.renderedCamera=me,U.execute(),j(null)}).catch(function(me){U.cancel(),H(me)})}).catch(function(W){U.cancel(),H(Go.errorGettingUserMedia(W))})}).catch(function(se){U.cancel(),H(Go.cameraStreamingNotSupported())})})},a.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(mn.PAUSED),this.showPausedState(),(ca(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},a.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,i=function(){e.stateManagerProxy.directTransition(mn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){i();return}this.renderedCamera.resume(function(){i()})},a.prototype.getState=function(){return this.stateManagerProxy.getState()},a.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var i=this.stateManagerProxy.startTransition(mn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var m=document.getElementById(zr.SHADED_REGION_ELEMENT_ID);m&&e.element.removeChild(m)}},d=this;return this.renderedCamera.close().then(function(){return d.renderedCamera=null,d.element&&(d.element.removeChild(d.canvasElement),d.canvasElement=null),o(),d.qrRegion&&(d.qrRegion=null),d.context&&(d.context=null),i.execute(),d.hidePausedState(),d.isScanning=!1,Promise.resolve()})},a.prototype.scanFile=function(e,i){return this.scanFileV2(e,i).then(function(o){return o.decodedText})},a.prototype.scanFileV2=function(e,i){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ca(i)&&(i=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(d,m){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var x=new Image;x.onload=function(){var A=x.width,S=x.height,v=document.getElementById(o.elementId),T=v.clientWidth?v.clientWidth:zr.DEFAULT_WIDTH,R=Math.max(v.clientHeight?v.clientHeight:S,zr.FILE_SCAN_MIN_HEIGHT),U=o.computeCanvasDrawConfig(A,S,T,R);if(i){var j=o.createCanvasElement(T,R,"qr-canvas-visible");j.style.display="inline-block",v.appendChild(j);var H=j.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=T,H.canvas.height=R,H.drawImage(x,0,0,A,S,U.x,U.y,U.width,U.height)}var q=zr.FILE_SCAN_HIDDEN_CANVAS_PADDING,Q=Math.max(x.width,U.width),ue=Math.max(x.height,U.height),se=Q+2*q,W=ue+2*q,me=o.createCanvasElement(se,W);v.appendChild(me);var Pe=me.getContext("2d");if(!Pe)throw"Unable to get 2d context from canvas";Pe.canvas.width=se,Pe.canvas.height=W,Pe.drawImage(x,0,0,A,S,q,q,Q,ue);try{o.qrcode.decodeRobustlyAsync(me).then(function(Ae){d(Sy.createFromQrcodeResult(Ae))}).catch(m)}catch(Ae){m("QR code parse error, error = ".concat(Ae))}},x.onerror=m,x.onabort=m,x.onstalled=m,x.onsuspend=m,x.src=URL.createObjectURL(e)})},a.prototype.clear=function(){this.clearElement()},a.getCameras=function(){return l4.retrieve()},a.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},a.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},a.prototype.applyVideoConstraints=function(e){if(e){if(!Ex.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},a.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},a.prototype.getSupportedFormats=function(e){var i=[De.QR_CODE,De.AZTEC,De.CODABAR,De.CODE_39,De.CODE_93,De.CODE_128,De.DATA_MATRIX,De.MAXICODE,De.ITF,De.EAN_13,De.EAN_8,De.PDF_417,De.RSS_14,De.RSS_EXPANDED,De.UPC_A,De.UPC_E,De.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return i;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],d=0,m=e.formatsToSupport;d<m.length;d++){var x=m[d];VC(x)?o.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},a.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ca(e))return!0;if(!ca(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ca(e.experimentalFeatures))return!0;var i=e.experimentalFeatures;return ca(i.useBarCodeDetectorIfSupported)?!0:i.useBarCodeDetectorIfSupported!==!1},a.prototype.validateQrboxSize=function(e,i,o){var d=this,m=o.qrbox;this.validateQrboxConfig(m);var x=this.toQrdimensions(e,i,m),A=function(v){if(v<zr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(zr.MIN_QR_BOX_SIZE,"px.")},S=function(v){return v>e&&(d.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),v=e),v};A(x.width),A(x.height),x.width=S(x.width)},a.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},a.prototype.toQrdimensions=function(e,i,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,i)}catch(d){throw new Error("qrbox config was passed as a function but it failed with unknown error"+d)}return o},a.prototype.setupUi=function(e,i,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,i,o);var d=ca(o.qrbox)?{width:e,height:i}:o.qrbox;this.validateQrboxConfig(d);var m=this.toQrdimensions(e,i,d);m.height>i&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=o.isShadedBoxEnabled()&&m.height<=i,A={x:0,y:0,width:e,height:i},S=x?this.getShadedRegionBounds(e,i,m):A,v=this.createCanvasElement(S.width,S.height),T={willReadFrequently:!0},R=v.getContext("2d",T);R.canvas.width=S.width,R.canvas.height=S.height,this.element.append(v),x&&this.possiblyInsertShadingElement(this.element,e,i,m),this.createScannerPausedUiElement(this.element),this.qrRegion=S,this.context=R,this.canvasElement=v},a.prototype.createScannerPausedUiElement=function(e){var i=document.createElement("div");i.innerText=Go.scannerPaused(),i.style.display="none",i.style.position="absolute",i.style.top="0px",i.style.zIndex="1",i.style.background="rgba(9, 9, 9, 0.46)",i.style.color="#FFECEC",i.style.textAlign="center",i.style.width="100%",e.appendChild(i),this.scannerPausedUiElement=i},a.prototype.scanContext=function(e,i){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(d){return e(d.text,Sy.createFromQrcodeResult(d)),o.possiblyUpdateShaders(!0),!0}).catch(function(d){o.possiblyUpdateShaders(!1);var m=Go.codeParseError(d);return i(m,GC.createFrom(m)),!1})},a.prototype.foreverScan=function(e,i,o){var d=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),x=m.videoWidth/m.clientWidth,A=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var S=this.qrRegion.width*x,v=this.qrRegion.height*A,T=this.qrRegion.x*x,R=this.qrRegion.y*A;this.context.drawImage(m,T,R,S,v,0,0,this.qrRegion.width,this.qrRegion.height);var U=function(){d.foreverScanTimeout=setTimeout(function(){d.foreverScan(e,i,o)},d.getTimeoutFps(e.fps))};this.scanContext(i,o).then(function(j){!j&&e.disableFlip!==!0?(d.context.translate(d.context.canvas.width,0),d.context.scale(-1,1),d.scanContext(i,o).finally(function(){U()})):U()}).catch(function(j){d.logger.logError("Error happend while scanning context",j),U()})}},a.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var i="facingMode",o="deviceId",d={user:!0,environment:!0},m="exact",x=function(H){if(H in d)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(H,"'")},A=Object.keys(e);if(A.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(A.length," keys");var S=Object.keys(e)[0];if(S!==i&&S!==o)throw"Only '".concat(i,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(S===i){var v=e.facingMode;if(typeof v=="string"){if(x(v))return{facingMode:v}}else if(typeof v=="object")if(m in v){if(x(v["".concat(m)]))return{facingMode:{exact:v["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var T=typeof v;throw"Invalid type of 'facingMode' = ".concat(T)}}else{var R=e.deviceId;if(typeof R=="string")return{deviceId:R};if(typeof R=="object"){if(m in R)return{deviceId:{exact:R["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var U=typeof R;throw"Invalid type of 'deviceId' = ".concat(U)}}}var j=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(j)},a.prototype.computeCanvasDrawConfig=function(e,i,o,d){if(e<=o&&i<=d){var m=(o-e)/2,x=(d-i)/2;return{x:m,y:x,width:e,height:i}}else{var A=e,S=i;return e>o&&(i=o/e*i,e=o),i>d&&(e=d/i*e,i=d),this.logger.log("Image downsampled from "+"".concat(A,"X").concat(S)+" to ".concat(e,"X").concat(i,".")),this.computeCanvasDrawConfig(e,i,o,d)}},a.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},a.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(i){i.style.backgroundColor=e?zr.BORDER_SHADER_MATCH_COLOR:zr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},a.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},a.prototype.createCanvasElement=function(e,i,o){var d=e,m=i,x=document.createElement("canvas");return x.style.width="".concat(d,"px"),x.style.height="".concat(m,"px"),x.style.display="none",x.id=ca(o)?"qr-canvas":o,x},a.prototype.getShadedRegionBounds=function(e,i,o){if(o.width>e||o.height>i)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(i-o.height)/2,width:o.width,height:o.height}},a.prototype.possiblyInsertShadingElement=function(e,i,o,d){if(!(i-d.width<1||o-d.height<1)){var m=document.createElement("div");m.style.position="absolute";var x=(i-d.width)/2,A=(o-d.height)/2;if(m.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(zr.SHADED_REGION_ELEMENT_ID),i-d.width<11||o-d.height<11)this.hasBorderShaders=!1;else{var S=5,v=40;this.insertShaderBorders(m,v,S,-S,null,0,!0),this.insertShaderBorders(m,v,S,-S,null,0,!1),this.insertShaderBorders(m,v,S,null,-S,0,!0),this.insertShaderBorders(m,v,S,null,-S,0,!1),this.insertShaderBorders(m,S,v+S,-S,null,-S,!0),this.insertShaderBorders(m,S,v+S,null,-S,-S,!0),this.insertShaderBorders(m,S,v+S,-S,null,-S,!1),this.insertShaderBorders(m,S,v+S,null,-S,-S,!1),this.hasBorderShaders=!0}e.append(m)}},a.prototype.insertShaderBorders=function(e,i,o,d,m,x,A){var S=document.createElement("div");S.style.position="absolute",S.style.backgroundColor=zr.BORDER_SHADER_DEFAULT_COLOR,S.style.width="".concat(i,"px"),S.style.height="".concat(o,"px"),d!==null&&(S.style.top="".concat(d,"px")),m!==null&&(S.style.bottom="".concat(m,"px")),A?S.style.left="".concat(x,"px"):S.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(S),e.appendChild(S)},a.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},a.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},a.prototype.getTimeoutFps=function(e){return 1e3/e},a})(),Iy;(function(a){a[a.STATUS_DEFAULT=0]="STATUS_DEFAULT",a[a.STATUS_SUCCESS=1]="STATUS_SUCCESS",a[a.STATUS_WARNING=2]="STATUS_WARNING",a[a.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Iy||(Iy={}));const m4=Object.freeze(Object.defineProperty({__proto__:null,Html5Qrcode:g4,get Html5QrcodeScanType(){return yc},get Html5QrcodeScannerState(){return mn},get Html5QrcodeSupportedFormats(){return De}},Symbol.toStringTag,{value:"Module"}));function y4({onFound:a,onClose:e}){const[i,o]=Ge.useState(null),[d,m]=Ge.useState(!0),x=Ge.useRef(null);return Ge.useEffect(()=>(zC(async()=>{const{Html5Qrcode:A}=await Promise.resolve().then(()=>m4);return{Html5Qrcode:A}},void 0).then(({Html5Qrcode:A})=>{const S=new A("reader");x.current=S;const v={fps:10,qrbox:{width:250,height:250}};S.start({facingMode:"environment"},v,async T=>{S.pause(),m(!0),o(null);try{const U=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${T}.json`)).json();U.status===1&&U.product&&U.product.product_name?a(U.product.product_name):(o("Prodotto non trovato nel database."),setTimeout(()=>{o(null),S.resume()},2e3))}catch{o("Errore di connessione."),setTimeout(()=>{o(null),S.resume()},2e3)}finally{m(!1)}},T=>{}).then(()=>{m(!1)}).catch(T=>{console.error("Error starting scanner",T),o("Impossibile avviare la fotocamera."),m(!1)})}),()=>{x.current&&x.current.stop().then(()=>{x.current.clear()}).catch(A=>console.error("Failed to stop scanner",A))}),[a]),D.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-[60] animate-fade-in-up",children:D.jsxs(_r,{intensity:"high",className:"w-full max-w-sm overflow-hidden p-0 bg-white shadow-2xl rounded-3xl",children:[D.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50/50",children:[D.jsx("h3",{className:"font-bold text-gray-800",children:"Scansiona Barcode"}),D.jsx("button",{onClick:e,className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-full transition",children:D.jsx(Z0,{size:20})})]}),D.jsxs("div",{className:"p-4 bg-black min-h-[300px] flex flex-col justify-center relative rounded-b-3xl overflow-hidden",children:[D.jsx("div",{id:"reader",className:"w-full h-full rounded-2xl overflow-hidden [&>video]:object-cover [&>video]:w-full [&>video]:h-full"}),d&&D.jsxs("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center z-10 text-white flex-col gap-3 font-medium",children:[D.jsx(Nv,{className:"animate-spin text-blue-500",size:40}),D.jsx("span",{children:"Avvio fotocamera..."})]})]}),i&&D.jsx("div",{className:"bg-red-50 p-4 text-center text-red-600 text-sm font-medium border-t border-red-100 animate-pulse",children:i}),D.jsx("div",{className:"p-3 text-center text-[10px] text-gray-400 font-bold tracking-widest uppercase bg-gray-50/80",children:"Powered by Open Food Facts"})]})})}const p4=[{id:"Freschi",icon:"",label:"Freschi"},{id:"Dispensa",icon:"",label:"Dispensa"},{id:"Surgelati",icon:"",label:"Surgelati"},{id:"Bevande",icon:"",label:"Bevande"},{id:"Altro",icon:"",label:"Altro"}];function x4({onAdd:a,onClose:e,embedded:i=!1}){const[o,d]=Ge.useState(""),[m,x]=Ge.useState(""),[A,S]=Ge.useState("Dispensa"),[v,T]=Ge.useState(!1),R=H=>{H.preventDefault(),!(!o||!m)&&(a({name:o,expiryDate:m,category:A}),e&&e())},U=H=>{d(H),T(!1)},j=D.jsxs("form",{onSubmit:R,className:dr("space-y-6",!i&&"p-6"),children:[D.jsxs("div",{className:"space-y-2",children:[D.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:"Nome Prodotto"}),D.jsxs("div",{className:"flex gap-3",children:[D.jsx("input",{type:"text",value:o,onChange:H=>d(H.target.value),className:"flex-1 px-4 py-3.5 bg-gray-50 border border-gray-200 dark:bg-black dark:border-white/10 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none transition-all placeholder:text-gray-400 dark:placeholder:text-gray-600 font-medium text-lg dark:text-white",placeholder:"Es. Latte",autoFocus:!0}),D.jsx("button",{type:"button",onClick:()=>T(!0),className:"flex-none w-[54px] h-[54px] flex items-center justify-center bg-gray-900 text-white dark:bg-white/10 dark:text-white rounded-2xl hover:scale-105 active:scale-95 transition-all",title:"Scansiona Barcode",children:D.jsx(Gv,{size:24})})]})]}),D.jsxs("div",{className:"space-y-2",children:[D.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:"Categoria"}),D.jsx("div",{className:"grid grid-cols-3 gap-3",children:p4.map(H=>D.jsxs("button",{type:"button",onClick:()=>S(H.id),className:dr("flex flex-col items-center justify-center py-3 rounded-2xl border transition-all duration-200",A===H.id?"bg-gray-900 text-white border-transparent dark:bg-white dark:text-black shadow-md":"bg-gray-50 border-gray-100 text-gray-500 dark:bg-black dark:border-white/5 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5"),children:[D.jsx("span",{className:"text-2xl mb-1 filter drop-shadow-sm",children:H.icon}),D.jsx("span",{className:"text-[10px] font-bold tracking-wide",children:H.label})]},H.id))})]}),D.jsxs("div",{className:"space-y-2",children:[D.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:"Data di Scadenza"}),D.jsx("input",{type:"date",value:m,onChange:H=>x(H.target.value),min:"2024-01-01",max:"2030-12-31",className:"w-full px-4 py-3.5 bg-gray-50 border border-gray-200 dark:bg-black dark:border-white/10 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none transition-all font-medium text-lg text-gray-900 dark:text-white dark:[color-scheme:dark]"})]}),D.jsx("div",{className:"pt-4 pb-2",children:D.jsx("button",{type:"submit",disabled:!o||!m,className:"w-full bg-blue-600 text-white dark:bg-pantry-accent-blue py-4 rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50 disabled:pointer-events-none",children:"Salva in Dispensa"})}),v&&D.jsx(y4,{onFound:U,onClose:()=>T(!1)})]});return i?j:D.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-end sm:items-center justify-center z-50 animate-fade-in-up",children:D.jsx("div",{className:"w-full h-full sm:h-auto sm:max-w-md p-4 flex flex-col justify-end sm:justify-center",children:D.jsxs(_r,{intensity:"high",className:"w-full max-h-[90vh] overflow-y-auto p-0 border-white/80 dark:border-white/10 shadow-none rounded-3xl sm:rounded-[32px]",children:[D.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-100 dark:border-white/5 bg-white/80 dark:bg-pantry-bg-secondary/80 sticky top-0 z-10 backdrop-blur-md",children:[D.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Nuovo Prodotto"}),D.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center bg-gray-100 hover:bg-gray-200 dark:bg-white/10 dark:hover:bg-white/20 rounded-full transition-colors",children:D.jsx(Z0,{size:20,className:"text-gray-500 dark:text-gray-300"})})]}),j]})})})}function w4(){const[a,e]=Ge.useState([]),[i,o]=Ge.useState("");Ge.useEffect(()=>{d()},[]);const d=async()=>{const T=(await YS()).sort((R,U)=>Number(R.isBought)-Number(U.isBought));e(T)},m=async v=>{v.preventDefault(),i.trim()&&(await Qp({name:i}),o(""),await d())},x=async v=>{await XS(v),await d()},A=async v=>{await ry(v),await d()},S=async()=>{const v=a.filter(T=>T.isBought);for(const T of v)await ry(T.id);await d()};return D.jsxs("div",{className:"pb-24",children:[D.jsx(_r,{className:"p-2 mb-6 flex items-center shadow-lg border-white/60",children:D.jsxs("form",{onSubmit:m,className:"flex gap-2 w-full",children:[D.jsx("input",{type:"text",value:i,onChange:v=>o(v.target.value),placeholder:"Aggiungi alla lista...",className:"flex-1 px-4 py-3 bg-transparent outline-none text-gray-800 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500 font-medium"}),D.jsx("button",{type:"submit",className:"p-3 bg-gray-900 text-white rounded-xl hover:scale-105 active:scale-95 transition-all disabled:opacity-50 disabled:scale-100",disabled:!i.trim(),children:D.jsx(af,{size:24})})]})}),a.length===0?D.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[D.jsx("div",{className:"w-20 h-20 bg-white/30 backdrop-blur-xl rounded-[32px] flex items-center justify-center mb-4 shadow-lg border border-white/40",children:D.jsx(X0,{size:40,className:"ml-1"})}),D.jsx("p",{className:"text-lg font-medium",children:"Tutto comprato!"})]}):D.jsxs(D.Fragment,{children:[D.jsx("ul",{className:"space-y-3",children:a.map(v=>D.jsxs(_r,{className:dr("flex items-center justify-between p-4 transition-all duration-300",v.isBought?"opacity-60 grayscale bg-white/20":"bg-white/50"),onClick:()=>x(v.id),children:[D.jsxs("div",{className:"flex items-center gap-4 flex-1 cursor-pointer",children:[D.jsx("div",{className:dr("w-7 h-7 rounded-full border-2 flex items-center justify-center transition-all duration-300",v.isBought?"bg-green-500 border-green-500 text-white scale-110":"border-gray-400 text-transparent"),children:D.jsx(mv,{size:16,strokeWidth:3})}),D.jsx("span",{className:dr("text-lg font-medium transition-all",v.isBought?"line-through text-gray-500":"text-gray-800"),children:v.name})]}),D.jsx("button",{onClick:T=>{T.stopPropagation(),A(v.id)},className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all",children:D.jsx(xf,{size:20})})]},v.id))}),a.some(v=>v.isBought)&&D.jsx("div",{className:"mt-8 text-center",children:D.jsx("button",{onClick:S,className:"px-6 py-2 text-sm text-red-500 hover:text-red-700 hover:bg-red-50 rounded-full transition font-medium",children:"Rimuovi cancellati"})})]})]})}var qd={exports:{}},ky;function b4(){return ky||(ky=1,(function(a){var e=(function(i){var o=Object.prototype,d=o.hasOwnProperty,m=Object.defineProperty||function(de,le,B){de[le]=B.value},x,A=typeof Symbol=="function"?Symbol:{},S=A.iterator||"@@iterator",v=A.asyncIterator||"@@asyncIterator",T=A.toStringTag||"@@toStringTag";function R(de,le,B){return Object.defineProperty(de,le,{value:B,enumerable:!0,configurable:!0,writable:!0}),de[le]}try{R({},"")}catch{R=function(le,B,z){return le[B]=z}}function U(de,le,B,z){var Z=le&&le.prototype instanceof W?le:W,ce=Object.create(Z.prototype),Ne=new $(z||[]);return m(ce,"_invoke",{value:Oe(de,B,Ne)}),ce}i.wrap=U;function j(de,le,B){try{return{type:"normal",arg:de.call(le,B)}}catch(z){return{type:"throw",arg:z}}}var H="suspendedStart",q="suspendedYield",Q="executing",ue="completed",se={};function W(){}function me(){}function Pe(){}var Ae={};R(Ae,S,function(){return this});var J=Object.getPrototypeOf,xe=J&&J(J(he([])));xe&&xe!==o&&d.call(xe,S)&&(Ae=xe);var fe=Pe.prototype=W.prototype=Object.create(Ae);me.prototype=Pe,m(fe,"constructor",{value:Pe,configurable:!0}),m(Pe,"constructor",{value:me,configurable:!0}),me.displayName=R(Pe,T,"GeneratorFunction");function Mt(de){["next","throw","return"].forEach(function(le){R(de,le,function(B){return this._invoke(le,B)})})}i.isGeneratorFunction=function(de){var le=typeof de=="function"&&de.constructor;return le?le===me||(le.displayName||le.name)==="GeneratorFunction":!1},i.mark=function(de){return Object.setPrototypeOf?Object.setPrototypeOf(de,Pe):(de.__proto__=Pe,R(de,T,"GeneratorFunction")),de.prototype=Object.create(fe),de},i.awrap=function(de){return{__await:de}};function ft(de,le){function B(ce,Ne,be,ke){var We=j(de[ce],de,Ne);if(We.type==="throw")ke(We.arg);else{var Re=We.arg,Ye=Re.value;return Ye&&typeof Ye=="object"&&d.call(Ye,"__await")?le.resolve(Ye.__await).then(function(et){B("next",et,be,ke)},function(et){B("throw",et,be,ke)}):le.resolve(Ye).then(function(et){Re.value=et,be(Re)},function(et){return B("throw",et,be,ke)})}}var z;function Z(ce,Ne){function be(){return new le(function(ke,We){B(ce,Ne,ke,We)})}return z=z?z.then(be,be):be()}m(this,"_invoke",{value:Z})}Mt(ft.prototype),R(ft.prototype,v,function(){return this}),i.AsyncIterator=ft,i.async=function(de,le,B,z,Z){Z===void 0&&(Z=Promise);var ce=new ft(U(de,le,B,z),Z);return i.isGeneratorFunction(le)?ce:ce.next().then(function(Ne){return Ne.done?Ne.value:ce.next()})};function Oe(de,le,B){var z=H;return function(ce,Ne){if(z===Q)throw new Error("Generator is already running");if(z===ue){if(ce==="throw")throw Ne;return we()}for(B.method=ce,B.arg=Ne;;){var be=B.delegate;if(be){var ke=qe(be,B);if(ke){if(ke===se)continue;return ke}}if(B.method==="next")B.sent=B._sent=B.arg;else if(B.method==="throw"){if(z===H)throw z=ue,B.arg;B.dispatchException(B.arg)}else B.method==="return"&&B.abrupt("return",B.arg);z=Q;var We=j(de,le,B);if(We.type==="normal"){if(z=B.done?ue:q,We.arg===se)continue;return{value:We.arg,done:B.done}}else We.type==="throw"&&(z=ue,B.method="throw",B.arg=We.arg)}}}function qe(de,le){var B=le.method,z=de.iterator[B];if(z===x)return le.delegate=null,B==="throw"&&de.iterator.return&&(le.method="return",le.arg=x,qe(de,le),le.method==="throw")||B!=="return"&&(le.method="throw",le.arg=new TypeError("The iterator does not provide a '"+B+"' method")),se;var Z=j(z,de.iterator,le.arg);if(Z.type==="throw")return le.method="throw",le.arg=Z.arg,le.delegate=null,se;var ce=Z.arg;if(!ce)return le.method="throw",le.arg=new TypeError("iterator result is not an object"),le.delegate=null,se;if(ce.done)le[de.resultName]=ce.value,le.next=de.nextLoc,le.method!=="return"&&(le.method="next",le.arg=x);else return ce;return le.delegate=null,se}Mt(fe),R(fe,T,"Generator"),R(fe,S,function(){return this}),R(fe,"toString",function(){return"[object Generator]"});function $e(de){var le={tryLoc:de[0]};1 in de&&(le.catchLoc=de[1]),2 in de&&(le.finallyLoc=de[2],le.afterLoc=de[3]),this.tryEntries.push(le)}function ne(de){var le=de.completion||{};le.type="normal",delete le.arg,de.completion=le}function $(de){this.tryEntries=[{tryLoc:"root"}],de.forEach($e,this),this.reset(!0)}i.keys=function(de){var le=Object(de),B=[];for(var z in le)B.push(z);return B.reverse(),function Z(){for(;B.length;){var ce=B.pop();if(ce in le)return Z.value=ce,Z.done=!1,Z}return Z.done=!0,Z}};function he(de){if(de){var le=de[S];if(le)return le.call(de);if(typeof de.next=="function")return de;if(!isNaN(de.length)){var B=-1,z=function Z(){for(;++B<de.length;)if(d.call(de,B))return Z.value=de[B],Z.done=!1,Z;return Z.value=x,Z.done=!0,Z};return z.next=z}}return{next:we}}i.values=he;function we(){return{value:x,done:!0}}return $.prototype={constructor:$,reset:function(de){if(this.prev=0,this.next=0,this.sent=this._sent=x,this.done=!1,this.delegate=null,this.method="next",this.arg=x,this.tryEntries.forEach(ne),!de)for(var le in this)le.charAt(0)==="t"&&d.call(this,le)&&!isNaN(+le.slice(1))&&(this[le]=x)},stop:function(){this.done=!0;var de=this.tryEntries[0],le=de.completion;if(le.type==="throw")throw le.arg;return this.rval},dispatchException:function(de){if(this.done)throw de;var le=this;function B(ke,We){return ce.type="throw",ce.arg=de,le.next=ke,We&&(le.method="next",le.arg=x),!!We}for(var z=this.tryEntries.length-1;z>=0;--z){var Z=this.tryEntries[z],ce=Z.completion;if(Z.tryLoc==="root")return B("end");if(Z.tryLoc<=this.prev){var Ne=d.call(Z,"catchLoc"),be=d.call(Z,"finallyLoc");if(Ne&&be){if(this.prev<Z.catchLoc)return B(Z.catchLoc,!0);if(this.prev<Z.finallyLoc)return B(Z.finallyLoc)}else if(Ne){if(this.prev<Z.catchLoc)return B(Z.catchLoc,!0)}else if(be){if(this.prev<Z.finallyLoc)return B(Z.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(de,le){for(var B=this.tryEntries.length-1;B>=0;--B){var z=this.tryEntries[B];if(z.tryLoc<=this.prev&&d.call(z,"finallyLoc")&&this.prev<z.finallyLoc){var Z=z;break}}Z&&(de==="break"||de==="continue")&&Z.tryLoc<=le&&le<=Z.finallyLoc&&(Z=null);var ce=Z?Z.completion:{};return ce.type=de,ce.arg=le,Z?(this.method="next",this.next=Z.finallyLoc,se):this.complete(ce)},complete:function(de,le){if(de.type==="throw")throw de.arg;return de.type==="break"||de.type==="continue"?this.next=de.arg:de.type==="return"?(this.rval=this.arg=de.arg,this.method="return",this.next="end"):de.type==="normal"&&le&&(this.next=le),se},finish:function(de){for(var le=this.tryEntries.length-1;le>=0;--le){var B=this.tryEntries[le];if(B.finallyLoc===de)return this.complete(B.completion,B.afterLoc),ne(B),se}},catch:function(de){for(var le=this.tryEntries.length-1;le>=0;--le){var B=this.tryEntries[le];if(B.tryLoc===de){var z=B.completion;if(z.type==="throw"){var Z=z.arg;ne(B)}return Z}}throw new Error("illegal catch attempt")},delegateYield:function(de,le,B){return this.delegate={iterator:he(de),resultName:le,nextLoc:B},this.method==="next"&&(this.arg=x),se}},i})(a.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(qd)),qd.exports}var Wd,Dy;function c1(){return Dy||(Dy=1,Wd=(a,e)=>`${a}-${e}-${Math.random().toString(16).slice(3,8)}`),Wd}var Yd,My;function Ax(){if(My)return Yd;My=1;const a=c1();let e=0;return Yd=({id:i,action:o,payload:d={}})=>{let m=i;return typeof m>"u"&&(m=a("Job",e),e+=1),{id:m,action:o,payload:d}},Yd}var ec={},By;function u1(){if(By)return ec;By=1;let a=!1;return ec.logging=a,ec.setLogging=e=>{a=e},ec.log=(...e)=>a?console.log.apply(this,e):null,ec}var Xd,Ly;function v4(){if(Ly)return Xd;Ly=1;const a=Ax(),{log:e}=u1(),i=c1();let o=0;return Xd=()=>{const d=i("Scheduler",o),m={},x={};let A=[];o+=1;const S=()=>A.length,v=()=>Object.keys(m).length,T=()=>{if(A.length!==0){const q=Object.keys(m);for(let Q=0;Q<q.length;Q+=1)if(typeof x[q[Q]]>"u"){A[0](m[q[Q]]);break}}},R=(q,Q)=>new Promise((ue,se)=>{const W=a({action:q,payload:Q});A.push(async me=>{A.shift(),x[me.id]=W;try{ue(await me[q].apply(this,[...Q,W.id]))}catch(Pe){se(Pe)}finally{delete x[me.id],T()}}),e(`[${d}]: Add ${W.id} to JobQueue`),e(`[${d}]: JobQueue length=${A.length}`),T()});return{addWorker:q=>(m[q.id]=q,e(`[${d}]: Add ${q.id}`),e(`[${d}]: Number of workers=${v()}`),T(),q.id),addJob:async(q,...Q)=>{if(v()===0)throw Error(`[${d}]: You need to have at least one worker before adding jobs`);return R(q,Q)},terminate:async()=>{Object.keys(m).forEach(async q=>{await m[q].terminate()}),A=[]},getQueueLen:S,getNumWorkers:v}},Xd}function E4(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Zd,Uy;function S4(){return Uy||(Uy=1,Zd=a=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof E4=="function"&&(e.type="node"),typeof a>"u"?e:e[a]}),Zd}var Kd,jy;function A4(){if(jy)return Kd;jy=1;const e=S4()("type")==="browser"?i=>new URL(i,window.location.href).href:i=>i;return Kd=i=>{const o={...i};return["corePath","workerPath","langPath"].forEach(d=>{i[d]&&(o[d]=e(o[d]))}),o},Kd}var Qd,Py;function _x(){return Py||(Py=1,Qd={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Qd}const _4="7.0.0",C4={version:_4};var Jd,Fy;function T4(){return Fy||(Fy=1,Jd={workerBlobURL:!0,logger:()=>{}}),Jd}var $d,zy;function O4(){if(zy)return $d;zy=1;const a=C4.version;return $d={...T4(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${a}/dist/worker.min.js`},$d}var e0,Vy;function N4(){return Vy||(Vy=1,e0=({workerPath:a,workerBlobURL:e})=>{let i;if(Blob&&URL&&e){const o=new Blob([`importScripts("${a}");`],{type:"application/javascript"});i=new Worker(URL.createObjectURL(o))}else i=new Worker(a);return i}),e0}var t0,Hy;function R4(){return Hy||(Hy=1,t0=a=>{a.terminate()}),t0}var n0,Gy;function I4(){return Gy||(Gy=1,n0=(a,e)=>{a.onmessage=({data:i})=>{e(i)}}),n0}var r0,qy;function k4(){return qy||(qy=1,r0=async(a,e)=>{a.postMessage(e)}),r0}var i0,Wy;function D4(){if(Wy)return i0;Wy=1;const a=i=>new Promise((o,d)=>{const m=new FileReader;m.onload=()=>{o(m.result)},m.onerror=({target:{error:{code:x}}})=>{d(Error(`File could not be read! Code=${x}`))},m.readAsArrayBuffer(i)}),e=async i=>{let o=i;if(typeof i>"u")return"undefined";if(typeof i=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(i)?o=atob(i.split(",")[1]).split("").map(d=>d.charCodeAt(0)):o=await(await fetch(i)).arrayBuffer();else if(typeof HTMLElement<"u"&&i instanceof HTMLElement)i.tagName==="IMG"&&(o=await e(i.src)),i.tagName==="VIDEO"&&(o=await e(i.poster)),i.tagName==="CANVAS"&&await new Promise(d=>{i.toBlob(async m=>{o=await a(m),d()})});else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas){const d=await i.convertToBlob();o=await a(d)}else(i instanceof File||i instanceof Blob)&&(o=await a(i));return new Uint8Array(o)};return i0=e,i0}var a0,Yy;function M4(){if(Yy)return a0;Yy=1;const a=O4(),e=N4(),i=R4(),o=I4(),d=k4(),m=D4();return a0={defaultOptions:a,spawnWorker:e,terminateWorker:i,onMessage:o,send:d,loadImage:m},a0}var s0,Xy;function Cx(){if(Xy)return s0;Xy=1;const a=A4(),e=Ax(),{log:i}=u1(),o=c1(),d=_x(),{defaultOptions:m,spawnWorker:x,terminateWorker:A,onMessage:S,loadImage:v,send:T}=M4();let R=0;return s0=async(U="eng",j=d.LSTM_ONLY,H={},q={})=>{const Q=o("Worker",R),{logger:ue,errorHandler:se,...W}=a({...m,...H}),me={},Pe=typeof U=="string"?U.split("+"):U;let Ae=j,J=q;const xe=[d.DEFAULT,d.LSTM_ONLY].includes(j)&&!W.legacyCore;let fe,Mt;const ft=new Promise((Re,Ye)=>{Mt=Re,fe=Ye}),Oe=Re=>{fe(Re.message)};let qe=x(W);qe.onerror=Oe,R+=1;const $e=({id:Re,action:Ye,payload:et})=>new Promise((en,tt)=>{i(`[${Q}]: Start ${Re}, action=${Ye}`);const rn=`${Ye}-${Re}`;me[rn]={resolve:en,reject:tt},T(qe,{workerId:Q,jobId:Re,action:Ye,payload:et})}),ne=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),$=Re=>$e(e({id:Re,action:"load",payload:{options:{lstmOnly:xe,corePath:W.corePath,logging:W.logging}}})),he=(Re,Ye,et)=>$e(e({id:et,action:"FS",payload:{method:"writeFile",args:[Re,Ye]}})),we=(Re,Ye)=>$e(e({id:Ye,action:"FS",payload:{method:"readFile",args:[Re,{encoding:"utf8"}]}})),de=(Re,Ye)=>$e(e({id:Ye,action:"FS",payload:{method:"unlink",args:[Re]}})),le=(Re,Ye,et)=>$e(e({id:et,action:"FS",payload:{method:Re,args:Ye}})),B=(Re,Ye)=>$e(e({id:Ye,action:"loadLanguage",payload:{langs:Re,options:{langPath:W.langPath,dataPath:W.dataPath,cachePath:W.cachePath,cacheMethod:W.cacheMethod,gzip:W.gzip,lstmOnly:[d.DEFAULT,d.LSTM_ONLY].includes(Ae)&&!W.legacyLang}}})),z=(Re,Ye,et,en)=>$e(e({id:en,action:"initialize",payload:{langs:Re,oem:Ye,config:et}})),Z=(Re="eng",Ye,et,en)=>{if(xe&&[d.TESSERACT_ONLY,d.TESSERACT_LSTM_COMBINED].includes(Ye))throw Error("Legacy model requested but code missing.");const tt=Ye||Ae;Ae=tt;const rn=et||J;J=rn;const Cr=(typeof Re=="string"?Re.split("+"):Re).filter(An=>!Pe.includes(An));return Pe.push(...Cr),Cr.length>0?B(Cr,en).then(()=>z(Re,tt,rn,en)):z(Re,tt,rn,en)},ce=(Re={},Ye)=>$e(e({id:Ye,action:"setParameters",payload:{params:Re}})),Ne=async(Re,Ye={},et={text:!0},en)=>$e(e({id:en,action:"recognize",payload:{image:await v(Re),options:Ye,output:et}})),be=async(Re,Ye)=>{if(xe)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return $e(e({id:Ye,action:"detect",payload:{image:await v(Re)}}))},ke=async()=>(qe!==null&&(A(qe),qe=null),Promise.resolve());S(qe,({workerId:Re,jobId:Ye,status:et,action:en,data:tt})=>{const rn=`${en}-${Ye}`;if(et==="resolve")i(`[${Re}]: Complete ${Ye}`),me[rn].resolve({jobId:Ye,data:tt}),delete me[rn];else if(et==="reject")if(me[rn].reject(tt),delete me[rn],en==="load"&&fe(tt),se)se(tt);else throw Error(tt);else et==="progress"&&ue({...tt,userJobId:Ye})});const We={id:Q,worker:qe,load:ne,writeText:he,readText:we,removeFile:de,FS:le,reinitialize:Z,setParameters:ce,recognize:Ne,detect:be,terminate:ke};return $().then(()=>B(U)).then(()=>z(U,j,q)).then(()=>Mt(We)).catch(()=>{}),ft},s0}var o0,Zy;function B4(){if(Zy)return o0;Zy=1;const a=Cx();return o0={recognize:async(o,d,m)=>{const x=await a(d,1,m);return x.recognize(o).finally(async()=>{await x.terminate()})},detect:async(o,d)=>{const m=await a("osd",0,d);return m.detect(o).finally(async()=>{await m.terminate()})}},o0}var l0,Ky;function L4(){return Ky||(Ky=1,l0={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),l0}var c0,Qy;function U4(){return Qy||(Qy=1,c0={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),c0}var u0,Jy;function j4(){if(Jy)return u0;Jy=1,b4();const a=v4(),e=Cx(),i=B4(),o=L4(),d=_x(),m=U4(),{setLogging:x}=u1();return u0={languages:o,OEM:d,PSM:m,createScheduler:a,createWorker:e,setLogging:x,...i},u0}var P4=j4();const F4=Np(P4);function z4({onScanComplete:a}){const[e,i]=Ge.useState(!1),[o,d]=Ge.useState(0),[m,x]=Ge.useState(""),A=async S=>{const v=S.target.files[0];if(v){i(!0),x("Initializing OCR...");try{const T=await F4.createWorker("ita+eng",1,{logger:U=>{U.status==="recognizing text"?(d(Math.round(U.progress*100)),x(`Scanning... ${Math.round(U.progress*100)}%`)):x(U.status)}});x("Recognizing text...");const{data:{text:R}}=await T.recognize(v);await T.terminate(),x("Parsing locally..."),a(R)}catch(T){console.error("OCR Error:",T),x("Error scanning receipt"),alert("Failed to scan receipt. Please try again.")}finally{i(!1),d(0)}}};return D.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm border border-gray-100",children:[D.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:"Scansiona Scontrino"}),e?D.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[D.jsx(rf,{className:"w-8 h-8 text-blue-500 animate-spin mb-2"}),D.jsx("p",{className:"text-sm text-gray-500",children:m}),D.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:D.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${o}%`}})})]}):D.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[D.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[D.jsx(Ip,{className:"w-8 h-8 text-gray-400 mb-2"}),D.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Scatta foto o carica file"}),D.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Supporta .jpg, .png"})]}),D.jsx("input",{type:"file",className:"hidden",accept:"image/*",capture:"environment",onChange:A})]})]})}const V4=async a=>{try{const e=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(a)}&search_simple=1&action=process&json=1&page_size=1`,o=await(await fetch(e)).json();if(o.products&&o.products.length>0){const d=o.products[0];return{found:!0,image_url:d.image_front_small_url,generic_name:d.generic_name||d.product_name,categories:d.categories_tags}}return{found:!1}}catch(e){return console.error("Open Food Facts search error:",e),{found:!1,error:e}}};function H4({initialData:a,onSave:e,onCancel:i}){const[o,d]=Ge.useState(a.items||[]),[m,x]=Ge.useState(a.store||""),[A,S]=Ge.useState(a.date||new Date().toISOString().split("T")[0]),[v,T]=Ge.useState(null),R=(Q,ue,se)=>{const W=[...o];W[Q]={...W[Q],[ue]:se},d(W)},U=Q=>{d(o.filter((ue,se)=>se!==Q))},j=()=>{d([...o,{name:"",qty:1,price:0,expiry_estimate:""}])},H=async Q=>{const ue=o[Q];if(!ue.name)return;T(Q);const se=await V4(ue.name);if(T(null),se.found){const W=[...o];W[Q]={...ue,name:se.generic_name||ue.name},d(W),alert(`Found: ${se.generic_name}`)}else alert("Product not found in Open Food Facts")},q=()=>o.reduce((Q,ue)=>Q+Number(ue.price)*Number(ue.qty),0).toFixed(2);return D.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-4",children:[D.jsxs("div",{className:"flex justify-between items-center mb-4",children:[D.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Review Receipt"}),D.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["Total: ",q(),""]})]}),D.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[D.jsxs("div",{children:[D.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Store"}),D.jsx("input",{type:"text",value:m,onChange:Q=>x(Q.target.value),className:"w-full text-sm p-2 border rounded"})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Date"}),D.jsx("input",{type:"date",value:A,onChange:Q=>S(Q.target.value),className:"w-full text-sm p-2 border rounded"})]})]}),D.jsx("div",{className:"space-y-2 mb-4",children:o.map((Q,ue)=>D.jsxs("div",{className:"flex items-start gap-2 p-2 border rounded bg-gray-50",children:[D.jsxs("div",{className:"flex-1 min-w-0",children:[D.jsx("input",{type:"text",value:Q.name,onChange:se=>R(ue,"name",se.target.value),placeholder:"Product Name",className:"w-full text-base font-medium bg-transparent border-b border-dashed border-gray-300 focus:outline-none focus:border-blue-500 mb-2 py-1 placeholder:text-gray-400"}),D.jsxs("div",{className:"flex gap-2",children:[D.jsxs("div",{className:"relative w-16 shrink-0",children:[D.jsx("input",{type:"number",value:Q.qty,onChange:se=>R(ue,"qty",se.target.value),className:"w-full text-sm p-2 border rounded-lg bg-white",placeholder:"Qty"}),D.jsx("span",{className:"absolute top-0 right-1 text-[10px] text-gray-400 h-full flex items-center pointer-events-none",children:"qt"})]}),D.jsxs("div",{className:"relative w-24 shrink-0",children:[D.jsx("input",{type:"number",step:"0.01",value:Q.price,onChange:se=>R(ue,"price",se.target.value),className:"w-full text-sm p-2 border rounded-lg bg-white pl-5",placeholder:"0.00"}),D.jsx("span",{className:"absolute top-0 left-2 text-sm text-gray-400 h-full flex items-center pointer-events-none",children:""})]}),D.jsx("input",{type:"date",value:Q.expiry_estimate||"",onChange:se=>R(ue,"expiry_estimate",se.target.value),className:"flex-1 min-w-[100px] text-sm p-2 border rounded-lg text-gray-600 bg-white"})]})]}),D.jsxs("div",{className:"flex flex-col gap-1",children:[D.jsx("button",{onClick:()=>H(ue),disabled:v===ue,className:"p-1 text-blue-500 hover:bg-blue-50 rounded",title:"Search Open Food Facts",children:v===ue?D.jsx(Fv,{className:"w-4 h-4 animate-spin"}):D.jsx(Wv,{className:"w-4 h-4"})}),D.jsx("button",{onClick:()=>U(ue),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:D.jsx(xf,{className:"w-4 h-4"})})]})]},ue))}),D.jsx("div",{className:"flex gap-2 mb-4",children:D.jsxs("button",{onClick:j,className:"flex-1 flex items-center justify-center gap-2 text-sm text-blue-600 font-bold px-4 py-3 bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors",children:[D.jsx(af,{className:"w-5 h-5"})," Add Item manually"]})}),D.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[D.jsx("button",{onClick:i,className:"flex-1 py-3.5 text-gray-600 font-bold bg-gray-100 rounded-xl hover:bg-gray-200 active:scale-95 transition-all text-sm",children:"Cancel"}),D.jsxs("button",{onClick:()=>e({items:o,store:m,date:A}),className:"flex-[2] py-3.5 bg-green-600 text-white font-bold rounded-xl hover:bg-green-700 active:scale-95 transition-all flex items-center justify-center gap-2 shadow-lg shadow-green-200",children:[D.jsx(Vv,{className:"w-5 h-5"})," Confirm & Save"]})]})]})}function G4({onClose:a}){const[e,i]=Ge.useState("upload"),[o,d]=Ge.useState(null),[m,x]=Ge.useState(null),A=async v=>{i("parsing"),x(null);try{const T=await fetch("/.netlify/functions/parse-receipt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:v})});if(!T.ok)throw new Error(`Errore Server: ${T.statusText}`);const R=await T.json();if(!R.items||R.items.length===0){alert("Non sono riuscito a trovare prodotti. Riprova con una foto pi nitida."),i("upload");return}d(R),i("preview")}catch(T){console.error(T),x("Errore analisi IA. Verifica la connessione o riprova."),i("upload")}},S=async v=>{i("saving");try{const T=v.items.map(R=>({name:R.name,quantity:R.qty,price:R.price,expiry_date:R.expiry_estimate||v.date,category:"Dispensa",status:"active",pantry_id:"default"}));for(const R of T){const{error:U}=await li.addProduct(R);if(U)throw U}alert("Prodotti salvati su Supabase!"),a?a():(i("upload"),d(null))}catch(T){console.error(T),alert("Errore salvataggio: "+T.message),i("preview")}};return D.jsxs("div",{className:"max-w-md mx-auto p-2",children:[m&&D.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded mb-4 text-sm border border-red-100",children:m}),e==="upload"&&D.jsx(z4,{onScanComplete:A}),e==="parsing"&&D.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-white/50 rounded-2xl border border-white/60 shadow-sm backdrop-blur-sm",children:[D.jsx(rf,{className:"w-12 h-12 text-blue-600 animate-spin mb-4"}),D.jsx("p",{className:"text-gray-800 font-bold text-lg",children:"Sto leggendo i dati..."}),D.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Potrebbe richiedere qualche secondo"})]}),e==="preview"&&o&&D.jsx(H4,{initialData:o,onSave:S,onCancel:()=>i("upload")}),e==="saving"&&D.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-white/50 rounded-2xl border border-white/60 shadow-sm",children:[D.jsx(rf,{className:"w-12 h-12 text-green-600 animate-spin mb-4"}),D.jsx("p",{className:"text-gray-800 font-bold text-lg",children:"Salvataggio nel Cloud..."})]})]})}function q4({onAdd:a,onClose:e}){const[i,o]=Ge.useState("selection");return D.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-end sm:items-center justify-center z-50 animate-fade-in-up",children:D.jsx("div",{className:"w-full h-full sm:h-auto sm:max-w-md p-4 flex flex-col justify-end sm:justify-center",children:D.jsxs(_r,{intensity:"high",className:"w-full max-h-[90vh] overflow-y-auto p-0 border-white/80 dark:border-white/10 shadow-none rounded-3xl sm:rounded-[32px]",children:[D.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-100 dark:border-white/5 bg-white/80 dark:bg-pantry-bg-secondary/80 sticky top-0 z-10 backdrop-blur-md",children:[D.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[i==="selection"&&"Aggiungi Prodotto",i==="manual"&&"Nuovo Prodotto",i==="scan"&&"Scansiona Scontrino"]}),D.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center bg-gray-100 hover:bg-gray-200 dark:bg-white/10 dark:hover:bg-white/20 rounded-full transition-colors",children:D.jsx(Z0,{size:20,className:"text-gray-500 dark:text-gray-300"})})]}),D.jsxs("div",{className:"p-6",children:[i==="selection"&&D.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[D.jsxs("button",{onClick:()=>o("scan"),className:"flex items-center gap-4 p-5 bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-2xl shadow-lg hover:scale-[1.02] active:scale-98 transition-all",children:[D.jsx("div",{className:"p-3 bg-white/20 rounded-full",children:D.jsx(Ip,{size:32})}),D.jsxs("div",{className:"text-left",children:[D.jsx("h3",{className:"text-lg font-bold",children:"Scansiona Scontrino"}),D.jsx("p",{className:"text-blue-100 text-xs text-opacity-80",children:"Rilevamento automatico con AI"})]})]}),D.jsxs("button",{onClick:()=>o("manual"),className:"flex items-center gap-4 p-5 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 text-gray-800 dark:text-white rounded-2xl shadow-sm hover:bg-gray-50 dark:hover:bg-white/10 transition-all",children:[D.jsx("div",{className:"p-3 bg-gray-100 dark:bg-white/10 rounded-full text-gray-600 dark:text-gray-300",children:D.jsx(Uv,{size:32})}),D.jsxs("div",{className:"text-left",children:[D.jsx("h3",{className:"text-lg font-bold",children:"Inserimento Manuale"}),D.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Digita dettagli prodotto"})]})]})]}),i==="manual"&&D.jsx(x4,{onAdd:a,onClose:e,embedded:!0}),i==="scan"&&D.jsx(G4,{onClose:e})]})]})})})}function W4({currentTheme:a,onThemeChange:e,currentFamily:i,locations:o=[],onRemoveLocation:d}){const m=async()=>{confirm("Sei sicuro di voler uscire dalla famiglia?")&&(await FS(),window.location.reload())},x=async S=>{if(o.length<=1){alert("Devi avere almeno una dispensa.");return}confirm("Sei sicuro? I prodotti in questa dispensa potrebbero essere persi.")&&await d(S)},A=S=>{S&&(navigator.clipboard.writeText(S),alert("Codice copiato negli appunti!"))};return D.jsxs("div",{className:"space-y-6 pb-24 animate-fade-in-up",children:[D.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white px-1",children:"Impostazioni"}),D.jsxs(_r,{className:"p-5",children:[D.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Aspetto"}),D.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1.5 rounded-xl",children:[D.jsxs("button",{onClick:()=>e("light"),className:dr("flex-1 flex items-center justify-center gap-2 py-3 rounded-lg font-bold text-sm transition-all",a==="light"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:[D.jsx(Qv,{size:18})," Light"]}),D.jsxs("button",{onClick:()=>e("dark"),className:dr("flex-1 flex items-center justify-center gap-2 py-3 rounded-lg font-bold text-sm transition-all",a==="dark"?"bg-slate-700 text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:[D.jsx(Bv,{size:18})," Dark"]})]})]}),i&&D.jsxs(_r,{className:"p-5 border-blue-100 dark:border-blue-900",children:[D.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2",children:[D.jsx(v0,{size:20,className:"text-blue-500"}),"La tua Famiglia"]}),D.jsxs("div",{className:"space-y-4",children:[D.jsxs("div",{children:[D.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Nome Gruppo"}),D.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:i.name})]}),D.jsxs("div",{children:[D.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Codice Invito"}),D.jsxs("div",{className:"flex gap-2 mt-1",children:[D.jsx("code",{className:"flex-1 bg-gray-100 dark:bg-black/30 p-3 rounded-xl font-mono text-sm text-gray-600 dark:text-gray-300 break-all border border-gray-200 dark:border-white/10",children:i.id}),D.jsx("button",{onClick:()=>A(i.id),className:"p-3 bg-blue-100 text-blue-600 dark:bg-blue-500/20 dark:text-blue-400 rounded-xl hover:bg-blue-200 transition-colors",title:"Copia Codice",children:D.jsx(bv,{size:20})})]})]}),D.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-white/5",children:D.jsxs("button",{onClick:m,className:"w-full py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:[D.jsx(Dv,{size:18}),"Esci dalla Famiglia"]})})]})]}),D.jsxs(_r,{className:"p-5",children:[D.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Gestione Dispense (Locations)"}),D.jsx("div",{className:"space-y-2",children:o.map(S=>D.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-white/5 rounded-xl border border-gray-100 dark:border-white/5",children:[D.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-200",children:S.name}),o.length>1&&D.jsx("button",{onClick:()=>x(S.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:D.jsx(xf,{size:18})})]},S.id))}),D.jsx("p",{className:"text-xs text-gray-400 mt-4 text-center",children:"Puoi aggiungere nuove dispense dalla Home Page."})]}),D.jsx("div",{className:"text-center pt-8 pb-4",children:D.jsx("p",{className:"text-xs text-gray-400",children:"Pantry v1.1  Built with "})})]})}function Y4({activeTab:a,onTabChange:e}){const i=[{id:"pantry",label:"Dispensa",icon:Av},{id:"shopping",label:"Spesa",icon:X0},{id:"stats",label:"Stats",icon:dv},{id:"settings",label:"Settings",icon:Xv}];return D.jsx("nav",{className:"fixed bottom-6 left-4 right-4 h-20 bg-white/70 dark:bg-pantry-bg-secondary/90 backdrop-blur-3xl rounded-[32px] shadow-2xl border border-white/50 dark:border-white/5 flex justify-between items-center px-2 z-40 transform transition-all duration-300 hover:scale-[1.01]",children:i.map(o=>{const d=o.icon,m=a===o.id;return D.jsxs("button",{onClick:()=>e(o.id),className:dr("flex-1 flex flex-col items-center justify-center h-full rounded-2xl transition-all duration-300 relative",m?"text-gray-900 dark:text-pantry-accent-blue":"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-pantry-text-primary"),children:[m&&D.jsx("span",{className:"absolute inset-x-2 inset-y-2 bg-white dark:bg-pantry-accent-blue/15 rounded-2xl shadow-md dark:shadow-none -z-10 animate-fade-in-up"}),D.jsx(d,{size:26,strokeWidth:m?2.5:2,className:dr("mb-0.5 transition-transform duration-300",m&&"scale-110")})]},o.id)})})}class Vs extends Error{}class X4 extends Vs{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Z4 extends Vs{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class K4 extends Vs{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class qo extends Vs{}class Tx extends Vs{constructor(e){super(`Invalid unit ${e}`)}}class rr extends Vs{}class $a extends Vs{constructor(){super("Zone is an abstract class")}}const Te="numeric",Ai="short",Gr="long",gf={year:Te,month:Te,day:Te},Ox={year:Te,month:Ai,day:Te},Q4={year:Te,month:Ai,day:Te,weekday:Ai},Nx={year:Te,month:Gr,day:Te},Rx={year:Te,month:Gr,day:Te,weekday:Gr},Ix={hour:Te,minute:Te},kx={hour:Te,minute:Te,second:Te},Dx={hour:Te,minute:Te,second:Te,timeZoneName:Ai},Mx={hour:Te,minute:Te,second:Te,timeZoneName:Gr},Bx={hour:Te,minute:Te,hourCycle:"h23"},Lx={hour:Te,minute:Te,second:Te,hourCycle:"h23"},Ux={hour:Te,minute:Te,second:Te,hourCycle:"h23",timeZoneName:Ai},jx={hour:Te,minute:Te,second:Te,hourCycle:"h23",timeZoneName:Gr},Px={year:Te,month:Te,day:Te,hour:Te,minute:Te},Fx={year:Te,month:Te,day:Te,hour:Te,minute:Te,second:Te},zx={year:Te,month:Ai,day:Te,hour:Te,minute:Te},Vx={year:Te,month:Ai,day:Te,hour:Te,minute:Te,second:Te},J4={year:Te,month:Ai,day:Te,weekday:Ai,hour:Te,minute:Te},Hx={year:Te,month:Gr,day:Te,hour:Te,minute:Te,timeZoneName:Ai},Gx={year:Te,month:Gr,day:Te,hour:Te,minute:Te,second:Te,timeZoneName:Ai},qx={year:Te,month:Gr,day:Te,weekday:Gr,hour:Te,minute:Te,timeZoneName:Gr},Wx={year:Te,month:Gr,day:Te,weekday:Gr,hour:Te,minute:Te,second:Te,timeZoneName:Gr};class wc{get type(){throw new $a}get name(){throw new $a}get ianaName(){return this.name}get isUniversal(){throw new $a}offsetName(e,i){throw new $a}formatOffset(e,i){throw new $a}offset(e){throw new $a}equals(e){throw new $a}get isValid(){throw new $a}}let f0=null;class Cf extends wc{static get instance(){return f0===null&&(f0=new Cf),f0}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:o}){return rw(e,i,o)}formatOffset(e,i){return cc(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const L0=new Map;function $4(a){let e=L0.get(a);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),L0.set(a,e)),e}const eT={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function tT(a,e){const i=a.format(e).replace(/\u200E/g,""),o=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,d,m,x,A,S,v,T]=o;return[x,d,m,A,S,v,T]}function nT(a,e){const i=a.formatToParts(e),o=[];for(let d=0;d<i.length;d++){const{type:m,value:x}=i[d],A=eT[m];m==="era"?o[A]=x:rt(A)||(o[A]=parseInt(x,10))}return o}const h0=new Map;class ha extends wc{static create(e){let i=h0.get(e);return i===void 0&&h0.set(e,i=new ha(e)),i}static resetCache(){h0.clear(),L0.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=ha.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:o}){return rw(e,i,o,this.name)}formatOffset(e,i){return cc(this.offset(e),i)}offset(e){if(!this.valid)return NaN;const i=new Date(e);if(isNaN(i))return NaN;const o=$4(this.name);let[d,m,x,A,S,v,T]=o.formatToParts?nT(o,i):tT(o,i);A==="BC"&&(d=-Math.abs(d)+1);const U=Of({year:d,month:m,day:x,hour:S===24?0:S,minute:v,second:T,millisecond:0});let j=+i;const H=j%1e3;return j-=H>=0?H:1e3+H,(U-j)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let $y={};function rT(a,e={}){const i=JSON.stringify([a,e]);let o=$y[i];return o||(o=new Intl.ListFormat(a,e),$y[i]=o),o}const U0=new Map;function j0(a,e={}){const i=JSON.stringify([a,e]);let o=U0.get(i);return o===void 0&&(o=new Intl.DateTimeFormat(a,e),U0.set(i,o)),o}const P0=new Map;function iT(a,e={}){const i=JSON.stringify([a,e]);let o=P0.get(i);return o===void 0&&(o=new Intl.NumberFormat(a,e),P0.set(i,o)),o}const F0=new Map;function aT(a,e={}){const{base:i,...o}=e,d=JSON.stringify([a,o]);let m=F0.get(d);return m===void 0&&(m=new Intl.RelativeTimeFormat(a,e),F0.set(d,m)),m}let ic=null;function sT(){return ic||(ic=new Intl.DateTimeFormat().resolvedOptions().locale,ic)}const z0=new Map;function Yx(a){let e=z0.get(a);return e===void 0&&(e=new Intl.DateTimeFormat(a).resolvedOptions(),z0.set(a,e)),e}const V0=new Map;function oT(a){let e=V0.get(a);if(!e){const i=new Intl.Locale(a);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in e||(e={...Xx,...e}),V0.set(a,e)}return e}function lT(a){const e=a.indexOf("-x-");e!==-1&&(a=a.substring(0,e));const i=a.indexOf("-u-");if(i===-1)return[a];{let o,d;try{o=j0(a).resolvedOptions(),d=a}catch{const S=a.substring(0,i);o=j0(S).resolvedOptions(),d=S}const{numberingSystem:m,calendar:x}=o;return[d,m,x]}}function cT(a,e,i){return(i||e)&&(a.includes("-u-")||(a+="-u"),i&&(a+=`-ca-${i}`),e&&(a+=`-nu-${e}`)),a}function uT(a){const e=[];for(let i=1;i<=12;i++){const o=nt.utc(2009,i,1);e.push(a(o))}return e}function fT(a){const e=[];for(let i=1;i<=7;i++){const o=nt.utc(2016,11,13+i);e.push(a(o))}return e}function Zu(a,e,i,o){const d=a.listingMode();return d==="error"?null:d==="en"?i(e):o(e)}function hT(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||Yx(a.locale).numberingSystem==="latn"}class dT{constructor(e,i,o){this.padTo=o.padTo||0,this.floor=o.floor||!1;const{padTo:d,floor:m,...x}=o;if(!i||Object.keys(x).length>0){const A={useGrouping:!1,...o};o.padTo>0&&(A.minimumIntegerDigits=o.padTo),this.inf=iT(e,A)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):m1(e,3);return Un(i,this.padTo)}}}class gT{constructor(e,i,o){this.opts=o,this.originalZone=void 0;let d;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const x=-1*(e.offset/60),A=x>=0?`Etc/GMT+${x}`:`Etc/GMT${x}`;e.offset!==0&&ha.create(A).valid?(d=A,this.dt=e):(d="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,d=e.zone.name):(d="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const m={...this.opts};m.timeZone=m.timeZone||d,this.dtf=j0(i,m)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const o=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:o}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class mT{constructor(e,i,o){this.opts={style:"long",...o},!i&&tw()&&(this.rtf=aT(e,o))}format(e,i){return this.rtf?this.rtf.format(e,i):UT(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const Xx={firstDay:1,minimalDays:4,weekend:[6,7]};class jt{static fromOpts(e){return jt.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,o,d,m=!1){const x=e||Sn.defaultLocale,A=x||(m?"en-US":sT()),S=i||Sn.defaultNumberingSystem,v=o||Sn.defaultOutputCalendar,T=G0(d)||Sn.defaultWeekSettings;return new jt(A,S,v,T,x)}static resetCache(){ic=null,U0.clear(),P0.clear(),F0.clear(),z0.clear(),V0.clear()}static fromObject({locale:e,numberingSystem:i,outputCalendar:o,weekSettings:d}={}){return jt.create(e,i,o,d)}constructor(e,i,o,d,m){const[x,A,S]=lT(e);this.locale=x,this.numberingSystem=i||A||null,this.outputCalendar=o||S||null,this.weekSettings=d,this.intl=cT(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=m,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=hT(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:jt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,G0(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return Zu(this,e,sw,()=>{const o=this.intl==="ja"||this.intl.startsWith("ja-");i&=!o;const d=i?{month:e,day:"numeric"}:{month:e},m=i?"format":"standalone";if(!this.monthsCache[m][e]){const x=o?A=>this.dtFormatter(A,d).format():A=>this.extract(A,d,"month");this.monthsCache[m][e]=uT(x)}return this.monthsCache[m][e]})}weekdays(e,i=!1){return Zu(this,e,cw,()=>{const o=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},d=i?"format":"standalone";return this.weekdaysCache[d][e]||(this.weekdaysCache[d][e]=fT(m=>this.extract(m,o,"weekday"))),this.weekdaysCache[d][e]})}meridiems(){return Zu(this,void 0,()=>uw,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[nt.utc(2016,11,13,9),nt.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Zu(this,e,fw,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[nt.utc(-40,1,1),nt.utc(2017,1,1)].map(o=>this.extract(o,i,"era"))),this.eraCache[e]})}extract(e,i,o){const d=this.dtFormatter(e,i),m=d.formatToParts(),x=m.find(A=>A.type.toLowerCase()===o);return x?x.value:null}numberFormatter(e={}){return new dT(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new gT(e,this.intl,i)}relFormatter(e={}){return new mT(this.intl,this.isEnglish(),e)}listFormatter(e={}){return rT(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Yx(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:nw()?oT(this.locale):Xx}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let d0=null;class gr extends wc{static get utcInstance(){return d0===null&&(d0=new gr(0)),d0}static instance(e){return e===0?gr.utcInstance:new gr(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new gr(Nf(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${cc(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${cc(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return cc(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class yT extends wc{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function rs(a,e){if(rt(a)||a===null)return e;if(a instanceof wc)return a;if(ET(a)){const i=a.toLowerCase();return i==="default"?e:i==="local"||i==="system"?Cf.instance:i==="utc"||i==="gmt"?gr.utcInstance:gr.parseSpecifier(i)||ha.create(a)}else return is(a)?gr.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new yT(a)}const f1={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},ep={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},pT=f1.hanidec.replace(/[\[|\]]/g,"").split("");function xT(a){let e=parseInt(a,10);if(isNaN(e)){e="";for(let i=0;i<a.length;i++){const o=a.charCodeAt(i);if(a[i].search(f1.hanidec)!==-1)e+=pT.indexOf(a[i]);else for(const d in ep){const[m,x]=ep[d];o>=m&&o<=x&&(e+=o-m)}}return parseInt(e,10)}else return e}const H0=new Map;function wT(){H0.clear()}function xi({numberingSystem:a},e=""){const i=a||"latn";let o=H0.get(i);o===void 0&&(o=new Map,H0.set(i,o));let d=o.get(e);return d===void 0&&(d=new RegExp(`${f1[i]}${e}`),o.set(e,d)),d}let tp=()=>Date.now(),np="system",rp=null,ip=null,ap=null,sp=60,op,lp=null;class Sn{static get now(){return tp}static set now(e){tp=e}static set defaultZone(e){np=e}static get defaultZone(){return rs(np,Cf.instance)}static get defaultLocale(){return rp}static set defaultLocale(e){rp=e}static get defaultNumberingSystem(){return ip}static set defaultNumberingSystem(e){ip=e}static get defaultOutputCalendar(){return ap}static set defaultOutputCalendar(e){ap=e}static get defaultWeekSettings(){return lp}static set defaultWeekSettings(e){lp=G0(e)}static get twoDigitCutoffYear(){return sp}static set twoDigitCutoffYear(e){sp=e%100}static get throwOnInvalid(){return op}static set throwOnInvalid(e){op=e}static resetCaches(){jt.resetCache(),ha.resetCache(),nt.resetCache(),wT()}}class Si{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Zx=[0,31,59,90,120,151,181,212,243,273,304,334],Kx=[0,31,60,91,121,152,182,213,244,274,305,335];function si(a,e){return new Si("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${a}, which is invalid`)}function h1(a,e,i){const o=new Date(Date.UTC(a,e-1,i));a<100&&a>=0&&o.setUTCFullYear(o.getUTCFullYear()-1900);const d=o.getUTCDay();return d===0?7:d}function Qx(a,e,i){return i+(bc(a)?Kx:Zx)[e-1]}function Jx(a,e){const i=bc(a)?Kx:Zx,o=i.findIndex(m=>m<e),d=e-i[o];return{month:o+1,day:d}}function d1(a,e){return(a-e+7)%7+1}function mf(a,e=4,i=1){const{year:o,month:d,day:m}=a,x=Qx(o,d,m),A=d1(h1(o,d,m),i);let S=Math.floor((x-A+14-e)/7),v;return S<1?(v=o-1,S=pc(v,e,i)):S>pc(o,e,i)?(v=o+1,S=1):v=o,{weekYear:v,weekNumber:S,weekday:A,...Rf(a)}}function cp(a,e=4,i=1){const{weekYear:o,weekNumber:d,weekday:m}=a,x=d1(h1(o,1,e),i),A=Xo(o);let S=d*7+m-x-7+e,v;S<1?(v=o-1,S+=Xo(v)):S>A?(v=o+1,S-=Xo(o)):v=o;const{month:T,day:R}=Jx(v,S);return{year:v,month:T,day:R,...Rf(a)}}function g0(a){const{year:e,month:i,day:o}=a,d=Qx(e,i,o);return{year:e,ordinal:d,...Rf(a)}}function up(a){const{year:e,ordinal:i}=a,{month:o,day:d}=Jx(e,i);return{year:e,month:o,day:d,...Rf(a)}}function fp(a,e){if(!rt(a.localWeekday)||!rt(a.localWeekNumber)||!rt(a.localWeekYear)){if(!rt(a.weekday)||!rt(a.weekNumber)||!rt(a.weekYear))throw new qo("Cannot mix locale-based week fields with ISO-based week fields");return rt(a.localWeekday)||(a.weekday=a.localWeekday),rt(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),rt(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function bT(a,e=4,i=1){const o=Tf(a.weekYear),d=oi(a.weekNumber,1,pc(a.weekYear,e,i)),m=oi(a.weekday,1,7);return o?d?m?!1:si("weekday",a.weekday):si("week",a.weekNumber):si("weekYear",a.weekYear)}function vT(a){const e=Tf(a.year),i=oi(a.ordinal,1,Xo(a.year));return e?i?!1:si("ordinal",a.ordinal):si("year",a.year)}function $x(a){const e=Tf(a.year),i=oi(a.month,1,12),o=oi(a.day,1,yf(a.year,a.month));return e?i?o?!1:si("day",a.day):si("month",a.month):si("year",a.year)}function ew(a){const{hour:e,minute:i,second:o,millisecond:d}=a,m=oi(e,0,23)||e===24&&i===0&&o===0&&d===0,x=oi(i,0,59),A=oi(o,0,59),S=oi(d,0,999);return m?x?A?S?!1:si("millisecond",d):si("second",o):si("minute",i):si("hour",e)}function rt(a){return typeof a>"u"}function is(a){return typeof a=="number"}function Tf(a){return typeof a=="number"&&a%1===0}function ET(a){return typeof a=="string"}function ST(a){return Object.prototype.toString.call(a)==="[object Date]"}function tw(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function nw(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function AT(a){return Array.isArray(a)?a:[a]}function hp(a,e,i){if(a.length!==0)return a.reduce((o,d)=>{const m=[e(d),d];return o&&i(o[0],m[0])===o[0]?o:m},null)[1]}function _T(a,e){return e.reduce((i,o)=>(i[o]=a[o],i),{})}function Ko(a,e){return Object.prototype.hasOwnProperty.call(a,e)}function G0(a){if(a==null)return null;if(typeof a!="object")throw new rr("Week settings must be an object");if(!oi(a.firstDay,1,7)||!oi(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(e=>!oi(e,1,7)))throw new rr("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function oi(a,e,i){return Tf(a)&&a>=e&&a<=i}function CT(a,e){return a-e*Math.floor(a/e)}function Un(a,e=2){const i=a<0;let o;return i?o="-"+(""+-a).padStart(e,"0"):o=(""+a).padStart(e,"0"),o}function ts(a){if(!(rt(a)||a===null||a===""))return parseInt(a,10)}function Ds(a){if(!(rt(a)||a===null||a===""))return parseFloat(a)}function g1(a){if(!(rt(a)||a===null||a==="")){const e=parseFloat("0."+a)*1e3;return Math.floor(e)}}function m1(a,e,i="round"){const o=10**e;switch(i){case"expand":return a>0?Math.ceil(a*o)/o:Math.floor(a*o)/o;case"trunc":return Math.trunc(a*o)/o;case"round":return Math.round(a*o)/o;case"floor":return Math.floor(a*o)/o;case"ceil":return Math.ceil(a*o)/o;default:throw new RangeError(`Value rounding ${i} is out of range`)}}function bc(a){return a%4===0&&(a%100!==0||a%400===0)}function Xo(a){return bc(a)?366:365}function yf(a,e){const i=CT(e-1,12)+1,o=a+(e-i)/12;return i===2?bc(o)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Of(a){let e=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(e=new Date(e),e.setUTCFullYear(a.year,a.month-1,a.day)),+e}function dp(a,e,i){return-d1(h1(a,1,e),i)+e-1}function pc(a,e=4,i=1){const o=dp(a,e,i),d=dp(a+1,e,i);return(Xo(a)-o+d)/7}function q0(a){return a>99?a:a>Sn.twoDigitCutoffYear?1900+a:2e3+a}function rw(a,e,i,o=null){const d=new Date(a),m={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};o&&(m.timeZone=o);const x={timeZoneName:e,...m},A=new Intl.DateTimeFormat(i,x).formatToParts(d).find(S=>S.type.toLowerCase()==="timezonename");return A?A.value:null}function Nf(a,e){let i=parseInt(a,10);Number.isNaN(i)&&(i=0);const o=parseInt(e,10)||0,d=i<0||Object.is(i,-0)?-o:o;return i*60+d}function iw(a){const e=Number(a);if(typeof a=="boolean"||a===""||!Number.isFinite(e))throw new rr(`Invalid unit value ${a}`);return e}function pf(a,e){const i={};for(const o in a)if(Ko(a,o)){const d=a[o];if(d==null)continue;i[e(o)]=iw(d)}return i}function cc(a,e){const i=Math.trunc(Math.abs(a/60)),o=Math.trunc(Math.abs(a%60)),d=a>=0?"+":"-";switch(e){case"short":return`${d}${Un(i,2)}:${Un(o,2)}`;case"narrow":return`${d}${i}${o>0?`:${o}`:""}`;case"techie":return`${d}${Un(i,2)}${Un(o,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Rf(a){return _T(a,["hour","minute","second","millisecond"])}const TT=["January","February","March","April","May","June","July","August","September","October","November","December"],aw=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],OT=["J","F","M","A","M","J","J","A","S","O","N","D"];function sw(a){switch(a){case"narrow":return[...OT];case"short":return[...aw];case"long":return[...TT];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const ow=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],lw=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],NT=["M","T","W","T","F","S","S"];function cw(a){switch(a){case"narrow":return[...NT];case"short":return[...lw];case"long":return[...ow];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const uw=["AM","PM"],RT=["Before Christ","Anno Domini"],IT=["BC","AD"],kT=["B","A"];function fw(a){switch(a){case"narrow":return[...kT];case"short":return[...IT];case"long":return[...RT];default:return null}}function DT(a){return uw[a.hour<12?0:1]}function MT(a,e){return cw(e)[a.weekday-1]}function BT(a,e){return sw(e)[a.month-1]}function LT(a,e){return fw(e)[a.year<0?0:1]}function UT(a,e,i="always",o=!1){const d={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},m=["hours","minutes","seconds"].indexOf(a)===-1;if(i==="auto"&&m){const R=a==="days";switch(e){case 1:return R?"tomorrow":`next ${d[a][0]}`;case-1:return R?"yesterday":`last ${d[a][0]}`;case 0:return R?"today":`this ${d[a][0]}`}}const x=Object.is(e,-0)||e<0,A=Math.abs(e),S=A===1,v=d[a],T=o?S?v[1]:v[2]||v[1]:S?d[a][0]:a;return x?`${A} ${T} ago`:`in ${A} ${T}`}function gp(a,e){let i="";for(const o of a)o.literal?i+=o.val:i+=e(o.val);return i}const jT={D:gf,DD:Ox,DDD:Nx,DDDD:Rx,t:Ix,tt:kx,ttt:Dx,tttt:Mx,T:Bx,TT:Lx,TTT:Ux,TTTT:jx,f:Px,ff:zx,fff:Hx,ffff:qx,F:Fx,FF:Vx,FFF:Gx,FFFF:Wx};class ir{static create(e,i={}){return new ir(e,i)}static parseFormat(e){let i=null,o="",d=!1;const m=[];for(let x=0;x<e.length;x++){const A=e.charAt(x);A==="'"?((o.length>0||d)&&m.push({literal:d||/^\s+$/.test(o),val:o===""?"'":o}),i=null,o="",d=!d):d||A===i?o+=A:(o.length>0&&m.push({literal:/^\s+$/.test(o),val:o}),o=A,i=A)}return o.length>0&&m.push({literal:d||/^\s+$/.test(o),val:o}),m}static macroTokenToFormatOpts(e){return jT[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0,o=void 0){if(this.opts.forceSimple)return Un(e,i);const d={...this.opts};return i>0&&(d.padTo=i),o&&(d.signDisplay=o),this.loc.numberFormatter(d).format(e)}formatDateTimeFromString(e,i){const o=this.loc.listingMode()==="en",d=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",m=(j,H)=>this.loc.extract(e,j,H),x=j=>e.isOffsetFixed&&e.offset===0&&j.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,j.format):"",A=()=>o?DT(e):m({hour:"numeric",hourCycle:"h12"},"dayperiod"),S=(j,H)=>o?BT(e,j):m(H?{month:j}:{month:j,day:"numeric"},"month"),v=(j,H)=>o?MT(e,j):m(H?{weekday:j}:{weekday:j,month:"long",day:"numeric"},"weekday"),T=j=>{const H=ir.macroTokenToFormatOpts(j);return H?this.formatWithSystemDefault(e,H):j},R=j=>o?LT(e,j):m({era:j},"era"),U=j=>{switch(j){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return x({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return x({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return x({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return A();case"d":return d?m({day:"numeric"},"day"):this.num(e.day);case"dd":return d?m({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return v("short",!0);case"cccc":return v("long",!0);case"ccccc":return v("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return v("short",!1);case"EEEE":return v("long",!1);case"EEEEE":return v("narrow",!1);case"L":return d?m({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return d?m({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return S("short",!0);case"LLLL":return S("long",!0);case"LLLLL":return S("narrow",!0);case"M":return d?m({month:"numeric"},"month"):this.num(e.month);case"MM":return d?m({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return S("short",!1);case"MMMM":return S("long",!1);case"MMMMM":return S("narrow",!1);case"y":return d?m({year:"numeric"},"year"):this.num(e.year);case"yy":return d?m({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return d?m({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return d?m({year:"numeric"},"year"):this.num(e.year,6);case"G":return R("short");case"GG":return R("long");case"GGGGG":return R("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return T(j)}};return gp(ir.parseFormat(i),U)}formatDurationFromString(e,i){const o=this.opts.signMode==="negativeLargestOnly"?-1:1,d=T=>{switch(T[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},m=(T,R)=>U=>{const j=d(U);if(j){const H=R.isNegativeDuration&&j!==R.largestUnit?o:1;let q;return this.opts.signMode==="negativeLargestOnly"&&j!==R.largestUnit?q="never":this.opts.signMode==="all"?q="always":q="auto",this.num(T.get(j)*H,U.length,q)}else return U},x=ir.parseFormat(i),A=x.reduce((T,{literal:R,val:U})=>R?T:T.concat(U),[]),S=e.shiftTo(...A.map(d).filter(T=>T)),v={isNegativeDuration:S<0,largestUnit:Object.keys(S.values)[0]};return gp(x,m(S,v))}}const hw=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function $o(...a){const e=a.reduce((i,o)=>i+o.source,"");return RegExp(`^${e}$`)}function el(...a){return e=>a.reduce(([i,o,d],m)=>{const[x,A,S]=m(e,d);return[{...i,...x},A||o,S]},[{},null,1]).slice(0,2)}function tl(a,...e){if(a==null)return[null,null];for(const[i,o]of e){const d=i.exec(a);if(d)return o(d)}return[null,null]}function dw(...a){return(e,i)=>{const o={};let d;for(d=0;d<a.length;d++)o[a[d]]=ts(e[i+d]);return[o,null,i+d]}}const gw=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,PT=`(?:${gw.source}?(?:\\[(${hw.source})\\])?)?`,y1=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,mw=RegExp(`${y1.source}${PT}`),p1=RegExp(`(?:[Tt]${mw.source})?`),FT=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,zT=/(\d{4})-?W(\d\d)(?:-?(\d))?/,VT=/(\d{4})-?(\d{3})/,HT=dw("weekYear","weekNumber","weekDay"),GT=dw("year","ordinal"),qT=/(\d{4})-(\d\d)-(\d\d)/,yw=RegExp(`${y1.source} ?(?:${gw.source}|(${hw.source}))?`),WT=RegExp(`(?: ${yw.source})?`);function Zo(a,e,i){const o=a[e];return rt(o)?i:ts(o)}function YT(a,e){return[{year:Zo(a,e),month:Zo(a,e+1,1),day:Zo(a,e+2,1)},null,e+3]}function nl(a,e){return[{hours:Zo(a,e,0),minutes:Zo(a,e+1,0),seconds:Zo(a,e+2,0),milliseconds:g1(a[e+3])},null,e+4]}function vc(a,e){const i=!a[e]&&!a[e+1],o=Nf(a[e+1],a[e+2]),d=i?null:gr.instance(o);return[{},d,e+3]}function Ec(a,e){const i=a[e]?ha.create(a[e]):null;return[{},i,e+1]}const XT=RegExp(`^T?${y1.source}$`),ZT=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function KT(a){const[e,i,o,d,m,x,A,S,v]=a,T=e[0]==="-",R=S&&S[0]==="-",U=(j,H=!1)=>j!==void 0&&(H||j&&T)?-j:j;return[{years:U(Ds(i)),months:U(Ds(o)),weeks:U(Ds(d)),days:U(Ds(m)),hours:U(Ds(x)),minutes:U(Ds(A)),seconds:U(Ds(S),S==="-0"),milliseconds:U(g1(v),R)}]}const QT={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function x1(a,e,i,o,d,m,x){const A={year:e.length===2?q0(ts(e)):ts(e),month:aw.indexOf(i)+1,day:ts(o),hour:ts(d),minute:ts(m)};return x&&(A.second=ts(x)),a&&(A.weekday=a.length>3?ow.indexOf(a)+1:lw.indexOf(a)+1),A}const JT=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function $T(a){const[,e,i,o,d,m,x,A,S,v,T,R]=a,U=x1(e,d,o,i,m,x,A);let j;return S?j=QT[S]:v?j=0:j=Nf(T,R),[U,new gr(j)]}function e8(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const t8=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,n8=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,r8=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function mp(a){const[,e,i,o,d,m,x,A]=a;return[x1(e,d,o,i,m,x,A),gr.utcInstance]}function i8(a){const[,e,i,o,d,m,x,A]=a;return[x1(e,A,i,o,d,m,x),gr.utcInstance]}const a8=$o(FT,p1),s8=$o(zT,p1),o8=$o(VT,p1),l8=$o(mw),pw=el(YT,nl,vc,Ec),c8=el(HT,nl,vc,Ec),u8=el(GT,nl,vc,Ec),f8=el(nl,vc,Ec);function h8(a){return tl(a,[a8,pw],[s8,c8],[o8,u8],[l8,f8])}function d8(a){return tl(e8(a),[JT,$T])}function g8(a){return tl(a,[t8,mp],[n8,mp],[r8,i8])}function m8(a){return tl(a,[ZT,KT])}const y8=el(nl);function p8(a){return tl(a,[XT,y8])}const x8=$o(qT,WT),w8=$o(yw),b8=el(nl,vc,Ec);function v8(a){return tl(a,[x8,pw],[w8,b8])}const yp="Invalid Duration",xw={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},E8={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...xw},ai=146097/400,Uo=146097/4800,S8={years:{quarters:4,months:12,weeks:ai/7,days:ai,hours:ai*24,minutes:ai*24*60,seconds:ai*24*60*60,milliseconds:ai*24*60*60*1e3},quarters:{months:3,weeks:ai/28,days:ai/4,hours:ai*24/4,minutes:ai*24*60/4,seconds:ai*24*60*60/4,milliseconds:ai*24*60*60*1e3/4},months:{weeks:Uo/7,days:Uo,hours:Uo*24,minutes:Uo*24*60,seconds:Uo*24*60*60,milliseconds:Uo*24*60*60*1e3},...xw},Fs=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],A8=Fs.slice(0).reverse();function la(a,e,i=!1){const o={values:i?e.values:{...a.values,...e.values||{}},loc:a.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||a.conversionAccuracy,matrix:e.matrix||a.matrix};return new Ct(o)}function ww(a,e){let i=e.milliseconds??0;for(const o of A8.slice(1))e[o]&&(i+=e[o]*a[o].milliseconds);return i}function pp(a,e){const i=ww(a,e)<0?-1:1;Fs.reduceRight((o,d)=>{if(rt(e[d]))return o;if(o){const m=e[o]*i,x=a[d][o],A=Math.floor(m/x);e[d]+=A*i,e[o]-=A*x*i}return d},null),Fs.reduce((o,d)=>{if(rt(e[d]))return o;if(o){const m=e[o]%1;e[o]-=m,e[d]+=m*a[o][d]}return d},null)}function xp(a){const e={};for(const[i,o]of Object.entries(a))o!==0&&(e[i]=o);return e}class Ct{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let o=i?S8:E8;e.matrix&&(o=e.matrix),this.values=e.values,this.loc=e.loc||jt.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=o,this.isLuxonDuration=!0}static fromMillis(e,i){return Ct.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new rr(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Ct({values:pf(e,Ct.normalizeUnit),loc:jt.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(is(e))return Ct.fromMillis(e);if(Ct.isDuration(e))return e;if(typeof e=="object")return Ct.fromObject(e);throw new rr(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[o]=m8(e);return o?Ct.fromObject(o,i):Ct.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[o]=p8(e);return o?Ct.fromObject(o,i):Ct.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new rr("need to specify a reason the Duration is invalid");const o=e instanceof Si?e:new Si(e,i);if(Sn.throwOnInvalid)throw new K4(o);return new Ct({invalid:o})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new Tx(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const o={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?ir.create(this.loc,o).formatDurationFromString(this,e):yp}toHuman(e={}){if(!this.isValid)return yp;const i=e.showZeros!==!1,o=Fs.map(d=>{const m=this.values[d];return rt(m)||m===0&&!i?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:d.slice(0,-1)}).format(m)}).filter(d=>d);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(o)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=m1(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},nt.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?ww(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Ct.fromDurationLike(e),o={};for(const d of Fs)(Ko(i.values,d)||Ko(this.values,d))&&(o[d]=i.get(d)+this.get(d));return la(this,{values:o},!0)}minus(e){if(!this.isValid)return this;const i=Ct.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const o of Object.keys(this.values))i[o]=iw(e(this.values[o],o));return la(this,{values:i},!0)}get(e){return this[Ct.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...pf(e,Ct.normalizeUnit)};return la(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:o,matrix:d}={}){const x={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:d,conversionAccuracy:o};return la(this,x)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return pp(this.matrix,e),la(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=xp(this.normalize().shiftToAll().toObject());return la(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(x=>Ct.normalizeUnit(x));const i={},o={},d=this.toObject();let m;for(const x of Fs)if(e.indexOf(x)>=0){m=x;let A=0;for(const v in o)A+=this.matrix[v][x]*o[v],o[v]=0;is(d[x])&&(A+=d[x]);const S=Math.trunc(A);i[x]=S,o[x]=(A*1e3-S*1e3)/1e3}else is(d[x])&&(o[x]=d[x]);for(const x in o)o[x]!==0&&(i[m]+=x===m?o[x]:o[x]/this.matrix[m][x]);return pp(this.matrix,i),la(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return la(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=xp(this.values);return la(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(o,d){return o===void 0||o===0?d===void 0||d===0:o===d}for(const o of Fs)if(!i(this.values[o],e.values[o]))return!1;return!0}}const jo="Invalid Interval";function _8(a,e){return!a||!a.isValid?vn.invalid("missing or invalid start"):!e||!e.isValid?vn.invalid("missing or invalid end"):e<a?vn.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${e.toISO()}`):null}class vn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new rr("need to specify a reason the Interval is invalid");const o=e instanceof Si?e:new Si(e,i);if(Sn.throwOnInvalid)throw new Z4(o);return new vn({invalid:o})}static fromDateTimes(e,i){const o=tc(e),d=tc(i),m=_8(o,d);return m??new vn({start:o,end:d})}static after(e,i){const o=Ct.fromDurationLike(i),d=tc(e);return vn.fromDateTimes(d,d.plus(o))}static before(e,i){const o=Ct.fromDurationLike(i),d=tc(e);return vn.fromDateTimes(d.minus(o),d)}static fromISO(e,i){const[o,d]=(e||"").split("/",2);if(o&&d){let m,x;try{m=nt.fromISO(o,i),x=m.isValid}catch{x=!1}let A,S;try{A=nt.fromISO(d,i),S=A.isValid}catch{S=!1}if(x&&S)return vn.fromDateTimes(m,A);if(x){const v=Ct.fromISO(d,i);if(v.isValid)return vn.after(m,v)}else if(S){const v=Ct.fromISO(o,i);if(v.isValid)return vn.before(A,v)}}return vn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const o=this.start.startOf(e,i);let d;return i?.useLocaleWeeks?d=this.end.reconfigure({locale:o.locale}):d=this.end,d=d.startOf(e,i),Math.floor(d.diff(o,e).get(e))+(d.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?vn.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(tc).filter(x=>this.contains(x)).sort((x,A)=>x.toMillis()-A.toMillis()),o=[];let{s:d}=this,m=0;for(;d<this.e;){const x=i[m]||this.e,A=+x>+this.e?this.e:x;o.push(vn.fromDateTimes(d,A)),d=A,m+=1}return o}splitBy(e){const i=Ct.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:o}=this,d=1,m;const x=[];for(;o<this.e;){const A=this.start.plus(i.mapUnits(S=>S*d));m=+A>+this.e?this.e:A,x.push(vn.fromDateTimes(o,m)),o=m,d+=1}return x}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,o=this.e<e.e?this.e:e.e;return i>=o?null:vn.fromDateTimes(i,o)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,o=this.e>e.e?this.e:e.e;return vn.fromDateTimes(i,o)}static merge(e){const[i,o]=e.sort((d,m)=>d.s-m.s).reduce(([d,m],x)=>m?m.overlaps(x)||m.abutsStart(x)?[d,m.union(x)]:[d.concat([m]),x]:[d,x],[[],null]);return o&&i.push(o),i}static xor(e){let i=null,o=0;const d=[],m=e.map(S=>[{time:S.s,type:"s"},{time:S.e,type:"e"}]),x=Array.prototype.concat(...m),A=x.sort((S,v)=>S.time-v.time);for(const S of A)o+=S.type==="s"?1:-1,o===1?i=S.time:(i&&+i!=+S.time&&d.push(vn.fromDateTimes(i,S.time)),i=null);return vn.merge(d)}difference(...e){return vn.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:jo}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=gf,i={}){return this.isValid?ir.create(this.s.loc.clone(i),e).formatInterval(this):jo}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:jo}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:jo}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:jo}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:jo}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Ct.invalid(this.invalidReason)}mapEndpoints(e){return vn.fromDateTimes(e(this.s),e(this.e))}}class Ku{static hasDST(e=Sn.defaultZone){const i=nt.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return ha.isValidZone(e)}static normalizeZone(e){return rs(e,Sn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||jt.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||jt.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||jt.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:o=null,locObj:d=null,outputCalendar:m="gregory"}={}){return(d||jt.create(i,o,m)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:o=null,locObj:d=null,outputCalendar:m="gregory"}={}){return(d||jt.create(i,o,m)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:o=null,locObj:d=null}={}){return(d||jt.create(i,o,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:o=null,locObj:d=null}={}){return(d||jt.create(i,o,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return jt.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return jt.create(i,null,"gregory").eras(e)}static features(){return{relative:tw(),localeWeek:nw()}}}function wp(a,e){const i=d=>d.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),o=i(e)-i(a);return Math.floor(Ct.fromMillis(o).as("days"))}function C8(a,e,i){const o=[["years",(S,v)=>v.year-S.year],["quarters",(S,v)=>v.quarter-S.quarter+(v.year-S.year)*4],["months",(S,v)=>v.month-S.month+(v.year-S.year)*12],["weeks",(S,v)=>{const T=wp(S,v);return(T-T%7)/7}],["days",wp]],d={},m=a;let x,A;for(const[S,v]of o)i.indexOf(S)>=0&&(x=S,d[S]=v(a,e),A=m.plus(d),A>e?(d[S]--,a=m.plus(d),a>e&&(A=a,d[S]--,a=m.plus(d))):a=A);return[a,d,A,x]}function T8(a,e,i,o){let[d,m,x,A]=C8(a,e,i);const S=e-d,v=i.filter(R=>["hours","minutes","seconds","milliseconds"].indexOf(R)>=0);v.length===0&&(x<e&&(x=d.plus({[A]:1})),x!==d&&(m[A]=(m[A]||0)+S/(x-d)));const T=Ct.fromObject(m,o);return v.length>0?Ct.fromMillis(S,o).shiftTo(...v).plus(T):T}const O8="missing Intl.DateTimeFormat.formatToParts support";function Dt(a,e=i=>i){return{regex:a,deser:([i])=>e(xT(i))}}const N8="",bw=`[ ${N8}]`,vw=new RegExp(bw,"g");function R8(a){return a.replace(/\./g,"\\.?").replace(vw,bw)}function bp(a){return a.replace(/\./g,"").replace(vw," ").toLowerCase()}function wi(a,e){return a===null?null:{regex:RegExp(a.map(R8).join("|")),deser:([i])=>a.findIndex(o=>bp(i)===bp(o))+e}}function vp(a,e){return{regex:a,deser:([,i,o])=>Nf(i,o),groups:e}}function Qu(a){return{regex:a,deser:([e])=>e}}function I8(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function k8(a,e){const i=xi(e),o=xi(e,"{2}"),d=xi(e,"{3}"),m=xi(e,"{4}"),x=xi(e,"{6}"),A=xi(e,"{1,2}"),S=xi(e,"{1,3}"),v=xi(e,"{1,6}"),T=xi(e,"{1,9}"),R=xi(e,"{2,4}"),U=xi(e,"{4,6}"),j=Q=>({regex:RegExp(I8(Q.val)),deser:([ue])=>ue,literal:!0}),q=(Q=>{if(a.literal)return j(Q);switch(Q.val){case"G":return wi(e.eras("short"),0);case"GG":return wi(e.eras("long"),0);case"y":return Dt(v);case"yy":return Dt(R,q0);case"yyyy":return Dt(m);case"yyyyy":return Dt(U);case"yyyyyy":return Dt(x);case"M":return Dt(A);case"MM":return Dt(o);case"MMM":return wi(e.months("short",!0),1);case"MMMM":return wi(e.months("long",!0),1);case"L":return Dt(A);case"LL":return Dt(o);case"LLL":return wi(e.months("short",!1),1);case"LLLL":return wi(e.months("long",!1),1);case"d":return Dt(A);case"dd":return Dt(o);case"o":return Dt(S);case"ooo":return Dt(d);case"HH":return Dt(o);case"H":return Dt(A);case"hh":return Dt(o);case"h":return Dt(A);case"mm":return Dt(o);case"m":return Dt(A);case"q":return Dt(A);case"qq":return Dt(o);case"s":return Dt(A);case"ss":return Dt(o);case"S":return Dt(S);case"SSS":return Dt(d);case"u":return Qu(T);case"uu":return Qu(A);case"uuu":return Dt(i);case"a":return wi(e.meridiems(),0);case"kkkk":return Dt(m);case"kk":return Dt(R,q0);case"W":return Dt(A);case"WW":return Dt(o);case"E":case"c":return Dt(i);case"EEE":return wi(e.weekdays("short",!1),1);case"EEEE":return wi(e.weekdays("long",!1),1);case"ccc":return wi(e.weekdays("short",!0),1);case"cccc":return wi(e.weekdays("long",!0),1);case"Z":case"ZZ":return vp(new RegExp(`([+-]${A.source})(?::(${o.source}))?`),2);case"ZZZ":return vp(new RegExp(`([+-]${A.source})(${o.source})?`),2);case"z":return Qu(/[a-z_+-/]{1,256}?/i);case" ":return Qu(/[^\S\n\r]/);default:return j(Q)}})(a)||{invalidReason:O8};return q.token=a,q}const D8={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function M8(a,e,i){const{type:o,value:d}=a;if(o==="literal"){const S=/^\s+$/.test(d);return{literal:!S,val:S?" ":d}}const m=e[o];let x=o;o==="hour"&&(e.hour12!=null?x=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?x="hour12":x="hour24":x=i.hour12?"hour12":"hour24");let A=D8[x];if(typeof A=="object"&&(A=A[m]),A)return{literal:!1,val:A}}function B8(a){return[`^${a.map(i=>i.regex).reduce((i,o)=>`${i}(${o.source})`,"")}$`,a]}function L8(a,e,i){const o=a.match(e);if(o){const d={};let m=1;for(const x in i)if(Ko(i,x)){const A=i[x],S=A.groups?A.groups+1:1;!A.literal&&A.token&&(d[A.token.val[0]]=A.deser(o.slice(m,m+S))),m+=S}return[o,d]}else return[o,{}]}function U8(a){const e=m=>{switch(m){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,o;return rt(a.z)||(i=ha.create(a.z)),rt(a.Z)||(i||(i=new gr(a.Z)),o=a.Z),rt(a.q)||(a.M=(a.q-1)*3+1),rt(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),rt(a.u)||(a.S=g1(a.u)),[Object.keys(a).reduce((m,x)=>{const A=e(x);return A&&(m[A]=a[x]),m},{}),i,o]}let m0=null;function j8(){return m0||(m0=nt.fromMillis(1555555555555)),m0}function P8(a,e){if(a.literal)return a;const i=ir.macroTokenToFormatOpts(a.val),o=_w(i,e);return o==null||o.includes(void 0)?a:o}function Ew(a,e){return Array.prototype.concat(...a.map(i=>P8(i,e)))}class Sw{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=Ew(ir.parseFormat(i),e),this.units=this.tokens.map(o=>k8(o,e)),this.disqualifyingUnit=this.units.find(o=>o.invalidReason),!this.disqualifyingUnit){const[o,d]=B8(this.units);this.regex=RegExp(o,"i"),this.handlers=d}}explainFromTokens(e){if(this.isValid){const[i,o]=L8(e,this.regex,this.handlers),[d,m,x]=o?U8(o):[null,null,void 0];if(Ko(o,"a")&&Ko(o,"H"))throw new qo("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:o,result:d,zone:m,specificOffset:x}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Aw(a,e,i){return new Sw(a,i).explainFromTokens(e)}function F8(a,e,i){const{result:o,zone:d,specificOffset:m,invalidReason:x}=Aw(a,e,i);return[o,d,m,x]}function _w(a,e){if(!a)return null;const o=ir.create(e,a).dtFormatter(j8()),d=o.formatToParts(),m=o.resolvedOptions();return d.map(x=>M8(x,a,m))}const y0="Invalid DateTime",Ep=864e13;function ac(a){return new Si("unsupported zone",`the zone "${a.name}" is not supported`)}function p0(a){return a.weekData===null&&(a.weekData=mf(a.c)),a.weekData}function x0(a){return a.localWeekData===null&&(a.localWeekData=mf(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function Ms(a,e){const i={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new nt({...i,...e,old:i})}function Cw(a,e,i){let o=a-e*60*1e3;const d=i.offset(o);if(e===d)return[o,e];o-=(d-e)*60*1e3;const m=i.offset(o);return d===m?[o,d]:[a-Math.min(d,m)*60*1e3,Math.max(d,m)]}function Ju(a,e){a+=e*60*1e3;const i=new Date(a);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function ef(a,e,i){return Cw(Of(a),e,i)}function Sp(a,e){const i=a.o,o=a.c.year+Math.trunc(e.years),d=a.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,m={...a.c,year:o,month:d,day:Math.min(a.c.day,yf(o,d))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},x=Ct.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),A=Of(m);let[S,v]=Cw(A,i,a.zone);return x!==0&&(S+=x,v=a.zone.offset(S)),{ts:S,o:v}}function Po(a,e,i,o,d,m){const{setZone:x,zone:A}=i;if(a&&Object.keys(a).length!==0||e){const S=e||A,v=nt.fromObject(a,{...i,zone:S,specificOffset:m});return x?v:v.setZone(A)}else return nt.invalid(new Si("unparsable",`the input "${d}" can't be parsed as ${o}`))}function $u(a,e,i=!0){return a.isValid?ir.create(jt.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(a,e):null}function w0(a,e,i){const o=a.c.year>9999||a.c.year<0;let d="";if(o&&a.c.year>=0&&(d+="+"),d+=Un(a.c.year,o?6:4),i==="year")return d;if(e){if(d+="-",d+=Un(a.c.month),i==="month")return d;d+="-"}else if(d+=Un(a.c.month),i==="month")return d;return d+=Un(a.c.day),d}function Ap(a,e,i,o,d,m,x){let A=!i||a.c.millisecond!==0||a.c.second!==0,S="";switch(x){case"day":case"month":case"year":break;default:if(S+=Un(a.c.hour),x==="hour")break;if(e){if(S+=":",S+=Un(a.c.minute),x==="minute")break;A&&(S+=":",S+=Un(a.c.second))}else{if(S+=Un(a.c.minute),x==="minute")break;A&&(S+=Un(a.c.second))}if(x==="second")break;A&&(!o||a.c.millisecond!==0)&&(S+=".",S+=Un(a.c.millisecond,3))}return d&&(a.isOffsetFixed&&a.offset===0&&!m?S+="Z":a.o<0?(S+="-",S+=Un(Math.trunc(-a.o/60)),S+=":",S+=Un(Math.trunc(-a.o%60))):(S+="+",S+=Un(Math.trunc(a.o/60)),S+=":",S+=Un(Math.trunc(a.o%60)))),m&&(S+="["+a.zone.ianaName+"]"),S}const Tw={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},z8={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},V8={ordinal:1,hour:0,minute:0,second:0,millisecond:0},tf=["year","month","day","hour","minute","second","millisecond"],H8=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],G8=["year","ordinal","hour","minute","second","millisecond"];function nf(a){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!e)throw new Tx(a);return e}function _p(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return nf(a)}}function q8(a){if(sc===void 0&&(sc=Sn.now()),a.type!=="iana")return a.offset(sc);const e=a.name;let i=W0.get(e);return i===void 0&&(i=a.offset(sc),W0.set(e,i)),i}function Cp(a,e){const i=rs(e.zone,Sn.defaultZone);if(!i.isValid)return nt.invalid(ac(i));const o=jt.fromObject(e);let d,m;if(rt(a.year))d=Sn.now();else{for(const S of tf)rt(a[S])&&(a[S]=Tw[S]);const x=$x(a)||ew(a);if(x)return nt.invalid(x);const A=q8(i);[d,m]=ef(a,A,i)}return new nt({ts:d,zone:i,loc:o,o:m})}function Tp(a,e,i){const o=rt(i.round)?!0:i.round,d=rt(i.rounding)?"trunc":i.rounding,m=(A,S)=>(A=m1(A,o||i.calendary?0:2,i.calendary?"round":d),e.loc.clone(i).relFormatter(i).format(A,S)),x=A=>i.calendary?e.hasSame(a,A)?0:e.startOf(A).diff(a.startOf(A),A).get(A):e.diff(a,A).get(A);if(i.unit)return m(x(i.unit),i.unit);for(const A of i.units){const S=x(A);if(Math.abs(S)>=1)return m(S,A)}return m(a>e?-0:0,i.units[i.units.length-1])}function Op(a){let e={},i;return a.length>0&&typeof a[a.length-1]=="object"?(e=a[a.length-1],i=Array.from(a).slice(0,a.length-1)):i=Array.from(a),[e,i]}let sc;const W0=new Map;class nt{constructor(e){const i=e.zone||Sn.defaultZone;let o=e.invalid||(Number.isNaN(e.ts)?new Si("invalid input"):null)||(i.isValid?null:ac(i));this.ts=rt(e.ts)?Sn.now():e.ts;let d=null,m=null;if(!o)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[d,m]=[e.old.c,e.old.o];else{const A=is(e.o)&&!e.old?e.o:i.offset(this.ts);d=Ju(this.ts,A),o=Number.isNaN(d.year)?new Si("invalid input"):null,d=o?null:d,m=o?null:A}this._zone=i,this.loc=e.loc||jt.create(),this.invalid=o,this.weekData=null,this.localWeekData=null,this.c=d,this.o=m,this.isLuxonDateTime=!0}static now(){return new nt({})}static local(){const[e,i]=Op(arguments),[o,d,m,x,A,S,v]=i;return Cp({year:o,month:d,day:m,hour:x,minute:A,second:S,millisecond:v},e)}static utc(){const[e,i]=Op(arguments),[o,d,m,x,A,S,v]=i;return e.zone=gr.utcInstance,Cp({year:o,month:d,day:m,hour:x,minute:A,second:S,millisecond:v},e)}static fromJSDate(e,i={}){const o=ST(e)?e.valueOf():NaN;if(Number.isNaN(o))return nt.invalid("invalid input");const d=rs(i.zone,Sn.defaultZone);return d.isValid?new nt({ts:o,zone:d,loc:jt.fromObject(i)}):nt.invalid(ac(d))}static fromMillis(e,i={}){if(is(e))return e<-Ep||e>Ep?nt.invalid("Timestamp out of range"):new nt({ts:e,zone:rs(i.zone,Sn.defaultZone),loc:jt.fromObject(i)});throw new rr(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(is(e))return new nt({ts:e*1e3,zone:rs(i.zone,Sn.defaultZone),loc:jt.fromObject(i)});throw new rr("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const o=rs(i.zone,Sn.defaultZone);if(!o.isValid)return nt.invalid(ac(o));const d=jt.fromObject(i),m=pf(e,_p),{minDaysInFirstWeek:x,startOfWeek:A}=fp(m,d),S=Sn.now(),v=rt(i.specificOffset)?o.offset(S):i.specificOffset,T=!rt(m.ordinal),R=!rt(m.year),U=!rt(m.month)||!rt(m.day),j=R||U,H=m.weekYear||m.weekNumber;if((j||T)&&H)throw new qo("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(U&&T)throw new qo("Can't mix ordinal dates with month/day");const q=H||m.weekday&&!j;let Q,ue,se=Ju(S,v);q?(Q=H8,ue=z8,se=mf(se,x,A)):T?(Q=G8,ue=V8,se=g0(se)):(Q=tf,ue=Tw);let W=!1;for(const Mt of Q){const ft=m[Mt];rt(ft)?W?m[Mt]=ue[Mt]:m[Mt]=se[Mt]:W=!0}const me=q?bT(m,x,A):T?vT(m):$x(m),Pe=me||ew(m);if(Pe)return nt.invalid(Pe);const Ae=q?cp(m,x,A):T?up(m):m,[J,xe]=ef(Ae,v,o),fe=new nt({ts:J,zone:o,o:xe,loc:d});return m.weekday&&j&&e.weekday!==fe.weekday?nt.invalid("mismatched weekday",`you can't specify both a weekday of ${m.weekday} and a date of ${fe.toISO()}`):fe.isValid?fe:nt.invalid(fe.invalid)}static fromISO(e,i={}){const[o,d]=h8(e);return Po(o,d,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[o,d]=d8(e);return Po(o,d,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[o,d]=g8(e);return Po(o,d,i,"HTTP",i)}static fromFormat(e,i,o={}){if(rt(e)||rt(i))throw new rr("fromFormat requires an input string and a format");const{locale:d=null,numberingSystem:m=null}=o,x=jt.fromOpts({locale:d,numberingSystem:m,defaultToEN:!0}),[A,S,v,T]=F8(x,e,i);return T?nt.invalid(T):Po(A,S,o,`format ${i}`,e,v)}static fromString(e,i,o={}){return nt.fromFormat(e,i,o)}static fromSQL(e,i={}){const[o,d]=v8(e);return Po(o,d,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new rr("need to specify a reason the DateTime is invalid");const o=e instanceof Si?e:new Si(e,i);if(Sn.throwOnInvalid)throw new X4(o);return new nt({invalid:o})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const o=_w(e,jt.fromObject(i));return o?o.map(d=>d?d.val:null).join(""):null}static expandFormat(e,i={}){return Ew(ir.parseFormat(e),jt.fromObject(i)).map(d=>d.val).join("")}static resetCache(){sc=void 0,W0.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?p0(this).weekYear:NaN}get weekNumber(){return this.isValid?p0(this).weekNumber:NaN}get weekday(){return this.isValid?p0(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?x0(this).weekday:NaN}get localWeekNumber(){return this.isValid?x0(this).weekNumber:NaN}get localWeekYear(){return this.isValid?x0(this).weekYear:NaN}get ordinal(){return this.isValid?g0(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ku.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ku.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ku.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Ku.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,o=Of(this.c),d=this.zone.offset(o-e),m=this.zone.offset(o+e),x=this.zone.offset(o-d*i),A=this.zone.offset(o-m*i);if(x===A)return[this];const S=o-x*i,v=o-A*i,T=Ju(S,x),R=Ju(v,A);return T.hour===R.hour&&T.minute===R.minute&&T.second===R.second&&T.millisecond===R.millisecond?[Ms(this,{ts:S}),Ms(this,{ts:v})]:[this]}get isInLeapYear(){return bc(this.year)}get daysInMonth(){return yf(this.year,this.month)}get daysInYear(){return this.isValid?Xo(this.year):NaN}get weeksInWeekYear(){return this.isValid?pc(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?pc(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:o,calendar:d}=ir.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:o,outputCalendar:d}}toUTC(e=0,i={}){return this.setZone(gr.instance(e),i)}toLocal(){return this.setZone(Sn.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:o=!1}={}){if(e=rs(e,Sn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let d=this.ts;if(i||o){const m=e.offset(this.ts),x=this.toObject();[d]=ef(x,m,e)}return Ms(this,{ts:d,zone:e})}else return nt.invalid(ac(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:o}={}){const d=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:o});return Ms(this,{loc:d})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=pf(e,_p),{minDaysInFirstWeek:o,startOfWeek:d}=fp(i,this.loc),m=!rt(i.weekYear)||!rt(i.weekNumber)||!rt(i.weekday),x=!rt(i.ordinal),A=!rt(i.year),S=!rt(i.month)||!rt(i.day),v=A||S,T=i.weekYear||i.weekNumber;if((v||x)&&T)throw new qo("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(S&&x)throw new qo("Can't mix ordinal dates with month/day");let R;m?R=cp({...mf(this.c,o,d),...i},o,d):rt(i.ordinal)?(R={...this.toObject(),...i},rt(i.day)&&(R.day=Math.min(yf(R.year,R.month),R.day))):R=up({...g0(this.c),...i});const[U,j]=ef(R,this.o,this.zone);return Ms(this,{ts:U,o:j})}plus(e){if(!this.isValid)return this;const i=Ct.fromDurationLike(e);return Ms(this,Sp(this,i))}minus(e){if(!this.isValid)return this;const i=Ct.fromDurationLike(e).negate();return Ms(this,Sp(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const o={},d=Ct.normalizeUnit(e);switch(d){case"years":o.month=1;case"quarters":case"months":o.day=1;case"weeks":case"days":o.hour=0;case"hours":o.minute=0;case"minutes":o.second=0;case"seconds":o.millisecond=0;break}if(d==="weeks")if(i){const m=this.loc.getStartOfWeek(),{weekday:x}=this;x<m&&(o.weekNumber=this.weekNumber-1),o.weekday=m}else o.weekday=1;if(d==="quarters"){const m=Math.ceil(this.month/3);o.month=(m-1)*3+1}return this.set(o)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?ir.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):y0}toLocaleString(e=gf,i={}){return this.isValid?ir.create(this.loc.clone(i),e).formatDateTime(this):y0}toLocaleParts(e={}){return this.isValid?ir.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:o=!1,includeOffset:d=!0,extendedZone:m=!1,precision:x="milliseconds"}={}){if(!this.isValid)return null;x=nf(x);const A=e==="extended";let S=w0(this,A,x);return tf.indexOf(x)>=3&&(S+="T"),S+=Ap(this,A,i,o,d,m,x),S}toISODate({format:e="extended",precision:i="day"}={}){return this.isValid?w0(this,e==="extended",nf(i)):null}toISOWeekDate(){return $u(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:o=!0,includePrefix:d=!1,extendedZone:m=!1,format:x="extended",precision:A="milliseconds"}={}){return this.isValid?(A=nf(A),(d&&tf.indexOf(A)>=3?"T":"")+Ap(this,x==="extended",i,e,o,m,A)):null}toRFC2822(){return $u(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return $u(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?w0(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:o=!0}={}){let d="HH:mm:ss.SSS";return(i||e)&&(o&&(d+=" "),i?d+="z":e&&(d+="ZZ")),$u(this,d,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():y0}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",o={}){if(!this.isValid||!e.isValid)return Ct.invalid("created by diffing an invalid DateTime");const d={locale:this.locale,numberingSystem:this.numberingSystem,...o},m=AT(i).map(Ct.normalizeUnit),x=e.valueOf()>this.valueOf(),A=x?this:e,S=x?e:this,v=T8(A,S,m,d);return x?v.negate():v}diffNow(e="milliseconds",i={}){return this.diff(nt.now(),e,i)}until(e){return this.isValid?vn.fromDateTimes(this,e):this}hasSame(e,i,o){if(!this.isValid)return!1;const d=e.valueOf(),m=this.setZone(e.zone,{keepLocalTime:!0});return m.startOf(i,o)<=d&&d<=m.endOf(i,o)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||nt.fromObject({},{zone:this.zone}),o=e.padding?this<i?-e.padding:e.padding:0;let d=["years","months","days","hours","minutes","seconds"],m=e.unit;return Array.isArray(e.unit)&&(d=e.unit,m=void 0),Tp(i,this.plus(o),{...e,numeric:"always",units:d,unit:m})}toRelativeCalendar(e={}){return this.isValid?Tp(e.base||nt.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(nt.isDateTime))throw new rr("min requires all arguments be DateTimes");return hp(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(nt.isDateTime))throw new rr("max requires all arguments be DateTimes");return hp(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,o={}){const{locale:d=null,numberingSystem:m=null}=o,x=jt.fromOpts({locale:d,numberingSystem:m,defaultToEN:!0});return Aw(x,e,i)}static fromStringExplain(e,i,o={}){return nt.fromFormatExplain(e,i,o)}static buildFormatParser(e,i={}){const{locale:o=null,numberingSystem:d=null}=i,m=jt.fromOpts({locale:o,numberingSystem:d,defaultToEN:!0});return new Sw(m,e)}static fromFormatParser(e,i,o={}){if(rt(e)||rt(i))throw new rr("fromFormatParser requires an input string and a format parser");const{locale:d=null,numberingSystem:m=null}=o,x=jt.fromOpts({locale:d,numberingSystem:m,defaultToEN:!0});if(!x.equals(i.locale))throw new rr(`fromFormatParser called with a locale of ${x}, but the format parser was created for ${i.locale}`);const{result:A,zone:S,specificOffset:v,invalidReason:T}=i.explainFromTokens(e);return T?nt.invalid(T):Po(A,S,o,`format ${i.format}`,e,v)}static get DATE_SHORT(){return gf}static get DATE_MED(){return Ox}static get DATE_MED_WITH_WEEKDAY(){return Q4}static get DATE_FULL(){return Nx}static get DATE_HUGE(){return Rx}static get TIME_SIMPLE(){return Ix}static get TIME_WITH_SECONDS(){return kx}static get TIME_WITH_SHORT_OFFSET(){return Dx}static get TIME_WITH_LONG_OFFSET(){return Mx}static get TIME_24_SIMPLE(){return Bx}static get TIME_24_WITH_SECONDS(){return Lx}static get TIME_24_WITH_SHORT_OFFSET(){return Ux}static get TIME_24_WITH_LONG_OFFSET(){return jx}static get DATETIME_SHORT(){return Px}static get DATETIME_SHORT_WITH_SECONDS(){return Fx}static get DATETIME_MED(){return zx}static get DATETIME_MED_WITH_SECONDS(){return Vx}static get DATETIME_MED_WITH_WEEKDAY(){return J4}static get DATETIME_FULL(){return Hx}static get DATETIME_FULL_WITH_SECONDS(){return Gx}static get DATETIME_HUGE(){return qx}static get DATETIME_HUGE_WITH_SECONDS(){return Wx}}function tc(a){if(nt.isDateTime(a))return a;if(a&&a.valueOf&&is(a.valueOf()))return nt.fromJSDate(a);if(a&&typeof a=="object")return nt.fromObject(a);throw new rr(`Unknown datetime argument: ${a}, of type ${typeof a}`)}function W8(){const[a,e]=Ge.useState({month:nt.now().toFormat("yyyy-MM"),totalSpent:0,totalWasted:0,wastePct:0,topCategories:[]}),[i,o]=Ge.useState(!0),[d,m]=Ge.useState(null);Ge.useEffect(()=>{x()},[]);const x=async()=>{o(!0);try{const A=nt.now().toFormat("yyyy-MM"),{data:S,error:v}=await li.getStats(A);v&&v.code!=="PGRST116"&&console.warn("Failed to fetch stored stats",v);const{data:T,error:R}=await li.getProducts();if(R)throw R;const U=T.reduce((W,me)=>W+me.price*me.quantity,0),j=T.filter(W=>W.waste_status===!0),H=j.reduce((W,me)=>W+me.price*me.quantity,0),q=U+H,ue=T.filter(W=>!W.waste_status).reduce((W,me)=>W+me.price*me.quantity,0),se=q>0?H/q*100:0;e({month:A,totalPantryValue:ue,totalWasted:H,wastePct:se.toFixed(1),wasteItemsCount:j.length})}catch(A){console.error(A),m("Failed to load statistics")}finally{o(!1)}};return{stats:a,loading:i,error:d,refreshStats:x}}function Y8(){const{stats:a,loading:e,error:i}=W8();if(e)return D.jsx("div",{className:"flex justify-center py-10",children:D.jsx(rf,{className:"w-8 h-8 text-blue-500 animate-spin"})});if(i)return D.jsx("div",{className:"text-red-500 p-4 font-medium",children:i});const o=a.wastePct<5?"good":a.wastePct<15?"warning":"bad",d=o==="good"?"text-green-500":o==="warning"?"text-yellow-500":"text-red-500",m=o==="good"?"bg-green-100 dark:bg-green-900/20":o==="warning"?"bg-yellow-100 dark:bg-yellow-900/20":"bg-red-100 dark:bg-red-900/20";return D.jsxs("div",{className:"p-4 space-y-6",children:[D.jsxs("div",{className:"text-center mb-6",children:[D.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Riepilogo Sprechi"}),D.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Analisi della tua efficienza"})]}),D.jsxs(_r,{className:"p-6 text-center flex flex-col items-center",children:[D.jsxs("div",{className:`w-24 h-24 rounded-full flex items-center justify-center mb-3 ${m} transition-colors`,children:[o==="good"&&D.jsx(Cv,{size:40,className:d}),o==="warning"&&D.jsx(b0,{size:40,className:d}),o==="bad"&&D.jsx(k2,{size:40,className:d})]}),D.jsxs("h3",{className:"text-4xl font-black text-gray-900 dark:text-white mb-1",children:[100-a.wastePct,"%"]}),D.jsx("p",{className:"text-gray-500 uppercase tracking-widest text-xs font-bold",children:"Punteggio Efficienza"}),D.jsxs("div",{className:"mt-4 text-sm text-gray-600 dark:text-gray-300 max-w-xs mx-auto",children:[o==="good"&&"Ottimo lavoro! Stai sprecando pochissimo.",o==="warning"&&"Attenzione, qualche prodotto sta scadendo troppo spesso.",o==="bad"&&"C' molto margine di miglioramento. Controlla le scadenze!"]})]}),D.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[D.jsxs(_r,{className:"p-4 flex flex-col justify-center",children:[D.jsxs("div",{className:"flex items-center gap-2 mb-1 text-red-500",children:[D.jsx(k2,{size:16}),D.jsx("span",{className:"text-xs font-bold uppercase",children:"Persi"})]}),D.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["",a.totalWasted.toFixed(2)]}),D.jsxs("p",{className:"text-[10px] text-gray-400",children:[a.wasteItemsCount," prodotti buttati"]})]}),D.jsxs(_r,{className:"p-4 flex flex-col justify-center",children:[D.jsxs("div",{className:"flex items-center gap-2 mb-1 text-green-500",children:[D.jsx(Ev,{size:16}),D.jsx("span",{className:"text-xs font-bold uppercase",children:"Valore Attivo"})]}),D.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["",a.totalPantryValue.toFixed(2)]}),D.jsx("p",{className:"text-[10px] text-gray-400",children:"Prodotti in dispensa"})]})]})]})}function X8(){const[a,e]=Ge.useState([]),[i,o]=Ge.useState(!1),[d,m]=Ge.useState(Notification.permission),[x,A]=Ge.useState("pantry"),[S,v]=Ge.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light"),[T,R]=Ge.useState(null),[U,j]=Ge.useState(null),[H,q]=Ge.useState([]),[Q,ue]=Ge.useState(null),[se,W]=Ge.useState(!1),[me,Pe]=Ge.useState(""),[Ae,J]=Ge.useState(!1),[xe,fe]=Ge.useState([]),[Mt,ft]=Ge.useState(!0);Ge.useEffect(()=>{Oe()},[]),Ge.useEffect(()=>{const z=window.document.documentElement;z.classList.remove("light","dark"),z.classList.add(S),localStorage.setItem("theme",S)},[S]);const Oe=async()=>{try{const z=await Af();if(z){const Z=await PS();if(!Z)await R(null),await j(null);else{R(z),j(Z);const ce=await ny(z);q(ce),ce.length>0&&ue(ce[0]),await qe(z)}}}catch(z){console.error("Init error:",z)}finally{ft(!1)}},qe=async z=>{const Z=z||T;if(!Z)return;const ce=await GS(Z);e(ce),he(ce)},$e=z=>{ue(z),W(!1)},ne=async z=>{if(z.preventDefault(),!me.trim())return;const{success:Z,location:ce}=await Kp(T,me);if(Z&&ce){const Ne=[...H,ce];q(Ne),ue(ce),Pe(""),J(!1),W(!1)}},$=async z=>{await zS(z);const Z=await ny(T);q(Z),Q?.id===z&&ue(Z[0]||null)},he=z=>{const Z=m_(z);if(fe(Z),Z.length>0&&Notification.permission==="granted"){const ce=Z.length,Ne=ce===1?`${Z[0].name} sta scadendo!`:`${ce} prodotti stanno scadendo!`;y_("Pantry Alert",Ne)}},we=async z=>{const Z={...z,locationId:Q?.id};await qS(Z,T),await qe()},de=async()=>{await qe()},le=async()=>{const z=await g_();m(z?"granted":"denied"),z&&he(a)},B=async z=>{ft(!0),await Oe()};return Mt?null:T?D.jsxs("div",{className:"h-[100dvh] flex flex-col overflow-hidden text-gray-800 font-sans transition-colors duration-500 bg-gradient-to-br from-teal-50 via-orange-50 to-rose-50 dark:from-pantry-bg-dark dark:to-pantry-bg-secondary",children:[D.jsxs("header",{className:"px-6 py-5 pt-[calc(1.25rem+env(safe-area-inset-top))] flex justify-between items-center z-30 shrink-0",children:[D.jsxs("div",{children:[D.jsxs("div",{className:"relative",children:[D.jsxs("button",{onClick:()=>W(!se),disabled:x==="settings",className:`flex items-center gap-2 text-3xl font-bold tracking-tight bg-gradient-to-r from-gray-800 to-gray-600 dark:from-white dark:to-pantry-text-secondary bg-clip-text text-transparent hover:opacity-80 transition-opacity ${x==="settings"?"pointer-events-none":""}`,children:[x==="pantry"?Q?.name||"Caricamento...":x==="shopping"?"Spesa":x==="stats"?"Rifiuti":"Impostazioni",x==="pantry"&&D.jsx(pv,{size:24,className:`text-gray-600 dark:text-pantry-text-secondary transition-transform duration-300 ${se?"rotate-180":""}`})]}),se&&x==="pantry"&&D.jsxs(D.Fragment,{children:[D.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>W(!1)}),D.jsxs("div",{className:"absolute top-full left-0 mt-3 w-72 bg-white/90 dark:bg-pantry-bg-secondary rounded-3xl shadow-2xl border border-gray-200/50 dark:border-white/5 overflow-hidden z-50 animate-fade-in-up origin-top-left p-2",children:[D.jsx("div",{className:"px-4 py-2 text-xs font-bold text-gray-400 uppercase tracking-wider",children:U?.name||"Famiglia"}),D.jsx("div",{className:"max-h-60 overflow-y-auto no-scrollbar",children:H.map(z=>D.jsxs("button",{onClick:()=>$e(z),className:`w-full text-left px-4 py-3.5 rounded-2xl mb-1 flex items-center justify-between transition-all ${Q?.id===z.id?"bg-gray-900 dark:bg-pantry-glass-high text-white dark:text-pantry-text-primary font-bold shadow-md transform scale-[1.02]":"hover:bg-gray-100 dark:hover:bg-pantry-glass-low text-gray-600 dark:text-pantry-text-secondary"}`,children:[D.jsx("span",{className:"truncate",children:z.name}),Q?.id===z.id&&D.jsx("div",{className:"w-2 h-2 rounded-full bg-pantry-accent-green"})]},z.id))}),D.jsx("div",{className:"h-px bg-gray-200/50 dark:bg-white/5 my-2 mx-2"}),Ae?D.jsxs("form",{onSubmit:ne,className:"p-2 animate-fade-in-up",children:[D.jsx("input",{autoFocus:!0,type:"text",placeholder:"Es. Cantina...",value:me,onChange:z=>Pe(z.target.value),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-pantry-bg-dark border border-gray-200 dark:border-white/5 mb-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-pantry-text-primary dark:placeholder-pantry-text-secondary/50 transition-all font-medium"}),D.jsxs("div",{className:"flex gap-2",children:[D.jsx("button",{type:"submit",disabled:!me.trim(),className:"flex-1 bg-blue-600 text-white text-xs font-bold py-2.5 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-700 transition",children:"Crea"}),D.jsx("button",{type:"button",onClick:()=>J(!1),className:"flex-1 bg-gray-100 dark:bg-pantry-glass-low text-gray-600 dark:text-pantry-text-secondary text-xs font-bold py-2.5 rounded-xl hover:bg-gray-200 dark:hover:bg-pantry-glass-medium transition",children:"Annulla"})]})]}):D.jsxs("button",{onClick:()=>J(!0),className:"w-full text-left px-4 py-3.5 rounded-2xl text-blue-600 dark:text-blue-400 font-bold hover:bg-blue-50 dark:hover:bg-blue-500/10 transition flex items-center gap-3",children:[D.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-500/20 flex items-center justify-center",children:D.jsx(af,{size:14})}),"Nuova Dispensa"]})]})]})]}),D.jsxs("p",{className:"text-gray-500 dark:text-pantry-text-secondary text-sm font-medium mt-0.5 tracking-wide",children:[x==="pantry"&&"La tua dispensa digitale",x==="shopping"&&"Lista della spesa",x==="stats"&&"Statistiche Sprechi",x==="settings"&&"Personalizza esperienza"]}),xe.length>0&&x==="pantry"&&D.jsxs("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 rounded-2xl flex items-center gap-3 animate-pulse",children:[D.jsx("div",{className:"p-2 bg-red-500 text-white rounded-full",children:D.jsx(t3,{size:18,fill:"currentColor"})}),D.jsxs("div",{children:[D.jsx("p",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:"Attenzione!"}),D.jsx("p",{className:"text-xs text-red-500/80 font-medium",children:xe.length===1?"1 prodotto sta scadendo":`${xe.length} prodotti in scadenza`})]})]})]}),d==="default"&&D.jsx("button",{onClick:le,className:"w-12 h-12 flex items-center justify-center text-gray-700 dark:text-pantry-text-primary bg-white/50 dark:bg-pantry-glass-low backdrop-blur-md border border-white/60 dark:border-white/5 rounded-full shadow-lg hover:scale-110 active:scale-95 transition-all",title:"Attiva Notifiche",children:D.jsx(uv,{size:20,strokeWidth:2.5,className:xe.length>0?"text-red-500 animate-bounce":""})})]}),D.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden px-5 pb-[calc(8rem+env(safe-area-inset-bottom))] pt-2 scroll-smooth no-scrollbar",children:D.jsxs("div",{className:"max-w-md mx-auto h-full",children:[x==="pantry"&&D.jsx(UC,{products:Q?a.filter(z=>z.locationId===Q.id):a,onUpdate:de}),x==="shopping"&&D.jsx(w4,{}),x==="stats"&&D.jsx("div",{className:"h-full",children:D.jsx(Y8,{})}),x==="settings"&&D.jsx(W4,{currentTheme:S,onThemeChange:v,currentFamily:U,locations:H,onAddLocation:ne,onRemoveLocation:$})]})}),x==="pantry"&&D.jsx("button",{onClick:()=>o(!0),className:"fixed bottom-32 right-6 w-16 h-16 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-[24px] shadow-2xl flex items-center justify-center hover:scale-105 active:scale-95 transition-all z-30 border border-white/20 dark:border-black/10",children:D.jsx(af,{size:32,strokeWidth:2.5})}),i&&D.jsx(q4,{onAdd:we,onClose:()=>o(!1)}),D.jsx(Y4,{activeTab:x,onTabChange:A})]}):D.jsx(jC,{onComplete:B})}tv.createRoot(document.getElementById("root")).render(D.jsx(Ge.StrictMode,{children:D.jsx(X8,{})}));
