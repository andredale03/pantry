function ev(a,e){for(var i=0;i<e.length;i++){const o=e[i];if(typeof o!="string"&&!Array.isArray(o)){for(const h in o)if(h!=="default"&&!(h in a)){const m=Object.getOwnPropertyDescriptor(o,h);m&&Object.defineProperty(a,h,m.get?m:{enumerable:!0,get:()=>o[h]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const x of m.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&o(x)}).observe(document,{childList:!0,subtree:!0});function i(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(h){if(h.ep)return;h.ep=!0;const m=i(h);fetch(h.href,m)}})();var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ip(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Ch={exports:{}},Ql={};var _2;function tv(){if(_2)return Ql;_2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,h,m){var x=null;if(m!==void 0&&(x=""+m),h.key!==void 0&&(x=""+h.key),"key"in h){m={};for(var A in h)A!=="key"&&(m[A]=h[A])}else m=h;return h=m.ref,{$$typeof:a,type:o,key:x,ref:h!==void 0?h:null,props:m}}return Ql.Fragment=e,Ql.jsx=i,Ql.jsxs=i,Ql}var C2;function nv(){return C2||(C2=1,Ch.exports=tv()),Ch.exports}var I=nv(),Th={exports:{}},st={};var T2;function rv(){if(T2)return st;T2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),x=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),j=Symbol.iterator;function U(B){return B===null||typeof B!="object"?null:(B=j&&B[j]||B["@@iterator"],typeof B=="function"?B:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,Z={};function le(B,Y,ie){this.props=B,this.context=Y,this.refs=Z,this.updater=ie||G}le.prototype.isReactComponent={},le.prototype.setState=function(B,Y){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Y,"setState")},le.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function Q(){}Q.prototype=le.prototype;function q(B,Y,ie){this.props=B,this.context=Y,this.refs=Z,this.updater=ie||G}var xe=q.prototype=new Q;xe.constructor=q,H(xe,le.prototype),xe.isPureReactComponent=!0;var Le=Array.isArray;function Se(){}var $={H:null,A:null,T:null,S:null},we=Object.prototype.hasOwnProperty;function de(B,Y,ie){var J=ie.ref;return{$$typeof:a,type:B,key:Y,ref:J!==void 0?J:null,props:ie}}function At(B,Y){return de(B.type,Y,B.props)}function ft(B){return typeof B=="object"&&B!==null&&B.$$typeof===a}function Ie(B){var Y={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ie){return Y[ie]})}var Ye=/\/+/g;function $e(B,Y){return typeof B=="object"&&B!==null&&B.key!=null?Ie(""+B.key):Y.toString(36)}function re(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(Se,Se):(B.status="pending",B.then(function(Y){B.status==="pending"&&(B.status="fulfilled",B.value=Y)},function(Y){B.status==="pending"&&(B.status="rejected",B.reason=Y)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function ee(B,Y,ie,J,Te){var me=typeof B;(me==="undefined"||me==="boolean")&&(B=null);var Re=!1;if(B===null)Re=!0;else switch(me){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(B.$$typeof){case a:case e:Re=!0;break;case T:return Re=B._init,ee(Re(B._payload),Y,ie,J,Te)}}if(Re)return Te=Te(B),Re=J===""?"."+$e(B,0):J,Le(Te)?(ie="",Re!=null&&(ie=Re.replace(Ye,"$&/")+"/"),ee(Te,Y,ie,"",function(We){return We})):Te!=null&&(ft(Te)&&(Te=At(Te,ie+(Te.key==null||B&&B.key===Te.key?"":(""+Te.key).replace(Ye,"$&/")+"/")+Re)),Y.push(Te)),1;Re=0;var He=J===""?".":J+":";if(Le(B))for(var Oe=0;Oe<B.length;Oe++)J=B[Oe],me=He+$e(J,Oe),Re+=ee(J,Y,ie,me,Te);else if(Oe=U(B),typeof Oe=="function")for(B=Oe.call(B),Oe=0;!(J=B.next()).done;)J=J.value,me=He+$e(J,Oe++),Re+=ee(J,Y,ie,me,Te);else if(me==="object"){if(typeof B.then=="function")return ee(re(B),Y,ie,J,Te);throw Y=String(B),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Re}function fe(B,Y,ie){if(B==null)return B;var J=[],Te=0;return ee(B,J,"","",function(me){return Y.call(ie,me,Te++)}),J}function be(B){if(B._status===-1){var Y=B._result;Y=Y(),Y.then(function(ie){(B._status===0||B._status===-1)&&(B._status=1,B._result=ie)},function(ie){(B._status===0||B._status===-1)&&(B._status=2,B._result=ie)}),B._status===-1&&(B._status=0,B._result=Y)}if(B._status===1)return B._result.default;throw B._result}var he=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},ue={map:fe,forEach:function(B,Y,ie){fe(B,function(){Y.apply(this,arguments)},ie)},count:function(B){var Y=0;return fe(B,function(){Y++}),Y},toArray:function(B){return fe(B,function(Y){return Y})||[]},only:function(B){if(!ft(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return st.Activity=O,st.Children=ue,st.Component=le,st.Fragment=i,st.Profiler=h,st.PureComponent=q,st.StrictMode=o,st.Suspense=E,st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,st.__COMPILER_RUNTIME={__proto__:null,c:function(B){return $.H.useMemoCache(B)}},st.cache=function(B){return function(){return B.apply(null,arguments)}},st.cacheSignal=function(){return null},st.cloneElement=function(B,Y,ie){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var J=H({},B.props),Te=B.key;if(Y!=null)for(me in Y.key!==void 0&&(Te=""+Y.key),Y)!we.call(Y,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&Y.ref===void 0||(J[me]=Y[me]);var me=arguments.length-2;if(me===1)J.children=ie;else if(1<me){for(var Re=Array(me),He=0;He<me;He++)Re[He]=arguments[He+2];J.children=Re}return de(B.type,Te,J)},st.createContext=function(B){return B={$$typeof:x,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:m,_context:B},B},st.createElement=function(B,Y,ie){var J,Te={},me=null;if(Y!=null)for(J in Y.key!==void 0&&(me=""+Y.key),Y)we.call(Y,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(Te[J]=Y[J]);var Re=arguments.length-2;if(Re===1)Te.children=ie;else if(1<Re){for(var He=Array(Re),Oe=0;Oe<Re;Oe++)He[Oe]=arguments[Oe+2];Te.children=He}if(B&&B.defaultProps)for(J in Re=B.defaultProps,Re)Te[J]===void 0&&(Te[J]=Re[J]);return de(B,me,Te)},st.createRef=function(){return{current:null}},st.forwardRef=function(B){return{$$typeof:A,render:B}},st.isValidElement=ft,st.lazy=function(B){return{$$typeof:T,_payload:{_status:-1,_result:B},_init:be}},st.memo=function(B,Y){return{$$typeof:v,type:B,compare:Y===void 0?null:Y}},st.startTransition=function(B){var Y=$.T,ie={};$.T=ie;try{var J=B(),Te=$.S;Te!==null&&Te(ie,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(Se,he)}catch(me){he(me)}finally{Y!==null&&ie.types!==null&&(Y.types=ie.types),$.T=Y}},st.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},st.use=function(B){return $.H.use(B)},st.useActionState=function(B,Y,ie){return $.H.useActionState(B,Y,ie)},st.useCallback=function(B,Y){return $.H.useCallback(B,Y)},st.useContext=function(B){return $.H.useContext(B)},st.useDebugValue=function(){},st.useDeferredValue=function(B,Y){return $.H.useDeferredValue(B,Y)},st.useEffect=function(B,Y){return $.H.useEffect(B,Y)},st.useEffectEvent=function(B){return $.H.useEffectEvent(B)},st.useId=function(){return $.H.useId()},st.useImperativeHandle=function(B,Y,ie){return $.H.useImperativeHandle(B,Y,ie)},st.useInsertionEffect=function(B,Y){return $.H.useInsertionEffect(B,Y)},st.useLayoutEffect=function(B,Y){return $.H.useLayoutEffect(B,Y)},st.useMemo=function(B,Y){return $.H.useMemo(B,Y)},st.useOptimistic=function(B,Y){return $.H.useOptimistic(B,Y)},st.useReducer=function(B,Y,ie){return $.H.useReducer(B,Y,ie)},st.useRef=function(B){return $.H.useRef(B)},st.useState=function(B){return $.H.useState(B)},st.useSyncExternalStore=function(B,Y,ie){return $.H.useSyncExternalStore(B,Y,ie)},st.useTransition=function(){return $.H.useTransition()},st.version="19.2.3",st}var O2;function X0(){return O2||(O2=1,Th.exports=rv()),Th.exports}var Fe=X0(),Oh={exports:{}},Jl={},Nh={exports:{}},Rh={};var N2;function iv(){return N2||(N2=1,(function(a){function e(ee,fe){var be=ee.length;ee.push(fe);e:for(;0<be;){var he=be-1>>>1,ue=ee[he];if(0<h(ue,fe))ee[he]=fe,ee[be]=ue,be=he;else break e}}function i(ee){return ee.length===0?null:ee[0]}function o(ee){if(ee.length===0)return null;var fe=ee[0],be=ee.pop();if(be!==fe){ee[0]=be;e:for(var he=0,ue=ee.length,B=ue>>>1;he<B;){var Y=2*(he+1)-1,ie=ee[Y],J=Y+1,Te=ee[J];if(0>h(ie,be))J<ue&&0>h(Te,ie)?(ee[he]=Te,ee[J]=be,he=J):(ee[he]=ie,ee[Y]=be,he=Y);else if(J<ue&&0>h(Te,be))ee[he]=Te,ee[J]=be,he=J;else break e}}return fe}function h(ee,fe){var be=ee.sortIndex-fe.sortIndex;return be!==0?be:ee.id-fe.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;a.unstable_now=function(){return m.now()}}else{var x=Date,A=x.now();a.unstable_now=function(){return x.now()-A}}var E=[],v=[],T=1,O=null,j=3,U=!1,G=!1,H=!1,Z=!1,le=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function xe(ee){for(var fe=i(v);fe!==null;){if(fe.callback===null)o(v);else if(fe.startTime<=ee)o(v),fe.sortIndex=fe.expirationTime,e(E,fe);else break;fe=i(v)}}function Le(ee){if(H=!1,xe(ee),!G)if(i(E)!==null)G=!0,Se||(Se=!0,Ie());else{var fe=i(v);fe!==null&&re(Le,fe.startTime-ee)}}var Se=!1,$=-1,we=5,de=-1;function At(){return Z?!0:!(a.unstable_now()-de<we)}function ft(){if(Z=!1,Se){var ee=a.unstable_now();de=ee;var fe=!0;try{e:{G=!1,H&&(H=!1,Q($),$=-1),U=!0;var be=j;try{t:{for(xe(ee),O=i(E);O!==null&&!(O.expirationTime>ee&&At());){var he=O.callback;if(typeof he=="function"){O.callback=null,j=O.priorityLevel;var ue=he(O.expirationTime<=ee);if(ee=a.unstable_now(),typeof ue=="function"){O.callback=ue,xe(ee),fe=!0;break t}O===i(E)&&o(E),xe(ee)}else o(E);O=i(E)}if(O!==null)fe=!0;else{var B=i(v);B!==null&&re(Le,B.startTime-ee),fe=!1}}break e}finally{O=null,j=be,U=!1}fe=void 0}}finally{fe?Ie():Se=!1}}}var Ie;if(typeof q=="function")Ie=function(){q(ft)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,$e=Ye.port2;Ye.port1.onmessage=ft,Ie=function(){$e.postMessage(null)}}else Ie=function(){le(ft,0)};function re(ee,fe){$=le(function(){ee(a.unstable_now())},fe)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(ee){ee.callback=null},a.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<ee?Math.floor(1e3/ee):5},a.unstable_getCurrentPriorityLevel=function(){return j},a.unstable_next=function(ee){switch(j){case 1:case 2:case 3:var fe=3;break;default:fe=j}var be=j;j=fe;try{return ee()}finally{j=be}},a.unstable_requestPaint=function(){Z=!0},a.unstable_runWithPriority=function(ee,fe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var be=j;j=ee;try{return fe()}finally{j=be}},a.unstable_scheduleCallback=function(ee,fe,be){var he=a.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?he+be:he):be=he,ee){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=be+ue,ee={id:T++,callback:fe,priorityLevel:ee,startTime:be,expirationTime:ue,sortIndex:-1},be>he?(ee.sortIndex=be,e(v,ee),i(E)===null&&ee===i(v)&&(H?(Q($),$=-1):H=!0,re(Le,be-he))):(ee.sortIndex=ue,e(E,ee),G||U||(G=!0,Se||(Se=!0,Ie()))),ee},a.unstable_shouldYield=At,a.unstable_wrapCallback=function(ee){var fe=j;return function(){var be=j;j=fe;try{return ee.apply(this,arguments)}finally{j=be}}}})(Rh)),Rh}var R2;function av(){return R2||(R2=1,Nh.exports=iv()),Nh.exports}var Ih={exports:{}},rr={};var I2;function sv(){if(I2)return rr;I2=1;var a=X0();function e(E){var v="https://react.dev/errors/"+E;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)v+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+E+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},h=Symbol.for("react.portal");function m(E,v,T){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:O==null?null:""+O,children:E,containerInfo:v,implementation:T}}var x=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function A(E,v){if(E==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return rr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,rr.createPortal=function(E,v){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return m(E,v,null,T)},rr.flushSync=function(E){var v=x.T,T=o.p;try{if(x.T=null,o.p=2,E)return E()}finally{x.T=v,o.p=T,o.d.f()}},rr.preconnect=function(E,v){typeof E=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,o.d.C(E,v))},rr.prefetchDNS=function(E){typeof E=="string"&&o.d.D(E)},rr.preinit=function(E,v){if(typeof E=="string"&&v&&typeof v.as=="string"){var T=v.as,O=A(T,v.crossOrigin),j=typeof v.integrity=="string"?v.integrity:void 0,U=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;T==="style"?o.d.S(E,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:O,integrity:j,fetchPriority:U}):T==="script"&&o.d.X(E,{crossOrigin:O,integrity:j,fetchPriority:U,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},rr.preinitModule=function(E,v){if(typeof E=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var T=A(v.as,v.crossOrigin);o.d.M(E,{crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&o.d.M(E)},rr.preload=function(E,v){if(typeof E=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var T=v.as,O=A(T,v.crossOrigin);o.d.L(E,T,{crossOrigin:O,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},rr.preloadModule=function(E,v){if(typeof E=="string")if(v){var T=A(v.as,v.crossOrigin);o.d.m(E,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else o.d.m(E)},rr.requestFormReset=function(E){o.d.r(E)},rr.unstable_batchedUpdates=function(E,v){return E(v)},rr.useFormState=function(E,v,T){return x.H.useFormState(E,v,T)},rr.useFormStatus=function(){return x.H.useHostTransitionStatus()},rr.version="19.2.3",rr}var k2;function ov(){if(k2)return Ih.exports;k2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Ih.exports=sv(),Ih.exports}var D2;function lv(){if(D2)return Jl;D2=1;var a=av(),e=X0(),i=ov();function o(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var r=t,c=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(c=r.return),t=r.return;while(t)}return r.tag===3?c:null}function x(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function A(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function E(t){if(m(t)!==t)throw Error(o(188))}function v(t){var r=t.alternate;if(!r){if(r=m(t),r===null)throw Error(o(188));return r!==t?null:t}for(var c=t,f=r;;){var p=c.return;if(p===null)break;var b=p.alternate;if(b===null){if(f=p.return,f!==null){c=f;continue}break}if(p.child===b.child){for(b=p.child;b;){if(b===c)return E(p),t;if(b===f)return E(p),r;b=b.sibling}throw Error(o(188))}if(c.return!==f.return)c=p,f=b;else{for(var C=!1,D=p.child;D;){if(D===c){C=!0,c=p,f=b;break}if(D===f){C=!0,f=p,c=b;break}D=D.sibling}if(!C){for(D=b.child;D;){if(D===c){C=!0,c=b,f=p;break}if(D===f){C=!0,f=b,c=p;break}D=D.sibling}if(!C)throw Error(o(189))}}if(c.alternate!==f)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?t:r}function T(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=T(t),r!==null)return r;t=t.sibling}return null}var O=Object.assign,j=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),q=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),Le=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),de=Symbol.for("react.activity"),At=Symbol.for("react.memo_cache_sentinel"),ft=Symbol.iterator;function Ie(t){return t===null||typeof t!="object"?null:(t=ft&&t[ft]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Symbol.for("react.client.reference");function $e(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Ye?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case H:return"Fragment";case le:return"Profiler";case Z:return"StrictMode";case Le:return"Suspense";case Se:return"SuspenseList";case de:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case G:return"Portal";case q:return t.displayName||"Context";case Q:return(t._context.displayName||"Context")+".Consumer";case xe:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $:return r=t.displayName||null,r!==null?r:$e(t.type)||"Memo";case we:r=t._payload,t=t._init;try{return $e(t(r))}catch{}}return null}var re=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},he=[],ue=-1;function B(t){return{current:t}}function Y(t){0>ue||(t.current=he[ue],he[ue]=null,ue--)}function ie(t,r){ue++,he[ue]=t.current,t.current=r}var J=B(null),Te=B(null),me=B(null),Re=B(null);function He(t,r){switch(ie(me,r),ie(Te,t),ie(J,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Xm(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Xm(r),t=Zm(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Y(J),ie(J,t)}function Oe(){Y(J),Y(Te),Y(me)}function We(t){t.memoizedState!==null&&ie(Re,t);var r=J.current,c=Zm(r,t.type);r!==c&&(ie(Te,t),ie(J,c))}function tt(t){Te.current===t&&(Y(J),Y(Te)),Re.current===t&&(Y(Re),Yl._currentValue=be)}var en,nt;function rn(t){if(en===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);en=r&&r[1]||"",nt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+en+t+nt}var sr=!1;function Tr(t,r){if(!t||sr)return"";sr=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ce){var ae=ce}Reflect.construct(t,[],pe)}else{try{pe.call()}catch(ce){ae=ce}t.call(pe.prototype)}}else{try{throw Error()}catch(ce){ae=ce}(pe=t())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ce){if(ce&&ae&&typeof ce.stack=="string")return[ce.stack,ae.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),C=b[0],D=b[1];if(C&&D){var P=C.split(`
`),ne=D.split(`
`);for(p=f=0;f<P.length&&!P[f].includes("DetermineComponentFrameRoot");)f++;for(;p<ne.length&&!ne[p].includes("DetermineComponentFrameRoot");)p++;if(f===P.length||p===ne.length)for(f=P.length-1,p=ne.length-1;1<=f&&0<=p&&P[f]!==ne[p];)p--;for(;1<=f&&0<=p;f--,p--)if(P[f]!==ne[p]){if(f!==1||p!==1)do if(f--,p--,0>p||P[f]!==ne[p]){var ge=`
`+P[f].replace(" at new "," at ");return t.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",t.displayName)),ge}while(1<=f&&0<=p);break}}}finally{sr=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?rn(c):""}function An(t,r){switch(t.tag){case 26:case 27:case 5:return rn(t.type);case 16:return rn("Lazy");case 13:return t.child!==r&&r!==null?rn("Suspense Fallback"):rn("Suspense");case 19:return rn("SuspenseList");case 0:case 15:return Tr(t.type,!1);case 11:return Tr(t.type.render,!1);case 1:return Tr(t.type,!0);case 31:return rn("Activity");default:return""}}function Ft(t){try{var r="",c=null;do r+=An(t,c),c=t,t=t.return;while(t);return r}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var mt=Object.prototype.hasOwnProperty,ga=a.unstable_scheduleCallback,Me=a.unstable_cancelCallback,Gs=a.unstable_shouldYield,_c=a.unstable_requestPaint,hn=a.unstable_now,il=a.unstable_getCurrentPriorityLevel,pr=a.unstable_ImmediatePriority,al=a.unstable_UserBlockingPriority,Or=a.unstable_NormalPriority,Xn=a.unstable_LowPriority,sl=a.unstable_IdlePriority,qs=a.log,Rd=a.unstable_setDisableYieldValue,tn=null,Ce=null;function Wt(t){if(typeof qs=="function"&&Rd(t),Ce&&typeof Ce.setStrictMode=="function")try{Ce.setStrictMode(tn,t)}catch{}}var lt=Math.clz32?Math.clz32:ol,un=Math.log,as=Math.LN2;function ol(t){return t>>>=0,t===0?32:31-(un(t)/as|0)|0}var ss=256,wt=262144,Yr=4194304;function _i(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function os(t,r,c){var f=t.pendingLanes;if(f===0)return 0;var p=0,b=t.suspendedLanes,C=t.pingedLanes;t=t.warmLanes;var D=f&134217727;return D!==0?(f=D&~b,f!==0?p=_i(f):(C&=D,C!==0?p=_i(C):c||(c=D&~t,c!==0&&(p=_i(c))))):(D=f&~b,D!==0?p=_i(D):C!==0?p=_i(C):c||(c=f&~t,c!==0&&(p=_i(c)))),p===0?0:r!==0&&r!==p&&(r&b)===0&&(b=p&-p,c=r&-r,b>=c||b===32&&(c&4194048)!==0)?r:p}function Zn(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function ll(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pn(){var t=Yr;return Yr<<=1,(Yr&62914560)===0&&(Yr=4194304),t}function Ci(t){for(var r=[],c=0;31>c;c++)r.push(t);return r}function Ti(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Xr(t,r,c,f,p,b){var C=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var D=t.entanglements,P=t.expirationTimes,ne=t.hiddenUpdates;for(c=C&~c;0<c;){var ge=31-lt(c),pe=1<<ge;D[ge]=0,P[ge]=-1;var ae=ne[ge];if(ae!==null)for(ne[ge]=null,ge=0;ge<ae.length;ge++){var ce=ae[ge];ce!==null&&(ce.lane&=-536870913)}c&=~pe}f!==0&&Cc(t,f,0),b!==0&&p===0&&t.tag!==0&&(t.suspendedLanes|=b&~(C&~r))}function Cc(t,r,c){t.pendingLanes|=r,t.suspendedLanes&=~r;var f=31-lt(r);t.entangledLanes|=r,t.entanglements[f]=t.entanglements[f]|1073741824|c&261930}function Oi(t,r){var c=t.entangledLanes|=r;for(t=t.entanglements;c;){var f=31-lt(c),p=1<<f;p&r|t[f]&r&&(t[f]|=r),c&=~p}}function Ws(t,r){var c=r&-r;return c=(c&42)!==0?1:Wn(c),(c&(t.suspendedLanes|r))!==0?0:c}function Wn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ci(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function or(){var t=fe.p;return t!==0?t:(t=window.event,t===void 0?32:x2(t.type))}function ke(t,r){var c=fe.p;try{return fe.p=t,r()}finally{fe.p=c}}var lr=Math.random().toString(36).slice(2),_n="__reactFiber$"+lr,Vt="__reactProps$"+lr,Nr="__reactContainer$"+lr,ma="__reactEvents$"+lr,Ys="__reactListeners$"+lr,Zr="__reactHandles$"+lr,Tc="__reactResources$"+lr,ls="__reactMarker$"+lr;function xr(t){delete t[_n],delete t[Vt],delete t[ma],delete t[Ys],delete t[Zr]}function yn(t){var r=t[_n];if(r)return r;for(var c=t.parentNode;c;){if(r=c[Nr]||c[_n]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(t=n2(t);t!==null;){if(c=t[_n])return c;t=n2(t)}return r}t=c,c=t.parentNode}return null}function kt(t){if(t=t[_n]||t[Nr]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function ya(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(o(33))}function cr(t){var r=t[Tc];return r||(r=t[Tc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function pn(t){t[ls]=!0}var ve=new Set,Oc={};function Lt(t,r){Rr(t,r),Rr(t+"Capture",r)}function Rr(t,r){for(Oc[t]=r,t=0;t<r.length;t++)ve.add(r[t])}var Id=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tt={},_t={};function yt(t){return mt.call(_t,t)?!0:mt.call(Tt,t)?!1:Id.test(t)?_t[t]=!0:(Tt[t]=!0,!1)}function pa(t,r,c){if(yt(r))if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+c)}}function xa(t,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+c)}}function Ir(t,r,c,f){if(f===null)t.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(r,c,""+f)}}function Nt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ui(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function kd(t,r,c){var f=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var p=f.get,b=f.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return p.call(this)},set:function(C){c=""+C,b.call(this,C)}}),Object.defineProperty(t,r,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(C){c=""+C},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function an(t){if(!t._valueTracker){var r=ui(t)?"checked":"value";t._valueTracker=kd(t,r,""+t[r])}}function di(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var c=r.getValue(),f="";return t&&(f=ui(t)?t.checked?"true":"false":t.value),t=f,t!==c?(r.setValue(t),!0):!1}function Xs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var wa=/[\n"\\]/g;function ht(t){return t.replace(wa,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function In(t,r,c,f,p,b,C,D){t.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?t.type=C:t.removeAttribute("type"),r!=null?C==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Nt(r)):t.value!==""+Nt(r)&&(t.value=""+Nt(r)):C!=="submit"&&C!=="reset"||t.removeAttribute("value"),r!=null?M(t,C,Nt(r)):c!=null?M(t,C,Nt(c)):f!=null&&t.removeAttribute("value"),p==null&&b!=null&&(t.defaultChecked=!!b),p!=null&&(t.checked=p&&typeof p!="function"&&typeof p!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?t.name=""+Nt(D):t.removeAttribute("name")}function K(t,r,c,f,p,b,C,D){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.type=b),r!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||r!=null)){an(t);return}c=c!=null?""+Nt(c):"",r=r!=null?""+Nt(r):c,D||r===t.value||(t.value=r),t.defaultValue=r}f=f??p,f=typeof f!="function"&&typeof f!="symbol"&&!!f,t.checked=D?t.checked:!!f,t.defaultChecked=!!f,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(t.name=C),an(t)}function M(t,r,c){r==="number"&&Xs(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function Pe(t,r,c,f){if(t=t.options,r){r={};for(var p=0;p<c.length;p++)r["$"+c[p]]=!0;for(c=0;c<t.length;c++)p=r.hasOwnProperty("$"+t[c].value),t[c].selected!==p&&(t[c].selected=p),p&&f&&(t[c].defaultSelected=!0)}else{for(c=""+Nt(c),r=null,p=0;p<t.length;p++){if(t[p].value===c){t[p].selected=!0,f&&(t[p].defaultSelected=!0);return}r!==null||t[p].disabled||(r=t[p])}r!==null&&(r.selected=!0)}}function Cn(t,r,c){if(r!=null&&(r=""+Nt(r),r!==t.value&&(t.value=r),c==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=c!=null?""+Nt(c):""}function ur(t,r,c,f){if(r==null){if(f!=null){if(c!=null)throw Error(o(92));if(re(f)){if(1<f.length)throw Error(o(93));f=f[0]}c=f}c==null&&(c=""),r=c}c=Nt(r),t.defaultValue=c,f=t.textContent,f===c&&f!==""&&f!==null&&(t.value=f),an(t)}function ba(t,r){if(r){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=r;return}}t.textContent=r}var cl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dr(t,r,c){var f=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":f?t.setProperty(r,c):typeof c!="number"||c===0||cl.has(r)?r==="float"?t.cssFloat=c:t[r]=(""+c).trim():t[r]=c+"px"}function Ge(t,r,c){if(r!=null&&typeof r!="object")throw Error(o(62));if(t=t.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?t.setProperty(f,""):f==="float"?t.cssFloat="":t[f]="");for(var p in r)f=r[p],r.hasOwnProperty(p)&&c[p]!==f&&dr(t,p,f)}else for(var b in r)r.hasOwnProperty(b)&&dr(t,b,r[b])}function Kt(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function va(t){return Dd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function wr(){}var cs=null;function ul(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sn=null,Kr=null;function fi(t){var r=kt(t);if(r&&(t=r.stateNode)){var c=t[Vt]||null;e:switch(t=r.stateNode,r.type){case"input":if(In(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ht(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var f=c[r];if(f!==t&&f.form===t.form){var p=f[Vt]||null;if(!p)throw Error(o(90));In(f,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(r=0;r<c.length;r++)f=c[r],f.form===t.form&&di(f)}break e;case"textarea":Cn(t,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&Pe(t,!!c.multiple,r,!1)}}}var Xe=!1;function Rc(t,r,c){if(Xe)return t(r,c);Xe=!0;try{var f=t(r);return f}finally{if(Xe=!1,(sn!==null||Kr!==null)&&(vu(),sn&&(r=sn,t=Kr,Kr=sn=null,fi(r),t)))for(r=0;r<t.length;r++)fi(t[r])}}function it(t,r){var c=t.stateNode;if(c===null)return null;var f=c[Vt]||null;if(f===null)return null;c=f[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(t=t.type,f=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!f;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(o(231,r,typeof c));return c}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dl=!1;if(Qt)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){dl=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{dl=!1}var hi=null,gi=null,Zs=null;function Ea(){if(Zs)return Zs;var t,r=gi,c=r.length,f,p="value"in hi?hi.value:hi.textContent,b=p.length;for(t=0;t<c&&r[t]===p[t];t++);var C=c-t;for(f=1;f<=C&&r[c-f]===p[b-f];f++);return Zs=p.slice(t,1<f?1-f:void 0)}function Ni(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ri(){return!0}function fl(){return!1}function kn(t){function r(c,f,p,b,C){this._reactName=c,this._targetInst=p,this.type=f,this.nativeEvent=b,this.target=C,this.currentTarget=null;for(var D in t)t.hasOwnProperty(D)&&(c=t[D],this[D]=c?c(b):b[D]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Ri:fl,this.isPropagationStopped=fl,this}return O(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),r}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zn=kn(kr),Sa=O({},kr,{view:0,detail:0}),Ic=kn(Sa),Ks,hl,us,Qs=O({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ds,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==us&&(us&&t.type==="mousemove"?(Ks=t.screenX-us.screenX,hl=t.screenY-us.screenY):hl=Ks=0,us=t),Ks)},movementY:function(t){return"movementY"in t?t.movementY:hl}}),Dt=kn(Qs),kc=O({},Qs,{dataTransfer:0}),Js=kn(kc),Ii=O({},Sa,{relatedTarget:0}),gl=kn(Ii),oe=O({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),ct=kn(oe),Fn=O({},kr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$s=kn(Fn),Dc=O({},kr,{data:0}),Mc=kn(Dc),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ml={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=ml[t])?!!r[t]:!1}function ds(){return Tn}var dn=O({},Sa,{key:function(t){if(t.key){var r=Md[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ni(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bd[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ds,charCode:function(t){return t.type==="keypress"?Ni(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ni(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eo=kn(dn),zi=O({},Qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jt=kn(zi),Ze=O({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ds}),Ld=kn(Ze),Jt=O({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fi=kn(Jt),Aa=O({},Qs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jd=kn(Aa),Qr=O({},kr,{newState:0,oldState:0}),yl=kn(Qr),Bc=[9,13,27,32],fs=Qt&&"CompositionEvent"in window,_a=null;Qt&&"documentMode"in document&&(_a=document.documentMode);var Lc=Qt&&"TextEvent"in window&&!_a,jc=Qt&&(!fs||_a&&8<_a&&11>=_a),Vi=" ",to=!1;function Uc(t,r){switch(t){case"keyup":return Bc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ca(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ta=!1;function ki(t,r){switch(t){case"compositionend":return Ca(r);case"keypress":return r.which!==32?null:(to=!0,Vi);case"textInput":return t=r.data,t===Vi&&to?null:t;default:return null}}function no(t,r){if(Ta)return t==="compositionend"||!fs&&Uc(t,r)?(t=Ea(),Zs=gi=hi=null,Ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return jc&&r.locale!=="ko"?null:r.data;default:return null}}var br={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pl(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!br[t.type]:r==="textarea"}function Dr(t,r,c,f){sn?Kr?Kr.push(f):Kr=[f]:sn=f,r=Ou(r,"onChange"),0<r.length&&(c=new zn("onChange","change",null,c,f),t.push({event:c,listeners:r}))}var hs=null,Hi=null;function Ud(t){Vm(t,0)}function gs(t){var r=ya(t);if(di(r))return t}function Mr(t,r){if(t==="change")return r}var Pc=!1;if(Qt){var ms;if(Qt){var Gi="oninput"in document;if(!Gi){var bt=document.createElement("div");bt.setAttribute("oninput","return;"),Gi=typeof bt.oninput=="function"}ms=Gi}else ms=!1;Pc=ms&&(!document.documentMode||9<document.documentMode)}function ys(){hs&&(hs.detachEvent("onpropertychange",N),Hi=hs=null)}function N(t){if(t.propertyName==="value"&&gs(Hi)){var r=[];Dr(r,Hi,t,ul(t)),Rc(Ud,r)}}function n(t,r,c){t==="focusin"?(ys(),hs=r,Hi=c,hs.attachEvent("onpropertychange",N)):t==="focusout"&&ys()}function s(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gs(Hi)}function l(t,r){if(t==="click")return gs(r)}function u(t,r){if(t==="input"||t==="change")return gs(r)}function d(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var g=typeof Object.is=="function"?Object.is:d;function y(t,r){if(g(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var c=Object.keys(t),f=Object.keys(r);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var p=c[f];if(!mt.call(r,p)||!g(t[p],r[p]))return!1}return!0}function w(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function S(t,r){var c=w(t);t=0;for(var f;c;){if(c.nodeType===3){if(f=t+c.textContent.length,t<=r&&f>=r)return{node:c,offset:r-t};t=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=w(c)}}function _(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?_(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function R(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Xs(t.document);r instanceof t.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)t=r.contentWindow;else break;r=Xs(t.document)}return r}function k(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var L=Qt&&"documentMode"in document&&11>=document.documentMode,z=null,F=null,X=null,se=!1;function _e(t,r,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;se||z==null||z!==Xs(f)||(f=z,"selectionStart"in f&&k(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),X&&y(X,f)||(X=f,f=Ou(F,"onSelect"),0<f.length&&(r=new zn("onSelect","select",null,r,c),t.push({event:r,listeners:f}),r.target=z)))}function Ae(t,r){var c={};return c[t.toLowerCase()]=r.toLowerCase(),c["Webkit"+t]="webkit"+r,c["Moz"+t]="moz"+r,c}var Ee={animationend:Ae("Animation","AnimationEnd"),animationiteration:Ae("Animation","AnimationIteration"),animationstart:Ae("Animation","AnimationStart"),transitionrun:Ae("Transition","TransitionRun"),transitionstart:Ae("Transition","TransitionStart"),transitioncancel:Ae("Transition","TransitionCancel"),transitionend:Ae("Transition","TransitionEnd")},dt={},at={};Qt&&(at=document.createElement("div").style,"AnimationEvent"in window||(delete Ee.animationend.animation,delete Ee.animationiteration.animation,delete Ee.animationstart.animation),"TransitionEvent"in window||delete Ee.transitionend.transition);function xn(t){if(dt[t])return dt[t];if(!Ee[t])return t;var r=Ee[t],c;for(c in r)if(r.hasOwnProperty(c)&&c in at)return dt[t]=r[c];return t}var vr=xn("animationend"),Kn=xn("animationiteration"),Ut=xn("animationstart"),Vn=xn("transitionrun"),fr=xn("transitionstart"),Oa=xn("transitioncancel"),qi=xn("transitionend"),zc=new Map,xl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xl.push("scrollEnd");function mi(t,r){zc.set(t,r),Lt(r,[t])}var Fc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Jr=[],ro=0,Pd=0;function Vc(){for(var t=ro,r=Pd=ro=0;r<t;){var c=Jr[r];Jr[r++]=null;var f=Jr[r];Jr[r++]=null;var p=Jr[r];Jr[r++]=null;var b=Jr[r];if(Jr[r++]=null,f!==null&&p!==null){var C=f.pending;C===null?p.next=p:(p.next=C.next,C.next=p),f.pending=p}b!==0&&S1(c,p,b)}}function Hc(t,r,c,f){Jr[ro++]=t,Jr[ro++]=r,Jr[ro++]=c,Jr[ro++]=f,Pd|=f,t.lanes|=f,t=t.alternate,t!==null&&(t.lanes|=f)}function zd(t,r,c,f){return Hc(t,r,c,f),Gc(t)}function ps(t,r){return Hc(t,null,null,r),Gc(t)}function S1(t,r,c){t.lanes|=c;var f=t.alternate;f!==null&&(f.lanes|=c);for(var p=!1,b=t.return;b!==null;)b.childLanes|=c,f=b.alternate,f!==null&&(f.childLanes|=c),b.tag===22&&(t=b.stateNode,t===null||t._visibility&1||(p=!0)),t=b,b=b.return;return t.tag===3?(b=t.stateNode,p&&r!==null&&(p=31-lt(c),t=b.hiddenUpdates,f=t[p],f===null?t[p]=[r]:f.push(r),r.lane=c|536870912),b):null}function Gc(t){if(50<zl)throw zl=0,Kf=null,Error(o(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var io={};function jw(t,r,c,f){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Br(t,r,c,f){return new jw(t,r,c,f)}function Fd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wi(t,r){var c=t.alternate;return c===null?(c=Br(t.tag,r,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=r,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,r=t.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function A1(t,r){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,r=c.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function qc(t,r,c,f,p,b){var C=0;if(f=t,typeof t=="function")Fd(t)&&(C=1);else if(typeof t=="string")C=Vb(t,c,J.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case de:return t=Br(31,c,r,p),t.elementType=de,t.lanes=b,t;case H:return xs(c.children,p,b,r);case Z:C=8,p|=24;break;case le:return t=Br(12,c,r,p|2),t.elementType=le,t.lanes=b,t;case Le:return t=Br(13,c,r,p),t.elementType=Le,t.lanes=b,t;case Se:return t=Br(19,c,r,p),t.elementType=Se,t.lanes=b,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q:C=10;break e;case Q:C=9;break e;case xe:C=11;break e;case $:C=14;break e;case we:C=16,f=null;break e}C=29,c=Error(o(130,t===null?"null":typeof t,"")),f=null}return r=Br(C,c,r,p),r.elementType=t,r.type=f,r.lanes=b,r}function xs(t,r,c,f){return t=Br(7,t,f,r),t.lanes=c,t}function Vd(t,r,c){return t=Br(6,t,null,r),t.lanes=c,t}function _1(t){var r=Br(18,null,null,0);return r.stateNode=t,r}function Hd(t,r,c){return r=Br(4,t.children!==null?t.children:[],t.key,r),r.lanes=c,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var C1=new WeakMap;function $r(t,r){if(typeof t=="object"&&t!==null){var c=C1.get(t);return c!==void 0?c:(r={value:t,source:r,stack:Ft(r)},C1.set(t,r),r)}return{value:t,source:r,stack:Ft(r)}}var ao=[],so=0,Wc=null,wl=0,ei=[],ti=0,Na=null,Di=1,Mi="";function Yi(t,r){ao[so++]=wl,ao[so++]=Wc,Wc=t,wl=r}function T1(t,r,c){ei[ti++]=Di,ei[ti++]=Mi,ei[ti++]=Na,Na=t;var f=Di;t=Mi;var p=32-lt(f)-1;f&=~(1<<p),c+=1;var b=32-lt(r)+p;if(30<b){var C=p-p%5;b=(f&(1<<C)-1).toString(32),f>>=C,p-=C,Di=1<<32-lt(r)+p|c<<p|f,Mi=b+t}else Di=1<<b|c<<p|f,Mi=t}function Gd(t){t.return!==null&&(Yi(t,1),T1(t,1,0))}function qd(t){for(;t===Wc;)Wc=ao[--so],ao[so]=null,wl=ao[--so],ao[so]=null;for(;t===Na;)Na=ei[--ti],ei[ti]=null,Mi=ei[--ti],ei[ti]=null,Di=ei[--ti],ei[ti]=null}function O1(t,r){ei[ti++]=Di,ei[ti++]=Mi,ei[ti++]=Na,Di=r.id,Mi=r.overflow,Na=t}var Qn=null,on=null,St=!1,Ra=null,ni=!1,Wd=Error(o(519));function Ia(t){var r=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bl($r(r,t)),Wd}function N1(t){var r=t.stateNode,c=t.type,f=t.memoizedProps;switch(r[_n]=t,r[Vt]=f,c){case"dialog":xt("cancel",r),xt("close",r);break;case"iframe":case"object":case"embed":xt("load",r);break;case"video":case"audio":for(c=0;c<Vl.length;c++)xt(Vl[c],r);break;case"source":xt("error",r);break;case"img":case"image":case"link":xt("error",r),xt("load",r);break;case"details":xt("toggle",r);break;case"input":xt("invalid",r),K(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":xt("invalid",r);break;case"textarea":xt("invalid",r),ur(r,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||f.suppressHydrationWarning===!0||Wm(r.textContent,c)?(f.popover!=null&&(xt("beforetoggle",r),xt("toggle",r)),f.onScroll!=null&&xt("scroll",r),f.onScrollEnd!=null&&xt("scrollend",r),f.onClick!=null&&(r.onclick=wr),r=!0):r=!1,r||Ia(t,!0)}function R1(t){for(Qn=t.return;Qn;)switch(Qn.tag){case 5:case 31:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:Qn=Qn.return}}function oo(t){if(t!==Qn)return!1;if(!St)return R1(t),St=!0,!1;var r=t.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||dh(t.type,t.memoizedProps)),c=!c),c&&on&&Ia(t),R1(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));on=t2(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));on=t2(t)}else r===27?(r=on,qa(t.type)?(t=yh,yh=null,on=t):on=r):on=Qn?ii(t.stateNode.nextSibling):null;return!0}function ws(){on=Qn=null,St=!1}function Yd(){var t=Ra;return t!==null&&(_r===null?_r=t:_r.push.apply(_r,t),Ra=null),t}function bl(t){Ra===null?Ra=[t]:Ra.push(t)}var Xd=B(null),bs=null,Xi=null;function ka(t,r,c){ie(Xd,r._currentValue),r._currentValue=c}function Zi(t){t._currentValue=Xd.current,Y(Xd)}function Zd(t,r,c){for(;t!==null;){var f=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),t===c)break;t=t.return}}function Kd(t,r,c,f){var p=t.child;for(p!==null&&(p.return=t);p!==null;){var b=p.dependencies;if(b!==null){var C=p.child;b=b.firstContext;e:for(;b!==null;){var D=b;b=p;for(var P=0;P<r.length;P++)if(D.context===r[P]){b.lanes|=c,D=b.alternate,D!==null&&(D.lanes|=c),Zd(b.return,c,t),f||(C=null);break e}b=D.next}}else if(p.tag===18){if(C=p.return,C===null)throw Error(o(341));C.lanes|=c,b=C.alternate,b!==null&&(b.lanes|=c),Zd(C,c,t),C=null}else C=p.child;if(C!==null)C.return=p;else for(C=p;C!==null;){if(C===t){C=null;break}if(p=C.sibling,p!==null){p.return=C.return,C=p;break}C=C.return}p=C}}function lo(t,r,c,f){t=null;for(var p=r,b=!1;p!==null;){if(!b){if((p.flags&524288)!==0)b=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var C=p.alternate;if(C===null)throw Error(o(387));if(C=C.memoizedProps,C!==null){var D=p.type;g(p.pendingProps.value,C.value)||(t!==null?t.push(D):t=[D])}}else if(p===Re.current){if(C=p.alternate,C===null)throw Error(o(387));C.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(t!==null?t.push(Yl):t=[Yl])}p=p.return}t!==null&&Kd(r,t,c,f),r.flags|=262144}function Yc(t){for(t=t.firstContext;t!==null;){if(!g(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function vs(t){bs=t,Xi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Jn(t){return I1(bs,t)}function Xc(t,r){return bs===null&&vs(t),I1(t,r)}function I1(t,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},Xi===null){if(t===null)throw Error(o(308));Xi=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Xi=Xi.next=r;return c}var Uw=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(c,f){t.push(f)}};this.abort=function(){r.aborted=!0,t.forEach(function(c){return c()})}},Pw=a.unstable_scheduleCallback,zw=a.unstable_NormalPriority,Dn={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qd(){return{controller:new Uw,data:new Map,refCount:0}}function vl(t){t.refCount--,t.refCount===0&&Pw(zw,function(){t.controller.abort()})}var El=null,Jd=0,co=0,uo=null;function Fw(t,r){if(El===null){var c=El=[];Jd=0,co=nh(),uo={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Jd++,r.then(k1,k1),r}function k1(){if(--Jd===0&&El!==null){uo!==null&&(uo.status="fulfilled");var t=El;El=null,co=0,uo=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Vw(t,r){var c=[],f={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return t.then(function(){f.status="fulfilled",f.value=r;for(var p=0;p<c.length;p++)(0,c[p])(r)},function(p){for(f.status="rejected",f.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),f}var D1=ee.S;ee.S=function(t,r){ym=hn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Fw(t,r),D1!==null&&D1(t,r)};var Es=B(null);function $d(){var t=Es.current;return t!==null?t:$t.pooledCache}function Zc(t,r){r===null?ie(Es,Es.current):ie(Es,r.pool)}function M1(){var t=$d();return t===null?null:{parent:Dn._currentValue,pool:t}}var fo=Error(o(460)),ef=Error(o(474)),Kc=Error(o(542)),Qc={then:function(){}};function B1(t){return t=t.status,t==="fulfilled"||t==="rejected"}function L1(t,r,c){switch(c=t[c],c===void 0?t.push(r):c!==r&&(r.then(wr,wr),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,U1(t),t;default:if(typeof r.status=="string")r.then(wr,wr);else{if(t=$t,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=r,t.status="pending",t.then(function(f){if(r.status==="pending"){var p=r;p.status="fulfilled",p.value=f}},function(f){if(r.status==="pending"){var p=r;p.status="rejected",p.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,U1(t),t}throw As=r,fo}}function Ss(t){try{var r=t._init;return r(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(As=c,fo):c}}var As=null;function j1(){if(As===null)throw Error(o(459));var t=As;return As=null,t}function U1(t){if(t===fo||t===Kc)throw Error(o(483))}var ho=null,Sl=0;function Jc(t){var r=Sl;return Sl+=1,ho===null&&(ho=[]),L1(ho,t,r)}function Al(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function $c(t,r){throw r.$$typeof===j?Error(o(525)):(t=Object.prototype.toString.call(r),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function P1(t){function r(W,V){if(t){var te=W.deletions;te===null?(W.deletions=[V],W.flags|=16):te.push(V)}}function c(W,V){if(!t)return null;for(;V!==null;)r(W,V),V=V.sibling;return null}function f(W){for(var V=new Map;W!==null;)W.key!==null?V.set(W.key,W):V.set(W.index,W),W=W.sibling;return V}function p(W,V){return W=Wi(W,V),W.index=0,W.sibling=null,W}function b(W,V,te){return W.index=te,t?(te=W.alternate,te!==null?(te=te.index,te<V?(W.flags|=67108866,V):te):(W.flags|=67108866,V)):(W.flags|=1048576,V)}function C(W){return t&&W.alternate===null&&(W.flags|=67108866),W}function D(W,V,te,ye){return V===null||V.tag!==6?(V=Vd(te,W.mode,ye),V.return=W,V):(V=p(V,te),V.return=W,V)}function P(W,V,te,ye){var qe=te.type;return qe===H?ge(W,V,te.props.children,ye,te.key):V!==null&&(V.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===we&&Ss(qe)===V.type)?(V=p(V,te.props),Al(V,te),V.return=W,V):(V=qc(te.type,te.key,te.props,null,W.mode,ye),Al(V,te),V.return=W,V)}function ne(W,V,te,ye){return V===null||V.tag!==4||V.stateNode.containerInfo!==te.containerInfo||V.stateNode.implementation!==te.implementation?(V=Hd(te,W.mode,ye),V.return=W,V):(V=p(V,te.children||[]),V.return=W,V)}function ge(W,V,te,ye,qe){return V===null||V.tag!==7?(V=xs(te,W.mode,ye,qe),V.return=W,V):(V=p(V,te),V.return=W,V)}function pe(W,V,te){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Vd(""+V,W.mode,te),V.return=W,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case U:return te=qc(V.type,V.key,V.props,null,W.mode,te),Al(te,V),te.return=W,te;case G:return V=Hd(V,W.mode,te),V.return=W,V;case we:return V=Ss(V),pe(W,V,te)}if(re(V)||Ie(V))return V=xs(V,W.mode,te,null),V.return=W,V;if(typeof V.then=="function")return pe(W,Jc(V),te);if(V.$$typeof===q)return pe(W,Xc(W,V),te);$c(W,V)}return null}function ae(W,V,te,ye){var qe=V!==null?V.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return qe!==null?null:D(W,V,""+te,ye);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case U:return te.key===qe?P(W,V,te,ye):null;case G:return te.key===qe?ne(W,V,te,ye):null;case we:return te=Ss(te),ae(W,V,te,ye)}if(re(te)||Ie(te))return qe!==null?null:ge(W,V,te,ye,null);if(typeof te.then=="function")return ae(W,V,Jc(te),ye);if(te.$$typeof===q)return ae(W,V,Xc(W,te),ye);$c(W,te)}return null}function ce(W,V,te,ye,qe){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return W=W.get(te)||null,D(V,W,""+ye,qe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case U:return W=W.get(ye.key===null?te:ye.key)||null,P(V,W,ye,qe);case G:return W=W.get(ye.key===null?te:ye.key)||null,ne(V,W,ye,qe);case we:return ye=Ss(ye),ce(W,V,te,ye,qe)}if(re(ye)||Ie(ye))return W=W.get(te)||null,ge(V,W,ye,qe,null);if(typeof ye.then=="function")return ce(W,V,te,Jc(ye),qe);if(ye.$$typeof===q)return ce(W,V,te,Xc(V,ye),qe);$c(V,ye)}return null}function Be(W,V,te,ye){for(var qe=null,Rt=null,ze=V,ut=V=0,Et=null;ze!==null&&ut<te.length;ut++){ze.index>ut?(Et=ze,ze=null):Et=ze.sibling;var It=ae(W,ze,te[ut],ye);if(It===null){ze===null&&(ze=Et);break}t&&ze&&It.alternate===null&&r(W,ze),V=b(It,V,ut),Rt===null?qe=It:Rt.sibling=It,Rt=It,ze=Et}if(ut===te.length)return c(W,ze),St&&Yi(W,ut),qe;if(ze===null){for(;ut<te.length;ut++)ze=pe(W,te[ut],ye),ze!==null&&(V=b(ze,V,ut),Rt===null?qe=ze:Rt.sibling=ze,Rt=ze);return St&&Yi(W,ut),qe}for(ze=f(ze);ut<te.length;ut++)Et=ce(ze,W,ut,te[ut],ye),Et!==null&&(t&&Et.alternate!==null&&ze.delete(Et.key===null?ut:Et.key),V=b(Et,V,ut),Rt===null?qe=Et:Rt.sibling=Et,Rt=Et);return t&&ze.forEach(function(Ka){return r(W,Ka)}),St&&Yi(W,ut),qe}function Ke(W,V,te,ye){if(te==null)throw Error(o(151));for(var qe=null,Rt=null,ze=V,ut=V=0,Et=null,It=te.next();ze!==null&&!It.done;ut++,It=te.next()){ze.index>ut?(Et=ze,ze=null):Et=ze.sibling;var Ka=ae(W,ze,It.value,ye);if(Ka===null){ze===null&&(ze=Et);break}t&&ze&&Ka.alternate===null&&r(W,ze),V=b(Ka,V,ut),Rt===null?qe=Ka:Rt.sibling=Ka,Rt=Ka,ze=Et}if(It.done)return c(W,ze),St&&Yi(W,ut),qe;if(ze===null){for(;!It.done;ut++,It=te.next())It=pe(W,It.value,ye),It!==null&&(V=b(It,V,ut),Rt===null?qe=It:Rt.sibling=It,Rt=It);return St&&Yi(W,ut),qe}for(ze=f(ze);!It.done;ut++,It=te.next())It=ce(ze,W,ut,It.value,ye),It!==null&&(t&&It.alternate!==null&&ze.delete(It.key===null?ut:It.key),V=b(It,V,ut),Rt===null?qe=It:Rt.sibling=It,Rt=It);return t&&ze.forEach(function($b){return r(W,$b)}),St&&Yi(W,ut),qe}function Zt(W,V,te,ye){if(typeof te=="object"&&te!==null&&te.type===H&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case U:e:{for(var qe=te.key;V!==null;){if(V.key===qe){if(qe=te.type,qe===H){if(V.tag===7){c(W,V.sibling),ye=p(V,te.props.children),ye.return=W,W=ye;break e}}else if(V.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===we&&Ss(qe)===V.type){c(W,V.sibling),ye=p(V,te.props),Al(ye,te),ye.return=W,W=ye;break e}c(W,V);break}else r(W,V);V=V.sibling}te.type===H?(ye=xs(te.props.children,W.mode,ye,te.key),ye.return=W,W=ye):(ye=qc(te.type,te.key,te.props,null,W.mode,ye),Al(ye,te),ye.return=W,W=ye)}return C(W);case G:e:{for(qe=te.key;V!==null;){if(V.key===qe)if(V.tag===4&&V.stateNode.containerInfo===te.containerInfo&&V.stateNode.implementation===te.implementation){c(W,V.sibling),ye=p(V,te.children||[]),ye.return=W,W=ye;break e}else{c(W,V);break}else r(W,V);V=V.sibling}ye=Hd(te,W.mode,ye),ye.return=W,W=ye}return C(W);case we:return te=Ss(te),Zt(W,V,te,ye)}if(re(te))return Be(W,V,te,ye);if(Ie(te)){if(qe=Ie(te),typeof qe!="function")throw Error(o(150));return te=qe.call(te),Ke(W,V,te,ye)}if(typeof te.then=="function")return Zt(W,V,Jc(te),ye);if(te.$$typeof===q)return Zt(W,V,Xc(W,te),ye);$c(W,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,V!==null&&V.tag===6?(c(W,V.sibling),ye=p(V,te),ye.return=W,W=ye):(c(W,V),ye=Vd(te,W.mode,ye),ye.return=W,W=ye),C(W)):c(W,V)}return function(W,V,te,ye){try{Sl=0;var qe=Zt(W,V,te,ye);return ho=null,qe}catch(ze){if(ze===fo||ze===Kc)throw ze;var Rt=Br(29,ze,null,W.mode);return Rt.lanes=ye,Rt.return=W,Rt}}}var _s=P1(!0),z1=P1(!1),Da=!1;function tf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ma(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ba(t,r,c){var f=t.updateQueue;if(f===null)return null;if(f=f.shared,(Mt&2)!==0){var p=f.pending;return p===null?r.next=r:(r.next=p.next,p.next=r),f.pending=r,r=Gc(t),S1(t,null,c),r}return Hc(t,f,r,c),Gc(t)}function _l(t,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var f=r.lanes;f&=t.pendingLanes,c|=f,r.lanes=c,Oi(t,c)}}function rf(t,r){var c=t.updateQueue,f=t.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var p=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var C={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?p=b=C:b=b.next=C,c=c.next}while(c!==null);b===null?p=b=r:b=b.next=r}else p=b=r;c={baseState:f.baseState,firstBaseUpdate:p,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=r:t.next=r,c.lastBaseUpdate=r}var af=!1;function Cl(){if(af){var t=uo;if(t!==null)throw t}}function Tl(t,r,c,f){af=!1;var p=t.updateQueue;Da=!1;var b=p.firstBaseUpdate,C=p.lastBaseUpdate,D=p.shared.pending;if(D!==null){p.shared.pending=null;var P=D,ne=P.next;P.next=null,C===null?b=ne:C.next=ne,C=P;var ge=t.alternate;ge!==null&&(ge=ge.updateQueue,D=ge.lastBaseUpdate,D!==C&&(D===null?ge.firstBaseUpdate=ne:D.next=ne,ge.lastBaseUpdate=P))}if(b!==null){var pe=p.baseState;C=0,ge=ne=P=null,D=b;do{var ae=D.lane&-536870913,ce=ae!==D.lane;if(ce?(vt&ae)===ae:(f&ae)===ae){ae!==0&&ae===co&&(af=!0),ge!==null&&(ge=ge.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Be=t,Ke=D;ae=r;var Zt=c;switch(Ke.tag){case 1:if(Be=Ke.payload,typeof Be=="function"){pe=Be.call(Zt,pe,ae);break e}pe=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Ke.payload,ae=typeof Be=="function"?Be.call(Zt,pe,ae):Be,ae==null)break e;pe=O({},pe,ae);break e;case 2:Da=!0}}ae=D.callback,ae!==null&&(t.flags|=64,ce&&(t.flags|=8192),ce=p.callbacks,ce===null?p.callbacks=[ae]:ce.push(ae))}else ce={lane:ae,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ge===null?(ne=ge=ce,P=pe):ge=ge.next=ce,C|=ae;if(D=D.next,D===null){if(D=p.shared.pending,D===null)break;ce=D,D=ce.next,ce.next=null,p.lastBaseUpdate=ce,p.shared.pending=null}}while(!0);ge===null&&(P=pe),p.baseState=P,p.firstBaseUpdate=ne,p.lastBaseUpdate=ge,b===null&&(p.shared.lanes=0),za|=C,t.lanes=C,t.memoizedState=pe}}function F1(t,r){if(typeof t!="function")throw Error(o(191,t));t.call(r)}function V1(t,r){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)F1(c[t],r)}var go=B(null),eu=B(0);function H1(t,r){t=ia,ie(eu,t),ie(go,r),ia=t|r.baseLanes}function sf(){ie(eu,ia),ie(go,go.current)}function of(){ia=eu.current,Y(go),Y(eu)}var Lr=B(null),ri=null;function La(t){var r=t.alternate;ie(On,On.current&1),ie(Lr,t),ri===null&&(r===null||go.current!==null||r.memoizedState!==null)&&(ri=t)}function lf(t){ie(On,On.current),ie(Lr,t),ri===null&&(ri=t)}function G1(t){t.tag===22?(ie(On,On.current),ie(Lr,t),ri===null&&(ri=t)):ja()}function ja(){ie(On,On.current),ie(Lr,Lr.current)}function jr(t){Y(Lr),ri===t&&(ri=null),Y(On)}var On=B(0);function tu(t){for(var r=t;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||gh(c)||mh(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ki=0,ot=null,Yt=null,Mn=null,nu=!1,mo=!1,Cs=!1,ru=0,Ol=0,yo=null,Hw=0;function wn(){throw Error(o(321))}function cf(t,r){if(r===null)return!1;for(var c=0;c<r.length&&c<t.length;c++)if(!g(t[c],r[c]))return!1;return!0}function uf(t,r,c,f,p,b){return Ki=b,ot=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=t===null||t.memoizedState===null?Tg:_f,Cs=!1,b=c(f,p),Cs=!1,mo&&(b=W1(r,c,f,p)),q1(t),b}function q1(t){ee.H=Il;var r=Yt!==null&&Yt.next!==null;if(Ki=0,Mn=Yt=ot=null,nu=!1,Ol=0,yo=null,r)throw Error(o(300));t===null||Bn||(t=t.dependencies,t!==null&&Yc(t)&&(Bn=!0))}function W1(t,r,c,f){ot=t;var p=0;do{if(mo&&(yo=null),Ol=0,mo=!1,25<=p)throw Error(o(301));if(p+=1,Mn=Yt=null,t.updateQueue!=null){var b=t.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}ee.H=Og,b=r(c,f)}while(mo);return b}function Gw(){var t=ee.H,r=t.useState()[0];return r=typeof r.then=="function"?Nl(r):r,t=t.useState()[0],(Yt!==null?Yt.memoizedState:null)!==t&&(ot.flags|=1024),r}function df(){var t=ru!==0;return ru=0,t}function ff(t,r,c){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~c}function hf(t){if(nu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}nu=!1}Ki=0,Mn=Yt=ot=null,mo=!1,Ol=ru=0,yo=null}function hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?ot.memoizedState=Mn=t:Mn=Mn.next=t,Mn}function Nn(){if(Yt===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=Yt.next;var r=Mn===null?ot.memoizedState:Mn.next;if(r!==null)Mn=r,Yt=t;else{if(t===null)throw ot.alternate===null?Error(o(467)):Error(o(310));Yt=t,t={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},Mn===null?ot.memoizedState=Mn=t:Mn=Mn.next=t}return Mn}function iu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nl(t){var r=Ol;return Ol+=1,yo===null&&(yo=[]),t=L1(yo,t,r),r=ot,(Mn===null?r.memoizedState:Mn.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?Tg:_f),t}function au(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Nl(t);if(t.$$typeof===q)return Jn(t)}throw Error(o(438,String(t)))}function gf(t){var r=null,c=ot.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var f=ot.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(p){return p.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=iu(),ot.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(t),f=0;f<t;f++)c[f]=At;return r.index++,c}function Qi(t,r){return typeof r=="function"?r(t):r}function su(t){var r=Nn();return mf(r,Yt,t)}function mf(t,r,c){var f=t.queue;if(f===null)throw Error(o(311));f.lastRenderedReducer=c;var p=t.baseQueue,b=f.pending;if(b!==null){if(p!==null){var C=p.next;p.next=b.next,b.next=C}r.baseQueue=p=b,f.pending=null}if(b=t.baseState,p===null)t.memoizedState=b;else{r=p.next;var D=C=null,P=null,ne=r,ge=!1;do{var pe=ne.lane&-536870913;if(pe!==ne.lane?(vt&pe)===pe:(Ki&pe)===pe){var ae=ne.revertLane;if(ae===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),pe===co&&(ge=!0);else if((Ki&ae)===ae){ne=ne.next,ae===co&&(ge=!0);continue}else pe={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},P===null?(D=P=pe,C=b):P=P.next=pe,ot.lanes|=ae,za|=ae;pe=ne.action,Cs&&c(b,pe),b=ne.hasEagerState?ne.eagerState:c(b,pe)}else ae={lane:pe,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},P===null?(D=P=ae,C=b):P=P.next=ae,ot.lanes|=pe,za|=pe;ne=ne.next}while(ne!==null&&ne!==r);if(P===null?C=b:P.next=D,!g(b,t.memoizedState)&&(Bn=!0,ge&&(c=uo,c!==null)))throw c;t.memoizedState=b,t.baseState=C,t.baseQueue=P,f.lastRenderedState=b}return p===null&&(f.lanes=0),[t.memoizedState,f.dispatch]}function yf(t){var r=Nn(),c=r.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=t;var f=c.dispatch,p=c.pending,b=r.memoizedState;if(p!==null){c.pending=null;var C=p=p.next;do b=t(b,C.action),C=C.next;while(C!==p);g(b,r.memoizedState)||(Bn=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),c.lastRenderedState=b}return[b,f]}function Y1(t,r,c){var f=ot,p=Nn(),b=St;if(b){if(c===void 0)throw Error(o(407));c=c()}else c=r();var C=!g((Yt||p).memoizedState,c);if(C&&(p.memoizedState=c,Bn=!0),p=p.queue,wf(K1.bind(null,f,p,t),[t]),p.getSnapshot!==r||C||Mn!==null&&Mn.memoizedState.tag&1){if(f.flags|=2048,po(9,{destroy:void 0},Z1.bind(null,f,p,c,r),null),$t===null)throw Error(o(349));b||(Ki&127)!==0||X1(f,r,c)}return c}function X1(t,r,c){t.flags|=16384,t={getSnapshot:r,value:c},r=ot.updateQueue,r===null?(r=iu(),ot.updateQueue=r,r.stores=[t]):(c=r.stores,c===null?r.stores=[t]:c.push(t))}function Z1(t,r,c,f){r.value=c,r.getSnapshot=f,Q1(r)&&J1(t)}function K1(t,r,c){return c(function(){Q1(r)&&J1(t)})}function Q1(t){var r=t.getSnapshot;t=t.value;try{var c=r();return!g(t,c)}catch{return!0}}function J1(t){var r=ps(t,2);r!==null&&Cr(r,t,2)}function pf(t){var r=hr();if(typeof t=="function"){var c=t;if(t=c(),Cs){Wt(!0);try{c()}finally{Wt(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:t},r}function $1(t,r,c,f){return t.baseState=c,mf(t,Yt,typeof f=="function"?f:Qi)}function qw(t,r,c,f,p){if(cu(t))throw Error(o(485));if(t=r.action,t!==null){var b={payload:p,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){b.listeners.push(C)}};ee.T!==null?c(!0):b.isTransition=!1,f(b),c=r.pending,c===null?(b.next=r.pending=b,eg(r,b)):(b.next=c.next,r.pending=c.next=b)}}function eg(t,r){var c=r.action,f=r.payload,p=t.state;if(r.isTransition){var b=ee.T,C={};ee.T=C;try{var D=c(p,f),P=ee.S;P!==null&&P(C,D),tg(t,r,D)}catch(ne){xf(t,r,ne)}finally{b!==null&&C.types!==null&&(b.types=C.types),ee.T=b}}else try{b=c(p,f),tg(t,r,b)}catch(ne){xf(t,r,ne)}}function tg(t,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){ng(t,r,f)},function(f){return xf(t,r,f)}):ng(t,r,c)}function ng(t,r,c){r.status="fulfilled",r.value=c,rg(r),t.state=c,r=t.pending,r!==null&&(c=r.next,c===r?t.pending=null:(c=c.next,r.next=c,eg(t,c)))}function xf(t,r,c){var f=t.pending;if(t.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=c,rg(r),r=r.next;while(r!==f)}t.action=null}function rg(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function ig(t,r){return r}function ag(t,r){if(St){var c=$t.formState;if(c!==null){e:{var f=ot;if(St){if(on){t:{for(var p=on,b=ni;p.nodeType!==8;){if(!b){p=null;break t}if(p=ii(p.nextSibling),p===null){p=null;break t}}b=p.data,p=b==="F!"||b==="F"?p:null}if(p){on=ii(p.nextSibling),f=p.data==="F!";break e}}Ia(f)}f=!1}f&&(r=c[0])}}return c=hr(),c.memoizedState=c.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ig,lastRenderedState:r},c.queue=f,c=Ag.bind(null,ot,f),f.dispatch=c,f=pf(!1),b=Af.bind(null,ot,!1,f.queue),f=hr(),p={state:r,dispatch:null,action:t,pending:null},f.queue=p,c=qw.bind(null,ot,p,b,c),p.dispatch=c,f.memoizedState=t,[r,c,!1]}function sg(t){var r=Nn();return og(r,Yt,t)}function og(t,r,c){if(r=mf(t,r,ig)[0],t=su(Qi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=Nl(r)}catch(C){throw C===fo?Kc:C}else f=r;r=Nn();var p=r.queue,b=p.dispatch;return c!==r.memoizedState&&(ot.flags|=2048,po(9,{destroy:void 0},Ww.bind(null,p,c),null)),[f,b,t]}function Ww(t,r){t.action=r}function lg(t){var r=Nn(),c=Yt;if(c!==null)return og(r,c,t);Nn(),r=r.memoizedState,c=Nn();var f=c.queue.dispatch;return c.memoizedState=t,[r,f,!1]}function po(t,r,c,f){return t={tag:t,create:c,deps:f,inst:r,next:null},r=ot.updateQueue,r===null&&(r=iu(),ot.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=t.next=t:(f=c.next,c.next=t,t.next=f,r.lastEffect=t),t}function cg(){return Nn().memoizedState}function ou(t,r,c,f){var p=hr();ot.flags|=t,p.memoizedState=po(1|r,{destroy:void 0},c,f===void 0?null:f)}function lu(t,r,c,f){var p=Nn();f=f===void 0?null:f;var b=p.memoizedState.inst;Yt!==null&&f!==null&&cf(f,Yt.memoizedState.deps)?p.memoizedState=po(r,b,c,f):(ot.flags|=t,p.memoizedState=po(1|r,b,c,f))}function ug(t,r){ou(8390656,8,t,r)}function wf(t,r){lu(2048,8,t,r)}function Yw(t){ot.flags|=4;var r=ot.updateQueue;if(r===null)r=iu(),ot.updateQueue=r,r.events=[t];else{var c=r.events;c===null?r.events=[t]:c.push(t)}}function dg(t){var r=Nn().memoizedState;return Yw({ref:r,nextImpl:t}),function(){if((Mt&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}function fg(t,r){return lu(4,2,t,r)}function hg(t,r){return lu(4,4,t,r)}function gg(t,r){if(typeof r=="function"){t=t();var c=r(t);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function mg(t,r,c){c=c!=null?c.concat([t]):null,lu(4,4,gg.bind(null,r,t),c)}function bf(){}function yg(t,r){var c=Nn();r=r===void 0?null:r;var f=c.memoizedState;return r!==null&&cf(r,f[1])?f[0]:(c.memoizedState=[t,r],t)}function pg(t,r){var c=Nn();r=r===void 0?null:r;var f=c.memoizedState;if(r!==null&&cf(r,f[1]))return f[0];if(f=t(),Cs){Wt(!0);try{t()}finally{Wt(!1)}}return c.memoizedState=[f,r],f}function vf(t,r,c){return c===void 0||(Ki&1073741824)!==0&&(vt&261930)===0?t.memoizedState=r:(t.memoizedState=c,t=xm(),ot.lanes|=t,za|=t,c)}function xg(t,r,c,f){return g(c,r)?c:go.current!==null?(t=vf(t,c,f),g(t,r)||(Bn=!0),t):(Ki&42)===0||(Ki&1073741824)!==0&&(vt&261930)===0?(Bn=!0,t.memoizedState=c):(t=xm(),ot.lanes|=t,za|=t,r)}function wg(t,r,c,f,p){var b=fe.p;fe.p=b!==0&&8>b?b:8;var C=ee.T,D={};ee.T=D,Af(t,!1,r,c);try{var P=p(),ne=ee.S;if(ne!==null&&ne(D,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ge=Vw(P,f);Rl(t,r,ge,zr(t))}else Rl(t,r,f,zr(t))}catch(pe){Rl(t,r,{then:function(){},status:"rejected",reason:pe},zr())}finally{fe.p=b,C!==null&&D.types!==null&&(C.types=D.types),ee.T=C}}function Xw(){}function Ef(t,r,c,f){if(t.tag!==5)throw Error(o(476));var p=bg(t).queue;wg(t,p,r,be,c===null?Xw:function(){return vg(t),c(f)})}function bg(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:be},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:c},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function vg(t){var r=bg(t);r.next===null&&(r=t.alternate.memoizedState),Rl(t,r.next.queue,{},zr())}function Sf(){return Jn(Yl)}function Eg(){return Nn().memoizedState}function Sg(){return Nn().memoizedState}function Zw(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var c=zr();t=Ma(c);var f=Ba(r,t,c);f!==null&&(Cr(f,r,c),_l(f,r,c)),r={cache:Qd()},t.payload=r;return}r=r.return}}function Kw(t,r,c){var f=zr();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},cu(t)?_g(r,c):(c=zd(t,r,c,f),c!==null&&(Cr(c,t,f),Cg(c,r,f)))}function Ag(t,r,c){var f=zr();Rl(t,r,c,f)}function Rl(t,r,c,f){var p={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(cu(t))_g(r,p);else{var b=t.alternate;if(t.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var C=r.lastRenderedState,D=b(C,c);if(p.hasEagerState=!0,p.eagerState=D,g(D,C))return Hc(t,r,p,0),$t===null&&Vc(),!1}catch{}if(c=zd(t,r,p,f),c!==null)return Cr(c,t,f),Cg(c,r,f),!0}return!1}function Af(t,r,c,f){if(f={lane:2,revertLane:nh(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},cu(t)){if(r)throw Error(o(479))}else r=zd(t,c,f,2),r!==null&&Cr(r,t,2)}function cu(t){var r=t.alternate;return t===ot||r!==null&&r===ot}function _g(t,r){mo=nu=!0;var c=t.pending;c===null?r.next=r:(r.next=c.next,c.next=r),t.pending=r}function Cg(t,r,c){if((c&4194048)!==0){var f=r.lanes;f&=t.pendingLanes,c|=f,r.lanes=c,Oi(t,c)}}var Il={readContext:Jn,use:au,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useLayoutEffect:wn,useInsertionEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useSyncExternalStore:wn,useId:wn,useHostTransitionStatus:wn,useFormState:wn,useActionState:wn,useOptimistic:wn,useMemoCache:wn,useCacheRefresh:wn};Il.useEffectEvent=wn;var Tg={readContext:Jn,use:au,useCallback:function(t,r){return hr().memoizedState=[t,r===void 0?null:r],t},useContext:Jn,useEffect:ug,useImperativeHandle:function(t,r,c){c=c!=null?c.concat([t]):null,ou(4194308,4,gg.bind(null,r,t),c)},useLayoutEffect:function(t,r){return ou(4194308,4,t,r)},useInsertionEffect:function(t,r){ou(4,2,t,r)},useMemo:function(t,r){var c=hr();r=r===void 0?null:r;var f=t();if(Cs){Wt(!0);try{t()}finally{Wt(!1)}}return c.memoizedState=[f,r],f},useReducer:function(t,r,c){var f=hr();if(c!==void 0){var p=c(r);if(Cs){Wt(!0);try{c(r)}finally{Wt(!1)}}}else p=r;return f.memoizedState=f.baseState=p,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:p},f.queue=t,t=t.dispatch=Kw.bind(null,ot,t),[f.memoizedState,t]},useRef:function(t){var r=hr();return t={current:t},r.memoizedState=t},useState:function(t){t=pf(t);var r=t.queue,c=Ag.bind(null,ot,r);return r.dispatch=c,[t.memoizedState,c]},useDebugValue:bf,useDeferredValue:function(t,r){var c=hr();return vf(c,t,r)},useTransition:function(){var t=pf(!1);return t=wg.bind(null,ot,t.queue,!0,!1),hr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,c){var f=ot,p=hr();if(St){if(c===void 0)throw Error(o(407));c=c()}else{if(c=r(),$t===null)throw Error(o(349));(vt&127)!==0||X1(f,r,c)}p.memoizedState=c;var b={value:c,getSnapshot:r};return p.queue=b,ug(K1.bind(null,f,b,t),[t]),f.flags|=2048,po(9,{destroy:void 0},Z1.bind(null,f,b,c,r),null),c},useId:function(){var t=hr(),r=$t.identifierPrefix;if(St){var c=Mi,f=Di;c=(f&~(1<<32-lt(f)-1)).toString(32)+c,r="_"+r+"R_"+c,c=ru++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=Hw++,r="_"+r+"r_"+c.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Sf,useFormState:ag,useActionState:ag,useOptimistic:function(t){var r=hr();r.memoizedState=r.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Af.bind(null,ot,!0,c),c.dispatch=r,[t,r]},useMemoCache:gf,useCacheRefresh:function(){return hr().memoizedState=Zw.bind(null,ot)},useEffectEvent:function(t){var r=hr(),c={impl:t};return r.memoizedState=c,function(){if((Mt&2)!==0)throw Error(o(440));return c.impl.apply(void 0,arguments)}}},_f={readContext:Jn,use:au,useCallback:yg,useContext:Jn,useEffect:wf,useImperativeHandle:mg,useInsertionEffect:fg,useLayoutEffect:hg,useMemo:pg,useReducer:su,useRef:cg,useState:function(){return su(Qi)},useDebugValue:bf,useDeferredValue:function(t,r){var c=Nn();return xg(c,Yt.memoizedState,t,r)},useTransition:function(){var t=su(Qi)[0],r=Nn().memoizedState;return[typeof t=="boolean"?t:Nl(t),r]},useSyncExternalStore:Y1,useId:Eg,useHostTransitionStatus:Sf,useFormState:sg,useActionState:sg,useOptimistic:function(t,r){var c=Nn();return $1(c,Yt,t,r)},useMemoCache:gf,useCacheRefresh:Sg};_f.useEffectEvent=dg;var Og={readContext:Jn,use:au,useCallback:yg,useContext:Jn,useEffect:wf,useImperativeHandle:mg,useInsertionEffect:fg,useLayoutEffect:hg,useMemo:pg,useReducer:yf,useRef:cg,useState:function(){return yf(Qi)},useDebugValue:bf,useDeferredValue:function(t,r){var c=Nn();return Yt===null?vf(c,t,r):xg(c,Yt.memoizedState,t,r)},useTransition:function(){var t=yf(Qi)[0],r=Nn().memoizedState;return[typeof t=="boolean"?t:Nl(t),r]},useSyncExternalStore:Y1,useId:Eg,useHostTransitionStatus:Sf,useFormState:lg,useActionState:lg,useOptimistic:function(t,r){var c=Nn();return Yt!==null?$1(c,Yt,t,r):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:gf,useCacheRefresh:Sg};Og.useEffectEvent=dg;function Cf(t,r,c,f){r=t.memoizedState,c=c(f,r),c=c==null?r:O({},r,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var Tf={enqueueSetState:function(t,r,c){t=t._reactInternals;var f=zr(),p=Ma(f);p.payload=r,c!=null&&(p.callback=c),r=Ba(t,p,f),r!==null&&(Cr(r,t,f),_l(r,t,f))},enqueueReplaceState:function(t,r,c){t=t._reactInternals;var f=zr(),p=Ma(f);p.tag=1,p.payload=r,c!=null&&(p.callback=c),r=Ba(t,p,f),r!==null&&(Cr(r,t,f),_l(r,t,f))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var c=zr(),f=Ma(c);f.tag=2,r!=null&&(f.callback=r),r=Ba(t,f,c),r!==null&&(Cr(r,t,c),_l(r,t,c))}};function Ng(t,r,c,f,p,b,C){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(f,b,C):r.prototype&&r.prototype.isPureReactComponent?!y(c,f)||!y(p,b):!0}function Rg(t,r,c,f){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,f),r.state!==t&&Tf.enqueueReplaceState(r,r.state,null)}function Ts(t,r){var c=r;if("ref"in r){c={};for(var f in r)f!=="ref"&&(c[f]=r[f])}if(t=t.defaultProps){c===r&&(c=O({},c));for(var p in t)c[p]===void 0&&(c[p]=t[p])}return c}function Ig(t){Fc(t)}function kg(t){console.error(t)}function Dg(t){Fc(t)}function uu(t,r){try{var c=t.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function Mg(t,r,c){try{var f=t.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Of(t,r,c){return c=Ma(c),c.tag=3,c.payload={element:null},c.callback=function(){uu(t,r)},c}function Bg(t){return t=Ma(t),t.tag=3,t}function Lg(t,r,c,f){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var b=f.value;t.payload=function(){return p(b)},t.callback=function(){Mg(r,c,f)}}var C=c.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(t.callback=function(){Mg(r,c,f),typeof p!="function"&&(Fa===null?Fa=new Set([this]):Fa.add(this));var D=f.stack;this.componentDidCatch(f.value,{componentStack:D!==null?D:""})})}function Qw(t,r,c,f,p){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=c.alternate,r!==null&&lo(r,c,p,!0),c=Lr.current,c!==null){switch(c.tag){case 31:case 13:return ri===null?Eu():c.alternate===null&&bn===0&&(bn=3),c.flags&=-257,c.flags|=65536,c.lanes=p,f===Qc?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([f]):r.add(f),$f(t,f,p)),!1;case 22:return c.flags|=65536,f===Qc?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([f]):c.add(f)),$f(t,f,p)),!1}throw Error(o(435,c.tag))}return $f(t,f,p),Eu(),!1}if(St)return r=Lr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=p,f!==Wd&&(t=Error(o(422),{cause:f}),bl($r(t,c)))):(f!==Wd&&(r=Error(o(423),{cause:f}),bl($r(r,c))),t=t.current.alternate,t.flags|=65536,p&=-p,t.lanes|=p,f=$r(f,c),p=Of(t.stateNode,f,p),rf(t,p),bn!==4&&(bn=2)),!1;var b=Error(o(520),{cause:f});if(b=$r(b,c),Pl===null?Pl=[b]:Pl.push(b),bn!==4&&(bn=2),r===null)return!0;f=$r(f,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,t=p&-p,c.lanes|=t,t=Of(c.stateNode,f,t),rf(c,t),!1;case 1:if(r=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Fa===null||!Fa.has(b))))return c.flags|=65536,p&=-p,c.lanes|=p,p=Bg(p),Lg(p,t,c,f),rf(c,p),!1}c=c.return}while(c!==null);return!1}var Nf=Error(o(461)),Bn=!1;function $n(t,r,c,f){r.child=t===null?z1(r,null,c,f):_s(r,t.child,c,f)}function jg(t,r,c,f,p){c=c.render;var b=r.ref;if("ref"in f){var C={};for(var D in f)D!=="ref"&&(C[D]=f[D])}else C=f;return vs(r),f=uf(t,r,c,C,b,p),D=df(),t!==null&&!Bn?(ff(t,r,p),Ji(t,r,p)):(St&&D&&Gd(r),r.flags|=1,$n(t,r,f,p),r.child)}function Ug(t,r,c,f,p){if(t===null){var b=c.type;return typeof b=="function"&&!Fd(b)&&b.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=b,Pg(t,r,b,f,p)):(t=qc(c.type,null,f,r,r.mode,p),t.ref=r.ref,t.return=r,r.child=t)}if(b=t.child,!jf(t,p)){var C=b.memoizedProps;if(c=c.compare,c=c!==null?c:y,c(C,f)&&t.ref===r.ref)return Ji(t,r,p)}return r.flags|=1,t=Wi(b,f),t.ref=r.ref,t.return=r,r.child=t}function Pg(t,r,c,f,p){if(t!==null){var b=t.memoizedProps;if(y(b,f)&&t.ref===r.ref)if(Bn=!1,r.pendingProps=f=b,jf(t,p))(t.flags&131072)!==0&&(Bn=!0);else return r.lanes=t.lanes,Ji(t,r,p)}return Rf(t,r,c,f,p)}function zg(t,r,c,f){var p=f.children,b=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((r.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,t!==null){for(f=r.child=t.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;f=p&~b}else f=0,r.child=null;return Fg(t,r,b,c,f)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Zc(r,b!==null?b.cachePool:null),b!==null?H1(r,b):sf(),G1(r);else return f=r.lanes=536870912,Fg(t,r,b!==null?b.baseLanes|c:c,c,f)}else b!==null?(Zc(r,b.cachePool),H1(r,b),ja(),r.memoizedState=null):(t!==null&&Zc(r,null),sf(),ja());return $n(t,r,p,c),r.child}function kl(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Fg(t,r,c,f,p){var b=$d();return b=b===null?null:{parent:Dn._currentValue,pool:b},r.memoizedState={baseLanes:c,cachePool:b},t!==null&&Zc(r,null),sf(),G1(r),t!==null&&lo(t,r,f,!0),r.childLanes=p,null}function du(t,r){return r=hu({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Vg(t,r,c){return _s(r,t.child,null,c),t=du(r,r.pendingProps),t.flags|=2,jr(r),r.memoizedState=null,t}function Jw(t,r,c){var f=r.pendingProps,p=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(St){if(f.mode==="hidden")return t=du(r,f),r.lanes=536870912,kl(null,t);if(lf(r),(t=on)?(t=e2(t,ni),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Na!==null?{id:Di,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},c=_1(t),c.return=r,r.child=c,Qn=r,on=null)):t=null,t===null)throw Ia(r);return r.lanes=536870912,null}return du(r,f)}var b=t.memoizedState;if(b!==null){var C=b.dehydrated;if(lf(r),p)if(r.flags&256)r.flags&=-257,r=Vg(t,r,c);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(o(558));else if(Bn||lo(t,r,c,!1),p=(c&t.childLanes)!==0,Bn||p){if(f=$t,f!==null&&(C=Ws(f,c),C!==0&&C!==b.retryLane))throw b.retryLane=C,ps(t,C),Cr(f,t,C),Nf;Eu(),r=Vg(t,r,c)}else t=b.treeContext,on=ii(C.nextSibling),Qn=r,St=!0,Ra=null,ni=!1,t!==null&&O1(r,t),r=du(r,f),r.flags|=4096;return r}return t=Wi(t.child,{mode:f.mode,children:f.children}),t.ref=r.ref,r.child=t,t.return=r,t}function fu(t,r){var c=r.ref;if(c===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(t===null||t.ref!==c)&&(r.flags|=4194816)}}function Rf(t,r,c,f,p){return vs(r),c=uf(t,r,c,f,void 0,p),f=df(),t!==null&&!Bn?(ff(t,r,p),Ji(t,r,p)):(St&&f&&Gd(r),r.flags|=1,$n(t,r,c,p),r.child)}function Hg(t,r,c,f,p,b){return vs(r),r.updateQueue=null,c=W1(r,f,c,p),q1(t),f=df(),t!==null&&!Bn?(ff(t,r,b),Ji(t,r,b)):(St&&f&&Gd(r),r.flags|=1,$n(t,r,c,b),r.child)}function Gg(t,r,c,f,p){if(vs(r),r.stateNode===null){var b=io,C=c.contextType;typeof C=="object"&&C!==null&&(b=Jn(C)),b=new c(f,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Tf,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=f,b.state=r.memoizedState,b.refs={},tf(r),C=c.contextType,b.context=typeof C=="object"&&C!==null?Jn(C):io,b.state=r.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(Cf(r,c,C,f),b.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(C=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),C!==b.state&&Tf.enqueueReplaceState(b,b.state,null),Tl(r,f,b,p),Cl(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(t===null){b=r.stateNode;var D=r.memoizedProps,P=Ts(c,D);b.props=P;var ne=b.context,ge=c.contextType;C=io,typeof ge=="object"&&ge!==null&&(C=Jn(ge));var pe=c.getDerivedStateFromProps;ge=typeof pe=="function"||typeof b.getSnapshotBeforeUpdate=="function",D=r.pendingProps!==D,ge||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(D||ne!==C)&&Rg(r,b,f,C),Da=!1;var ae=r.memoizedState;b.state=ae,Tl(r,f,b,p),Cl(),ne=r.memoizedState,D||ae!==ne||Da?(typeof pe=="function"&&(Cf(r,c,pe,f),ne=r.memoizedState),(P=Da||Ng(r,c,P,f,ae,ne,C))?(ge||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=ne),b.props=f,b.state=ne,b.context=C,f=P):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{b=r.stateNode,nf(t,r),C=r.memoizedProps,ge=Ts(c,C),b.props=ge,pe=r.pendingProps,ae=b.context,ne=c.contextType,P=io,typeof ne=="object"&&ne!==null&&(P=Jn(ne)),D=c.getDerivedStateFromProps,(ne=typeof D=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C!==pe||ae!==P)&&Rg(r,b,f,P),Da=!1,ae=r.memoizedState,b.state=ae,Tl(r,f,b,p),Cl();var ce=r.memoizedState;C!==pe||ae!==ce||Da||t!==null&&t.dependencies!==null&&Yc(t.dependencies)?(typeof D=="function"&&(Cf(r,c,D,f),ce=r.memoizedState),(ge=Da||Ng(r,c,ge,f,ae,ce,P)||t!==null&&t.dependencies!==null&&Yc(t.dependencies))?(ne||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,ce,P),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,ce,P)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||C===t.memoizedProps&&ae===t.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&ae===t.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=ce),b.props=f,b.state=ce,b.context=P,f=ge):(typeof b.componentDidUpdate!="function"||C===t.memoizedProps&&ae===t.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&ae===t.memoizedState||(r.flags|=1024),f=!1)}return b=f,fu(t,r),f=(r.flags&128)!==0,b||f?(b=r.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,t!==null&&f?(r.child=_s(r,t.child,null,p),r.child=_s(r,null,c,p)):$n(t,r,c,p),r.memoizedState=b.state,t=r.child):t=Ji(t,r,p),t}function qg(t,r,c,f){return ws(),r.flags|=256,$n(t,r,c,f),r.child}var If={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kf(t){return{baseLanes:t,cachePool:M1()}}function Df(t,r,c){return t=t!==null?t.childLanes&~c:0,r&&(t|=Pr),t}function Wg(t,r,c){var f=r.pendingProps,p=!1,b=(r.flags&128)!==0,C;if((C=b)||(C=t!==null&&t.memoizedState===null?!1:(On.current&2)!==0),C&&(p=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,t===null){if(St){if(p?La(r):ja(),(t=on)?(t=e2(t,ni),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Na!==null?{id:Di,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},c=_1(t),c.return=r,r.child=c,Qn=r,on=null)):t=null,t===null)throw Ia(r);return mh(t)?r.lanes=32:r.lanes=536870912,null}var D=f.children;return f=f.fallback,p?(ja(),p=r.mode,D=hu({mode:"hidden",children:D},p),f=xs(f,p,c,null),D.return=r,f.return=r,D.sibling=f,r.child=D,f=r.child,f.memoizedState=kf(c),f.childLanes=Df(t,C,c),r.memoizedState=If,kl(null,f)):(La(r),Mf(r,D))}var P=t.memoizedState;if(P!==null&&(D=P.dehydrated,D!==null)){if(b)r.flags&256?(La(r),r.flags&=-257,r=Bf(t,r,c)):r.memoizedState!==null?(ja(),r.child=t.child,r.flags|=128,r=null):(ja(),D=f.fallback,p=r.mode,f=hu({mode:"visible",children:f.children},p),D=xs(D,p,c,null),D.flags|=2,f.return=r,D.return=r,f.sibling=D,r.child=f,_s(r,t.child,null,c),f=r.child,f.memoizedState=kf(c),f.childLanes=Df(t,C,c),r.memoizedState=If,r=kl(null,f));else if(La(r),mh(D)){if(C=D.nextSibling&&D.nextSibling.dataset,C)var ne=C.dgst;C=ne,f=Error(o(419)),f.stack="",f.digest=C,bl({value:f,source:null,stack:null}),r=Bf(t,r,c)}else if(Bn||lo(t,r,c,!1),C=(c&t.childLanes)!==0,Bn||C){if(C=$t,C!==null&&(f=Ws(C,c),f!==0&&f!==P.retryLane))throw P.retryLane=f,ps(t,f),Cr(C,t,f),Nf;gh(D)||Eu(),r=Bf(t,r,c)}else gh(D)?(r.flags|=192,r.child=t.child,r=null):(t=P.treeContext,on=ii(D.nextSibling),Qn=r,St=!0,Ra=null,ni=!1,t!==null&&O1(r,t),r=Mf(r,f.children),r.flags|=4096);return r}return p?(ja(),D=f.fallback,p=r.mode,P=t.child,ne=P.sibling,f=Wi(P,{mode:"hidden",children:f.children}),f.subtreeFlags=P.subtreeFlags&65011712,ne!==null?D=Wi(ne,D):(D=xs(D,p,c,null),D.flags|=2),D.return=r,f.return=r,f.sibling=D,r.child=f,kl(null,f),f=r.child,D=t.child.memoizedState,D===null?D=kf(c):(p=D.cachePool,p!==null?(P=Dn._currentValue,p=p.parent!==P?{parent:P,pool:P}:p):p=M1(),D={baseLanes:D.baseLanes|c,cachePool:p}),f.memoizedState=D,f.childLanes=Df(t,C,c),r.memoizedState=If,kl(t.child,f)):(La(r),c=t.child,t=c.sibling,c=Wi(c,{mode:"visible",children:f.children}),c.return=r,c.sibling=null,t!==null&&(C=r.deletions,C===null?(r.deletions=[t],r.flags|=16):C.push(t)),r.child=c,r.memoizedState=null,c)}function Mf(t,r){return r=hu({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function hu(t,r){return t=Br(22,t,null,r),t.lanes=0,t}function Bf(t,r,c){return _s(r,t.child,null,c),t=Mf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Yg(t,r,c){t.lanes|=r;var f=t.alternate;f!==null&&(f.lanes|=r),Zd(t.return,r,c)}function Lf(t,r,c,f,p,b){var C=t.memoizedState;C===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:p,treeForkCount:b}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=f,C.tail=c,C.tailMode=p,C.treeForkCount=b)}function Xg(t,r,c){var f=r.pendingProps,p=f.revealOrder,b=f.tail;f=f.children;var C=On.current,D=(C&2)!==0;if(D?(C=C&1|2,r.flags|=128):C&=1,ie(On,C),$n(t,r,f,c),f=St?wl:0,!D&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yg(t,c,r);else if(t.tag===19)Yg(t,c,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(p){case"forwards":for(c=r.child,p=null;c!==null;)t=c.alternate,t!==null&&tu(t)===null&&(p=c),c=c.sibling;c=p,c===null?(p=r.child,r.child=null):(p=c.sibling,c.sibling=null),Lf(r,!1,p,c,b,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,p=r.child,r.child=null;p!==null;){if(t=p.alternate,t!==null&&tu(t)===null){r.child=p;break}t=p.sibling,p.sibling=c,c=p,p=t}Lf(r,!0,c,null,b,f);break;case"together":Lf(r,!1,null,null,void 0,f);break;default:r.memoizedState=null}return r.child}function Ji(t,r,c){if(t!==null&&(r.dependencies=t.dependencies),za|=r.lanes,(c&r.childLanes)===0)if(t!==null){if(lo(t,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(o(153));if(r.child!==null){for(t=r.child,c=Wi(t,t.pendingProps),r.child=c,c.return=r;t.sibling!==null;)t=t.sibling,c=c.sibling=Wi(t,t.pendingProps),c.return=r;c.sibling=null}return r.child}function jf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Yc(t)))}function $w(t,r,c){switch(r.tag){case 3:He(r,r.stateNode.containerInfo),ka(r,Dn,t.memoizedState.cache),ws();break;case 27:case 5:We(r);break;case 4:He(r,r.stateNode.containerInfo);break;case 10:ka(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,lf(r),null;break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(La(r),r.flags|=128,null):(c&r.child.childLanes)!==0?Wg(t,r,c):(La(r),t=Ji(t,r,c),t!==null?t.sibling:null);La(r);break;case 19:var p=(t.flags&128)!==0;if(f=(c&r.childLanes)!==0,f||(lo(t,r,c,!1),f=(c&r.childLanes)!==0),p){if(f)return Xg(t,r,c);r.flags|=128}if(p=r.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ie(On,On.current),f)break;return null;case 22:return r.lanes=0,zg(t,r,c,r.pendingProps);case 24:ka(r,Dn,t.memoizedState.cache)}return Ji(t,r,c)}function Zg(t,r,c){if(t!==null)if(t.memoizedProps!==r.pendingProps)Bn=!0;else{if(!jf(t,c)&&(r.flags&128)===0)return Bn=!1,$w(t,r,c);Bn=(t.flags&131072)!==0}else Bn=!1,St&&(r.flags&1048576)!==0&&T1(r,wl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var f=r.pendingProps;if(t=Ss(r.elementType),r.type=t,typeof t=="function")Fd(t)?(f=Ts(t,f),r.tag=1,r=Gg(null,r,t,f,c)):(r.tag=0,r=Rf(null,r,t,f,c));else{if(t!=null){var p=t.$$typeof;if(p===xe){r.tag=11,r=jg(null,r,t,f,c);break e}else if(p===$){r.tag=14,r=Ug(null,r,t,f,c);break e}}throw r=$e(t)||t,Error(o(306,r,""))}}return r;case 0:return Rf(t,r,r.type,r.pendingProps,c);case 1:return f=r.type,p=Ts(f,r.pendingProps),Gg(t,r,f,p,c);case 3:e:{if(He(r,r.stateNode.containerInfo),t===null)throw Error(o(387));f=r.pendingProps;var b=r.memoizedState;p=b.element,nf(t,r),Tl(r,f,null,c);var C=r.memoizedState;if(f=C.cache,ka(r,Dn,f),f!==b.cache&&Kd(r,[Dn],c,!0),Cl(),f=C.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=qg(t,r,f,c);break e}else if(f!==p){p=$r(Error(o(424)),r),bl(p),r=qg(t,r,f,c);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,on=ii(t.firstChild),Qn=r,St=!0,Ra=null,ni=!0,c=z1(r,null,f,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ws(),f===p){r=Ji(t,r,c);break e}$n(t,r,f,c)}r=r.child}return r;case 26:return fu(t,r),t===null?(c=s2(r.type,null,r.pendingProps,null))?r.memoizedState=c:St||(c=r.type,t=r.pendingProps,f=Nu(me.current).createElement(c),f[_n]=r,f[Vt]=t,er(f,c,t),pn(f),r.stateNode=f):r.memoizedState=s2(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return We(r),t===null&&St&&(f=r.stateNode=r2(r.type,r.pendingProps,me.current),Qn=r,ni=!0,p=on,qa(r.type)?(yh=p,on=ii(f.firstChild)):on=p),$n(t,r,r.pendingProps.children,c),fu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&St&&((p=f=on)&&(f=Nb(f,r.type,r.pendingProps,ni),f!==null?(r.stateNode=f,Qn=r,on=ii(f.firstChild),ni=!1,p=!0):p=!1),p||Ia(r)),We(r),p=r.type,b=r.pendingProps,C=t!==null?t.memoizedProps:null,f=b.children,dh(p,b)?f=null:C!==null&&dh(p,C)&&(r.flags|=32),r.memoizedState!==null&&(p=uf(t,r,Gw,null,null,c),Yl._currentValue=p),fu(t,r),$n(t,r,f,c),r.child;case 6:return t===null&&St&&((t=c=on)&&(c=Rb(c,r.pendingProps,ni),c!==null?(r.stateNode=c,Qn=r,on=null,t=!0):t=!1),t||Ia(r)),null;case 13:return Wg(t,r,c);case 4:return He(r,r.stateNode.containerInfo),f=r.pendingProps,t===null?r.child=_s(r,null,f,c):$n(t,r,f,c),r.child;case 11:return jg(t,r,r.type,r.pendingProps,c);case 7:return $n(t,r,r.pendingProps,c),r.child;case 8:return $n(t,r,r.pendingProps.children,c),r.child;case 12:return $n(t,r,r.pendingProps.children,c),r.child;case 10:return f=r.pendingProps,ka(r,r.type,f.value),$n(t,r,f.children,c),r.child;case 9:return p=r.type._context,f=r.pendingProps.children,vs(r),p=Jn(p),f=f(p),r.flags|=1,$n(t,r,f,c),r.child;case 14:return Ug(t,r,r.type,r.pendingProps,c);case 15:return Pg(t,r,r.type,r.pendingProps,c);case 19:return Xg(t,r,c);case 31:return Jw(t,r,c);case 22:return zg(t,r,c,r.pendingProps);case 24:return vs(r),f=Jn(Dn),t===null?(p=$d(),p===null&&(p=$t,b=Qd(),p.pooledCache=b,b.refCount++,b!==null&&(p.pooledCacheLanes|=c),p=b),r.memoizedState={parent:f,cache:p},tf(r),ka(r,Dn,p)):((t.lanes&c)!==0&&(nf(t,r),Tl(r,null,null,c),Cl()),p=t.memoizedState,b=r.memoizedState,p.parent!==f?(p={parent:f,cache:f},r.memoizedState=p,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=p),ka(r,Dn,f)):(f=b.cache,ka(r,Dn,f),f!==p.cache&&Kd(r,[Dn],c,!0))),$n(t,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(o(156,r.tag))}function $i(t){t.flags|=4}function Uf(t,r,c,f,p){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(p&335544128)===p)if(t.stateNode.complete)t.flags|=8192;else if(Em())t.flags|=8192;else throw As=Qc,ef}else t.flags&=-16777217}function Kg(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!d2(r))if(Em())t.flags|=8192;else throw As=Qc,ef}function gu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Pn():536870912,t.lanes|=r,vo|=r)}function Dl(t,r){if(!St)switch(t.tailMode){case"hidden":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:f.sibling=null}}function ln(t){var r=t.alternate!==null&&t.alternate.child===t.child,c=0,f=0;if(r)for(var p=t.child;p!==null;)c|=p.lanes|p.childLanes,f|=p.subtreeFlags&65011712,f|=p.flags&65011712,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)c|=p.lanes|p.childLanes,f|=p.subtreeFlags,f|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=f,t.childLanes=c,r}function eb(t,r,c){var f=r.pendingProps;switch(qd(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(r),null;case 1:return ln(r),null;case 3:return c=r.stateNode,f=null,t!==null&&(f=t.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),Zi(Dn),Oe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(oo(r)?$i(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Yd())),ln(r),null;case 26:var p=r.type,b=r.memoizedState;return t===null?($i(r),b!==null?(ln(r),Kg(r,b)):(ln(r),Uf(r,p,null,f,c))):b?b!==t.memoizedState?($i(r),ln(r),Kg(r,b)):(ln(r),r.flags&=-16777217):(t=t.memoizedProps,t!==f&&$i(r),ln(r),Uf(r,p,t,f,c)),null;case 27:if(tt(r),c=me.current,p=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==f&&$i(r);else{if(!f){if(r.stateNode===null)throw Error(o(166));return ln(r),null}t=J.current,oo(r)?N1(r):(t=r2(p,f,c),r.stateNode=t,$i(r))}return ln(r),null;case 5:if(tt(r),p=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==f&&$i(r);else{if(!f){if(r.stateNode===null)throw Error(o(166));return ln(r),null}if(b=J.current,oo(r))N1(r);else{var C=Nu(me.current);switch(b){case 1:b=C.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:b=C.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":b=C.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":b=C.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":b=C.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?C.createElement("select",{is:f.is}):C.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?C.createElement(p,{is:f.is}):C.createElement(p)}}b[_n]=r,b[Vt]=f;e:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)b.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break e;for(;C.sibling===null;){if(C.return===null||C.return===r)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=b;e:switch(er(b,p,f),p){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&$i(r)}}return ln(r),Uf(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,c),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==f&&$i(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(o(166));if(t=me.current,oo(r)){if(t=r.stateNode,c=r.memoizedProps,f=null,p=Qn,p!==null)switch(p.tag){case 27:case 5:f=p.memoizedProps}t[_n]=r,t=!!(t.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||Wm(t.nodeValue,c)),t||Ia(r,!0)}else t=Nu(t).createTextNode(f),t[_n]=r,r.stateNode=t}return ln(r),null;case 31:if(c=r.memoizedState,t===null||t.memoizedState!==null){if(f=oo(r),c!==null){if(t===null){if(!f)throw Error(o(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[_n]=r}else ws(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ln(r),t=!1}else c=Yd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return r.flags&256?(jr(r),r):(jr(r),null);if((r.flags&128)!==0)throw Error(o(558))}return ln(r),null;case 13:if(f=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(p=oo(r),f!==null&&f.dehydrated!==null){if(t===null){if(!p)throw Error(o(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));p[_n]=r}else ws(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ln(r),p=!1}else p=Yd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=p),p=!0;if(!p)return r.flags&256?(jr(r),r):(jr(r),null)}return jr(r),(r.flags&128)!==0?(r.lanes=c,r):(c=f!==null,t=t!==null&&t.memoizedState!==null,c&&(f=r.child,p=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(p=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==p&&(f.flags|=2048)),c!==t&&c&&(r.child.flags|=8192),gu(r,r.updateQueue),ln(r),null);case 4:return Oe(),t===null&&sh(r.stateNode.containerInfo),ln(r),null;case 10:return Zi(r.type),ln(r),null;case 19:if(Y(On),f=r.memoizedState,f===null)return ln(r),null;if(p=(r.flags&128)!==0,b=f.rendering,b===null)if(p)Dl(f,!1);else{if(bn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(b=tu(t),b!==null){for(r.flags|=128,Dl(f,!1),t=b.updateQueue,r.updateQueue=t,gu(r,t),r.subtreeFlags=0,t=c,c=r.child;c!==null;)A1(c,t),c=c.sibling;return ie(On,On.current&1|2),St&&Yi(r,f.treeForkCount),r.child}t=t.sibling}f.tail!==null&&hn()>wu&&(r.flags|=128,p=!0,Dl(f,!1),r.lanes=4194304)}else{if(!p)if(t=tu(b),t!==null){if(r.flags|=128,p=!0,t=t.updateQueue,r.updateQueue=t,gu(r,t),Dl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!St)return ln(r),null}else 2*hn()-f.renderingStartTime>wu&&c!==536870912&&(r.flags|=128,p=!0,Dl(f,!1),r.lanes=4194304);f.isBackwards?(b.sibling=r.child,r.child=b):(t=f.last,t!==null?t.sibling=b:r.child=b,f.last=b)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=hn(),t.sibling=null,c=On.current,ie(On,p?c&1|2:c&1),St&&Yi(r,f.treeForkCount),t):(ln(r),null);case 22:case 23:return jr(r),of(),f=r.memoizedState!==null,t!==null?t.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(c&536870912)!==0&&(r.flags&128)===0&&(ln(r),r.subtreeFlags&6&&(r.flags|=8192)):ln(r),c=r.updateQueue,c!==null&&gu(r,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==c&&(r.flags|=2048),t!==null&&Y(Es),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Zi(Dn),ln(r),null;case 25:return null;case 30:return null}throw Error(o(156,r.tag))}function tb(t,r){switch(qd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Zi(Dn),Oe(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return tt(r),null;case 31:if(r.memoizedState!==null){if(jr(r),r.alternate===null)throw Error(o(340));ws()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(jr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(o(340));ws()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Y(On),null;case 4:return Oe(),null;case 10:return Zi(r.type),null;case 22:case 23:return jr(r),of(),t!==null&&Y(Es),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Zi(Dn),null;case 25:return null;default:return null}}function Qg(t,r){switch(qd(r),r.tag){case 3:Zi(Dn),Oe();break;case 26:case 27:case 5:tt(r);break;case 4:Oe();break;case 31:r.memoizedState!==null&&jr(r);break;case 13:jr(r);break;case 19:Y(On);break;case 10:Zi(r.type);break;case 22:case 23:jr(r),of(),t!==null&&Y(Es);break;case 24:Zi(Dn)}}function Ml(t,r){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&t)===t){f=void 0;var b=c.create,C=c.inst;f=b(),C.destroy=f}c=c.next}while(c!==p)}}catch(D){Gt(r,r.return,D)}}function Ua(t,r,c){try{var f=r.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var b=p.next;f=b;do{if((f.tag&t)===t){var C=f.inst,D=C.destroy;if(D!==void 0){C.destroy=void 0,p=r;var P=c,ne=D;try{ne()}catch(ge){Gt(p,P,ge)}}}f=f.next}while(f!==b)}}catch(ge){Gt(r,r.return,ge)}}function Jg(t){var r=t.updateQueue;if(r!==null){var c=t.stateNode;try{V1(r,c)}catch(f){Gt(t,t.return,f)}}}function $g(t,r,c){c.props=Ts(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(f){Gt(t,r,f)}}function Bl(t,r){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var f=t.stateNode;break;case 30:f=t.stateNode;break;default:f=t.stateNode}typeof c=="function"?t.refCleanup=c(f):c.current=f}}catch(p){Gt(t,r,p)}}function Bi(t,r){var c=t.ref,f=t.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(p){Gt(t,r,p)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){Gt(t,r,p)}else c.current=null}function em(t){var r=t.type,c=t.memoizedProps,f=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(p){Gt(t,t.return,p)}}function Pf(t,r,c){try{var f=t.stateNode;Sb(f,t.type,c,r),f[Vt]=r}catch(p){Gt(t,t.return,p)}}function tm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&qa(t.type)||t.tag===4}function zf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&qa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ff(t,r,c){var f=t.tag;if(f===5||f===6)t=t.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(t),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=wr));else if(f!==4&&(f===27&&qa(t.type)&&(c=t.stateNode,r=null),t=t.child,t!==null))for(Ff(t,r,c),t=t.sibling;t!==null;)Ff(t,r,c),t=t.sibling}function mu(t,r,c){var f=t.tag;if(f===5||f===6)t=t.stateNode,r?c.insertBefore(t,r):c.appendChild(t);else if(f!==4&&(f===27&&qa(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(mu(t,r,c),t=t.sibling;t!==null;)mu(t,r,c),t=t.sibling}function nm(t){var r=t.stateNode,c=t.memoizedProps;try{for(var f=t.type,p=r.attributes;p.length;)r.removeAttributeNode(p[0]);er(r,f,c),r[_n]=t,r[Vt]=c}catch(b){Gt(t,t.return,b)}}var ea=!1,Ln=!1,Vf=!1,rm=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function nb(t,r){if(t=t.containerInfo,ch=Lu,t=R(t),k(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var p=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var C=0,D=-1,P=-1,ne=0,ge=0,pe=t,ae=null;t:for(;;){for(var ce;pe!==c||p!==0&&pe.nodeType!==3||(D=C+p),pe!==b||f!==0&&pe.nodeType!==3||(P=C+f),pe.nodeType===3&&(C+=pe.nodeValue.length),(ce=pe.firstChild)!==null;)ae=pe,pe=ce;for(;;){if(pe===t)break t;if(ae===c&&++ne===p&&(D=C),ae===b&&++ge===f&&(P=C),(ce=pe.nextSibling)!==null)break;pe=ae,ae=pe.parentNode}pe=ce}c=D===-1||P===-1?null:{start:D,end:P}}else c=null}c=c||{start:0,end:0}}else c=null;for(uh={focusedElem:t,selectionRange:c},Lu=!1,Yn=r;Yn!==null;)if(r=Yn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Yn=t;else for(;Yn!==null;){switch(r=Yn,b=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)p=t[c],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&b!==null){t=void 0,c=r,p=b.memoizedProps,b=b.memoizedState,f=c.stateNode;try{var Be=Ts(c.type,p);t=f.getSnapshotBeforeUpdate(Be,b),f.__reactInternalSnapshotBeforeUpdate=t}catch(Ke){Gt(c,c.return,Ke)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,c=t.nodeType,c===9)hh(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":hh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=r.sibling,t!==null){t.return=r.return,Yn=t;break}Yn=r.return}}function im(t,r,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:na(t,c),f&4&&Ml(5,c);break;case 1:if(na(t,c),f&4)if(t=c.stateNode,r===null)try{t.componentDidMount()}catch(C){Gt(c,c.return,C)}else{var p=Ts(c.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(p,r,t.__reactInternalSnapshotBeforeUpdate)}catch(C){Gt(c,c.return,C)}}f&64&&Jg(c),f&512&&Bl(c,c.return);break;case 3:if(na(t,c),f&64&&(t=c.updateQueue,t!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{V1(t,r)}catch(C){Gt(c,c.return,C)}}break;case 27:r===null&&f&4&&nm(c);case 26:case 5:na(t,c),r===null&&f&4&&em(c),f&512&&Bl(c,c.return);break;case 12:na(t,c);break;case 31:na(t,c),f&4&&om(t,c);break;case 13:na(t,c),f&4&&lm(t,c),f&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=db.bind(null,c),Ib(t,c))));break;case 22:if(f=c.memoizedState!==null||ea,!f){r=r!==null&&r.memoizedState!==null||Ln,p=ea;var b=Ln;ea=f,(Ln=r)&&!b?ra(t,c,(c.subtreeFlags&8772)!==0):na(t,c),ea=p,Ln=b}break;case 30:break;default:na(t,c)}}function am(t){var r=t.alternate;r!==null&&(t.alternate=null,am(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&xr(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var fn=null,Er=!1;function ta(t,r,c){for(c=c.child;c!==null;)sm(t,r,c),c=c.sibling}function sm(t,r,c){if(Ce&&typeof Ce.onCommitFiberUnmount=="function")try{Ce.onCommitFiberUnmount(tn,c)}catch{}switch(c.tag){case 26:Ln||Bi(c,r),ta(t,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ln||Bi(c,r);var f=fn,p=Er;qa(c.type)&&(fn=c.stateNode,Er=!1),ta(t,r,c),Gl(c.stateNode),fn=f,Er=p;break;case 5:Ln||Bi(c,r);case 6:if(f=fn,p=Er,fn=null,ta(t,r,c),fn=f,Er=p,fn!==null)if(Er)try{(fn.nodeType===9?fn.body:fn.nodeName==="HTML"?fn.ownerDocument.body:fn).removeChild(c.stateNode)}catch(b){Gt(c,r,b)}else try{fn.removeChild(c.stateNode)}catch(b){Gt(c,r,b)}break;case 18:fn!==null&&(Er?(t=fn,Jm(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),No(t)):Jm(fn,c.stateNode));break;case 4:f=fn,p=Er,fn=c.stateNode.containerInfo,Er=!0,ta(t,r,c),fn=f,Er=p;break;case 0:case 11:case 14:case 15:Ua(2,c,r),Ln||Ua(4,c,r),ta(t,r,c);break;case 1:Ln||(Bi(c,r),f=c.stateNode,typeof f.componentWillUnmount=="function"&&$g(c,r,f)),ta(t,r,c);break;case 21:ta(t,r,c);break;case 22:Ln=(f=Ln)||c.memoizedState!==null,ta(t,r,c),Ln=f;break;default:ta(t,r,c)}}function om(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{No(t)}catch(c){Gt(r,r.return,c)}}}function lm(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{No(t)}catch(c){Gt(r,r.return,c)}}function rb(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new rm),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new rm),r;default:throw Error(o(435,t.tag))}}function yu(t,r){var c=rb(t);r.forEach(function(f){if(!c.has(f)){c.add(f);var p=fb.bind(null,t,f);f.then(p,p)}})}function Sr(t,r){var c=r.deletions;if(c!==null)for(var f=0;f<c.length;f++){var p=c[f],b=t,C=r,D=C;e:for(;D!==null;){switch(D.tag){case 27:if(qa(D.type)){fn=D.stateNode,Er=!1;break e}break;case 5:fn=D.stateNode,Er=!1;break e;case 3:case 4:fn=D.stateNode.containerInfo,Er=!0;break e}D=D.return}if(fn===null)throw Error(o(160));sm(b,C,p),fn=null,Er=!1,b=p.alternate,b!==null&&(b.return=null),p.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)cm(r,t),r=r.sibling}var yi=null;function cm(t,r){var c=t.alternate,f=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Sr(r,t),Ar(t),f&4&&(Ua(3,t,t.return),Ml(3,t),Ua(5,t,t.return));break;case 1:Sr(r,t),Ar(t),f&512&&(Ln||c===null||Bi(c,c.return)),f&64&&ea&&(t=t.updateQueue,t!==null&&(f=t.callbacks,f!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var p=yi;if(Sr(r,t),Ar(t),f&512&&(Ln||c===null||Bi(c,c.return)),f&4){var b=c!==null?c.memoizedState:null;if(f=t.memoizedState,c===null)if(f===null)if(t.stateNode===null){e:{f=t.type,c=t.memoizedProps,p=p.ownerDocument||p;t:switch(f){case"title":b=p.getElementsByTagName("title")[0],(!b||b[ls]||b[_n]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=p.createElement(f),p.head.insertBefore(b,p.querySelector("head > title"))),er(b,f,c),b[_n]=t,pn(b),f=b;break e;case"link":var C=c2("link","href",p).get(f+(c.href||""));if(C){for(var D=0;D<C.length;D++)if(b=C[D],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){C.splice(D,1);break t}}b=p.createElement(f),er(b,f,c),p.head.appendChild(b);break;case"meta":if(C=c2("meta","content",p).get(f+(c.content||""))){for(D=0;D<C.length;D++)if(b=C[D],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){C.splice(D,1);break t}}b=p.createElement(f),er(b,f,c),p.head.appendChild(b);break;default:throw Error(o(468,f))}b[_n]=t,pn(b),f=b}t.stateNode=f}else u2(p,t.type,t.stateNode);else t.stateNode=l2(p,f,t.memoizedProps);else b!==f?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,f===null?u2(p,t.type,t.stateNode):l2(p,f,t.memoizedProps)):f===null&&t.stateNode!==null&&Pf(t,t.memoizedProps,c.memoizedProps)}break;case 27:Sr(r,t),Ar(t),f&512&&(Ln||c===null||Bi(c,c.return)),c!==null&&f&4&&Pf(t,t.memoizedProps,c.memoizedProps);break;case 5:if(Sr(r,t),Ar(t),f&512&&(Ln||c===null||Bi(c,c.return)),t.flags&32){p=t.stateNode;try{ba(p,"")}catch(Be){Gt(t,t.return,Be)}}f&4&&t.stateNode!=null&&(p=t.memoizedProps,Pf(t,p,c!==null?c.memoizedProps:p)),f&1024&&(Vf=!0);break;case 6:if(Sr(r,t),Ar(t),f&4){if(t.stateNode===null)throw Error(o(162));f=t.memoizedProps,c=t.stateNode;try{c.nodeValue=f}catch(Be){Gt(t,t.return,Be)}}break;case 3:if(ku=null,p=yi,yi=Ru(r.containerInfo),Sr(r,t),yi=p,Ar(t),f&4&&c!==null&&c.memoizedState.isDehydrated)try{No(r.containerInfo)}catch(Be){Gt(t,t.return,Be)}Vf&&(Vf=!1,um(t));break;case 4:f=yi,yi=Ru(t.stateNode.containerInfo),Sr(r,t),Ar(t),yi=f;break;case 12:Sr(r,t),Ar(t);break;case 31:Sr(r,t),Ar(t),f&4&&(f=t.updateQueue,f!==null&&(t.updateQueue=null,yu(t,f)));break;case 13:Sr(r,t),Ar(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(xu=hn()),f&4&&(f=t.updateQueue,f!==null&&(t.updateQueue=null,yu(t,f)));break;case 22:p=t.memoizedState!==null;var P=c!==null&&c.memoizedState!==null,ne=ea,ge=Ln;if(ea=ne||p,Ln=ge||P,Sr(r,t),Ln=ge,ea=ne,Ar(t),f&8192)e:for(r=t.stateNode,r._visibility=p?r._visibility&-2:r._visibility|1,p&&(c===null||P||ea||Ln||Os(t)),c=null,r=t;;){if(r.tag===5||r.tag===26){if(c===null){P=c=r;try{if(b=P.stateNode,p)C=b.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{D=P.stateNode;var pe=P.memoizedProps.style,ae=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;D.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Be){Gt(P,P.return,Be)}}}else if(r.tag===6){if(c===null){P=r;try{P.stateNode.nodeValue=p?"":P.memoizedProps}catch(Be){Gt(P,P.return,Be)}}}else if(r.tag===18){if(c===null){P=r;try{var ce=P.stateNode;p?$m(ce,!0):$m(P.stateNode,!1)}catch(Be){Gt(P,P.return,Be)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=t.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,yu(t,c))));break;case 19:Sr(r,t),Ar(t),f&4&&(f=t.updateQueue,f!==null&&(t.updateQueue=null,yu(t,f)));break;case 30:break;case 21:break;default:Sr(r,t),Ar(t)}}function Ar(t){var r=t.flags;if(r&2){try{for(var c,f=t.return;f!==null;){if(tm(f)){c=f;break}f=f.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var p=c.stateNode,b=zf(t);mu(t,b,p);break;case 5:var C=c.stateNode;c.flags&32&&(ba(C,""),c.flags&=-33);var D=zf(t);mu(t,D,C);break;case 3:case 4:var P=c.stateNode.containerInfo,ne=zf(t);Ff(t,ne,P);break;default:throw Error(o(161))}}catch(ge){Gt(t,t.return,ge)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function um(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;um(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function na(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)im(t,r.alternate,r),r=r.sibling}function Os(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Ua(4,r,r.return),Os(r);break;case 1:Bi(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&$g(r,r.return,c),Os(r);break;case 27:Gl(r.stateNode);case 26:case 5:Bi(r,r.return),Os(r);break;case 22:r.memoizedState===null&&Os(r);break;case 30:Os(r);break;default:Os(r)}t=t.sibling}}function ra(t,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,p=t,b=r,C=b.flags;switch(b.tag){case 0:case 11:case 15:ra(p,b,c),Ml(4,b);break;case 1:if(ra(p,b,c),f=b,p=f.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(ne){Gt(f,f.return,ne)}if(f=b,p=f.updateQueue,p!==null){var D=f.stateNode;try{var P=p.shared.hiddenCallbacks;if(P!==null)for(p.shared.hiddenCallbacks=null,p=0;p<P.length;p++)F1(P[p],D)}catch(ne){Gt(f,f.return,ne)}}c&&C&64&&Jg(b),Bl(b,b.return);break;case 27:nm(b);case 26:case 5:ra(p,b,c),c&&f===null&&C&4&&em(b),Bl(b,b.return);break;case 12:ra(p,b,c);break;case 31:ra(p,b,c),c&&C&4&&om(p,b);break;case 13:ra(p,b,c),c&&C&4&&lm(p,b);break;case 22:b.memoizedState===null&&ra(p,b,c),Bl(b,b.return);break;case 30:break;default:ra(p,b,c)}r=r.sibling}}function Hf(t,r){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&vl(c))}function Gf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&vl(t))}function pi(t,r,c,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)dm(t,r,c,f),r=r.sibling}function dm(t,r,c,f){var p=r.flags;switch(r.tag){case 0:case 11:case 15:pi(t,r,c,f),p&2048&&Ml(9,r);break;case 1:pi(t,r,c,f);break;case 3:pi(t,r,c,f),p&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&vl(t)));break;case 12:if(p&2048){pi(t,r,c,f),t=r.stateNode;try{var b=r.memoizedProps,C=b.id,D=b.onPostCommit;typeof D=="function"&&D(C,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(P){Gt(r,r.return,P)}}else pi(t,r,c,f);break;case 31:pi(t,r,c,f);break;case 13:pi(t,r,c,f);break;case 23:break;case 22:b=r.stateNode,C=r.alternate,r.memoizedState!==null?b._visibility&2?pi(t,r,c,f):Ll(t,r):b._visibility&2?pi(t,r,c,f):(b._visibility|=2,xo(t,r,c,f,(r.subtreeFlags&10256)!==0||!1)),p&2048&&Hf(C,r);break;case 24:pi(t,r,c,f),p&2048&&Gf(r.alternate,r);break;default:pi(t,r,c,f)}}function xo(t,r,c,f,p){for(p=p&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var b=t,C=r,D=c,P=f,ne=C.flags;switch(C.tag){case 0:case 11:case 15:xo(b,C,D,P,p),Ml(8,C);break;case 23:break;case 22:var ge=C.stateNode;C.memoizedState!==null?ge._visibility&2?xo(b,C,D,P,p):Ll(b,C):(ge._visibility|=2,xo(b,C,D,P,p)),p&&ne&2048&&Hf(C.alternate,C);break;case 24:xo(b,C,D,P,p),p&&ne&2048&&Gf(C.alternate,C);break;default:xo(b,C,D,P,p)}r=r.sibling}}function Ll(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=t,f=r,p=f.flags;switch(f.tag){case 22:Ll(c,f),p&2048&&Hf(f.alternate,f);break;case 24:Ll(c,f),p&2048&&Gf(f.alternate,f);break;default:Ll(c,f)}r=r.sibling}}var jl=8192;function wo(t,r,c){if(t.subtreeFlags&jl)for(t=t.child;t!==null;)fm(t,r,c),t=t.sibling}function fm(t,r,c){switch(t.tag){case 26:wo(t,r,c),t.flags&jl&&t.memoizedState!==null&&Hb(c,yi,t.memoizedState,t.memoizedProps);break;case 5:wo(t,r,c);break;case 3:case 4:var f=yi;yi=Ru(t.stateNode.containerInfo),wo(t,r,c),yi=f;break;case 22:t.memoizedState===null&&(f=t.alternate,f!==null&&f.memoizedState!==null?(f=jl,jl=16777216,wo(t,r,c),jl=f):wo(t,r,c));break;default:wo(t,r,c)}}function hm(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Ul(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var f=r[c];Yn=f,mm(f,t)}hm(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gm(t),t=t.sibling}function gm(t){switch(t.tag){case 0:case 11:case 15:Ul(t),t.flags&2048&&Ua(9,t,t.return);break;case 3:Ul(t);break;case 12:Ul(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,pu(t)):Ul(t);break;default:Ul(t)}}function pu(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var f=r[c];Yn=f,mm(f,t)}hm(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Ua(8,r,r.return),pu(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,pu(r));break;default:pu(r)}t=t.sibling}}function mm(t,r){for(;Yn!==null;){var c=Yn;switch(c.tag){case 0:case 11:case 15:Ua(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:vl(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Yn=f;else e:for(c=t;Yn!==null;){f=Yn;var p=f.sibling,b=f.return;if(am(f),f===c){Yn=null;break e}if(p!==null){p.return=b,Yn=p;break e}Yn=b}}}var ib={getCacheForType:function(t){var r=Jn(Dn),c=r.data.get(t);return c===void 0&&(c=t(),r.data.set(t,c)),c},cacheSignal:function(){return Jn(Dn).controller.signal}},ab=typeof WeakMap=="function"?WeakMap:Map,Mt=0,$t=null,pt=null,vt=0,Ht=0,Ur=null,Pa=!1,bo=!1,qf=!1,ia=0,bn=0,za=0,Ns=0,Wf=0,Pr=0,vo=0,Pl=null,_r=null,Yf=!1,xu=0,ym=0,wu=1/0,bu=null,Fa=null,Hn=0,Va=null,Eo=null,aa=0,Xf=0,Zf=null,pm=null,zl=0,Kf=null;function zr(){return(Mt&2)!==0&&vt!==0?vt&-vt:ee.T!==null?nh():or()}function xm(){if(Pr===0)if((vt&536870912)===0||St){var t=wt;wt<<=1,(wt&3932160)===0&&(wt=262144),Pr=t}else Pr=536870912;return t=Lr.current,t!==null&&(t.flags|=32),Pr}function Cr(t,r,c){(t===$t&&(Ht===2||Ht===9)||t.cancelPendingCommit!==null)&&(So(t,0),Ha(t,vt,Pr,!1)),Ti(t,c),((Mt&2)===0||t!==$t)&&(t===$t&&((Mt&2)===0&&(Ns|=c),bn===4&&Ha(t,vt,Pr,!1)),Li(t))}function wm(t,r,c){if((Mt&6)!==0)throw Error(o(327));var f=!c&&(r&127)===0&&(r&t.expiredLanes)===0||Zn(t,r),p=f?lb(t,r):Jf(t,r,!0),b=f;do{if(p===0){bo&&!f&&Ha(t,r,0,!1);break}else{if(c=t.current.alternate,b&&!sb(c)){p=Jf(t,r,!1),b=!1;continue}if(p===2){if(b=r,t.errorRecoveryDisabledLanes&b)var C=0;else C=t.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;e:{var D=t;p=Pl;var P=D.current.memoizedState.isDehydrated;if(P&&(So(D,C).flags|=256),C=Jf(D,C,!1),C!==2){if(qf&&!P){D.errorRecoveryDisabledLanes|=b,Ns|=b,p=4;break e}b=_r,_r=p,b!==null&&(_r===null?_r=b:_r.push.apply(_r,b))}p=C}if(b=!1,p!==2)continue}}if(p===1){So(t,0),Ha(t,r,0,!0);break}e:{switch(f=t,b=p,b){case 0:case 1:throw Error(o(345));case 4:if((r&4194048)!==r)break;case 6:Ha(f,r,Pr,!Pa);break e;case 2:_r=null;break;case 3:case 5:break;default:throw Error(o(329))}if((r&62914560)===r&&(p=xu+300-hn(),10<p)){if(Ha(f,r,Pr,!Pa),os(f,0,!0)!==0)break e;aa=r,f.timeoutHandle=Km(bm.bind(null,f,c,_r,bu,Yf,r,Pr,Ns,vo,Pa,b,"Throttled",-0,0),p);break e}bm(f,c,_r,bu,Yf,r,Pr,Ns,vo,Pa,b,null,-0,0)}}break}while(!0);Li(t)}function bm(t,r,c,f,p,b,C,D,P,ne,ge,pe,ae,ce){if(t.timeoutHandle=-1,pe=r.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wr},fm(r,b,pe);var Be=(b&62914560)===b?xu-hn():(b&4194048)===b?ym-hn():0;if(Be=Gb(pe,Be),Be!==null){aa=b,t.cancelPendingCommit=Be(Om.bind(null,t,r,b,c,f,p,C,D,P,ge,pe,null,ae,ce)),Ha(t,b,C,!ne);return}}Om(t,r,b,c,f,p,C,D,P)}function sb(t){for(var r=t;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var p=c[f],b=p.getSnapshot;p=p.value;try{if(!g(b(),p))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ha(t,r,c,f){r&=~Wf,r&=~Ns,t.suspendedLanes|=r,t.pingedLanes&=~r,f&&(t.warmLanes|=r),f=t.expirationTimes;for(var p=r;0<p;){var b=31-lt(p),C=1<<b;f[b]=-1,p&=~C}c!==0&&Cc(t,c,r)}function vu(){return(Mt&6)===0?(Fl(0),!1):!0}function Qf(){if(pt!==null){if(Ht===0)var t=pt.return;else t=pt,Xi=bs=null,hf(t),ho=null,Sl=0,t=pt;for(;t!==null;)Qg(t.alternate,t),t=t.return;pt=null}}function So(t,r){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,Cb(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),aa=0,Qf(),$t=t,pt=c=Wi(t.current,null),vt=r,Ht=0,Ur=null,Pa=!1,bo=Zn(t,r),qf=!1,vo=Pr=Wf=Ns=za=bn=0,_r=Pl=null,Yf=!1,(r&8)!==0&&(r|=r&32);var f=t.entangledLanes;if(f!==0)for(t=t.entanglements,f&=r;0<f;){var p=31-lt(f),b=1<<p;r|=t[p],f&=~b}return ia=r,Vc(),c}function vm(t,r){ot=null,ee.H=Il,r===fo||r===Kc?(r=j1(),Ht=3):r===ef?(r=j1(),Ht=4):Ht=r===Nf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ur=r,pt===null&&(bn=1,uu(t,$r(r,t.current)))}function Em(){var t=Lr.current;return t===null?!0:(vt&4194048)===vt?ri===null:(vt&62914560)===vt||(vt&536870912)!==0?t===ri:!1}function Sm(){var t=ee.H;return ee.H=Il,t===null?Il:t}function Am(){var t=ee.A;return ee.A=ib,t}function Eu(){bn=4,Pa||(vt&4194048)!==vt&&Lr.current!==null||(bo=!0),(za&134217727)===0&&(Ns&134217727)===0||$t===null||Ha($t,vt,Pr,!1)}function Jf(t,r,c){var f=Mt;Mt|=2;var p=Sm(),b=Am();($t!==t||vt!==r)&&(bu=null,So(t,r)),r=!1;var C=bn;e:do try{if(Ht!==0&&pt!==null){var D=pt,P=Ur;switch(Ht){case 8:Qf(),C=6;break e;case 3:case 2:case 9:case 6:Lr.current===null&&(r=!0);var ne=Ht;if(Ht=0,Ur=null,Ao(t,D,P,ne),c&&bo){C=0;break e}break;default:ne=Ht,Ht=0,Ur=null,Ao(t,D,P,ne)}}ob(),C=bn;break}catch(ge){vm(t,ge)}while(!0);return r&&t.shellSuspendCounter++,Xi=bs=null,Mt=f,ee.H=p,ee.A=b,pt===null&&($t=null,vt=0,Vc()),C}function ob(){for(;pt!==null;)_m(pt)}function lb(t,r){var c=Mt;Mt|=2;var f=Sm(),p=Am();$t!==t||vt!==r?(bu=null,wu=hn()+500,So(t,r)):bo=Zn(t,r);e:do try{if(Ht!==0&&pt!==null){r=pt;var b=Ur;t:switch(Ht){case 1:Ht=0,Ur=null,Ao(t,r,b,1);break;case 2:case 9:if(B1(b)){Ht=0,Ur=null,Cm(r);break}r=function(){Ht!==2&&Ht!==9||$t!==t||(Ht=7),Li(t)},b.then(r,r);break e;case 3:Ht=7;break e;case 4:Ht=5;break e;case 7:B1(b)?(Ht=0,Ur=null,Cm(r)):(Ht=0,Ur=null,Ao(t,r,b,7));break;case 5:var C=null;switch(pt.tag){case 26:C=pt.memoizedState;case 5:case 27:var D=pt;if(C?d2(C):D.stateNode.complete){Ht=0,Ur=null;var P=D.sibling;if(P!==null)pt=P;else{var ne=D.return;ne!==null?(pt=ne,Su(ne)):pt=null}break t}}Ht=0,Ur=null,Ao(t,r,b,5);break;case 6:Ht=0,Ur=null,Ao(t,r,b,6);break;case 8:Qf(),bn=6;break e;default:throw Error(o(462))}}cb();break}catch(ge){vm(t,ge)}while(!0);return Xi=bs=null,ee.H=f,ee.A=p,Mt=c,pt!==null?0:($t=null,vt=0,Vc(),bn)}function cb(){for(;pt!==null&&!Gs();)_m(pt)}function _m(t){var r=Zg(t.alternate,t,ia);t.memoizedProps=t.pendingProps,r===null?Su(t):pt=r}function Cm(t){var r=t,c=r.alternate;switch(r.tag){case 15:case 0:r=Hg(c,r,r.pendingProps,r.type,void 0,vt);break;case 11:r=Hg(c,r,r.pendingProps,r.type.render,r.ref,vt);break;case 5:hf(r);default:Qg(c,r),r=pt=A1(r,ia),r=Zg(c,r,ia)}t.memoizedProps=t.pendingProps,r===null?Su(t):pt=r}function Ao(t,r,c,f){Xi=bs=null,hf(r),ho=null,Sl=0;var p=r.return;try{if(Qw(t,p,r,c,vt)){bn=1,uu(t,$r(c,t.current)),pt=null;return}}catch(b){if(p!==null)throw pt=p,b;bn=1,uu(t,$r(c,t.current)),pt=null;return}r.flags&32768?(St||f===1?t=!0:bo||(vt&536870912)!==0?t=!1:(Pa=t=!0,(f===2||f===9||f===3||f===6)&&(f=Lr.current,f!==null&&f.tag===13&&(f.flags|=16384))),Tm(r,t)):Su(r)}function Su(t){var r=t;do{if((r.flags&32768)!==0){Tm(r,Pa);return}t=r.return;var c=eb(r.alternate,r,ia);if(c!==null){pt=c;return}if(r=r.sibling,r!==null){pt=r;return}pt=r=t}while(r!==null);bn===0&&(bn=5)}function Tm(t,r){do{var c=tb(t.alternate,t);if(c!==null){c.flags&=32767,pt=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(t=t.sibling,t!==null)){pt=t;return}pt=t=c}while(t!==null);bn=6,pt=null}function Om(t,r,c,f,p,b,C,D,P){t.cancelPendingCommit=null;do Au();while(Hn!==0);if((Mt&6)!==0)throw Error(o(327));if(r!==null){if(r===t.current)throw Error(o(177));if(b=r.lanes|r.childLanes,b|=Pd,Xr(t,c,b,C,D,P),t===$t&&(pt=$t=null,vt=0),Eo=r,Va=t,aa=c,Xf=b,Zf=p,pm=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,hb(Or,function(){return Dm(),null})):(t.callbackNode=null,t.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=ee.T,ee.T=null,p=fe.p,fe.p=2,C=Mt,Mt|=4;try{nb(t,r,c)}finally{Mt=C,fe.p=p,ee.T=f}}Hn=1,Nm(),Rm(),Im()}}function Nm(){if(Hn===1){Hn=0;var t=Va,r=Eo,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null;var f=fe.p;fe.p=2;var p=Mt;Mt|=4;try{cm(r,t);var b=uh,C=R(t.containerInfo),D=b.focusedElem,P=b.selectionRange;if(C!==D&&D&&D.ownerDocument&&_(D.ownerDocument.documentElement,D)){if(P!==null&&k(D)){var ne=P.start,ge=P.end;if(ge===void 0&&(ge=ne),"selectionStart"in D)D.selectionStart=ne,D.selectionEnd=Math.min(ge,D.value.length);else{var pe=D.ownerDocument||document,ae=pe&&pe.defaultView||window;if(ae.getSelection){var ce=ae.getSelection(),Be=D.textContent.length,Ke=Math.min(P.start,Be),Zt=P.end===void 0?Ke:Math.min(P.end,Be);!ce.extend&&Ke>Zt&&(C=Zt,Zt=Ke,Ke=C);var W=S(D,Ke),V=S(D,Zt);if(W&&V&&(ce.rangeCount!==1||ce.anchorNode!==W.node||ce.anchorOffset!==W.offset||ce.focusNode!==V.node||ce.focusOffset!==V.offset)){var te=pe.createRange();te.setStart(W.node,W.offset),ce.removeAllRanges(),Ke>Zt?(ce.addRange(te),ce.extend(V.node,V.offset)):(te.setEnd(V.node,V.offset),ce.addRange(te))}}}}for(pe=[],ce=D;ce=ce.parentNode;)ce.nodeType===1&&pe.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<pe.length;D++){var ye=pe[D];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}Lu=!!ch,uh=ch=null}finally{Mt=p,fe.p=f,ee.T=c}}t.current=r,Hn=2}}function Rm(){if(Hn===2){Hn=0;var t=Va,r=Eo,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=ee.T,ee.T=null;var f=fe.p;fe.p=2;var p=Mt;Mt|=4;try{im(t,r.alternate,r)}finally{Mt=p,fe.p=f,ee.T=c}}Hn=3}}function Im(){if(Hn===4||Hn===3){Hn=0,_c();var t=Va,r=Eo,c=aa,f=pm;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Hn=5:(Hn=0,Eo=Va=null,km(t,t.pendingLanes));var p=t.pendingLanes;if(p===0&&(Fa=null),ci(c),r=r.stateNode,Ce&&typeof Ce.onCommitFiberRoot=="function")try{Ce.onCommitFiberRoot(tn,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=ee.T,p=fe.p,fe.p=2,ee.T=null;try{for(var b=t.onRecoverableError,C=0;C<f.length;C++){var D=f[C];b(D.value,{componentStack:D.stack})}}finally{ee.T=r,fe.p=p}}(aa&3)!==0&&Au(),Li(t),p=t.pendingLanes,(c&261930)!==0&&(p&42)!==0?t===Kf?zl++:(zl=0,Kf=t):zl=0,Fl(0)}}function km(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,vl(r)))}function Au(){return Nm(),Rm(),Im(),Dm()}function Dm(){if(Hn!==5)return!1;var t=Va,r=Xf;Xf=0;var c=ci(aa),f=ee.T,p=fe.p;try{fe.p=32>c?32:c,ee.T=null,c=Zf,Zf=null;var b=Va,C=aa;if(Hn=0,Eo=Va=null,aa=0,(Mt&6)!==0)throw Error(o(331));var D=Mt;if(Mt|=4,gm(b.current),dm(b,b.current,C,c),Mt=D,Fl(0,!1),Ce&&typeof Ce.onPostCommitFiberRoot=="function")try{Ce.onPostCommitFiberRoot(tn,b)}catch{}return!0}finally{fe.p=p,ee.T=f,km(t,r)}}function Mm(t,r,c){r=$r(c,r),r=Of(t.stateNode,r,2),t=Ba(t,r,2),t!==null&&(Ti(t,2),Li(t))}function Gt(t,r,c){if(t.tag===3)Mm(t,t,c);else for(;r!==null;){if(r.tag===3){Mm(r,t,c);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Fa===null||!Fa.has(f))){t=$r(c,t),c=Bg(2),f=Ba(r,c,2),f!==null&&(Lg(c,f,r,t),Ti(f,2),Li(f));break}}r=r.return}}function $f(t,r,c){var f=t.pingCache;if(f===null){f=t.pingCache=new ab;var p=new Set;f.set(r,p)}else p=f.get(r),p===void 0&&(p=new Set,f.set(r,p));p.has(c)||(qf=!0,p.add(c),t=ub.bind(null,t,r,c),r.then(t,t))}function ub(t,r,c){var f=t.pingCache;f!==null&&f.delete(r),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,$t===t&&(vt&c)===c&&(bn===4||bn===3&&(vt&62914560)===vt&&300>hn()-xu?(Mt&2)===0&&So(t,0):Wf|=c,vo===vt&&(vo=0)),Li(t)}function Bm(t,r){r===0&&(r=Pn()),t=ps(t,r),t!==null&&(Ti(t,r),Li(t))}function db(t){var r=t.memoizedState,c=0;r!==null&&(c=r.retryLane),Bm(t,c)}function fb(t,r){var c=0;switch(t.tag){case 31:case 13:var f=t.stateNode,p=t.memoizedState;p!==null&&(c=p.retryLane);break;case 19:f=t.stateNode;break;case 22:f=t.stateNode._retryCache;break;default:throw Error(o(314))}f!==null&&f.delete(r),Bm(t,c)}function hb(t,r){return ga(t,r)}var _u=null,_o=null,eh=!1,Cu=!1,th=!1,Ga=0;function Li(t){t!==_o&&t.next===null&&(_o===null?_u=_o=t:_o=_o.next=t),Cu=!0,eh||(eh=!0,mb())}function Fl(t,r){if(!th&&Cu){th=!0;do for(var c=!1,f=_u;f!==null;){if(t!==0){var p=f.pendingLanes;if(p===0)var b=0;else{var C=f.suspendedLanes,D=f.pingedLanes;b=(1<<31-lt(42|t)+1)-1,b&=p&~(C&~D),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,Pm(f,b))}else b=vt,b=os(f,f===$t?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||Zn(f,b)||(c=!0,Pm(f,b));f=f.next}while(c);th=!1}}function gb(){Lm()}function Lm(){Cu=eh=!1;var t=0;Ga!==0&&_b()&&(t=Ga);for(var r=hn(),c=null,f=_u;f!==null;){var p=f.next,b=jm(f,r);b===0?(f.next=null,c===null?_u=p:c.next=p,p===null&&(_o=c)):(c=f,(t!==0||(b&3)!==0)&&(Cu=!0)),f=p}Hn!==0&&Hn!==5||Fl(t),Ga!==0&&(Ga=0)}function jm(t,r){for(var c=t.suspendedLanes,f=t.pingedLanes,p=t.expirationTimes,b=t.pendingLanes&-62914561;0<b;){var C=31-lt(b),D=1<<C,P=p[C];P===-1?((D&c)===0||(D&f)!==0)&&(p[C]=ll(D,r)):P<=r&&(t.expiredLanes|=D),b&=~D}if(r=$t,c=vt,c=os(t,t===r?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),f=t.callbackNode,c===0||t===r&&(Ht===2||Ht===9)||t.cancelPendingCommit!==null)return f!==null&&f!==null&&Me(f),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||Zn(t,c)){if(r=c&-c,r===t.callbackPriority)return r;switch(f!==null&&Me(f),ci(c)){case 2:case 8:c=al;break;case 32:c=Or;break;case 268435456:c=sl;break;default:c=Or}return f=Um.bind(null,t),c=ga(c,f),t.callbackPriority=r,t.callbackNode=c,r}return f!==null&&f!==null&&Me(f),t.callbackPriority=2,t.callbackNode=null,2}function Um(t,r){if(Hn!==0&&Hn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(Au()&&t.callbackNode!==c)return null;var f=vt;return f=os(t,t===$t?f:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),f===0?null:(wm(t,f,r),jm(t,hn()),t.callbackNode!=null&&t.callbackNode===c?Um.bind(null,t):null)}function Pm(t,r){if(Au())return null;wm(t,r,!0)}function mb(){Tb(function(){(Mt&6)!==0?ga(pr,gb):Lm()})}function nh(){if(Ga===0){var t=co;t===0&&(t=ss,ss<<=1,(ss&261888)===0&&(ss=256)),Ga=t}return Ga}function zm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:va(""+t)}function Fm(t,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,t.id&&c.setAttribute("form",t.id),r.parentNode.insertBefore(c,r),t=new FormData(t),c.parentNode.removeChild(c),t}function yb(t,r,c,f,p){if(r==="submit"&&c&&c.stateNode===p){var b=zm((p[Vt]||null).action),C=f.submitter;C&&(r=(r=C[Vt]||null)?zm(r.formAction):C.getAttribute("formAction"),r!==null&&(b=r,C=null));var D=new zn("action","action",null,f,p);t.push({event:D,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Ga!==0){var P=C?Fm(p,C):new FormData(p);Ef(c,{pending:!0,data:P,method:p.method,action:b},null,P)}}else typeof b=="function"&&(D.preventDefault(),P=C?Fm(p,C):new FormData(p),Ef(c,{pending:!0,data:P,method:p.method,action:b},b,P))},currentTarget:p}]})}}for(var rh=0;rh<xl.length;rh++){var ih=xl[rh],pb=ih.toLowerCase(),xb=ih[0].toUpperCase()+ih.slice(1);mi(pb,"on"+xb)}mi(vr,"onAnimationEnd"),mi(Kn,"onAnimationIteration"),mi(Ut,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(Vn,"onTransitionRun"),mi(fr,"onTransitionStart"),mi(Oa,"onTransitionCancel"),mi(qi,"onTransitionEnd"),Rr("onMouseEnter",["mouseout","mouseover"]),Rr("onMouseLeave",["mouseout","mouseover"]),Rr("onPointerEnter",["pointerout","pointerover"]),Rr("onPointerLeave",["pointerout","pointerover"]),Lt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Lt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Lt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Lt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Lt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Lt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function Vm(t,r){r=(r&4)!==0;for(var c=0;c<t.length;c++){var f=t[c],p=f.event;f=f.listeners;e:{var b=void 0;if(r)for(var C=f.length-1;0<=C;C--){var D=f[C],P=D.instance,ne=D.currentTarget;if(D=D.listener,P!==b&&p.isPropagationStopped())break e;b=D,p.currentTarget=ne;try{b(p)}catch(ge){Fc(ge)}p.currentTarget=null,b=P}else for(C=0;C<f.length;C++){if(D=f[C],P=D.instance,ne=D.currentTarget,D=D.listener,P!==b&&p.isPropagationStopped())break e;b=D,p.currentTarget=ne;try{b(p)}catch(ge){Fc(ge)}p.currentTarget=null,b=P}}}}function xt(t,r){var c=r[ma];c===void 0&&(c=r[ma]=new Set);var f=t+"__bubble";c.has(f)||(Hm(r,t,2,!1),c.add(f))}function ah(t,r,c){var f=0;r&&(f|=4),Hm(c,t,f,r)}var Tu="_reactListening"+Math.random().toString(36).slice(2);function sh(t){if(!t[Tu]){t[Tu]=!0,ve.forEach(function(c){c!=="selectionchange"&&(wb.has(c)||ah(c,!1,t),ah(c,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Tu]||(r[Tu]=!0,ah("selectionchange",!1,r))}}function Hm(t,r,c,f){switch(x2(r)){case 2:var p=Yb;break;case 8:p=Xb;break;default:p=vh}c=p.bind(null,r,c,t),p=void 0,!dl||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(p=!0),f?p!==void 0?t.addEventListener(r,c,{capture:!0,passive:p}):t.addEventListener(r,c,!0):p!==void 0?t.addEventListener(r,c,{passive:p}):t.addEventListener(r,c,!1)}function oh(t,r,c,f,p){var b=f;if((r&1)===0&&(r&2)===0&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var D=f.stateNode.containerInfo;if(D===p)break;if(C===4)for(C=f.return;C!==null;){var P=C.tag;if((P===3||P===4)&&C.stateNode.containerInfo===p)return;C=C.return}for(;D!==null;){if(C=yn(D),C===null)return;if(P=C.tag,P===5||P===6||P===26||P===27){f=b=C;continue e}D=D.parentNode}}f=f.return}Rc(function(){var ne=b,ge=ul(c),pe=[];e:{var ae=zc.get(t);if(ae!==void 0){var ce=zn,Be=t;switch(t){case"keypress":if(Ni(c)===0)break e;case"keydown":case"keyup":ce=eo;break;case"focusin":Be="focus",ce=gl;break;case"focusout":Be="blur",ce=gl;break;case"beforeblur":case"afterblur":ce=gl;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Dt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Js;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Ld;break;case vr:case Kn:case Ut:ce=ct;break;case qi:ce=Fi;break;case"scroll":case"scrollend":ce=Ic;break;case"wheel":ce=jd;break;case"copy":case"cut":case"paste":ce=$s;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=jt;break;case"toggle":case"beforetoggle":ce=yl}var Ke=(r&4)!==0,Zt=!Ke&&(t==="scroll"||t==="scrollend"),W=Ke?ae!==null?ae+"Capture":null:ae;Ke=[];for(var V=ne,te;V!==null;){var ye=V;if(te=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||te===null||W===null||(ye=it(V,W),ye!=null&&Ke.push(Hl(V,ye,te))),Zt)break;V=V.return}0<Ke.length&&(ae=new ce(ae,Be,null,c,ge),pe.push({event:ae,listeners:Ke}))}}if((r&7)===0){e:{if(ae=t==="mouseover"||t==="pointerover",ce=t==="mouseout"||t==="pointerout",ae&&c!==cs&&(Be=c.relatedTarget||c.fromElement)&&(yn(Be)||Be[Nr]))break e;if((ce||ae)&&(ae=ge.window===ge?ge:(ae=ge.ownerDocument)?ae.defaultView||ae.parentWindow:window,ce?(Be=c.relatedTarget||c.toElement,ce=ne,Be=Be?yn(Be):null,Be!==null&&(Zt=m(Be),Ke=Be.tag,Be!==Zt||Ke!==5&&Ke!==27&&Ke!==6)&&(Be=null)):(ce=null,Be=ne),ce!==Be)){if(Ke=Dt,ye="onMouseLeave",W="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Ke=jt,ye="onPointerLeave",W="onPointerEnter",V="pointer"),Zt=ce==null?ae:ya(ce),te=Be==null?ae:ya(Be),ae=new Ke(ye,V+"leave",ce,c,ge),ae.target=Zt,ae.relatedTarget=te,ye=null,yn(ge)===ne&&(Ke=new Ke(W,V+"enter",Be,c,ge),Ke.target=te,Ke.relatedTarget=Zt,ye=Ke),Zt=ye,ce&&Be)t:{for(Ke=bb,W=ce,V=Be,te=0,ye=W;ye;ye=Ke(ye))te++;ye=0;for(var qe=V;qe;qe=Ke(qe))ye++;for(;0<te-ye;)W=Ke(W),te--;for(;0<ye-te;)V=Ke(V),ye--;for(;te--;){if(W===V||V!==null&&W===V.alternate){Ke=W;break t}W=Ke(W),V=Ke(V)}Ke=null}else Ke=null;ce!==null&&Gm(pe,ae,ce,Ke,!1),Be!==null&&Zt!==null&&Gm(pe,Zt,Be,Ke,!0)}}e:{if(ae=ne?ya(ne):window,ce=ae.nodeName&&ae.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ae.type==="file")var Rt=Mr;else if(pl(ae))if(Pc)Rt=u;else{Rt=s;var ze=n}else ce=ae.nodeName,!ce||ce.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?ne&&Kt(ne.elementType)&&(Rt=Mr):Rt=l;if(Rt&&(Rt=Rt(t,ne))){Dr(pe,Rt,c,ge);break e}ze&&ze(t,ae,ne),t==="focusout"&&ne&&ae.type==="number"&&ne.memoizedProps.value!=null&&M(ae,"number",ae.value)}switch(ze=ne?ya(ne):window,t){case"focusin":(pl(ze)||ze.contentEditable==="true")&&(z=ze,F=ne,X=null);break;case"focusout":X=F=z=null;break;case"mousedown":se=!0;break;case"contextmenu":case"mouseup":case"dragend":se=!1,_e(pe,c,ge);break;case"selectionchange":if(L)break;case"keydown":case"keyup":_e(pe,c,ge)}var ut;if(fs)e:{switch(t){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else Ta?Uc(t,c)&&(Et="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(Et="onCompositionStart");Et&&(jc&&c.locale!=="ko"&&(Ta||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&Ta&&(ut=Ea()):(hi=ge,gi="value"in hi?hi.value:hi.textContent,Ta=!0)),ze=Ou(ne,Et),0<ze.length&&(Et=new Mc(Et,t,null,c,ge),pe.push({event:Et,listeners:ze}),ut?Et.data=ut:(ut=Ca(c),ut!==null&&(Et.data=ut)))),(ut=Lc?ki(t,c):no(t,c))&&(Et=Ou(ne,"onBeforeInput"),0<Et.length&&(ze=new Mc("onBeforeInput","beforeinput",null,c,ge),pe.push({event:ze,listeners:Et}),ze.data=ut)),yb(pe,t,ne,c,ge)}Vm(pe,r)})}function Hl(t,r,c){return{instance:t,listener:r,currentTarget:c}}function Ou(t,r){for(var c=r+"Capture",f=[];t!==null;){var p=t,b=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||b===null||(p=it(t,c),p!=null&&f.unshift(Hl(t,p,b)),p=it(t,r),p!=null&&f.push(Hl(t,p,b))),t.tag===3)return f;t=t.return}return[]}function bb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Gm(t,r,c,f,p){for(var b=r._reactName,C=[];c!==null&&c!==f;){var D=c,P=D.alternate,ne=D.stateNode;if(D=D.tag,P!==null&&P===f)break;D!==5&&D!==26&&D!==27||ne===null||(P=ne,p?(ne=it(c,b),ne!=null&&C.unshift(Hl(c,ne,P))):p||(ne=it(c,b),ne!=null&&C.push(Hl(c,ne,P)))),c=c.return}C.length!==0&&t.push({event:r,listeners:C})}var vb=/\r\n?/g,Eb=/\u0000|\uFFFD/g;function qm(t){return(typeof t=="string"?t:""+t).replace(vb,`
`).replace(Eb,"")}function Wm(t,r){return r=qm(r),qm(t)===r}function Xt(t,r,c,f,p,b){switch(c){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||ba(t,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&ba(t,""+f);break;case"className":xa(t,"class",f);break;case"tabIndex":xa(t,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":xa(t,c,f);break;case"style":Ge(t,f,b);break;case"data":if(r!=="object"){xa(t,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||c!=="href")){t.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){t.removeAttribute(c);break}f=va(""+f),t.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(r!=="input"&&Xt(t,r,"name",p.name,p,null),Xt(t,r,"formEncType",p.formEncType,p,null),Xt(t,r,"formMethod",p.formMethod,p,null),Xt(t,r,"formTarget",p.formTarget,p,null)):(Xt(t,r,"encType",p.encType,p,null),Xt(t,r,"method",p.method,p,null),Xt(t,r,"target",p.target,p,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){t.removeAttribute(c);break}f=va(""+f),t.setAttribute(c,f);break;case"onClick":f!=null&&(t.onclick=wr);break;case"onScroll":f!=null&&xt("scroll",t);break;case"onScrollEnd":f!=null&&xt("scrollend",t);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(o(61));if(c=f.__html,c!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"multiple":t.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":t.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){t.removeAttribute("xlink:href");break}c=va(""+f),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?t.setAttribute(c,""+f):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":f===!0?t.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?t.setAttribute(c,f):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?t.setAttribute(c,f):t.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?t.removeAttribute(c):t.setAttribute(c,f);break;case"popover":xt("beforetoggle",t),xt("toggle",t),pa(t,"popover",f);break;case"xlinkActuate":Ir(t,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Ir(t,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Ir(t,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Ir(t,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Ir(t,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Ir(t,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Ir(t,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Ir(t,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Ir(t,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":pa(t,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Nc.get(c)||c,pa(t,c,f))}}function lh(t,r,c,f,p,b){switch(c){case"style":Ge(t,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(o(61));if(c=f.__html,c!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"children":typeof f=="string"?ba(t,f):(typeof f=="number"||typeof f=="bigint")&&ba(t,""+f);break;case"onScroll":f!=null&&xt("scroll",t);break;case"onScrollEnd":f!=null&&xt("scrollend",t);break;case"onClick":f!=null&&(t.onclick=wr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),r=c.slice(2,p?c.length-7:void 0),b=t[Vt]||null,b=b!=null?b[c]:null,typeof b=="function"&&t.removeEventListener(r,b,p),typeof f=="function")){typeof b!="function"&&b!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(r,f,p);break e}c in t?t[c]=f:f===!0?t.setAttribute(c,""):pa(t,c,f)}}}function er(t,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",t),xt("load",t);var f=!1,p=!1,b;for(b in c)if(c.hasOwnProperty(b)){var C=c[b];if(C!=null)switch(b){case"src":f=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:Xt(t,r,b,C,c,null)}}p&&Xt(t,r,"srcSet",c.srcSet,c,null),f&&Xt(t,r,"src",c.src,c,null);return;case"input":xt("invalid",t);var D=b=C=p=null,P=null,ne=null;for(f in c)if(c.hasOwnProperty(f)){var ge=c[f];if(ge!=null)switch(f){case"name":p=ge;break;case"type":C=ge;break;case"checked":P=ge;break;case"defaultChecked":ne=ge;break;case"value":b=ge;break;case"defaultValue":D=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(o(137,r));break;default:Xt(t,r,f,ge,c,null)}}K(t,b,D,P,ne,C,p,!1);return;case"select":xt("invalid",t),f=C=b=null;for(p in c)if(c.hasOwnProperty(p)&&(D=c[p],D!=null))switch(p){case"value":b=D;break;case"defaultValue":C=D;break;case"multiple":f=D;default:Xt(t,r,p,D,c,null)}r=b,c=C,t.multiple=!!f,r!=null?Pe(t,!!f,r,!1):c!=null&&Pe(t,!!f,c,!0);return;case"textarea":xt("invalid",t),b=p=f=null;for(C in c)if(c.hasOwnProperty(C)&&(D=c[C],D!=null))switch(C){case"value":f=D;break;case"defaultValue":p=D;break;case"children":b=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(o(91));break;default:Xt(t,r,C,D,c,null)}ur(t,f,p,b);return;case"option":for(P in c)c.hasOwnProperty(P)&&(f=c[P],f!=null)&&(P==="selected"?t.selected=f&&typeof f!="function"&&typeof f!="symbol":Xt(t,r,P,f,c,null));return;case"dialog":xt("beforetoggle",t),xt("toggle",t),xt("cancel",t),xt("close",t);break;case"iframe":case"object":xt("load",t);break;case"video":case"audio":for(f=0;f<Vl.length;f++)xt(Vl[f],t);break;case"image":xt("error",t),xt("load",t);break;case"details":xt("toggle",t);break;case"embed":case"source":case"link":xt("error",t),xt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in c)if(c.hasOwnProperty(ne)&&(f=c[ne],f!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:Xt(t,r,ne,f,c,null)}return;default:if(Kt(r)){for(ge in c)c.hasOwnProperty(ge)&&(f=c[ge],f!==void 0&&lh(t,r,ge,f,c,void 0));return}}for(D in c)c.hasOwnProperty(D)&&(f=c[D],f!=null&&Xt(t,r,D,f,c,null))}function Sb(t,r,c,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,b=null,C=null,D=null,P=null,ne=null,ge=null;for(ce in c){var pe=c[ce];if(c.hasOwnProperty(ce)&&pe!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":P=pe;default:f.hasOwnProperty(ce)||Xt(t,r,ce,null,f,pe)}}for(var ae in f){var ce=f[ae];if(pe=c[ae],f.hasOwnProperty(ae)&&(ce!=null||pe!=null))switch(ae){case"type":b=ce;break;case"name":p=ce;break;case"checked":ne=ce;break;case"defaultChecked":ge=ce;break;case"value":C=ce;break;case"defaultValue":D=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(o(137,r));break;default:ce!==pe&&Xt(t,r,ae,ce,f,pe)}}In(t,C,D,P,ne,ge,b,p);return;case"select":ce=C=D=ae=null;for(b in c)if(P=c[b],c.hasOwnProperty(b)&&P!=null)switch(b){case"value":break;case"multiple":ce=P;default:f.hasOwnProperty(b)||Xt(t,r,b,null,f,P)}for(p in f)if(b=f[p],P=c[p],f.hasOwnProperty(p)&&(b!=null||P!=null))switch(p){case"value":ae=b;break;case"defaultValue":D=b;break;case"multiple":C=b;default:b!==P&&Xt(t,r,p,b,f,P)}r=D,c=C,f=ce,ae!=null?Pe(t,!!c,ae,!1):!!f!=!!c&&(r!=null?Pe(t,!!c,r,!0):Pe(t,!!c,c?[]:"",!1));return;case"textarea":ce=ae=null;for(D in c)if(p=c[D],c.hasOwnProperty(D)&&p!=null&&!f.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Xt(t,r,D,null,f,p)}for(C in f)if(p=f[C],b=c[C],f.hasOwnProperty(C)&&(p!=null||b!=null))switch(C){case"value":ae=p;break;case"defaultValue":ce=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(o(91));break;default:p!==b&&Xt(t,r,C,p,f,b)}Cn(t,ae,ce);return;case"option":for(var Be in c)ae=c[Be],c.hasOwnProperty(Be)&&ae!=null&&!f.hasOwnProperty(Be)&&(Be==="selected"?t.selected=!1:Xt(t,r,Be,null,f,ae));for(P in f)ae=f[P],ce=c[P],f.hasOwnProperty(P)&&ae!==ce&&(ae!=null||ce!=null)&&(P==="selected"?t.selected=ae&&typeof ae!="function"&&typeof ae!="symbol":Xt(t,r,P,ae,f,ce));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in c)ae=c[Ke],c.hasOwnProperty(Ke)&&ae!=null&&!f.hasOwnProperty(Ke)&&Xt(t,r,Ke,null,f,ae);for(ne in f)if(ae=f[ne],ce=c[ne],f.hasOwnProperty(ne)&&ae!==ce&&(ae!=null||ce!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(o(137,r));break;default:Xt(t,r,ne,ae,f,ce)}return;default:if(Kt(r)){for(var Zt in c)ae=c[Zt],c.hasOwnProperty(Zt)&&ae!==void 0&&!f.hasOwnProperty(Zt)&&lh(t,r,Zt,void 0,f,ae);for(ge in f)ae=f[ge],ce=c[ge],!f.hasOwnProperty(ge)||ae===ce||ae===void 0&&ce===void 0||lh(t,r,ge,ae,f,ce);return}}for(var W in c)ae=c[W],c.hasOwnProperty(W)&&ae!=null&&!f.hasOwnProperty(W)&&Xt(t,r,W,null,f,ae);for(pe in f)ae=f[pe],ce=c[pe],!f.hasOwnProperty(pe)||ae===ce||ae==null&&ce==null||Xt(t,r,pe,ae,f,ce)}function Ym(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ab(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var p=c[f],b=p.transferSize,C=p.initiatorType,D=p.duration;if(b&&D&&Ym(C)){for(C=0,D=p.responseEnd,f+=1;f<c.length;f++){var P=c[f],ne=P.startTime;if(ne>D)break;var ge=P.transferSize,pe=P.initiatorType;ge&&Ym(pe)&&(P=P.responseEnd,C+=ge*(P<D?1:(D-ne)/(P-ne)))}if(--f,r+=8*(b+C)/(p.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var ch=null,uh=null;function Nu(t){return t.nodeType===9?t:t.ownerDocument}function Xm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zm(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function dh(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var fh=null;function _b(){var t=window.event;return t&&t.type==="popstate"?t===fh?!1:(fh=t,!0):(fh=null,!1)}var Km=typeof setTimeout=="function"?setTimeout:void 0,Cb=typeof clearTimeout=="function"?clearTimeout:void 0,Qm=typeof Promise=="function"?Promise:void 0,Tb=typeof queueMicrotask=="function"?queueMicrotask:typeof Qm<"u"?function(t){return Qm.resolve(null).then(t).catch(Ob)}:Km;function Ob(t){setTimeout(function(){throw t})}function qa(t){return t==="head"}function Jm(t,r){var c=r,f=0;do{var p=c.nextSibling;if(t.removeChild(c),p&&p.nodeType===8)if(c=p.data,c==="/$"||c==="/&"){if(f===0){t.removeChild(p),No(r);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Gl(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,Gl(c);for(var b=c.firstChild;b;){var C=b.nextSibling,D=b.nodeName;b[ls]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=C}}else c==="body"&&Gl(t.ownerDocument.body);c=p}while(c);No(r)}function $m(t,r){var c=t;t=0;do{var f=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=f}while(c)}function hh(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":hh(c),xr(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function Nb(t,r,c,f){for(;t.nodeType===1;){var p=c;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(f){if(!t[ls])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(b=t.getAttribute("rel"),b==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(b!==p.rel||t.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||t.getAttribute("title")!==(p.title==null?null:p.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(b=t.getAttribute("src"),(b!==(p.src==null?null:p.src)||t.getAttribute("type")!==(p.type==null?null:p.type)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&b&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var b=p.name==null?null:""+p.name;if(p.type==="hidden"&&t.getAttribute("name")===b)return t}else return t;if(t=ii(t.nextSibling),t===null)break}return null}function Rb(t,r,c){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=ii(t.nextSibling),t===null))return null;return t}function e2(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=ii(t.nextSibling),t===null))return null;return t}function gh(t){return t.data==="$?"||t.data==="$~"}function mh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Ib(t,r){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||c.readyState!=="loading")r();else{var f=function(){r(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),t._reactRetry=f}}function ii(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var yh=null;function t2(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(r===0)return ii(t.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}t=t.nextSibling}return null}function n2(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return t;r--}else c!=="/$"&&c!=="/&"||r++}t=t.previousSibling}return null}function r2(t,r,c){switch(r=Nu(c),t){case"html":if(t=r.documentElement,!t)throw Error(o(452));return t;case"head":if(t=r.head,!t)throw Error(o(453));return t;case"body":if(t=r.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Gl(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);xr(t)}var ai=new Map,i2=new Set;function Ru(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var sa=fe.d;fe.d={f:kb,r:Db,D:Mb,C:Bb,L:Lb,m:jb,X:Pb,S:Ub,M:zb};function kb(){var t=sa.f(),r=vu();return t||r}function Db(t){var r=kt(t);r!==null&&r.tag===5&&r.type==="form"?vg(r):sa.r(t)}var Co=typeof document>"u"?null:document;function a2(t,r,c){var f=Co;if(f&&typeof r=="string"&&r){var p=ht(r);p='link[rel="'+t+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),i2.has(p)||(i2.add(p),t={rel:t,crossOrigin:c,href:r},f.querySelector(p)===null&&(r=f.createElement("link"),er(r,"link",t),pn(r),f.head.appendChild(r)))}}function Mb(t){sa.D(t),a2("dns-prefetch",t,null)}function Bb(t,r){sa.C(t,r),a2("preconnect",t,r)}function Lb(t,r,c){sa.L(t,r,c);var f=Co;if(f&&t&&r){var p='link[rel="preload"][as="'+ht(r)+'"]';r==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+ht(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+ht(c.imageSizes)+'"]')):p+='[href="'+ht(t)+'"]';var b=p;switch(r){case"style":b=To(t);break;case"script":b=Oo(t)}ai.has(b)||(t=O({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:t,as:r},c),ai.set(b,t),f.querySelector(p)!==null||r==="style"&&f.querySelector(ql(b))||r==="script"&&f.querySelector(Wl(b))||(r=f.createElement("link"),er(r,"link",t),pn(r),f.head.appendChild(r)))}}function jb(t,r){sa.m(t,r);var c=Co;if(c&&t){var f=r&&typeof r.as=="string"?r.as:"script",p='link[rel="modulepreload"][as="'+ht(f)+'"][href="'+ht(t)+'"]',b=p;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Oo(t)}if(!ai.has(b)&&(t=O({rel:"modulepreload",href:t},r),ai.set(b,t),c.querySelector(p)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Wl(b)))return}f=c.createElement("link"),er(f,"link",t),pn(f),c.head.appendChild(f)}}}function Ub(t,r,c){sa.S(t,r,c);var f=Co;if(f&&t){var p=cr(f).hoistableStyles,b=To(t);r=r||"default";var C=p.get(b);if(!C){var D={loading:0,preload:null};if(C=f.querySelector(ql(b)))D.loading=5;else{t=O({rel:"stylesheet",href:t,"data-precedence":r},c),(c=ai.get(b))&&ph(t,c);var P=C=f.createElement("link");pn(P),er(P,"link",t),P._p=new Promise(function(ne,ge){P.onload=ne,P.onerror=ge}),P.addEventListener("load",function(){D.loading|=1}),P.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Iu(C,r,f)}C={type:"stylesheet",instance:C,count:1,state:D},p.set(b,C)}}}function Pb(t,r){sa.X(t,r);var c=Co;if(c&&t){var f=cr(c).hoistableScripts,p=Oo(t),b=f.get(p);b||(b=c.querySelector(Wl(p)),b||(t=O({src:t,async:!0},r),(r=ai.get(p))&&xh(t,r),b=c.createElement("script"),pn(b),er(b,"link",t),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(p,b))}}function zb(t,r){sa.M(t,r);var c=Co;if(c&&t){var f=cr(c).hoistableScripts,p=Oo(t),b=f.get(p);b||(b=c.querySelector(Wl(p)),b||(t=O({src:t,async:!0,type:"module"},r),(r=ai.get(p))&&xh(t,r),b=c.createElement("script"),pn(b),er(b,"link",t),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(p,b))}}function s2(t,r,c,f){var p=(p=me.current)?Ru(p):null;if(!p)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=To(c.href),c=cr(p).hoistableStyles,f=c.get(r),f||(f={type:"style",instance:null,count:0,state:null},c.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=To(c.href);var b=cr(p).hoistableStyles,C=b.get(t);if(C||(p=p.ownerDocument||p,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(t,C),(b=p.querySelector(ql(t)))&&!b._p&&(C.instance=b,C.state.loading=5),ai.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ai.set(t,c),b||Fb(p,t,c,C.state))),r&&f===null)throw Error(o(528,""));return C}if(r&&f!==null)throw Error(o(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Oo(c),c=cr(p).hoistableScripts,f=c.get(r),f||(f={type:"script",instance:null,count:0,state:null},c.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function To(t){return'href="'+ht(t)+'"'}function ql(t){return'link[rel="stylesheet"]['+t+"]"}function o2(t){return O({},t,{"data-precedence":t.precedence,precedence:null})}function Fb(t,r,c,f){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=t.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),er(r,"link",c),pn(r),t.head.appendChild(r))}function Oo(t){return'[src="'+ht(t)+'"]'}function Wl(t){return"script[async]"+t}function l2(t,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var f=t.querySelector('style[data-href~="'+ht(c.href)+'"]');if(f)return r.instance=f,pn(f),f;var p=O({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(t.ownerDocument||t).createElement("style"),pn(f),er(f,"style",p),Iu(f,c.precedence,t),r.instance=f;case"stylesheet":p=To(c.href);var b=t.querySelector(ql(p));if(b)return r.state.loading|=4,r.instance=b,pn(b),b;f=o2(c),(p=ai.get(p))&&ph(f,p),b=(t.ownerDocument||t).createElement("link"),pn(b);var C=b;return C._p=new Promise(function(D,P){C.onload=D,C.onerror=P}),er(b,"link",f),r.state.loading|=4,Iu(b,c.precedence,t),r.instance=b;case"script":return b=Oo(c.src),(p=t.querySelector(Wl(b)))?(r.instance=p,pn(p),p):(f=c,(p=ai.get(b))&&(f=O({},c),xh(f,p)),t=t.ownerDocument||t,p=t.createElement("script"),pn(p),er(p,"link",f),t.head.appendChild(p),r.instance=p);case"void":return null;default:throw Error(o(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,Iu(f,c.precedence,t));return r.instance}function Iu(t,r,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=f.length?f[f.length-1]:null,b=p,C=0;C<f.length;C++){var D=f[C];if(D.dataset.precedence===r)b=D;else if(b!==p)break}b?b.parentNode.insertBefore(t,b.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(t,r.firstChild))}function ph(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function xh(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var ku=null;function c2(t,r,c){if(ku===null){var f=new Map,p=ku=new Map;p.set(c,f)}else p=ku,f=p.get(c),f||(f=new Map,p.set(c,f));if(f.has(t))return f;for(f.set(t,null),c=c.getElementsByTagName(t),p=0;p<c.length;p++){var b=c[p];if(!(b[ls]||b[_n]||t==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var C=b.getAttribute(r)||"";C=t+C;var D=f.get(C);D?D.push(b):f.set(C,[b])}}return f}function u2(t,r,c){t=t.ownerDocument||t,t.head.insertBefore(c,r==="title"?t.querySelector("head > title"):null)}function Vb(t,r,c){if(c===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function d2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Hb(t,r,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var p=To(f.href),b=r.querySelector(ql(p));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Du.bind(t),r.then(t,t)),c.state.loading|=4,c.instance=b,pn(b);return}b=r.ownerDocument||r,f=o2(f),(p=ai.get(p))&&ph(f,p),b=b.createElement("link"),pn(b);var C=b;C._p=new Promise(function(D,P){C.onload=D,C.onerror=P}),er(b,"link",f),c.instance=b}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=Du.bind(t),r.addEventListener("load",c),r.addEventListener("error",c))}}var wh=0;function Gb(t,r){return t.stylesheets&&t.count===0&&Bu(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var f=setTimeout(function(){if(t.stylesheets&&Bu(t,t.stylesheets),t.unsuspend){var b=t.unsuspend;t.unsuspend=null,b()}},6e4+r);0<t.imgBytes&&wh===0&&(wh=62500*Ab());var p=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Bu(t,t.stylesheets),t.unsuspend)){var b=t.unsuspend;t.unsuspend=null,b()}},(t.imgBytes>wh?50:800)+r);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(f),clearTimeout(p)}}:null}function Du(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Mu=null;function Bu(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Mu=new Map,r.forEach(qb,t),Mu=null,Du.call(t))}function qb(t,r){if(!(r.state.loading&4)){var c=Mu.get(t);if(c)var f=c.get(null);else{c=new Map,Mu.set(t,c);for(var p=t.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<p.length;b++){var C=p[b];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(c.set(C.dataset.precedence,C),f=C)}f&&c.set(null,f)}p=r.instance,C=p.getAttribute("data-precedence"),b=c.get(C)||f,b===f&&c.set(null,p),c.set(C,p),this.count++,f=Du.bind(this),p.addEventListener("load",f),p.addEventListener("error",f),b?b.parentNode.insertBefore(p,b.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(p,t.firstChild)),r.state.loading|=4}}var Yl={$$typeof:q,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function Wb(t,r,c,f,p,b,C,D,P){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.hiddenUpdates=Ci(null),this.identifierPrefix=f,this.onUncaughtError=p,this.onCaughtError=b,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function f2(t,r,c,f,p,b,C,D,P,ne,ge,pe){return t=new Wb(t,r,c,C,P,ne,ge,pe,D),r=1,b===!0&&(r|=24),b=Br(3,null,null,r),t.current=b,b.stateNode=t,r=Qd(),r.refCount++,t.pooledCache=r,r.refCount++,b.memoizedState={element:f,isDehydrated:c,cache:r},tf(b),t}function h2(t){return t?(t=io,t):io}function g2(t,r,c,f,p,b){p=h2(p),f.context===null?f.context=p:f.pendingContext=p,f=Ma(r),f.payload={element:c},b=b===void 0?null:b,b!==null&&(f.callback=b),c=Ba(t,f,r),c!==null&&(Cr(c,t,r),_l(c,t,r))}function m2(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<r?c:r}}function bh(t,r){m2(t,r),(t=t.alternate)&&m2(t,r)}function y2(t){if(t.tag===13||t.tag===31){var r=ps(t,67108864);r!==null&&Cr(r,t,67108864),bh(t,67108864)}}function p2(t){if(t.tag===13||t.tag===31){var r=zr();r=Wn(r);var c=ps(t,r);c!==null&&Cr(c,t,r),bh(t,r)}}var Lu=!0;function Yb(t,r,c,f){var p=ee.T;ee.T=null;var b=fe.p;try{fe.p=2,vh(t,r,c,f)}finally{fe.p=b,ee.T=p}}function Xb(t,r,c,f){var p=ee.T;ee.T=null;var b=fe.p;try{fe.p=8,vh(t,r,c,f)}finally{fe.p=b,ee.T=p}}function vh(t,r,c,f){if(Lu){var p=Eh(f);if(p===null)oh(t,r,f,ju,c),w2(t,f);else if(Kb(p,t,r,c,f))f.stopPropagation();else if(w2(t,f),r&4&&-1<Zb.indexOf(t)){for(;p!==null;){var b=kt(p);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var C=_i(b.pendingLanes);if(C!==0){var D=b;for(D.pendingLanes|=2,D.entangledLanes|=2;C;){var P=1<<31-lt(C);D.entanglements[1]|=P,C&=~P}Li(b),(Mt&6)===0&&(wu=hn()+500,Fl(0))}}break;case 31:case 13:D=ps(b,2),D!==null&&Cr(D,b,2),vu(),bh(b,2)}if(b=Eh(f),b===null&&oh(t,r,f,ju,c),b===p)break;p=b}p!==null&&f.stopPropagation()}else oh(t,r,f,null,c)}}function Eh(t){return t=ul(t),Sh(t)}var ju=null;function Sh(t){if(ju=null,t=yn(t),t!==null){var r=m(t);if(r===null)t=null;else{var c=r.tag;if(c===13){if(t=x(r),t!==null)return t;t=null}else if(c===31){if(t=A(r),t!==null)return t;t=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return ju=t,null}function x2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(il()){case pr:return 2;case al:return 8;case Or:case Xn:return 32;case sl:return 268435456;default:return 32}default:return 32}}var Ah=!1,Wa=null,Ya=null,Xa=null,Xl=new Map,Zl=new Map,Za=[],Zb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function w2(t,r){switch(t){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Xa=null;break;case"pointerover":case"pointerout":Xl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(r.pointerId)}}function Kl(t,r,c,f,p,b){return t===null||t.nativeEvent!==b?(t={blockedOn:r,domEventName:c,eventSystemFlags:f,nativeEvent:b,targetContainers:[p]},r!==null&&(r=kt(r),r!==null&&y2(r)),t):(t.eventSystemFlags|=f,r=t.targetContainers,p!==null&&r.indexOf(p)===-1&&r.push(p),t)}function Kb(t,r,c,f,p){switch(r){case"focusin":return Wa=Kl(Wa,t,r,c,f,p),!0;case"dragenter":return Ya=Kl(Ya,t,r,c,f,p),!0;case"mouseover":return Xa=Kl(Xa,t,r,c,f,p),!0;case"pointerover":var b=p.pointerId;return Xl.set(b,Kl(Xl.get(b)||null,t,r,c,f,p)),!0;case"gotpointercapture":return b=p.pointerId,Zl.set(b,Kl(Zl.get(b)||null,t,r,c,f,p)),!0}return!1}function b2(t){var r=yn(t.target);if(r!==null){var c=m(r);if(c!==null){if(r=c.tag,r===13){if(r=x(c),r!==null){t.blockedOn=r,ke(t.priority,function(){p2(c)});return}}else if(r===31){if(r=A(c),r!==null){t.blockedOn=r,ke(t.priority,function(){p2(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uu(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var c=Eh(t.nativeEvent);if(c===null){c=t.nativeEvent;var f=new c.constructor(c.type,c);cs=f,c.target.dispatchEvent(f),cs=null}else return r=kt(c),r!==null&&y2(r),t.blockedOn=c,!1;r.shift()}return!0}function v2(t,r,c){Uu(t)&&c.delete(r)}function Qb(){Ah=!1,Wa!==null&&Uu(Wa)&&(Wa=null),Ya!==null&&Uu(Ya)&&(Ya=null),Xa!==null&&Uu(Xa)&&(Xa=null),Xl.forEach(v2),Zl.forEach(v2)}function Pu(t,r){t.blockedOn===r&&(t.blockedOn=null,Ah||(Ah=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Qb)))}var zu=null;function E2(t){zu!==t&&(zu=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){zu===t&&(zu=null);for(var r=0;r<t.length;r+=3){var c=t[r],f=t[r+1],p=t[r+2];if(typeof f!="function"){if(Sh(f||c)===null)continue;break}var b=kt(c);b!==null&&(t.splice(r,3),r-=3,Ef(b,{pending:!0,data:p,method:c.method,action:f},f,p))}}))}function No(t){function r(P){return Pu(P,t)}Wa!==null&&Pu(Wa,t),Ya!==null&&Pu(Ya,t),Xa!==null&&Pu(Xa,t),Xl.forEach(r),Zl.forEach(r);for(var c=0;c<Za.length;c++){var f=Za[c];f.blockedOn===t&&(f.blockedOn=null)}for(;0<Za.length&&(c=Za[0],c.blockedOn===null);)b2(c),c.blockedOn===null&&Za.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var p=c[f],b=c[f+1],C=p[Vt]||null;if(typeof b=="function")C||E2(c);else if(C){var D=null;if(b&&b.hasAttribute("formAction")){if(p=b,C=b[Vt]||null)D=C.formAction;else if(Sh(p)!==null)continue}else D=C.action;typeof D=="function"?c[f+1]=D:(c.splice(f,3),f-=3),E2(c)}}}function S2(){function t(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(C){return p=C})},focusReset:"manual",scroll:"manual"})}function r(){p!==null&&(p(),p=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,p=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),p!==null&&(p(),p=null)}}}function _h(t){this._internalRoot=t}Fu.prototype.render=_h.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(o(409));var c=r.current,f=zr();g2(c,f,t,r,null,null)},Fu.prototype.unmount=_h.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;g2(t.current,2,null,t,null,null),vu(),r[Nr]=null}};function Fu(t){this._internalRoot=t}Fu.prototype.unstable_scheduleHydration=function(t){if(t){var r=or();t={blockedOn:null,target:t,priority:r};for(var c=0;c<Za.length&&r!==0&&r<Za[c].priority;c++);Za.splice(c,0,t),c===0&&b2(t)}};var A2=e.version;if(A2!=="19.2.3")throw Error(o(527,A2,"19.2.3"));fe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=v(r),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var Jb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vu.isDisabled&&Vu.supportsFiber)try{tn=Vu.inject(Jb),Ce=Vu}catch{}}return Jl.createRoot=function(t,r){if(!h(t))throw Error(o(299));var c=!1,f="",p=Ig,b=kg,C=Dg;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=f2(t,1,!1,null,null,c,f,null,p,b,C,S2),t[Nr]=r.current,sh(t),new _h(r)},Jl.hydrateRoot=function(t,r,c){if(!h(t))throw Error(o(299));var f=!1,p="",b=Ig,C=kg,D=Dg,P=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.formState!==void 0&&(P=c.formState)),r=f2(t,1,!0,r,c??null,f,p,P,b,C,D,S2),r.context=h2(null),c=r.current,f=zr(),f=Wn(f),p=Ma(f),p.callback=null,Ba(c,p,f),c=f,r.current.lanes=c,Ti(r,c),Li(r),t[Nr]=r.current,sh(t),new Fu(r)},Jl.version="19.2.3",Jl}var M2;function cv(){if(M2)return Oh.exports;M2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Oh.exports=lv(),Oh.exports}var uv=cv();const dv=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fv=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,o)=>o?o.toUpperCase():i.toLowerCase()),B2=a=>{const e=fv(a);return e.charAt(0).toUpperCase()+e.slice(1)},kp=(...a)=>a.filter((e,i,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===i).join(" ").trim(),hv=a=>{for(const e in a)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var gv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const mv=Fe.forwardRef(({color:a="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:h="",children:m,iconNode:x,...A},E)=>Fe.createElement("svg",{ref:E,...gv,width:e,height:e,stroke:a,strokeWidth:o?Number(i)*24/Number(e):i,className:kp("lucide",h),...!m&&!hv(A)&&{"aria-hidden":"true"},...A},[...x.map(([v,T])=>Fe.createElement(v,T)),...Array.isArray(m)?m:[m]]));const Ct=(a,e)=>{const i=Fe.forwardRef(({className:o,...h},m)=>Fe.createElement(mv,{ref:m,iconNode:e,className:kp(`lucide-${dv(B2(a))}`,`lucide-${a}`,o),...h}));return i.displayName=B2(a),i};const yv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],pv=Ct("arrow-right",yv);const xv=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],wv=Ct("bell",xv);const bv=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Dp=Ct("camera",bv);const vv=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Ev=Ct("chart-pie",vv);const Sv=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Mp=Ct("check",Sv);const Av=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],_v=Ct("chef-hat",Av);const Cv=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Tv=Ct("chevron-down",Cv);const Ov=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],b0=Ct("circle-alert",Ov);const Nv=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Rv=Ct("clock",Nv);const Iv=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],kv=Ct("copy",Iv);const Dv=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Mv=Ct("dollar-sign",Dv);const Bv=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Lv=Ct("flame",Bv);const jv=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Uv=Ct("layout-grid",jv);const Pv=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],zv=Ct("leaf",Pv);const Fv=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ad=Ct("loader-circle",Fv);const Vv=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Hv=Ct("loader",Vv);const Gv=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],qv=Ct("log-in",Gv);const Wv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Yv=Ct("log-out",Wv);const Xv=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Zv=Ct("moon",Xv);const Kv=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Qv=Ct("pen-line",Kv);const Jv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],sd=Ct("plus",Jv);const $v=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],e3=Ct("refresh-cw",$v);const t3=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],n3=Ct("save",t3);const r3=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],i3=Ct("scan-line",r3);const a3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],s3=Ct("search",a3);const o3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],l3=Ct("settings",o3);const c3=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Z0=Ct("shopping-cart",c3);const u3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],d3=Ct("sparkles",u3);const f3=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],h3=Ct("sun",f3);const g3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wd=Ct("trash-2",g3);const m3=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],L2=Ct("trending-down",m3);const y3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],p3=Ct("triangle-alert",y3);const x3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],v0=Ct("users",x3);const w3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bd=Ct("x",w3);function K0(a){return new Promise((e,i)=>{a.oncomplete=a.onsuccess=()=>e(a.result),a.onabort=a.onerror=()=>i(a.error)})}function b3(a,e){let i;const o=()=>{if(i)return i;const h=indexedDB.open(a);return h.onupgradeneeded=()=>h.result.createObjectStore(e),i=K0(h),i.then(m=>{m.onclose=()=>i=void 0},()=>{}),i};return(h,m)=>o().then(x=>m(x.transaction(e,h).objectStore(e)))}let kh;function Bp(){return kh||(kh=b3("keyval-store","keyval")),kh}function Q0(a,e=Bp()){return e("readonly",i=>K0(i.get(a)))}function dc(a,e,i=Bp()){return i("readwrite",o=>(o.put(e,a),K0(o.transaction)))}function vd(a,e){var i={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&e.indexOf(o)<0&&(i[o]=a[o]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,o=Object.getOwnPropertySymbols(a);h<o.length;h++)e.indexOf(o[h])<0&&Object.prototype.propertyIsEnumerable.call(a,o[h])&&(i[o[h]]=a[o[h]]);return i}function v3(a,e,i,o){function h(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function A(T){try{v(o.next(T))}catch(O){x(O)}}function E(T){try{v(o.throw(T))}catch(O){x(O)}}function v(T){T.done?m(T.value):h(T.value).then(A,E)}v((o=o.apply(a,e||[])).next())})}const E3=a=>a?(...e)=>a(...e):(...e)=>fetch(...e);class J0 extends Error{constructor(e,i="FunctionsError",o){super(e),this.name=i,this.context=o}}class S3 extends J0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class j2 extends J0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class U2 extends J0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var E0;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(E0||(E0={}));class A3{constructor(e,{headers:i={},customFetch:o,region:h=E0.Any}={}){this.url=e,this.headers=i,this.region=h,this.fetch=E3(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return v3(this,arguments,void 0,function*(i,o={}){var h;let m,x;try{const{headers:A,method:E,body:v,signal:T,timeout:O}=o;let j={},{region:U}=o;U||(U=this.region);const G=new URL(`${this.url}/${i}`);U&&U!=="any"&&(j["x-region"]=U,G.searchParams.set("forceFunctionRegion",U));let H;v&&(A&&!Object.prototype.hasOwnProperty.call(A,"Content-Type")||!A)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(j["Content-Type"]="application/octet-stream",H=v):typeof v=="string"?(j["Content-Type"]="text/plain",H=v):typeof FormData<"u"&&v instanceof FormData?H=v:(j["Content-Type"]="application/json",H=JSON.stringify(v)):v&&typeof v!="string"&&!(typeof Blob<"u"&&v instanceof Blob)&&!(v instanceof ArrayBuffer)&&!(typeof FormData<"u"&&v instanceof FormData)?H=JSON.stringify(v):H=v;let Z=T;O&&(x=new AbortController,m=setTimeout(()=>x.abort(),O),T?(Z=x.signal,T.addEventListener("abort",()=>x.abort())):Z=x.signal);const le=yield this.fetch(G.toString(),{method:E||"POST",headers:Object.assign(Object.assign(Object.assign({},j),this.headers),A),body:H,signal:Z}).catch(Le=>{throw new S3(Le)}),Q=le.headers.get("x-relay-error");if(Q&&Q==="true")throw new j2(le);if(!le.ok)throw new U2(le);let q=((h=le.headers.get("Content-Type"))!==null&&h!==void 0?h:"text/plain").split(";")[0].trim(),xe;return q==="application/json"?xe=yield le.json():q==="application/octet-stream"||q==="application/pdf"?xe=yield le.blob():q==="text/event-stream"?xe=le:q==="multipart/form-data"?xe=yield le.formData():xe=yield le.text(),{data:xe,error:null,response:le}}catch(A){return{data:null,error:A,response:A instanceof U2||A instanceof j2?A.context:void 0}}finally{m&&clearTimeout(m)}})}}var _3=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}},C3=class{constructor(a){var e,i;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(e=a.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=a.signal,this.isMaybeSingle=(i=a.isMaybeSingle)!==null&&i!==void 0?i:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,e){return this.headers=new Headers(this.headers),this.headers.set(a,e),this}then(a,e){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let h=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{let x=null,A=null,E=null,v=m.status,T=m.statusText;if(m.ok){var O,j;if(i.method!=="HEAD"){var U;const le=await m.text();le===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((U=i.headers.get("Accept"))===null||U===void 0)&&U.includes("application/vnd.pgrst.plan+text"))?A=le:A=JSON.parse(le))}const H=(O=i.headers.get("Prefer"))===null||O===void 0?void 0:O.match(/count=(exact|planned|estimated)/),Z=(j=m.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");H&&Z&&Z.length>1&&(E=parseInt(Z[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(A)&&(A.length>1?(x={code:"PGRST116",details:`Results contain ${A.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},A=null,E=null,v=406,T="Not Acceptable"):A.length===1?A=A[0]:A=null)}else{var G;const H=await m.text();try{x=JSON.parse(H),Array.isArray(x)&&m.status===404&&(A=[],x=null,v=200,T="OK")}catch{m.status===404&&H===""?(v=204,T="No Content"):x={message:H}}if(x&&i.isMaybeSingle&&(!(x==null||(G=x.details)===null||G===void 0)&&G.includes("0 rows"))&&(x=null,v=200,T="OK"),x&&i.shouldThrowOnError)throw new _3(x)}return{error:x,data:A,count:E,status:v,statusText:T}});return this.shouldThrowOnError||(h=h.catch(m=>{var x;let A="";const E=m?.cause;if(E){var v,T,O,j;const G=(v=E?.message)!==null&&v!==void 0?v:"",H=(T=E?.code)!==null&&T!==void 0?T:"";A=`${(O=m?.name)!==null&&O!==void 0?O:"FetchError"}: ${m?.message}`,A+=`

Caused by: ${(j=E?.name)!==null&&j!==void 0?j:"Error"}: ${G}`,H&&(A+=` (${H})`),E?.stack&&(A+=`
${E.stack}`)}else{var U;A=(U=m?.stack)!==null&&U!==void 0?U:""}return{error:{message:`${(x=m?.name)!==null&&x!==void 0?x:"FetchError"}: ${m?.message}`,details:A,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),h.then(a,e)}returns(){return this}overrideTypes(){return this}},T3=class extends C3{select(a){let e=!1;const i=(a??"*").split("").map(o=>/\s/.test(o)&&!e?"":(o==='"'&&(e=!e),o)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:e=!0,nullsFirst:i,foreignTable:o,referencedTable:h=o}={}){const m=h?`${h}.order`:"order",x=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${x?`${x},`:""}${a}.${e?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:e,referencedTable:i=e}={}){const o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${a}`),this}range(a,e,{foreignTable:i,referencedTable:o=i}={}){const h=typeof o>"u"?"offset":`${o}.offset`,m=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(h,`${a}`),this.url.searchParams.set(m,`${e-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:e=!1,settings:i=!1,buffers:o=!1,wal:h=!1,format:m="text"}={}){var x;const A=[a?"analyze":null,e?"verbose":null,i?"settings":null,o?"buffers":null,h?"wal":null].filter(Boolean).join("|"),E=(x=this.headers.get("Accept"))!==null&&x!==void 0?x:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${E}"; options=${A};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};const P2=new RegExp("[,()]");var Fo=class extends T3{eq(a,e){return this.url.searchParams.append(a,`eq.${e}`),this}neq(a,e){return this.url.searchParams.append(a,`neq.${e}`),this}gt(a,e){return this.url.searchParams.append(a,`gt.${e}`),this}gte(a,e){return this.url.searchParams.append(a,`gte.${e}`),this}lt(a,e){return this.url.searchParams.append(a,`lt.${e}`),this}lte(a,e){return this.url.searchParams.append(a,`lte.${e}`),this}like(a,e){return this.url.searchParams.append(a,`like.${e}`),this}likeAllOf(a,e){return this.url.searchParams.append(a,`like(all).{${e.join(",")}}`),this}likeAnyOf(a,e){return this.url.searchParams.append(a,`like(any).{${e.join(",")}}`),this}ilike(a,e){return this.url.searchParams.append(a,`ilike.${e}`),this}ilikeAllOf(a,e){return this.url.searchParams.append(a,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(a,e){return this.url.searchParams.append(a,`ilike(any).{${e.join(",")}}`),this}regexMatch(a,e){return this.url.searchParams.append(a,`match.${e}`),this}regexIMatch(a,e){return this.url.searchParams.append(a,`imatch.${e}`),this}is(a,e){return this.url.searchParams.append(a,`is.${e}`),this}isDistinct(a,e){return this.url.searchParams.append(a,`isdistinct.${e}`),this}in(a,e){const i=Array.from(new Set(e)).map(o=>typeof o=="string"&&P2.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(a,`in.(${i})`),this}notIn(a,e){const i=Array.from(new Set(e)).map(o=>typeof o=="string"&&P2.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(a,`not.in.(${i})`),this}contains(a,e){return typeof e=="string"?this.url.searchParams.append(a,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(a,`cs.{${e.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(e)}`),this}containedBy(a,e){return typeof e=="string"?this.url.searchParams.append(a,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(a,`cd.{${e.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(e)}`),this}rangeGt(a,e){return this.url.searchParams.append(a,`sr.${e}`),this}rangeGte(a,e){return this.url.searchParams.append(a,`nxl.${e}`),this}rangeLt(a,e){return this.url.searchParams.append(a,`sl.${e}`),this}rangeLte(a,e){return this.url.searchParams.append(a,`nxr.${e}`),this}rangeAdjacent(a,e){return this.url.searchParams.append(a,`adj.${e}`),this}overlaps(a,e){return typeof e=="string"?this.url.searchParams.append(a,`ov.${e}`):this.url.searchParams.append(a,`ov.{${e.join(",")}}`),this}textSearch(a,e,{config:i,type:o}={}){let h="";o==="plain"?h="pl":o==="phrase"?h="ph":o==="websearch"&&(h="w");const m=i===void 0?"":`(${i})`;return this.url.searchParams.append(a,`${h}fts${m}.${e}`),this}match(a){return Object.entries(a).forEach(([e,i])=>{this.url.searchParams.append(e,`eq.${i}`)}),this}not(a,e,i){return this.url.searchParams.append(a,`not.${e}.${i}`),this}or(a,{foreignTable:e,referencedTable:i=e}={}){const o=i?`${i}.or`:"or";return this.url.searchParams.append(o,`(${a})`),this}filter(a,e,i){return this.url.searchParams.append(a,`${e}.${i}`),this}},O3=class{constructor(a,{headers:e={},schema:i,fetch:o}){this.url=a,this.headers=new Headers(e),this.schema=i,this.fetch=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(a,e){const{head:i=!1,count:o}=e??{},h=i?"HEAD":"GET";let m=!1;const x=(a??"*").split("").map(v=>/\s/.test(v)&&!m?"":(v==='"'&&(m=!m),v)).join(""),{url:A,headers:E}=this.cloneRequestState();return A.searchParams.set("select",x),o&&E.append("Prefer",`count=${o}`),new Fo({method:h,url:A,headers:E,schema:this.schema,fetch:this.fetch})}insert(a,{count:e,defaultToNull:i=!0}={}){var o;const h="POST",{url:m,headers:x}=this.cloneRequestState();if(e&&x.append("Prefer",`count=${e}`),i||x.append("Prefer","missing=default"),Array.isArray(a)){const A=a.reduce((E,v)=>E.concat(Object.keys(v)),[]);if(A.length>0){const E=[...new Set(A)].map(v=>`"${v}"`);m.searchParams.set("columns",E.join(","))}}return new Fo({method:h,url:m,headers:x,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(a,{onConflict:e,ignoreDuplicates:i=!1,count:o,defaultToNull:h=!0}={}){var m;const x="POST",{url:A,headers:E}=this.cloneRequestState();if(E.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),e!==void 0&&A.searchParams.set("on_conflict",e),o&&E.append("Prefer",`count=${o}`),h||E.append("Prefer","missing=default"),Array.isArray(a)){const v=a.reduce((T,O)=>T.concat(Object.keys(O)),[]);if(v.length>0){const T=[...new Set(v)].map(O=>`"${O}"`);A.searchParams.set("columns",T.join(","))}}return new Fo({method:x,url:A,headers:E,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(a,{count:e}={}){var i;const o="PATCH",{url:h,headers:m}=this.cloneRequestState();return e&&m.append("Prefer",`count=${e}`),new Fo({method:o,url:h,headers:m,schema:this.schema,body:a,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:a}={}){var e;const i="DELETE",{url:o,headers:h}=this.cloneRequestState();return a&&h.append("Prefer",`count=${a}`),new Fo({method:i,url:o,headers:h,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},N3=class Lp{constructor(e,{headers:i={},schema:o,fetch:h}={}){this.url=e,this.headers=new Headers(i),this.schemaName=o,this.fetch=h}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new O3(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Lp(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,i={},{head:o=!1,get:h=!1,count:m}={}){var x;let A;const E=new URL(`${this.url}/rpc/${e}`);let v;const T=U=>U!==null&&typeof U=="object"&&(!Array.isArray(U)||U.some(T)),O=o&&Object.values(i).some(T);O?(A="POST",v=i):o||h?(A=o?"HEAD":"GET",Object.entries(i).filter(([U,G])=>G!==void 0).map(([U,G])=>[U,Array.isArray(G)?`{${G.join(",")}}`:`${G}`]).forEach(([U,G])=>{E.searchParams.append(U,G)})):(A="POST",v=i);const j=new Headers(this.headers);return O?j.set("Prefer",m?`count=${m},return=minimal`:"return=minimal"):m&&j.set("Prefer",`count=${m}`),new Fo({method:A,url:E,headers:j,schema:this.schemaName,body:v,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}};class R3{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const o=i.versions;if(o&&o.node){const h=o.node,m=parseInt(h.replace(/^v/,"").split(".")[0]);return m>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${m} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${m} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const o=this.getWebSocketConstructor();return new o(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const I3="2.90.1",k3=`realtime-js/${I3}`,jp="1.0.0",D3="2.0.0",z2=jp,S0=1e4,M3=1e3,B3=100;var es;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(es||(es={}));var qn;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(qn||(qn={}));var Ei;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(Ei||(Ei={}));var A0;(function(a){a.websocket="websocket"})(A0||(A0={}));var js;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(js||(js={}));class L3{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let o=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,o;const h=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,h)}_encodeJsonUserBroadcastPush(e){var i,o;const h=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:{},x=new TextEncoder().encode(JSON.stringify(h)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,x)}_encodeUserBroadcastPush(e,i,o){var h,m;const x=e.topic,A=(h=e.ref)!==null&&h!==void 0?h:"",E=(m=e.join_ref)!==null&&m!==void 0?m:"",v=e.payload.event,T=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},O=Object.keys(T).length===0?"":JSON.stringify(T);if(E.length>255)throw new Error(`joinRef length ${E.length} exceeds maximum of 255`);if(A.length>255)throw new Error(`ref length ${A.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`topic length ${x.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(O.length>255)throw new Error(`metadata length ${O.length} exceeds maximum of 255`);const j=this.USER_BROADCAST_PUSH_META_LENGTH+E.length+A.length+x.length+v.length+O.length,U=new ArrayBuffer(this.HEADER_LENGTH+j);let G=new DataView(U),H=0;G.setUint8(H++,this.KINDS.userBroadcastPush),G.setUint8(H++,E.length),G.setUint8(H++,A.length),G.setUint8(H++,x.length),G.setUint8(H++,v.length),G.setUint8(H++,O.length),G.setUint8(H++,i),Array.from(E,le=>G.setUint8(H++,le.charCodeAt(0))),Array.from(A,le=>G.setUint8(H++,le.charCodeAt(0))),Array.from(x,le=>G.setUint8(H++,le.charCodeAt(0))),Array.from(v,le=>G.setUint8(H++,le.charCodeAt(0))),Array.from(O,le=>G.setUint8(H++,le.charCodeAt(0)));var Z=new Uint8Array(U.byteLength+o.byteLength);return Z.set(new Uint8Array(U),0),Z.set(new Uint8Array(o),U.byteLength),Z.buffer}decode(e,i){if(this._isArrayBuffer(e)){let o=this._binaryDecode(e);return i(o)}if(typeof e=="string"){const o=JSON.parse(e),[h,m,x,A,E]=o;return i({join_ref:h,ref:m,topic:x,event:A,payload:E})}return i({})}_binaryDecode(e){const i=new DataView(e),o=i.getUint8(0),h=new TextDecoder;if(o===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,i,h)}_decodeUserBroadcast(e,i,o){const h=i.getUint8(1),m=i.getUint8(2),x=i.getUint8(3),A=i.getUint8(4);let E=this.HEADER_LENGTH+4;const v=o.decode(e.slice(E,E+h));E=E+h;const T=o.decode(e.slice(E,E+m));E=E+m;const O=o.decode(e.slice(E,E+x));E=E+x;const j=e.slice(E,e.byteLength),U=A===this.JSON_ENCODING?JSON.parse(o.decode(j)):j,G={type:this.BROADCAST_EVENT,event:T,payload:U};return x>0&&(G.meta=JSON.parse(O)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:G}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e?.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(e,i){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([o])=>i.includes(o)))}}class Up{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nn;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(nn||(nn={}));const F2=(a,e,i={})=>{var o;const h=(o=i.skipTypes)!==null&&o!==void 0?o:[];return e?Object.keys(e).reduce((m,x)=>(m[x]=j3(x,a,e,h),m),{}):{}},j3=(a,e,i,o)=>{const h=e.find(A=>A.name===a),m=h?.type,x=i[a];return m&&!o.includes(m)?Pp(m,x):_0(x)},Pp=(a,e)=>{if(a.charAt(0)==="_"){const i=a.slice(1,a.length);return F3(e,i)}switch(a){case nn.bool:return U3(e);case nn.float4:case nn.float8:case nn.int2:case nn.int4:case nn.int8:case nn.numeric:case nn.oid:return P3(e);case nn.json:case nn.jsonb:return z3(e);case nn.timestamp:return V3(e);case nn.abstime:case nn.date:case nn.daterange:case nn.int4range:case nn.int8range:case nn.money:case nn.reltime:case nn.text:case nn.time:case nn.timestamptz:case nn.timetz:case nn.tsrange:case nn.tstzrange:return _0(e);default:return _0(e)}},_0=a=>a,U3=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},P3=a=>{if(typeof a=="string"){const e=parseFloat(a);if(!Number.isNaN(e))return e}return a},z3=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch{return a}return a},F3=(a,e)=>{if(typeof a!="string")return a;const i=a.length-1,o=a[i];if(a[0]==="{"&&o==="}"){let m;const x=a.slice(1,i);try{m=JSON.parse("["+x+"]")}catch{m=x?x.split(","):[]}return m.map(A=>Pp(e,A))}return a},V3=a=>typeof a=="string"?a.replace(" ","T"):a,zp=a=>{const e=new URL(a);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Dh{constructor(e,i,o={},h=S0){this.channel=e,this.event=i,this.payload=o,this.timeout=h,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var o;return this._hasReceived(e)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var V2;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(V2||(V2={}));class lc{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},h=>{const{onJoin:m,onLeave:x,onSync:A}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lc.syncState(this.state,h,m,x),this.pendingDiffs.forEach(E=>{this.state=lc.syncDiff(this.state,E,m,x)}),this.pendingDiffs=[],A()}),this.channel._on(o.diff,{},h=>{const{onJoin:m,onLeave:x,onSync:A}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(h):(this.state=lc.syncDiff(this.state,h,m,x),A())}),this.onJoin((h,m,x)=>{this.channel._trigger("presence",{event:"join",key:h,currentPresences:m,newPresences:x})}),this.onLeave((h,m,x)=>{this.channel._trigger("presence",{event:"leave",key:h,currentPresences:m,leftPresences:x})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,o,h){const m=this.cloneDeep(e),x=this.transformState(i),A={},E={};return this.map(m,(v,T)=>{x[v]||(E[v]=T)}),this.map(x,(v,T)=>{const O=m[v];if(O){const j=T.map(Z=>Z.presence_ref),U=O.map(Z=>Z.presence_ref),G=T.filter(Z=>U.indexOf(Z.presence_ref)<0),H=O.filter(Z=>j.indexOf(Z.presence_ref)<0);G.length>0&&(A[v]=G),H.length>0&&(E[v]=H)}else A[v]=T}),this.syncDiff(m,{joins:A,leaves:E},o,h)}static syncDiff(e,i,o,h){const{joins:m,leaves:x}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),h||(h=()=>{}),this.map(m,(A,E)=>{var v;const T=(v=e[A])!==null&&v!==void 0?v:[];if(e[A]=this.cloneDeep(E),T.length>0){const O=e[A].map(U=>U.presence_ref),j=T.filter(U=>O.indexOf(U.presence_ref)<0);e[A].unshift(...j)}o(A,T,E)}),this.map(x,(A,E)=>{let v=e[A];if(!v)return;const T=E.map(O=>O.presence_ref);v=v.filter(O=>T.indexOf(O.presence_ref)<0),e[A]=v,h(A,v,E),v.length===0&&delete e[A]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(o=>i(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,o)=>{const h=e[o];return"metas"in h?i[o]=h.metas.map(m=>(m.presence_ref=m.phx_ref,delete m.phx_ref,delete m.phx_ref_prev,m)):i[o]=h,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var H2;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(H2||(H2={}));var cc;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(cc||(cc={}));var ua;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(ua||(ua={}));class Go{constructor(e,i={config:{}},o){var h,m;if(this.topic=e,this.params=i,this.socket=o,this.bindings={},this.state=qn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Dh(this,Ei.join,this.params,this.timeout),this.rejoinTimer=new Up(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(x=>x.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qn.closed,this.socket._remove(this)}),this._onError(x=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,x),this.state=qn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",x=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,x),this.state=qn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ei.reply,{},(x,A)=>{this._trigger(this._replyEventName(A),x)}),this.presence=new lc(this),this.broadcastEndpointURL=zp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((m=(h=this.params.config)===null||h===void 0?void 0:h.broadcast)===null||m===void 0)&&m.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var o,h,m;if(this.socket.isConnected()||this.socket.connect(),this.state==qn.closed){const{config:{broadcast:x,presence:A,private:E}}=this.params,v=(h=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(U=>U.filter))!==null&&h!==void 0?h:[],T=!!this.bindings[cc.PRESENCE]&&this.bindings[cc.PRESENCE].length>0||((m=this.params.config.presence)===null||m===void 0?void 0:m.enabled)===!0,O={},j={broadcast:x,presence:Object.assign(Object.assign({},A),{enabled:T}),postgres_changes:v,private:E};this.socket.accessTokenValue&&(O.access_token=this.socket.accessTokenValue),this._onError(U=>e?.(ua.CHANNEL_ERROR,U)),this._onClose(()=>e?.(ua.CLOSED)),this.updateJoinPayload(Object.assign({config:j},O)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:U})=>{var G;if(this.socket._isManualToken()||this.socket.setAuth(),U===void 0){e?.(ua.SUBSCRIBED);return}else{const H=this.bindings.postgres_changes,Z=(G=H?.length)!==null&&G!==void 0?G:0,le=[];for(let Q=0;Q<Z;Q++){const q=H[Q],{filter:{event:xe,schema:Le,table:Se,filter:$}}=q,we=U&&U[Q];if(we&&we.event===xe&&Go.isFilterValueEqual(we.schema,Le)&&Go.isFilterValueEqual(we.table,Se)&&Go.isFilterValueEqual(we.filter,$))le.push(Object.assign(Object.assign({},q),{id:we.id}));else{this.unsubscribe(),this.state=qn.errored,e?.(ua.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=le,e&&e(ua.SUBSCRIBED);return}}).receive("error",U=>{this.state=qn.errored,e?.(ua.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(U).join(", ")||"error")))}).receive("timeout",()=>{e?.(ua.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,o){return this.state===qn.joined&&e===cc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,i,o)}async httpSend(e,i,o={}){var h;if(i==null)return Promise.reject("Payload is required for httpSend()");const m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const x={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},A=await this._fetchWithTimeout(this.broadcastEndpointURL,x,(h=o.timeout)!==null&&h!==void 0?h:this.timeout);if(A.status===202)return{success:!0};let E=A.statusText;try{const v=await A.json();E=v.error||v.message||E}catch{}return Promise.reject(new Error(E))}async send(e,i={}){var o,h;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:m,payload:x}=e,A={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(A.Authorization=`Bearer ${this.socket.accessTokenValue}`);const E={method:"POST",headers:A,body:JSON.stringify({messages:[{topic:this.subTopic,event:m,payload:x,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,E,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((h=v.body)===null||h===void 0?void 0:h.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(m=>{var x,A,E;const v=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((E=(A=(x=this.params)===null||x===void 0?void 0:x.config)===null||A===void 0?void 0:A.broadcast)===null||E===void 0)&&E.ack)&&m("ok"),v.receive("ok",()=>m("ok")),v.receive("error",()=>m("error")),v.receive("timeout",()=>m("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=qn.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ei.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(h=>{o=new Dh(this,Ei.leave,{},e),o.receive("ok",()=>{i(),h("ok")}).receive("timeout",()=>{i(),h("timed out")}).receive("error",()=>{h("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=qn.closed,this.bindings={}}async _fetchWithTimeout(e,i,o){const h=new AbortController,m=setTimeout(()=>h.abort(),o),x=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:h.signal}));return clearTimeout(m),x}_push(e,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let h=new Dh(this,e,i,o);return this._canPush()?h.send():this._addToPushBuffer(h),h}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>B3){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,o){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,o){var h,m;const x=e.toLocaleLowerCase(),{close:A,error:E,leave:v,join:T}=Ei;if(o&&[A,E,v,T].indexOf(x)>=0&&o!==this._joinRef())return;let j=this._onMessage(x,i,o);if(i&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(x)?(h=this.bindings.postgres_changes)===null||h===void 0||h.filter(U=>{var G,H,Z;return((G=U.filter)===null||G===void 0?void 0:G.event)==="*"||((Z=(H=U.filter)===null||H===void 0?void 0:H.event)===null||Z===void 0?void 0:Z.toLocaleLowerCase())===x}).map(U=>U.callback(j,o)):(m=this.bindings[x])===null||m===void 0||m.filter(U=>{var G,H,Z,le,Q,q,xe,Le;if(["broadcast","presence","postgres_changes"].includes(x))if("id"in U){const Se=U.id,$=(G=U.filter)===null||G===void 0?void 0:G.event;return Se&&((H=i.ids)===null||H===void 0?void 0:H.includes(Se))&&($==="*"||$?.toLocaleLowerCase()===((Z=i.data)===null||Z===void 0?void 0:Z.type.toLocaleLowerCase()))&&(!(!((le=U.filter)===null||le===void 0)&&le.table)||U.filter.table===((Q=i.data)===null||Q===void 0?void 0:Q.table))}else{const Se=(xe=(q=U?.filter)===null||q===void 0?void 0:q.event)===null||xe===void 0?void 0:xe.toLocaleLowerCase();return Se==="*"||Se===((Le=i?.event)===null||Le===void 0?void 0:Le.toLocaleLowerCase())}else return U.type.toLocaleLowerCase()===x}).map(U=>{if(typeof j=="object"&&"ids"in j){const G=j.data,{schema:H,table:Z,commit_timestamp:le,type:Q,errors:q}=G;j=Object.assign(Object.assign({},{schema:H,table:Z,commit_timestamp:le,eventType:Q,new:{},old:{},errors:q}),this._getPayloadRecords(G))}U.callback(j,o)})}_isClosed(){return this.state===qn.closed}_isJoined(){return this.state===qn.joined}_isJoining(){return this.state===qn.joining}_isLeaving(){return this.state===qn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,o){const h=e.toLocaleLowerCase(),m={type:h,filter:i,callback:o};return this.bindings[h]?this.bindings[h].push(m):this.bindings[h]=[m],this}_off(e,i){const o=e.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(h=>{var m;return!(((m=h.type)===null||m===void 0?void 0:m.toLocaleLowerCase())===o&&Go.isEqual(h.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const o in e)if(e[o]!==i[o])return!1;return!0}static isFilterValueEqual(e,i){return(e??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ei.close,{},e)}_onError(e){this._on(Ei.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=F2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=F2(e.columns,e.old_record)),i}}const Mh=()=>{},Gu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},H3=[1e3,2e3,5e3,1e4],G3=1e4,q3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class W3{constructor(e,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=S0,this.transport=null,this.heartbeatIntervalMs=Gu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Mh,this.ref=0,this.reconnectTimer=null,this.vsn=z2,this.logger=Mh,this.conn=null,this.sendBuffer=[],this.serializer=new L3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=h=>h?(...m)=>h(...m):(...m)=>fetch(...m),!(!((o=i?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${A0.websocket}`,this.httpEndpoint=zp(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=R3.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,o){this.logger(e,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case es.connecting:return js.Connecting;case es.open:return js.Open;case es.closing:return js.Closing;default:return js.Closed}}isConnected(){return this.connectionState()===js.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const o=`realtime:${e}`,h=this.getChannels().find(m=>m.topic===o);if(h)return h;{const m=new Go(`realtime:${e}`,i,this);return this.channels.push(m),m}}push(e){const{topic:i,event:o,payload:h,ref:m}=e,x=()=>{this.encode(e,A=>{var E;(E=this.conn)===null||E===void 0||E.send(A)})};this.log("push",`${i} ${o} (${m})`,h),this.isConnected()?x():this.sendBuffer.push(x)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(M3,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Gu.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const v=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",v)}catch(T){this.log("error","error in heartbeat callback",T)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:h,payload:m,ref:x}=i,A=x?`(${x})`:"",E=m.status||"";this.log("receive",`${E} ${o} ${h} ${A}`.trim(),m),this.channels.filter(v=>v._isMember(o)).forEach(v=>v._trigger(h,m,x)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===es.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===es.open||this.conn.readyState===es.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ei.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const o=e.match(/\?/)?"&":"?",h=new URLSearchParams(i);return`${e}${o}${h}`}_workerObjectUrl(e){let i;if(e)i=e;else{const o=new Blob([q3],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i,o=!1;if(e)i=e,o=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(h){this.log("error","Error fetching access token from callback",h),i=this.accessTokenValue}else i=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(h=>{const m={access_token:i,version:k3};i&&h.updateJoinPayload(m),h.joinedOnce&&h._isJoined()&&h._push(Ei.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(o=>{try{o(i)}catch(h){this.log("error",`error in ${e} callback`,h)}})}catch(o){this.log("error",`error triggering ${e} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Up(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,o,h,m,x,A,E,v,T,O,j,U;switch(this.transport=(i=e?.transport)!==null&&i!==void 0?i:null,this.timeout=(o=e?.timeout)!==null&&o!==void 0?o:S0,this.heartbeatIntervalMs=(h=e?.heartbeatIntervalMs)!==null&&h!==void 0?h:Gu.HEARTBEAT_INTERVAL,this.worker=(m=e?.worker)!==null&&m!==void 0?m:!1,this.accessToken=(x=e?.accessToken)!==null&&x!==void 0?x:null,this.heartbeatCallback=(A=e?.heartbeatCallback)!==null&&A!==void 0?A:Mh,this.vsn=(E=e?.vsn)!==null&&E!==void 0?E:z2,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=e?.reconnectAfterMs)!==null&&v!==void 0?v:(G=>H3[G-1]||G3),this.vsn){case jp:this.encode=(T=e?.encode)!==null&&T!==void 0?T:((G,H)=>H(JSON.stringify(G))),this.decode=(O=e?.decode)!==null&&O!==void 0?O:((G,H)=>H(JSON.parse(G)));break;case D3:this.encode=(j=e?.encode)!==null&&j!==void 0?j:this.serializer.encode.bind(this.serializer),this.decode=(U=e?.decode)!==null&&U!==void 0?U:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var fc=class extends Error{constructor(a,e){super(a),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Y3(a,e,i){const o=new URL(e,a);if(i)for(const[h,m]of Object.entries(i))m!==void 0&&o.searchParams.set(h,m);return o.toString()}async function X3(a){return!a||a.type==="none"?{}:a.type==="bearer"?{Authorization:`Bearer ${a.token}`}:a.type==="header"?{[a.name]:a.value}:a.type==="custom"?await a.getHeaders():{}}function Z3(a){const e=a.fetchImpl??globalThis.fetch;return{async request({method:i,path:o,query:h,body:m,headers:x}){const A=Y3(a.baseUrl,o,h),E=await X3(a.auth),v=await e(A,{method:i,headers:{...m?{"Content-Type":"application/json"}:{},...E,...x},body:m?JSON.stringify(m):void 0}),T=await v.text(),O=(v.headers.get("content-type")||"").includes("application/json"),j=O&&T?JSON.parse(T):T;if(!v.ok){const U=O?j:void 0,G=U?.error;throw new fc(G?.message??`Request failed with status ${v.status}`,{status:v.status,icebergType:G?.type,icebergCode:G?.code,details:U})}return{status:v.status,headers:v.headers,data:j}}}}function qu(a){return a.join("")}var K3=class{constructor(a,e=""){this.client=a,this.prefix=e}async listNamespaces(a){const e=a?{parent:qu(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(a,e){const i={namespace:a.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${qu(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qu(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${qu(a.namespace)}`}),!0}catch(e){if(e instanceof fc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(a,e){try{return await this.createNamespace(a,e)}catch(i){if(i instanceof fc&&i.status===409)return;throw i}}};function Ro(a){return a.join("")}var Q3=class{constructor(a,e="",i){this.client=a,this.prefix=e,this.accessDelegation=i}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ro(a.namespace)}/tables`})).data.identifiers}async createTable(a,e){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ro(a.namespace)}/tables`,body:e,headers:i})).data.metadata}async updateTable(a,e){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ro(a.namespace)}/tables/${a.name}`,body:e});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(a,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ro(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(a){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ro(a.namespace)}/tables/${a.name}`,headers:e})).data.metadata}async tableExists(a){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ro(a.namespace)}/tables/${a.name}`,headers:e}),!0}catch(i){if(i instanceof fc&&i.status===404)return!1;throw i}}async createTableIfNotExists(a,e){try{return await this.createTable(a,e)}catch(i){if(i instanceof fc&&i.status===409)return await this.loadTable({namespace:a.namespace,name:e.name});throw i}}},J3=class{constructor(a){let e="v1";a.catalogName&&(e+=`/${a.catalogName}`);const i=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=Z3({baseUrl:i,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=a.accessDelegation?.join(","),this.namespaceOps=new K3(this.client,e),this.tableOps=new Q3(this.client,e,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,e){return this.namespaceOps.createNamespace(a,e)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,e){return this.tableOps.createTable(a,e)}async updateTable(a,e){return this.tableOps.updateTable(a,e)}async dropTable(a,e){await this.tableOps.dropTable(a,e)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,e){return this.namespaceOps.createNamespaceIfNotExists(a,e)}async createTableIfNotExists(a,e){return this.tableOps.createTableIfNotExists(a,e)}},Ed=class extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}};function gn(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}var $3=class extends Ed{constructor(a,e,i){super(a),this.name="StorageApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},C0=class extends Ed{constructor(a,e){super(a),this.name="StorageUnknownError",this.originalError=e}};const $0=a=>a?(...e)=>a(...e):(...e)=>fetch(...e),eE=()=>Response,T0=a=>{if(Array.isArray(a))return a.map(i=>T0(i));if(typeof a=="function"||a!==Object(a))return a;const e={};return Object.entries(a).forEach(([i,o])=>{const h=i.replace(/([-_][a-z])/gi,m=>m.toUpperCase().replace(/[-_]/g,""));e[h]=T0(o)}),e},tE=a=>{if(typeof a!="object"||a===null)return!1;const e=Object.getPrototypeOf(a);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},nE=a=>!a||typeof a!="string"||a.length===0||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(a);function hc(a){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hc(a)}function rE(a,e){if(hc(a)!="object"||!a)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var o=i.call(a,e);if(hc(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function iE(a){var e=rE(a,"string");return hc(e)=="symbol"?e:e+""}function aE(a,e,i){return(e=iE(e))in a?Object.defineProperty(a,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[e]=i,a}function G2(a,e){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);e&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),i.push.apply(i,o)}return i}function Je(a){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?G2(Object(i),!0).forEach(function(o){aE(a,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):G2(Object(i)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(i,o))})}return a}const Bh=a=>{var e;return a.msg||a.message||a.error_description||(typeof a.error=="string"?a.error:(e=a.error)===null||e===void 0?void 0:e.message)||JSON.stringify(a)},sE=async(a,e,i)=>{a instanceof await eE()&&!i?.noResolveJson?a.json().then(o=>{const h=a.status||500,m=o?.statusCode||h+"";e(new $3(Bh(o),h,m))}).catch(o=>{e(new C0(Bh(o),o))}):e(new C0(Bh(a),a))},oE=(a,e,i,o)=>{const h={method:a,headers:e?.headers||{}};return a==="GET"||!o?h:(tE(o)?(h.headers=Je({"Content-Type":"application/json"},e?.headers),h.body=JSON.stringify(o)):h.body=o,e?.duplex&&(h.duplex=e.duplex),Je(Je({},h),i))};async function bc(a,e,i,o,h,m){return new Promise((x,A)=>{a(i,oE(e,o,h,m)).then(E=>{if(!E.ok)throw E;return o?.noResolveJson?E:E.json()}).then(E=>x(E)).catch(E=>sE(E,A,o))})}async function gc(a,e,i,o){return bc(a,"GET",e,i,o)}async function vi(a,e,i,o,h){return bc(a,"POST",e,o,h,i)}async function O0(a,e,i,o,h){return bc(a,"PUT",e,o,h,i)}async function lE(a,e,i,o){return bc(a,"HEAD",e,Je(Je({},i),{},{noResolveJson:!0}),o)}async function e1(a,e,i,o,h){return bc(a,"DELETE",e,o,h,i)}var cE=class{constructor(a,e){this.downloadFn=a,this.shouldThrowOnError=e}then(a,e){return this.execute().then(a,e)}async execute(){var a=this;try{return{data:(await a.downloadFn()).body,error:null}}catch(e){if(a.shouldThrowOnError)throw e;if(gn(e))return{data:null,error:e};throw e}}};let Fp;Fp=Symbol.toStringTag;var uE=class{constructor(a,e){this.downloadFn=a,this.shouldThrowOnError=e,this[Fp]="BlobDownloadBuilder",this.promise=null}asStream(){return new cE(this.downloadFn,this.shouldThrowOnError)}then(a,e){return this.getPromise().then(a,e)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var a=this;try{return{data:await(await a.downloadFn()).blob(),error:null}}catch(e){if(a.shouldThrowOnError)throw e;if(gn(e))return{data:null,error:e};throw e}}};const dE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},q2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var fE=class{constructor(a,e={},i,o){this.shouldThrowOnError=!1,this.url=a,this.headers=e,this.bucketId=i,this.fetch=$0(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(a,e,i,o){var h=this;try{let m;const x=Je(Je({},q2),o);let A=Je(Je({},h.headers),a==="POST"&&{"x-upsert":String(x.upsert)});const E=x.metadata;typeof Blob<"u"&&i instanceof Blob?(m=new FormData,m.append("cacheControl",x.cacheControl),E&&m.append("metadata",h.encodeMetadata(E)),m.append("",i)):typeof FormData<"u"&&i instanceof FormData?(m=i,m.has("cacheControl")||m.append("cacheControl",x.cacheControl),E&&!m.has("metadata")&&m.append("metadata",h.encodeMetadata(E))):(m=i,A["cache-control"]=`max-age=${x.cacheControl}`,A["content-type"]=x.contentType,E&&(A["x-metadata"]=h.toBase64(h.encodeMetadata(E))),(typeof ReadableStream<"u"&&m instanceof ReadableStream||m&&typeof m=="object"&&"pipe"in m&&typeof m.pipe=="function")&&!x.duplex&&(x.duplex="half")),o?.headers&&(A=Je(Je({},A),o.headers));const v=h._removeEmptyFolders(e),T=h._getFinalPath(v),O=await(a=="PUT"?O0:vi)(h.fetch,`${h.url}/object/${T}`,m,Je({headers:A},x?.duplex?{duplex:x.duplex}:{}));return{data:{path:v,id:O.Id,fullPath:O.Key},error:null}}catch(m){if(h.shouldThrowOnError)throw m;if(gn(m))return{data:null,error:m};throw m}}async upload(a,e,i){return this.uploadOrUpdate("POST",a,e,i)}async uploadToSignedUrl(a,e,i,o){var h=this;const m=h._removeEmptyFolders(a),x=h._getFinalPath(m),A=new URL(h.url+`/object/upload/sign/${x}`);A.searchParams.set("token",e);try{let E;const v=Je({upsert:q2.upsert},o),T=Je(Je({},h.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&i instanceof Blob?(E=new FormData,E.append("cacheControl",v.cacheControl),E.append("",i)):typeof FormData<"u"&&i instanceof FormData?(E=i,E.append("cacheControl",v.cacheControl)):(E=i,T["cache-control"]=`max-age=${v.cacheControl}`,T["content-type"]=v.contentType),{data:{path:m,fullPath:(await O0(h.fetch,A.toString(),E,{headers:T})).Key},error:null}}catch(E){if(h.shouldThrowOnError)throw E;if(gn(E))return{data:null,error:E};throw E}}async createSignedUploadUrl(a,e){var i=this;try{let o=i._getFinalPath(a);const h=Je({},i.headers);e?.upsert&&(h["x-upsert"]="true");const m=await vi(i.fetch,`${i.url}/object/upload/sign/${o}`,{},{headers:h}),x=new URL(i.url+m.url),A=x.searchParams.get("token");if(!A)throw new Ed("No token returned by API");return{data:{signedUrl:x.toString(),path:a,token:A},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(gn(o))return{data:null,error:o};throw o}}async update(a,e,i){return this.uploadOrUpdate("PUT",a,e,i)}async move(a,e,i){var o=this;try{return{data:await vi(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:a,destinationKey:e,destinationBucket:i?.destinationBucket},{headers:o.headers}),error:null}}catch(h){if(o.shouldThrowOnError)throw h;if(gn(h))return{data:null,error:h};throw h}}async copy(a,e,i){var o=this;try{return{data:{path:(await vi(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:a,destinationKey:e,destinationBucket:i?.destinationBucket},{headers:o.headers})).Key},error:null}}catch(h){if(o.shouldThrowOnError)throw h;if(gn(h))return{data:null,error:h};throw h}}async createSignedUrl(a,e,i){var o=this;try{let h=o._getFinalPath(a),m=await vi(o.fetch,`${o.url}/object/sign/${h}`,Je({expiresIn:e},i?.transform?{transform:i.transform}:{}),{headers:o.headers});const x=i?.download?`&download=${i.download===!0?"":i.download}`:"";return m={signedUrl:encodeURI(`${o.url}${m.signedURL}${x}`)},{data:m,error:null}}catch(h){if(o.shouldThrowOnError)throw h;if(gn(h))return{data:null,error:h};throw h}}async createSignedUrls(a,e,i){var o=this;try{const h=await vi(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:e,paths:a},{headers:o.headers}),m=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:h.map(x=>Je(Je({},x),{},{signedUrl:x.signedURL?encodeURI(`${o.url}${x.signedURL}${m}`):null})),error:null}}catch(h){if(o.shouldThrowOnError)throw h;if(gn(h))return{data:null,error:h};throw h}}download(a,e){const i=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),h=o?`?${o}`:"",m=this._getFinalPath(a),x=()=>gc(this.fetch,`${this.url}/${i}/${m}${h}`,{headers:this.headers,noResolveJson:!0});return new uE(x,this.shouldThrowOnError)}async info(a){var e=this;const i=e._getFinalPath(a);try{return{data:T0(await gc(e.fetch,`${e.url}/object/info/${i}`,{headers:e.headers})),error:null}}catch(o){if(e.shouldThrowOnError)throw o;if(gn(o))return{data:null,error:o};throw o}}async exists(a){var e=this;const i=e._getFinalPath(a);try{return await lE(e.fetch,`${e.url}/object/${i}`,{headers:e.headers}),{data:!0,error:null}}catch(o){if(e.shouldThrowOnError)throw o;if(gn(o)&&o instanceof C0){const h=o.originalError;if([400,404].includes(h?.status))return{data:!1,error:o}}throw o}}getPublicUrl(a,e){const i=this._getFinalPath(a),o=[],h=e?.download?`download=${e.download===!0?"":e.download}`:"";h!==""&&o.push(h);const m=typeof e?.transform<"u"?"render/image":"object",x=this.transformOptsToQueryString(e?.transform||{});x!==""&&o.push(x);let A=o.join("&");return A!==""&&(A=`?${A}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${i}${A}`)}}}async remove(a){var e=this;try{return{data:await e1(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:a},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}async list(a,e,i){var o=this;try{const h=Je(Je(Je({},dE),e),{},{prefix:a||""});return{data:await vi(o.fetch,`${o.url}/object/list/${o.bucketId}`,h,{headers:o.headers},i),error:null}}catch(h){if(o.shouldThrowOnError)throw h;if(gn(h))return{data:null,error:h};throw h}}async listV2(a,e){var i=this;try{const o=Je({},a);return{data:await vi(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,o,{headers:i.headers},e),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(gn(o))return{data:null,error:o};throw o}}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const e=[];return a.width&&e.push(`width=${a.width}`),a.height&&e.push(`height=${a.height}`),a.resize&&e.push(`resize=${a.resize}`),a.format&&e.push(`format=${a.format}`),a.quality&&e.push(`quality=${a.quality}`),e.join("&")}};const Vp="2.90.1",Hp={"X-Client-Info":`storage-js/${Vp}`};var hE=class{constructor(a,e={},i,o){this.shouldThrowOnError=!1;const h=new URL(a);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(h.hostname)&&!h.hostname.includes("storage.supabase.")&&(h.hostname=h.hostname.replace("supabase.","storage.supabase.")),this.url=h.href.replace(/\/$/,""),this.headers=Je(Je({},Hp),e),this.fetch=$0(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(a){var e=this;try{const i=e.listBucketOptionsToQueryString(a);return{data:await gc(e.fetch,`${e.url}/bucket${i}`,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}async getBucket(a){var e=this;try{return{data:await gc(e.fetch,`${e.url}/bucket/${a}`,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}async createBucket(a,e={public:!1}){var i=this;try{return{data:await vi(i.fetch,`${i.url}/bucket`,{id:a,name:a,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(gn(o))return{data:null,error:o};throw o}}async updateBucket(a,e){var i=this;try{return{data:await O0(i.fetch,`${i.url}/bucket/${a}`,{id:a,name:a,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(gn(o))return{data:null,error:o};throw o}}async emptyBucket(a){var e=this;try{return{data:await vi(e.fetch,`${e.url}/bucket/${a}/empty`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}async deleteBucket(a){var e=this;try{return{data:await e1(e.fetch,`${e.url}/bucket/${a}`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}listBucketOptionsToQueryString(a){const e={};return a&&("limit"in a&&(e.limit=String(a.limit)),"offset"in a&&(e.offset=String(a.offset)),a.search&&(e.search=a.search),a.sortColumn&&(e.sortColumn=a.sortColumn),a.sortOrder&&(e.sortOrder=a.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},gE=class{constructor(a,e={},i){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Je(Je({},Hp),e),this.fetch=$0(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){var e=this;try{return{data:await vi(e.fetch,`${e.url}/bucket`,{name:a},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}async listBuckets(a){var e=this;try{const i=new URLSearchParams;a?.limit!==void 0&&i.set("limit",a.limit.toString()),a?.offset!==void 0&&i.set("offset",a.offset.toString()),a?.sortColumn&&i.set("sortColumn",a.sortColumn),a?.sortOrder&&i.set("sortOrder",a.sortOrder),a?.search&&i.set("search",a.search);const o=i.toString(),h=o?`${e.url}/bucket?${o}`:`${e.url}/bucket`;return{data:await gc(e.fetch,h,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}async deleteBucket(a){var e=this;try{return{data:await e1(e.fetch,`${e.url}/bucket/${a}`,{},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(gn(i))return{data:null,error:i};throw i}}from(a){var e=this;if(!nE(a))throw new Ed("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new J3({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(i,{get(h,m){const x=h[m];return typeof x!="function"?x:async(...A)=>{try{return{data:await x.apply(h,A),error:null}}catch(E){if(o)throw E;return{data:null,error:E}}}}})}};const t1={"X-Client-Info":`storage-js/${Vp}`,"Content-Type":"application/json"};var Gp=class extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Hr(a){return typeof a=="object"&&a!==null&&"__isStorageVectorsError"in a}var Lh=class extends Gp{constructor(a,e,i){super(a),this.name="StorageVectorsApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},mE=class extends Gp{constructor(a,e){super(a),this.name="StorageVectorsUnknownError",this.originalError=e}};const n1=a=>a?(...e)=>a(...e):(...e)=>fetch(...e),yE=a=>{if(typeof a!="object"||a===null)return!1;const e=Object.getPrototypeOf(a);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},W2=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),pE=async(a,e,i)=>{if(a&&typeof a=="object"&&"status"in a&&"ok"in a&&typeof a.status=="number"&&!i?.noResolveJson){const o=a.status||500,h=a;if(typeof h.json=="function")h.json().then(m=>{const x=m?.statusCode||m?.code||o+"";e(new Lh(W2(m),o,x))}).catch(()=>{const m=o+"";e(new Lh(h.statusText||`HTTP ${o} error`,o,m))});else{const m=o+"";e(new Lh(h.statusText||`HTTP ${o} error`,o,m))}}else e(new mE(W2(a),a))},xE=(a,e,i,o)=>{const h={method:a,headers:e?.headers||{}};return o?(yE(o)?(h.headers=Je({"Content-Type":"application/json"},e?.headers),h.body=JSON.stringify(o)):h.body=o,Je(Je({},h),i)):h};async function wE(a,e,i,o,h,m){return new Promise((x,A)=>{a(i,xE(e,o,h,m)).then(E=>{if(!E.ok)throw E;if(o?.noResolveJson)return E;const v=E.headers.get("content-type");return!v||!v.includes("application/json")?{}:E.json()}).then(E=>x(E)).catch(E=>pE(E,A,o))})}async function Gr(a,e,i,o,h){return wE(a,"POST",e,o,h,i)}var bE=class{constructor(a,e={},i){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Je(Je({},t1),e),this.fetch=n1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(a){var e=this;try{return{data:await Gr(e.fetch,`${e.url}/CreateIndex`,a,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Hr(i))return{data:null,error:i};throw i}}async getIndex(a,e){var i=this;try{return{data:await Gr(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:a,indexName:e},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Hr(o))return{data:null,error:o};throw o}}async listIndexes(a){var e=this;try{return{data:await Gr(e.fetch,`${e.url}/ListIndexes`,a,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Hr(i))return{data:null,error:i};throw i}}async deleteIndex(a,e){var i=this;try{return{data:await Gr(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:a,indexName:e},{headers:i.headers})||{},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Hr(o))return{data:null,error:o};throw o}}},vE=class{constructor(a,e={},i){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Je(Je({},t1),e),this.fetch=n1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(a){var e=this;try{if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Gr(e.fetch,`${e.url}/PutVectors`,a,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Hr(i))return{data:null,error:i};throw i}}async getVectors(a){var e=this;try{return{data:await Gr(e.fetch,`${e.url}/GetVectors`,a,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Hr(i))return{data:null,error:i};throw i}}async listVectors(a){var e=this;try{if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:await Gr(e.fetch,`${e.url}/ListVectors`,a,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Hr(i))return{data:null,error:i};throw i}}async queryVectors(a){var e=this;try{return{data:await Gr(e.fetch,`${e.url}/QueryVectors`,a,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Hr(i))return{data:null,error:i};throw i}}async deleteVectors(a){var e=this;try{if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Gr(e.fetch,`${e.url}/DeleteVectors`,a,{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Hr(i))return{data:null,error:i};throw i}}},EE=class{constructor(a,e={},i){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=Je(Je({},t1),e),this.fetch=n1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){var e=this;try{return{data:await Gr(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Hr(i))return{data:null,error:i};throw i}}async getBucket(a){var e=this;try{return{data:await Gr(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:a},{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Hr(i))return{data:null,error:i};throw i}}async listBuckets(a={}){var e=this;try{return{data:await Gr(e.fetch,`${e.url}/ListVectorBuckets`,a,{headers:e.headers}),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Hr(i))return{data:null,error:i};throw i}}async deleteBucket(a){var e=this;try{return{data:await Gr(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:e.headers})||{},error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Hr(i))return{data:null,error:i};throw i}}},SE=class extends EE{constructor(a,e={}){super(a,e.headers||{},e.fetch)}from(a){return new AE(this.url,this.headers,a,this.fetch)}async createBucket(a){var e=()=>super.createBucket,i=this;return e().call(i,a)}async getBucket(a){var e=()=>super.getBucket,i=this;return e().call(i,a)}async listBuckets(a={}){var e=()=>super.listBuckets,i=this;return e().call(i,a)}async deleteBucket(a){var e=()=>super.deleteBucket,i=this;return e().call(i,a)}},AE=class extends bE{constructor(a,e,i,o){super(a,e,o),this.vectorBucketName=i}async createIndex(a){var e=()=>super.createIndex,i=this;return e().call(i,Je(Je({},a),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(a={}){var e=()=>super.listIndexes,i=this;return e().call(i,Je(Je({},a),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(a){var e=()=>super.getIndex,i=this;return e().call(i,i.vectorBucketName,a)}async deleteIndex(a){var e=()=>super.deleteIndex,i=this;return e().call(i,i.vectorBucketName,a)}index(a){return new _E(this.url,this.headers,this.vectorBucketName,a,this.fetch)}},_E=class extends vE{constructor(a,e,i,o,h){super(a,e,h),this.vectorBucketName=i,this.indexName=o}async putVectors(a){var e=()=>super.putVectors,i=this;return e().call(i,Je(Je({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(a){var e=()=>super.getVectors,i=this;return e().call(i,Je(Je({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(a={}){var e=()=>super.listVectors,i=this;return e().call(i,Je(Je({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(a){var e=()=>super.queryVectors,i=this;return e().call(i,Je(Je({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(a){var e=()=>super.deleteVectors,i=this;return e().call(i,Je(Je({},a),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},CE=class extends hE{constructor(a,e={},i,o){super(a,e,i,o)}from(a){return new fE(this.url,this.headers,a,this.fetch)}get vectors(){return new SE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new gE(this.url+"/iceberg",this.headers,this.fetch)}};const qp="2.90.1",Vo=30*1e3,N0=3,jh=N0*Vo,TE="http://localhost:9999",OE="supabase.auth.token",NE={"X-Client-Info":`gotrue-js/${qp}`},R0="X-Supabase-Api-Version",Wp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},RE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,IE=600*1e3;class mc extends Error{constructor(e,i,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function Ve(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class kE extends mc{constructor(e,i,o){super(e,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function DE(a){return Ve(a)&&a.name==="AuthApiError"}class Us extends mc{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class ha extends mc{constructor(e,i,o,h){super(e,o,h),this.name=i,this.status=o}}class Fr extends ha{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ME(a){return Ve(a)&&a.name==="AuthSessionMissingError"}class Io extends ha{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wu extends ha{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Yu extends ha{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function BE(a){return Ve(a)&&a.name==="AuthImplicitGrantRedirectError"}class Y2 extends ha{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class LE extends ha{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class I0 extends ha{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function Uh(a){return Ve(a)&&a.name==="AuthRetryableFetchError"}class X2 extends ha{constructor(e,i,o){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class k0 extends ha{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const od="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Z2=` 	
\r=`.split(""),jE=(()=>{const a=new Array(128);for(let e=0;e<a.length;e+=1)a[e]=-1;for(let e=0;e<Z2.length;e+=1)a[Z2[e].charCodeAt(0)]=-2;for(let e=0;e<od.length;e+=1)a[od[e].charCodeAt(0)]=e;return a})();function K2(a,e,i){if(a!==null)for(e.queue=e.queue<<8|a,e.queuedBits+=8;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;i(od[o]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;i(od[o]),e.queuedBits-=6}}function Yp(a,e,i){const o=jE[a];if(o>-1)for(e.queue=e.queue<<6|o,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function Q2(a){const e=[],i=x=>{e.push(String.fromCodePoint(x))},o={utf8seq:0,codepoint:0},h={queue:0,queuedBits:0},m=x=>{zE(x,o,i)};for(let x=0;x<a.length;x+=1)Yp(a.charCodeAt(x),h,m);return e.join("")}function UE(a,e){if(a<=127){e(a);return}else if(a<=2047){e(192|a>>6),e(128|a&63);return}else if(a<=65535){e(224|a>>12),e(128|a>>6&63),e(128|a&63);return}else if(a<=1114111){e(240|a>>18),e(128|a>>12&63),e(128|a>>6&63),e(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function PE(a,e){for(let i=0;i<a.length;i+=1){let o=a.charCodeAt(i);if(o>55295&&o<=56319){const h=(o-55296)*1024&65535;o=(a.charCodeAt(i+1)-56320&65535|h)+65536,i+=1}UE(o,e)}}function zE(a,e,i){if(e.utf8seq===0){if(a<=127){i(a);return}for(let o=1;o<6;o+=1)if((a>>7-o&1)===0){e.utf8seq=o;break}if(e.utf8seq===2)e.codepoint=a&31;else if(e.utf8seq===3)e.codepoint=a&15;else if(e.utf8seq===4)e.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|a&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function Yo(a){const e=[],i={queue:0,queuedBits:0},o=h=>{e.push(h)};for(let h=0;h<a.length;h+=1)Yp(a.charCodeAt(h),i,o);return new Uint8Array(e)}function FE(a){const e=[];return PE(a,i=>e.push(i)),new Uint8Array(e)}function Ps(a){const e=[],i={queue:0,queuedBits:0},o=h=>{e.push(h)};return a.forEach(h=>K2(h,i,o)),K2(null,i,o),e.join("")}function VE(a){return Math.round(Date.now()/1e3)+a}function HE(){return Symbol("auth-callback")}const nr=()=>typeof window<"u"&&typeof document<"u",Rs={tested:!1,writable:!1},Xp=()=>{if(!nr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rs.tested)return Rs.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),Rs.tested=!0,Rs.writable=!0}catch{Rs.tested=!0,Rs.writable=!1}return Rs.writable};function GE(a){const e={},i=new URL(a);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((h,m)=>{e[m]=h})}catch{}return i.searchParams.forEach((o,h)=>{e[h]=o}),e}const Zp=a=>a?(...e)=>a(...e):(...e)=>fetch(...e),qE=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",Ho=async(a,e,i)=>{await a.setItem(e,JSON.stringify(i))},Is=async(a,e)=>{const i=await a.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},tr=async(a,e)=>{await a.removeItem(e)};class Sd{constructor(){this.promise=new Sd.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}Sd.promiseConstructor=Promise;function Ph(a){const e=a.split(".");if(e.length!==3)throw new k0("Invalid JWT structure");for(let o=0;o<e.length;o++)if(!RE.test(e[o]))throw new k0("JWT not in base64url format");return{header:JSON.parse(Q2(e[0])),payload:JSON.parse(Q2(e[1])),signature:Yo(e[2]),raw:{header:e[0],payload:e[1]}}}async function WE(a){return await new Promise(e=>{setTimeout(()=>e(null),a)})}function YE(a,e){return new Promise((o,h)=>{(async()=>{for(let m=0;m<1/0;m++)try{const x=await a(m);if(!e(m,null,x)){o(x);return}}catch(x){if(!e(m,x)){h(x);return}}})()})}function XE(a){return("0"+a.toString(16)).substr(-2)}function ZE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let h="";for(let m=0;m<56;m++)h+=i.charAt(Math.floor(Math.random()*o));return h}return crypto.getRandomValues(e),Array.from(e,XE).join("")}async function KE(a){const i=new TextEncoder().encode(a),o=await crypto.subtle.digest("SHA-256",i),h=new Uint8Array(o);return Array.from(h).map(m=>String.fromCharCode(m)).join("")}async function QE(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const i=await KE(a);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ko(a,e,i=!1){const o=ZE();let h=o;i&&(h+="/PASSWORD_RECOVERY"),await Ho(a,`${e}-code-verifier`,h);const m=await QE(o);return[m,o===m?"plain":"s256"]}const JE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $E(a){const e=a.headers.get(R0);if(!e||!e.match(JE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function eS(a){if(!a)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(a<=e)throw new Error("JWT has expired")}function tS(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Do(a){if(!nS.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function zh(){const a={};return new Proxy(a,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function rS(a,e){return new Proxy(a,{get:(i,o,h)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const m=o.toString();if(m==="Symbol(Symbol.toPrimitive)"||m==="Symbol(Symbol.toStringTag)"||m==="Symbol(util.inspect.custom)"||m==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,o,h)}return!e.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,o,h)}})}function J2(a){return JSON.parse(JSON.stringify(a))}const Bs=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),iS=[502,503,504];async function $2(a){var e;if(!qE(a))throw new I0(Bs(a),0);if(iS.includes(a.status))throw new I0(Bs(a),a.status);let i;try{i=await a.json()}catch(m){throw new Us(Bs(m),m)}let o;const h=$E(a);if(h&&h.getTime()>=Wp["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new X2(Bs(i),a.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new Fr}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((m,x)=>m&&typeof x=="string",!0))throw new X2(Bs(i),a.status,i.weak_password.reasons);throw new kE(Bs(i),a.status||500,o)}const aS=(a,e,i,o)=>{const h={method:a,headers:e?.headers||{}};return a==="GET"?h:(h.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),h.body=JSON.stringify(o),Object.assign(Object.assign({},h),i))};async function Qe(a,e,i,o){var h;const m=Object.assign({},o?.headers);m[R0]||(m[R0]=Wp["2024-01-01"].name),o?.jwt&&(m.Authorization=`Bearer ${o.jwt}`);const x=(h=o?.query)!==null&&h!==void 0?h:{};o?.redirectTo&&(x.redirect_to=o.redirectTo);const A=Object.keys(x).length?"?"+new URLSearchParams(x).toString():"",E=await sS(a,e,i+A,{headers:m,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(E):{data:Object.assign({},E),error:null}}async function sS(a,e,i,o,h,m){const x=aS(e,o,h,m);let A;try{A=await a(i,Object.assign({},x))}catch(E){throw console.error(E),new I0(Bs(E),0)}if(A.ok||await $2(A),o?.noResolveJson)return A;try{return await A.json()}catch(E){await $2(E)}}function bi(a){var e;let i=null;cS(a)&&(i=Object.assign({},a),a.expires_at||(i.expires_at=VE(a.expires_in)));const o=(e=a.user)!==null&&e!==void 0?e:a;return{data:{session:i,user:o},error:null}}function ey(a){const e=bi(a);return!e.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(e.data.weak_password=a.weak_password),e}function ns(a){var e;return{data:{user:(e=a.user)!==null&&e!==void 0?e:a},error:null}}function oS(a){return{data:a,error:null}}function lS(a){const{action_link:e,email_otp:i,hashed_token:o,redirect_to:h,verification_type:m}=a,x=vd(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),A={action_link:e,email_otp:i,hashed_token:o,redirect_to:h,verification_type:m},E=Object.assign({},x);return{data:{properties:A,user:E},error:null}}function ty(a){return a}function cS(a){return a.access_token&&a.refresh_token&&a.expires_in}const Fh=["global","local","others"];class uS{constructor({url:e="",headers:i={},fetch:o}){this.url=e,this.headers=i,this.fetch=Zp(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=Fh[0]){if(Fh.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fh.join(", ")}`);try{return await Qe(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if(Ve(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,i={}){try{return await Qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:ns})}catch(o){if(Ve(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:i}=e,o=vd(e,["options"]),h=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(h.new_email=o?.newEmail,delete h.newEmail),await Qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:h,headers:this.headers,xform:lS,redirectTo:i?.redirectTo})}catch(i){if(Ve(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await Qe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ns})}catch(i){if(Ve(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,o,h,m,x,A,E;try{const v={nextPage:null,lastPage:0,total:0},T=await Qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=e?.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(m=(h=e?.perPage)===null||h===void 0?void 0:h.toString())!==null&&m!==void 0?m:""},xform:ty});if(T.error)throw T.error;const O=await T.json(),j=(x=T.headers.get("x-total-count"))!==null&&x!==void 0?x:0,U=(E=(A=T.headers.get("link"))===null||A===void 0?void 0:A.split(","))!==null&&E!==void 0?E:[];return U.length>0&&(U.forEach(G=>{const H=parseInt(G.split(";")[0].split("=")[1].substring(0,1)),Z=JSON.parse(G.split(";")[1].split("=")[1]);v[`${Z}Page`]=H}),v.total=parseInt(j)),{data:Object.assign(Object.assign({},O),v),error:null}}catch(v){if(Ve(v))return{data:{users:[]},error:v};throw v}}async getUserById(e){Do(e);try{return await Qe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ns})}catch(i){if(Ve(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){Do(e);try{return await Qe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:ns})}catch(o){if(Ve(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,i=!1){Do(e);try{return await Qe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:ns})}catch(o){if(Ve(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){Do(e.userId);try{const{data:i,error:o}=await Qe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:h=>({data:{factors:h},error:null})});return{data:i,error:o}}catch(i){if(Ve(i))return{data:null,error:i};throw i}}async _deleteFactor(e){Do(e.userId),Do(e.id);try{return{data:await Qe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(Ve(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,o,h,m,x,A,E;try{const v={nextPage:null,lastPage:0,total:0},T=await Qe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=e?.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(m=(h=e?.perPage)===null||h===void 0?void 0:h.toString())!==null&&m!==void 0?m:""},xform:ty});if(T.error)throw T.error;const O=await T.json(),j=(x=T.headers.get("x-total-count"))!==null&&x!==void 0?x:0,U=(E=(A=T.headers.get("link"))===null||A===void 0?void 0:A.split(","))!==null&&E!==void 0?E:[];return U.length>0&&(U.forEach(G=>{const H=parseInt(G.split(";")[0].split("=")[1].substring(0,1)),Z=JSON.parse(G.split(";")[1].split("=")[1]);v[`${Z}Page`]=H}),v.total=parseInt(j)),{data:Object.assign(Object.assign({},O),v),error:null}}catch(v){if(Ve(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(e){try{return await Qe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Ve(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await Qe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Ve(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await Qe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(Ve(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(e){try{return await Qe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Ve(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await Qe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Ve(i))return{data:null,error:i};throw i}}}function ny(a={}){return{getItem:e=>a[e]||null,setItem:(e,i)=>{a[e]=i},removeItem:e=>{delete a[e]}}}const Mo={debug:!!(globalThis&&Xp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Kp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class dS extends Kp{}async function fS(a,e,i){Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async h=>{if(h){Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,h.name);try{return await i()}finally{Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,h.name)}}else{if(e===0)throw Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new dS(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(Mo.debug)try{const m=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(m,null,"  "))}catch(m){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",m)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function hS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Qp(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw new Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}function gS(a){return parseInt(a,16)}function mS(a){const e=new TextEncoder().encode(a);return"0x"+Array.from(e,o=>o.toString(16).padStart(2,"0")).join("")}function yS(a){var e;const{chainId:i,domain:o,expirationTime:h,issuedAt:m=new Date,nonce:x,notBefore:A,requestId:E,resources:v,scheme:T,uri:O,version:j}=a;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(x&&x.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${x}`);if(!O)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(j!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${j}`);if(!((e=a.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`)}const U=Qp(a.address),G=T?`${T}://${o}`:o,H=a.statement?`${a.statement}
`:"",Z=`${G} wants you to sign in with your Ethereum account:
${U}

${H}`;let le=`URI: ${O}
Version: ${j}
Chain ID: ${i}${x?`
Nonce: ${x}`:""}
Issued At: ${m.toISOString()}`;if(h&&(le+=`
Expiration Time: ${h.toISOString()}`),A&&(le+=`
Not Before: ${A.toISOString()}`),E&&(le+=`
Request ID: ${E}`),v){let Q=`
Resources:`;for(const q of v){if(!q||typeof q!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${q}`);Q+=`
- ${q}`}le+=Q}return`${Z}
${le}`}class jn extends Error{constructor({message:e,code:i,cause:o,name:h}){var m;super(e,{cause:o}),this.__isWebAuthnError=!0,this.name=(m=h??(o instanceof Error?o.name:void 0))!==null&&m!==void 0?m:"Unknown Error",this.code=i}}class ld extends jn{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function pS({error:a,options:e}){var i,o,h;const{publicKey:m}=e;if(!m)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(e.signal instanceof AbortSignal)return new jn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if(a.name==="ConstraintError"){if(((i=m.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new jn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});if(e.mediation==="conditional"&&((o=m.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new jn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});if(((h=m.authenticatorSelection)===null||h===void 0?void 0:h.userVerification)==="required")return new jn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else{if(a.name==="InvalidStateError")return new jn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});if(a.name==="NotAllowedError")return new jn({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="NotSupportedError")return m.pubKeyCredParams.filter(A=>A.type==="public-key").length===0?new jn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}):new jn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});if(a.name==="SecurityError"){const x=window.location.hostname;if(Jp(x)){if(m.rp.id!==x)return new jn({message:`The RP ID "${m.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new jn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="TypeError"){if(m.user.id.byteLength<1||m.user.id.byteLength>64)return new jn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if(a.name==="UnknownError")return new jn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new jn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}function xS({error:a,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(e.signal instanceof AbortSignal)return new jn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else{if(a.name==="NotAllowedError")return new jn({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="SecurityError"){const o=window.location.hostname;if(Jp(o)){if(i.rpId!==o)return new jn({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new jn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="UnknownError")return new jn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new jn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}class wS{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const bS=new wS;function vS(a){if(!a)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(a);const{challenge:e,user:i,excludeCredentials:o}=a,h=vd(a,["challenge","user","excludeCredentials"]),m=Yo(e).buffer,x=Object.assign(Object.assign({},i),{id:Yo(i.id).buffer}),A=Object.assign(Object.assign({},h),{challenge:m,user:x});if(o&&o.length>0){A.excludeCredentials=new Array(o.length);for(let E=0;E<o.length;E++){const v=o[E];A.excludeCredentials[E]=Object.assign(Object.assign({},v),{id:Yo(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return A}function ES(a){if(!a)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(a);const{challenge:e,allowCredentials:i}=a,o=vd(a,["challenge","allowCredentials"]),h=Yo(e).buffer,m=Object.assign(Object.assign({},o),{challenge:h});if(i&&i.length>0){m.allowCredentials=new Array(i.length);for(let x=0;x<i.length;x++){const A=i[x];m.allowCredentials[x]=Object.assign(Object.assign({},A),{id:Yo(A.id).buffer,type:A.type||"public-key",transports:A.transports})}}return m}function SS(a){var e;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const i=a;return{id:a.id,rawId:a.id,response:{attestationObject:Ps(new Uint8Array(a.response.attestationObject)),clientDataJSON:Ps(new Uint8Array(a.response.clientDataJSON))},type:"public-key",clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function AS(a){var e;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const i=a,o=a.getClientExtensionResults(),h=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:Ps(new Uint8Array(h.authenticatorData)),clientDataJSON:Ps(new Uint8Array(h.clientDataJSON)),signature:Ps(new Uint8Array(h.signature)),userHandle:h.userHandle?Ps(new Uint8Array(h.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Jp(a){return a==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function ry(){var a,e;return!!(nr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function _S(a){try{const e=await navigator.credentials.create(a);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ld("Browser returned unexpected credential type",e)}:{data:null,error:new ld("Empty credential response",e)}}catch(e){return{data:null,error:pS({error:e,options:a})}}}async function CS(a){try{const e=await navigator.credentials.get(a);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ld("Browser returned unexpected credential type",e)}:{data:null,error:new ld("Empty credential response",e)}}catch(e){return{data:null,error:xS({error:e,options:a})}}}const TS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},OS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function cd(...a){const e=h=>h!==null&&typeof h=="object"&&!Array.isArray(h),i=h=>h instanceof ArrayBuffer||ArrayBuffer.isView(h),o={};for(const h of a)if(h)for(const m in h){const x=h[m];if(x!==void 0)if(Array.isArray(x))o[m]=x;else if(i(x))o[m]=x;else if(e(x)){const A=o[m];e(A)?o[m]=cd(A,x):o[m]=cd(x)}else o[m]=x}return o}function NS(a,e){return cd(TS,a,e||{})}function RS(a,e){return cd(OS,a,e||{})}class IS{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:o,signal:h},m){try{const{data:x,error:A}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!x)return{data:null,error:A};const E=h??bS.createNewAbortSignal();if(x.webauthn.type==="create"){const{user:v}=x.webauthn.credential_options.publicKey;v.name||(v.name=`${v.id}:${o}`),v.displayName||(v.displayName=v.name)}switch(x.webauthn.type){case"create":{const v=NS(x.webauthn.credential_options.publicKey,m?.create),{data:T,error:O}=await _S({publicKey:v,signal:E});return T?{data:{factorId:e,challengeId:x.id,webauthn:{type:x.webauthn.type,credential_response:T}},error:null}:{data:null,error:O}}case"request":{const v=RS(x.webauthn.credential_options.publicKey,m?.request),{data:T,error:O}=await CS(Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:v,signal:E}));return T?{data:{factorId:e,challengeId:x.id,webauthn:{type:x.webauthn.type,credential_response:T}},error:null}:{data:null,error:O}}}}catch(x){return Ve(x)?{data:null,error:x}:{data:null,error:new Us("Unexpected error in challenge",x)}}}async _verify({challengeId:e,factorId:i,webauthn:o}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:o})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:h}={}},m){if(!i)return{data:null,error:new mc("rpId is required for WebAuthn authentication")};try{if(!ry())return{data:null,error:new Us("Browser does not support WebAuthn",null)};const{data:x,error:A}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:o},signal:h},{request:m});if(!x)return{data:null,error:A};const{webauthn:E}=x;return this._verify({factorId:e,challengeId:x.challengeId,webauthn:{type:E.type,rpId:i,rpOrigins:o,credential_response:E.credential_response}})}catch(x){return Ve(x)?{data:null,error:x}:{data:null,error:new Us("Unexpected error in authenticate",x)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:h}={}},m){if(!i)return{data:null,error:new mc("rpId is required for WebAuthn registration")};try{if(!ry())return{data:null,error:new Us("Browser does not support WebAuthn",null)};const{data:x,error:A}=await this._enroll({friendlyName:e});if(!x)return await this.client.mfa.listFactors().then(T=>{var O;return(O=T.data)===null||O===void 0?void 0:O.all.find(j=>j.factor_type==="webauthn"&&j.friendly_name===e&&j.status!=="unverified")}).then(T=>T?this.client.mfa.unenroll({factorId:T?.id}):void 0),{data:null,error:A};const{data:E,error:v}=await this._challenge({factorId:x.id,friendlyName:x.friendly_name,webauthn:{rpId:i,rpOrigins:o},signal:h},{create:m});return E?this._verify({factorId:x.id,challengeId:E.challengeId,webauthn:{rpId:i,rpOrigins:o,type:E.webauthn.type,credential_response:E.webauthn.credential_response}}):{data:null,error:v}}catch(x){return Ve(x)?{data:null,error:x}:{data:null,error:new Us("Unexpected error in register",x)}}}}hS();const kS={url:TE,storageKey:OE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:NE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function iy(a,e,i){return await i()}const Bo={};class yc{get jwks(){var e,i;return(i=(e=Bo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){Bo[this.storageKey]=Object.assign(Object.assign({},Bo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=Bo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Bo[this.storageKey]=Object.assign(Object.assign({},Bo[this.storageKey]),{cachedAt:e})}constructor(e){var i,o,h;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const m=Object.assign(Object.assign({},kS),e);if(this.storageKey=m.storageKey,this.instanceID=(i=yc.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,yc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!m.debug,typeof m.debug=="function"&&(this.logger=m.debug),this.instanceID>0&&nr()){const x=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(x),this.logDebugMessages&&console.trace(x)}if(this.persistSession=m.persistSession,this.autoRefreshToken=m.autoRefreshToken,this.admin=new uS({url:m.url,headers:m.headers,fetch:m.fetch}),this.url=m.url,this.headers=m.headers,this.fetch=Zp(m.fetch),this.lock=m.lock||iy,this.detectSessionInUrl=m.detectSessionInUrl,this.flowType=m.flowType,this.hasCustomAuthorizationHeader=m.hasCustomAuthorizationHeader,this.throwOnError=m.throwOnError,this.lockAcquireTimeout=m.lockAcquireTimeout,m.lock?this.lock=m.lock:this.persistSession&&nr()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=fS:this.lock=iy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new IS(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(m.storage?this.storage=m.storage:Xp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ny(this.memoryStorage)),m.userStorage&&(this.userStorage=m.userStorage)):(this.memoryStorage={},this.storage=ny(this.memoryStorage)),nr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(x){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",x)}(h=this.broadcastChannel)===null||h===void 0||h.addEventListener("message",async x=>{this._debug("received broadcast notification from other tab or client",x),await this._notifyAllSubscribers(x.data.event,x.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${qp}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},o="none";if(nr()&&(i=GE(window.location.href),this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce")),nr()&&this.detectSessionInUrl&&o!=="none"){const{data:h,error:m}=await this._getSessionFromURL(i,o);if(m){if(this._debug("#_initialize()","error detecting session from URL",m),BE(m)){const E=(e=m.details)===null||e===void 0?void 0:e.code;if(E==="identity_already_exists"||E==="identity_not_found"||E==="single_identity_not_deletable")return{error:m}}return{error:m}}const{session:x,redirectType:A}=h;return this._debug("#_initialize()","detected session in URL",x,"redirect type",A),await this._saveSession(x),setTimeout(async()=>{A==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",x):await this._notifyAllSubscribers("SIGNED_IN",x)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return Ve(i)?this._returnResult({error:i}):this._returnResult({error:new Us("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,o,h;try{const m=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=e?.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(h=e?.options)===null||h===void 0?void 0:h.captchaToken}},xform:bi}),{data:x,error:A}=m;if(A||!x)return this._returnResult({data:{user:null,session:null},error:A});const E=x.session,v=x.user;return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",E)),this._returnResult({data:{user:v,session:E},error:null})}catch(m){if(Ve(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signUp(e){var i,o,h;try{let m;if("email"in e){const{email:T,password:O,options:j}=e;let U=null,G=null;this.flowType==="pkce"&&([U,G]=await ko(this.storage,this.storageKey)),m=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j?.emailRedirectTo,body:{email:T,password:O,data:(i=j?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:j?.captchaToken},code_challenge:U,code_challenge_method:G},xform:bi})}else if("phone"in e){const{phone:T,password:O,options:j}=e;m=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:T,password:O,data:(o=j?.data)!==null&&o!==void 0?o:{},channel:(h=j?.channel)!==null&&h!==void 0?h:"sms",gotrue_meta_security:{captcha_token:j?.captchaToken}},xform:bi})}else throw new Wu("You must provide either an email or phone number and a password");const{data:x,error:A}=m;if(A||!x)return await tr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:A});const E=x.session,v=x.user;return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",E)),this._returnResult({data:{user:v,session:E},error:null})}catch(m){if(await tr(this.storage,`${this.storageKey}-code-verifier`),Ve(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithPassword(e){try{let i;if("email"in e){const{email:m,password:x,options:A}=e;i=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:m,password:x,gotrue_meta_security:{captcha_token:A?.captchaToken}},xform:ey})}else if("phone"in e){const{phone:m,password:x,options:A}=e;i=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:m,password:x,gotrue_meta_security:{captcha_token:A?.captchaToken}},xform:ey})}else throw new Wu("You must provide either an email or phone number and a password");const{data:o,error:h}=i;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!o||!o.session||!o.user){const m=new Io;return this._returnResult({data:{user:null,session:null},error:m})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:h})}catch(i){if(Ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,o,h,m;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:(m=e.options)===null||m===void 0?void 0:m.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,o,h,m,x,A,E,v,T,O,j;let U,G;if("message"in e)U=e.message,G=e.signature;else{const{chain:H,wallet:Z,statement:le,options:Q}=e;let q;if(nr())if(typeof Z=="object")q=Z;else{const de=window;if("ethereum"in de&&typeof de.ethereum=="object"&&"request"in de.ethereum&&typeof de.ethereum.request=="function")q=de.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof Z!="object"||!Q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=Z}const xe=new URL((i=Q?.url)!==null&&i!==void 0?i:window.location.href),Le=await q.request({method:"eth_requestAccounts"}).then(de=>de).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Le||Le.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Se=Qp(Le[0]);let $=(o=Q?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!$){const de=await q.request({method:"eth_chainId"});$=gS(de)}const we={domain:xe.host,address:Se,statement:le,uri:xe.href,version:"1",chainId:$,nonce:(h=Q?.signInWithEthereum)===null||h===void 0?void 0:h.nonce,issuedAt:(x=(m=Q?.signInWithEthereum)===null||m===void 0?void 0:m.issuedAt)!==null&&x!==void 0?x:new Date,expirationTime:(A=Q?.signInWithEthereum)===null||A===void 0?void 0:A.expirationTime,notBefore:(E=Q?.signInWithEthereum)===null||E===void 0?void 0:E.notBefore,requestId:(v=Q?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(T=Q?.signInWithEthereum)===null||T===void 0?void 0:T.resources};U=yS(we),G=await q.request({method:"personal_sign",params:[mS(U),Se]})}try{const{data:H,error:Z}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:U,signature:G},!((O=e.options)===null||O===void 0)&&O.captchaToken?{gotrue_meta_security:{captcha_token:(j=e.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:bi});if(Z)throw Z;if(!H||!H.session||!H.user){const le=new Io;return this._returnResult({data:{user:null,session:null},error:le})}return H.session&&(await this._saveSession(H.session),await this._notifyAllSubscribers("SIGNED_IN",H.session)),this._returnResult({data:Object.assign({},H),error:Z})}catch(H){if(Ve(H))return this._returnResult({data:{user:null,session:null},error:H});throw H}}async signInWithSolana(e){var i,o,h,m,x,A,E,v,T,O,j,U;let G,H;if("message"in e)G=e.message,H=e.signature;else{const{chain:Z,wallet:le,statement:Q,options:q}=e;let xe;if(nr())if(typeof le=="object")xe=le;else{const Se=window;if("solana"in Se&&typeof Se.solana=="object"&&("signIn"in Se.solana&&typeof Se.solana.signIn=="function"||"signMessage"in Se.solana&&typeof Se.solana.signMessage=="function"))xe=Se.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof le!="object"||!q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");xe=le}const Le=new URL((i=q?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in xe&&xe.signIn){const Se=await xe.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},q?.signInWithSolana),{version:"1",domain:Le.host,uri:Le.href}),Q?{statement:Q}:null));let $;if(Array.isArray(Se)&&Se[0]&&typeof Se[0]=="object")$=Se[0];else if(Se&&typeof Se=="object"&&"signedMessage"in Se&&"signature"in Se)$=Se;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)G=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),H=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in xe)||typeof xe.signMessage!="function"||!("publicKey"in xe)||typeof xe!="object"||!xe.publicKey||!("toBase58"in xe.publicKey)||typeof xe.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");G=[`${Le.host} wants you to sign in with your Solana account:`,xe.publicKey.toBase58(),...Q?["",Q,""]:[""],"Version: 1",`URI: ${Le.href}`,`Issued At: ${(h=(o=q?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&h!==void 0?h:new Date().toISOString()}`,...!((m=q?.signInWithSolana)===null||m===void 0)&&m.notBefore?[`Not Before: ${q.signInWithSolana.notBefore}`]:[],...!((x=q?.signInWithSolana)===null||x===void 0)&&x.expirationTime?[`Expiration Time: ${q.signInWithSolana.expirationTime}`]:[],...!((A=q?.signInWithSolana)===null||A===void 0)&&A.chainId?[`Chain ID: ${q.signInWithSolana.chainId}`]:[],...!((E=q?.signInWithSolana)===null||E===void 0)&&E.nonce?[`Nonce: ${q.signInWithSolana.nonce}`]:[],...!((v=q?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${q.signInWithSolana.requestId}`]:[],...!((O=(T=q?.signInWithSolana)===null||T===void 0?void 0:T.resources)===null||O===void 0)&&O.length?["Resources",...q.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const Se=await xe.signMessage(new TextEncoder().encode(G),"utf8");if(!Se||!(Se instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");H=Se}}try{const{data:Z,error:le}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:G,signature:Ps(H)},!((j=e.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(U=e.options)===null||U===void 0?void 0:U.captchaToken}}:null),xform:bi});if(le)throw le;if(!Z||!Z.session||!Z.user){const Q=new Io;return this._returnResult({data:{user:null,session:null},error:Q})}return Z.session&&(await this._saveSession(Z.session),await this._notifyAllSubscribers("SIGNED_IN",Z.session)),this._returnResult({data:Object.assign({},Z),error:le})}catch(Z){if(Ve(Z))return this._returnResult({data:{user:null,session:null},error:Z});throw Z}}async _exchangeCodeForSession(e){const i=await Is(this.storage,`${this.storageKey}-code-verifier`),[o,h]=(i??"").split("/");try{if(!o&&this.flowType==="pkce")throw new LE;const{data:m,error:x}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:bi});if(await tr(this.storage,`${this.storageKey}-code-verifier`),x)throw x;if(!m||!m.session||!m.user){const A=new Io;return this._returnResult({data:{user:null,session:null,redirectType:null},error:A})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign(Object.assign({},m),{redirectType:h??null}),error:x})}catch(m){if(await tr(this.storage,`${this.storageKey}-code-verifier`),Ve(m))return this._returnResult({data:{user:null,session:null,redirectType:null},error:m});throw m}}async signInWithIdToken(e){try{const{options:i,provider:o,token:h,access_token:m,nonce:x}=e,A=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:h,access_token:m,nonce:x,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:bi}),{data:E,error:v}=A;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!E||!E.session||!E.user){const T=new Io;return this._returnResult({data:{user:null,session:null},error:T})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:E,error:v})}catch(i){if(Ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,o,h,m,x;try{if("email"in e){const{email:A,options:E}=e;let v=null,T=null;this.flowType==="pkce"&&([v,T]=await ko(this.storage,this.storageKey));const{error:O}=await Qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:A,data:(i=E?.data)!==null&&i!==void 0?i:{},create_user:(o=E?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:E?.captchaToken},code_challenge:v,code_challenge_method:T},redirectTo:E?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:O})}if("phone"in e){const{phone:A,options:E}=e,{data:v,error:T}=await Qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:A,data:(h=E?.data)!==null&&h!==void 0?h:{},create_user:(m=E?.shouldCreateUser)!==null&&m!==void 0?m:!0,gotrue_meta_security:{captcha_token:E?.captchaToken},channel:(x=E?.channel)!==null&&x!==void 0?x:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:T})}throw new Wu("You must provide either an email or phone number.")}catch(A){if(await tr(this.storage,`${this.storageKey}-code-verifier`),Ve(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async verifyOtp(e){var i,o;try{let h,m;"options"in e&&(h=(i=e.options)===null||i===void 0?void 0:i.redirectTo,m=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:x,error:A}=await Qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:m}}),redirectTo:h,xform:bi});if(A)throw A;if(!x)throw new Error("An error occurred on token verification.");const E=x.session,v=x.user;return E?.access_token&&(await this._saveSession(E),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",E)),this._returnResult({data:{user:v,session:E},error:null})}catch(h){if(Ve(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithSSO(e){var i,o,h,m,x;try{let A=null,E=null;this.flowType==="pkce"&&([A,E]=await ko(this.storage,this.storageKey));const v=await Qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((h=e?.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:A,code_challenge_method:E}),headers:this.headers,xform:oS});return!((m=v.data)===null||m===void 0)&&m.url&&nr()&&!(!((x=e.options)===null||x===void 0)&&x.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(A){if(await tr(this.storage,`${this.storageKey}-code-verifier`),Ve(A))return this._returnResult({data:null,error:A});throw A}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:o}=e;if(o)throw o;if(!i)throw new Fr;const{error:h}=await Qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:h})})}catch(e){if(Ve(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:o,type:h,options:m}=e,{error:x}=await Qe(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:h,gotrue_meta_security:{captcha_token:m?.captchaToken}},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}else if("phone"in e){const{phone:o,type:h,options:m}=e,{data:x,error:A}=await Qe(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:h,gotrue_meta_security:{captcha_token:m?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:x?.message_id},error:A})}throw new Wu("You must provide either an email or phone number and a type")}catch(i){if(Ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),h=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await h}catch{}})()),h}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const h=[...this.pendingInLock];await Promise.all(h),this.pendingInLock.splice(0,h.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await Is(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at*1e3-Date.now()<jh:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.userStorage){const x=await Is(this.userStorage,this.storageKey+"-user");x?.user?e.user=x.user:e.user=zh()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const x={value:this.suppressGetSessionWarning};e.user=rS(e.user,x),x.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:h,error:m}=await this._callRefreshToken(e.refresh_token);return m?this._returnResult({data:{session:null},error:m}):this._returnResult({data:{session:h},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(e){try{return e?await Qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ns}):await this._useSession(async i=>{var o,h,m;const{data:x,error:A}=i;if(A)throw A;return!(!((o=x.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fr}:await Qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(m=(h=x.session)===null||h===void 0?void 0:h.access_token)!==null&&m!==void 0?m:void 0,xform:ns})})}catch(i){if(Ve(i))return ME(i)&&(await this._removeSession(),await tr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async o=>{const{data:h,error:m}=o;if(m)throw m;if(!h.session)throw new Fr;const x=h.session;let A=null,E=null;this.flowType==="pkce"&&e.email!=null&&([A,E]=await ko(this.storage,this.storageKey));const{data:v,error:T}=await Qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:A,code_challenge_method:E}),jwt:x.access_token,xform:ns});if(T)throw T;return x.user=v.user,await this._saveSession(x),await this._notifyAllSubscribers("USER_UPDATED",x),this._returnResult({data:{user:x.user},error:null})})}catch(o){if(await tr(this.storage,`${this.storageKey}-code-verifier`),Ve(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Fr;const i=Date.now()/1e3;let o=i,h=!0,m=null;const{payload:x}=Ph(e.access_token);if(x.exp&&(o=x.exp,h=o<=i),h){const{data:A,error:E}=await this._callRefreshToken(e.refresh_token);if(E)return this._returnResult({data:{user:null,session:null},error:E});if(!A)return{data:{user:null,session:null},error:null};m=A}else{const{data:A,error:E}=await this._getUser(e.access_token);if(E)throw E;m={access_token:e.access_token,refresh_token:e.refresh_token,user:A.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(m),await this._notifyAllSubscribers("SIGNED_IN",m)}return this._returnResult({data:{user:m.user,session:m},error:null})}catch(i){if(Ve(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var o;if(!e){const{data:x,error:A}=i;if(A)throw A;e=(o=x.session)!==null&&o!==void 0?o:void 0}if(!e?.refresh_token)throw new Fr;const{data:h,error:m}=await this._callRefreshToken(e.refresh_token);return m?this._returnResult({data:{user:null,session:null},error:m}):h?this._returnResult({data:{user:h.user,session:h},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(Ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!nr())throw new Yu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Yu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Y2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yu("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Y2("No code detected.");const{data:Q,error:q}=await this._exchangeCodeForSession(e.code);if(q)throw q;const xe=new URL(window.location.href);return xe.searchParams.delete("code"),window.history.replaceState(window.history.state,"",xe.toString()),{data:{session:Q.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:h,access_token:m,refresh_token:x,expires_in:A,expires_at:E,token_type:v}=e;if(!m||!A||!x||!v)throw new Yu("No session defined in URL");const T=Math.round(Date.now()/1e3),O=parseInt(A);let j=T+O;E&&(j=parseInt(E));const U=j-T;U*1e3<=Vo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${U}s, should have been closer to ${O}s`);const G=j-O;T-G>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",G,j,T):T-G<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",G,j,T);const{data:H,error:Z}=await this._getUser(m);if(Z)throw Z;const le={provider_token:o,provider_refresh_token:h,access_token:m,expires_in:O,expires_at:j,refresh_token:x,token_type:v,user:H.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:le,redirectType:e.type},error:null})}catch(o){if(Ve(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await Is(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:h,error:m}=i;if(m)return this._returnResult({error:m});const x=(o=h.session)===null||o===void 0?void 0:o.access_token;if(x){const{error:A}=await this.admin.signOut(x,e);if(A&&!(DE(A)&&(A.status===404||A.status===401||A.status===403)))return this._returnResult({error:A})}return e!=="others"&&(await this._removeSession(),await tr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=HE(),o={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async i=>{var o,h;try{const{data:{session:m},error:x}=i;if(x)throw x;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",m)),this._debug("INITIAL_SESSION","callback id",e,"session",m)}catch(m){await((h=this.stateChangeEmitters.get(e))===null||h===void 0?void 0:h.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",m),console.error(m)}})}async resetPasswordForEmail(e,i={}){let o=null,h=null;this.flowType==="pkce"&&([o,h]=await ko(this.storage,this.storageKey,!0));try{return await Qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:h,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(m){if(await tr(this.storage,`${this.storageKey}-code-verifier`),Ve(m))return this._returnResult({data:null,error:m});throw m}}async getUserIdentities(){var e;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(Ve(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:o,error:h}=await this._useSession(async m=>{var x,A,E,v,T;const{data:O,error:j}=m;if(j)throw j;const U=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(x=e.options)===null||x===void 0?void 0:x.redirectTo,scopes:(A=e.options)===null||A===void 0?void 0:A.scopes,queryParams:(E=e.options)===null||E===void 0?void 0:E.queryParams,skipBrowserRedirect:!0});return await Qe(this.fetch,"GET",U,{headers:this.headers,jwt:(T=(v=O.session)===null||v===void 0?void 0:v.access_token)!==null&&T!==void 0?T:void 0})});if(h)throw h;return nr()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:e.provider,url:o?.url},error:null})}catch(o){if(Ve(o))return this._returnResult({data:{provider:e.provider,url:null},error:o});throw o}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var o;try{const{error:h,data:{session:m}}=i;if(h)throw h;const{options:x,provider:A,token:E,access_token:v,nonce:T}=e,O=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=m?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:A,id_token:E,access_token:v,nonce:T,link_identity:!0,gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:bi}),{data:j,error:U}=O;return U?this._returnResult({data:{user:null,session:null},error:U}):!j||!j.session||!j.user?this._returnResult({data:{user:null,session:null},error:new Io}):(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("USER_UPDATED",j.session)),this._returnResult({data:j,error:U}))}catch(h){if(await tr(this.storage,`${this.storageKey}-code-verifier`),Ve(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var o,h;const{data:m,error:x}=i;if(x)throw x;return await Qe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(h=(o=m.session)===null||o===void 0?void 0:o.access_token)!==null&&h!==void 0?h:void 0})})}catch(i){if(Ve(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await YE(async h=>(h>0&&await WE(200*Math.pow(2,h-1)),this._debug(i,"refreshing attempt",h),await Qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:bi})),(h,m)=>{const x=200*Math.pow(2,h);return m&&Uh(m)&&Date.now()+x-o<Vo})}catch(o){if(this._debug(i,"error",o),Ve(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",o),nr()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const h=await Is(this.storage,this.storageKey);if(h&&this.userStorage){let x=await Is(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!x&&(x={user:h.user},await Ho(this.userStorage,this.storageKey+"-user",x)),h.user=(e=x?.user)!==null&&e!==void 0?e:zh()}else if(h&&!h.user&&!h.user){const x=await Is(this.storage,this.storageKey+"-user");x&&x?.user?(h.user=x.user,await tr(this.storage,this.storageKey+"-user"),await Ho(this.storage,this.storageKey,h)):h.user=zh()}if(this._debug(o,"session from storage",h),!this._isValidSession(h)){this._debug(o,"session is not valid"),h!==null&&await this._removeSession();return}const m=((i=h.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<jh;if(this._debug(o,`session has${m?"":" not"} expired with margin of ${jh}s`),m){if(this.autoRefreshToken&&h.refresh_token){const{error:x}=await this._callRefreshToken(h.refresh_token);x&&(console.error(x),Uh(x)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",x),await this._removeSession()))}}else if(h.user&&h.user.__isUserNotAvailableProxy===!0)try{const{data:x,error:A}=await this._getUser(h.access_token);!A&&x?.user?(h.user=x.user,await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(x){console.error("Error getting user data:",x),this._debug(o,"error getting user data, skipping SIGNED_IN notification",x)}else await this._notifyAllSubscribers("SIGNED_IN",h)}catch(h){this._debug(o,"error",h),console.error(h);return}finally{this._debug(o,"end")}}async _callRefreshToken(e){var i,o;if(!e)throw new Fr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const h=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(h,"begin");try{this.refreshingDeferred=new Sd;const{data:m,error:x}=await this._refreshAccessToken(e);if(x)throw x;if(!m.session)throw new Fr;await this._saveSession(m.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",m.session);const A={data:m.session,error:null};return this.refreshingDeferred.resolve(A),A}catch(m){if(this._debug(h,"error",m),Ve(m)){const x={data:null,error:m};return Uh(m)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(x),x}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(m),m}finally{this.refreshingDeferred=null,this._debug(h,"end")}}async _notifyAllSubscribers(e,i,o=!0){const h=`#_notifyAllSubscribers(${e})`;this._debug(h,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:i});const m=[],x=Array.from(this.stateChangeEmitters.values()).map(async A=>{try{await A.callback(e,i)}catch(E){m.push(E)}});if(await Promise.all(x),m.length>0){for(let A=0;A<m.length;A+=1)console.error(m[A]);throw m[0]}}finally{this._debug(h,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await tr(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},e),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await Ho(this.userStorage,this.storageKey+"-user",{user:i.user});const h=Object.assign({},i);delete h.user;const m=J2(h);await Ho(this.storage,this.storageKey,m)}else{const h=J2(i);await Ho(this.storage,this.storageKey,h)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await tr(this.storage,this.storageKey),await tr(this.storage,this.storageKey+"-code-verifier"),await tr(this.storage,this.storageKey+"-user"),this.userStorage&&await tr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&nr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Vo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const h=Math.floor((o.expires_at*1e3-e)/Vo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${h} ticks, a tick lasts ${Vo}ms, refresh threshold is ${N0} ticks`),h<=N0&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Kp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,o){const h=[`provider=${encodeURIComponent(i)}`];if(o?.redirectTo&&h.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&h.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[m,x]=await ko(this.storage,this.storageKey),A=new URLSearchParams({code_challenge:`${encodeURIComponent(m)}`,code_challenge_method:`${encodeURIComponent(x)}`});h.push(A.toString())}if(o?.queryParams){const m=new URLSearchParams(o.queryParams);h.push(m.toString())}return o?.skipBrowserRedirect&&h.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${h.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var o;const{data:h,error:m}=i;return m?this._returnResult({data:null,error:m}):await Qe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=h?.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(Ve(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var o,h;const{data:m,error:x}=i;if(x)return this._returnResult({data:null,error:x});const A=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:E,error:v}=await Qe(this.fetch,"POST",`${this.url}/factors`,{body:A,headers:this.headers,jwt:(o=m?.session)===null||o===void 0?void 0:o.access_token});return v?this._returnResult({data:null,error:v}):(e.factorType==="totp"&&E.type==="totp"&&(!((h=E?.totp)===null||h===void 0)&&h.qr_code)&&(E.totp.qr_code=`data:image/svg+xml;utf-8,${E.totp.qr_code}`),this._returnResult({data:E,error:null}))})}catch(i){if(Ve(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var o;const{data:h,error:m}=i;if(m)return this._returnResult({data:null,error:m});const x=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?SS(e.webauthn.credential_response):AS(e.webauthn.credential_response)})}:{code:e.code}),{data:A,error:E}=await Qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:x,headers:this.headers,jwt:(o=h?.session)===null||o===void 0?void 0:o.access_token});return E?this._returnResult({data:null,error:E}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+A.expires_in},A)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",A),this._returnResult({data:A,error:E}))})}catch(i){if(Ve(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var o;const{data:h,error:m}=i;if(m)return this._returnResult({data:null,error:m});const x=await Qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(o=h?.session)===null||o===void 0?void 0:o.access_token});if(x.error)return x;const{data:A}=x;if(A.type!=="webauthn")return{data:A,error:null};switch(A.webauthn.type){case"create":return{data:Object.assign(Object.assign({},A),{webauthn:Object.assign(Object.assign({},A.webauthn),{credential_options:Object.assign(Object.assign({},A.webauthn.credential_options),{publicKey:vS(A.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},A),{webauthn:Object.assign(Object.assign({},A.webauthn),{credential_options:Object.assign(Object.assign({},A.webauthn.credential_options),{publicKey:ES(A.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(Ve(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:o}=await this._challenge({factorId:e.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:o}=await this.getUser();if(o)return{data:null,error:o};const h={all:[],phone:[],totp:[],webauthn:[]};for(const m of(e=i?.factors)!==null&&e!==void 0?e:[])h.all.push(m),m.status==="verified"&&h[m.factor_type].push(m);return{data:h,error:null}}async _getAuthenticatorAssuranceLevel(){var e,i;const{data:{session:o},error:h}=await this.getSession();if(h)return this._returnResult({data:null,error:h});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=Ph(o.access_token);let x=null;m.aal&&(x=m.aal);let A=x;((i=(e=o.user.factors)===null||e===void 0?void 0:e.filter(T=>T.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(A="aal2");const v=m.amr||[];return{data:{currentLevel:x,nextLevel:A,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:o},error:h}=i;return h?this._returnResult({data:null,error:h}):o?await Qe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:o.access_token,xform:m=>({data:m,error:null})}):this._returnResult({data:null,error:new Fr})})}catch(i){if(Ve(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async o=>{const{data:{session:h},error:m}=o;if(m)return this._returnResult({data:null,error:m});if(!h)return this._returnResult({data:null,error:new Fr});const x=await Qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:h.access_token,body:{action:"approve"},xform:A=>({data:A,error:null})});return x.data&&x.data.redirect_url&&nr()&&!i?.skipBrowserRedirect&&window.location.assign(x.data.redirect_url),x})}catch(o){if(Ve(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(e,i){try{return await this._useSession(async o=>{const{data:{session:h},error:m}=o;if(m)return this._returnResult({data:null,error:m});if(!h)return this._returnResult({data:null,error:new Fr});const x=await Qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:h.access_token,body:{action:"deny"},xform:A=>({data:A,error:null})});return x.data&&x.data.redirect_url&&nr()&&!i?.skipBrowserRedirect&&window.location.assign(x.data.redirect_url),x})}catch(o){if(Ve(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:o}=e;return o?this._returnResult({data:null,error:o}):i?await Qe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new Fr})})}catch(e){if(Ve(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:o},error:h}=i;return h?this._returnResult({data:null,error:h}):o?(await Qe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Fr})})}catch(i){if(Ve(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let o=i.keys.find(A=>A.kid===e);if(o)return o;const h=Date.now();if(o=this.jwks.keys.find(A=>A.kid===e),o&&this.jwks_cached_at+IE>h)return o;const{data:m,error:x}=await Qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(x)throw x;return!m.keys||m.keys.length===0||(this.jwks=m,this.jwks_cached_at=h,o=m.keys.find(A=>A.kid===e),!o)?null:o}async getClaims(e,i={}){try{let o=e;if(!o){const{data:U,error:G}=await this.getSession();if(G||!U.session)return this._returnResult({data:null,error:G});o=U.session.access_token}const{header:h,payload:m,signature:x,raw:{header:A,payload:E}}=Ph(o);i?.allowExpired||eS(m.exp);const v=!h.alg||h.alg.startsWith("HS")||!h.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(h.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!v){const{error:U}=await this.getUser(o);if(U)throw U;return{data:{claims:m,header:h,signature:x},error:null}}const T=tS(h.alg),O=await crypto.subtle.importKey("jwk",v,T,!0,["verify"]);if(!await crypto.subtle.verify(T,O,x,FE(`${A}.${E}`)))throw new k0("Invalid JWT signature");return{data:{claims:m,header:h,signature:x},error:null}}catch(o){if(Ve(o))return this._returnResult({data:null,error:o});throw o}}}yc.nextInstanceID={};const DS=yc,MS="2.90.1";let rc="";typeof Deno<"u"?rc="deno":typeof document<"u"?rc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rc="react-native":rc="node";const BS={"X-Client-Info":`supabase-js-${rc}/${MS}`},LS={headers:BS},jS={schema:"public"},US={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},PS={};function pc(a){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pc(a)}function zS(a,e){if(pc(a)!="object"||!a)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var o=i.call(a,e);if(pc(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function FS(a){var e=zS(a,"string");return pc(e)=="symbol"?e:e+""}function VS(a,e,i){return(e=FS(e))in a?Object.defineProperty(a,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[e]=i,a}function ay(a,e){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);e&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),i.push.apply(i,o)}return i}function En(a){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?ay(Object(i),!0).forEach(function(o){VS(a,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):ay(Object(i)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(i,o))})}return a}const HS=a=>a?(...e)=>a(...e):(...e)=>fetch(...e),GS=()=>Headers,qS=(a,e,i)=>{const o=HS(i),h=GS();return async(m,x)=>{var A;const E=(A=await e())!==null&&A!==void 0?A:a;let v=new h(x?.headers);return v.has("apikey")||v.set("apikey",a),v.has("Authorization")||v.set("Authorization",`Bearer ${E}`),o(m,En(En({},x),{},{headers:v}))}};function WS(a){return a.endsWith("/")?a:a+"/"}function YS(a,e){var i,o;const{db:h,auth:m,realtime:x,global:A}=a,{db:E,auth:v,realtime:T,global:O}=e,j={db:En(En({},E),h),auth:En(En({},v),m),realtime:En(En({},T),x),storage:{},global:En(En(En({},O),A),{},{headers:En(En({},(i=O?.headers)!==null&&i!==void 0?i:{}),(o=A?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return a.accessToken?j.accessToken=a.accessToken:delete j.accessToken,j}function XS(a){const e=a?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(WS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var ZS=class extends DS{constructor(a){super(a)}},KS=class{constructor(a,e,i){var o,h;this.supabaseUrl=a,this.supabaseKey=e;const m=XS(a);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const x=`sb-${m.hostname.split(".")[0]}-auth-token`,A={db:jS,realtime:PS,auth:En(En({},US),{},{storageKey:x}),global:LS},E=YS(i??{},A);if(this.storageKey=(o=E.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(h=E.global.headers)!==null&&h!==void 0?h:{},E.accessToken)this.accessToken=E.accessToken,this.auth=new Proxy({},{get:(T,O)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(O)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=E.auth)!==null&&v!==void 0?v:{},this.headers,E.global.fetch)}this.fetch=qS(e,this._getAccessToken.bind(this),E.global.fetch),this.realtime=this._initRealtimeClient(En({headers:this.headers,accessToken:this._getAccessToken.bind(this)},E.realtime)),this.accessToken&&this.accessToken().then(T=>this.realtime.setAuth(T)).catch(T=>console.warn("Failed to set initial Realtime auth token:",T)),this.rest=new N3(new URL("rest/v1",m).href,{headers:this.headers,schema:E.db.schema,fetch:this.fetch}),this.storage=new CE(this.storageUrl.href,this.headers,this.fetch,i?.storage),E.accessToken||this._listenForAuthEvents()}get functions(){return new A3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,e={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,e,i)}channel(a,e={config:{}}){return this.realtime.channel(a,e)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a=this,e,i;if(a.accessToken)return await a.accessToken();const{data:o}=await a.auth.getSession();return(e=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&e!==void 0?e:a.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:e,detectSessionInUrl:i,storage:o,userStorage:h,storageKey:m,flowType:x,lock:A,debug:E,throwOnError:v},T,O){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ZS({url:this.authUrl.href,headers:En(En({},j),T),storageKey:m,autoRefreshToken:a,persistSession:e,detectSessionInUrl:i,storage:o,userStorage:h,flowType:x,lock:A,debug:E,throwOnError:v,fetch:O,hasCustomAuthorizationHeader:Object.keys(this.headers).some(U=>U.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new W3(this.realtimeUrl.href,En(En({},a),{},{params:En(En({},{apikey:this.supabaseKey}),a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,e)=>{this._handleTokenChanged(a,"CLIENT",e?.access_token)})}_handleTokenChanged(a,e,i){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const QS=(a,e,i)=>new KS(a,e,i);function JS(){if(typeof window<"u")return!1;const a=globalThis.process;if(!a)return!1;const e=a.version;if(e==null)return!1;const i=e.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}JS()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $S="https://dhutlzgnupkxfjcfswnl.supabase.co",eA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRodXRsemdudXBreGZqY2Zzd25sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg4MzA0MDUsImV4cCI6MjA4NDQwNjQwNX0.RM6oCl4i7sd1Nrw3tsdfHJqkDQ4g0A2H4GXnElT-kho",Pt=QS($S,eA),Rn={async createPantry(a,e){if(!Pt)return{error:"Supabase not configured"};const{data:i,error:o}=await Pt.from("pantries").insert([{name:a,pin:e}]).select();return{data:i,error:o}},async verifyPantry(a,e){if(!Pt)return{error:"Supabase not configured"};const{data:i,error:o}=await Pt.from("pantries").select("*").eq("id",a).eq("pin",e).single();return{data:i,error:o}},async getLocations(a){if(!Pt)return{error:"Supabase not configured"};const{data:e,error:i}=await Pt.from("locations").select("*").eq("pantry_id",a).order("created_at",{ascending:!0});return{data:e,error:i}},async createLocation(a,e){if(!Pt)return{error:"Supabase not configured"};const{data:i,error:o}=await Pt.from("locations").insert([{pantry_id:a,name:e}]).select();return{data:i,error:o}},async deleteLocation(a){if(!Pt)return{error:"Supabase not configured"};const{error:e}=await Pt.from("locations").delete().eq("id",a);return{error:e}},async getLocations(a){if(!Pt)return{error:"Supabase not configured"};const{data:e,error:i}=await Pt.from("locations").select("*").eq("pantry_id",a).order("created_at",{ascending:!0});return{data:e,error:i}},async createLocation(a,e){if(!Pt)return{error:"Supabase not configured"};const{data:i,error:o}=await Pt.from("locations").insert([{pantry_id:a,name:e}]).select();return{data:i,error:o}},async deleteLocation(a){if(!Pt)return{error:"Supabase not configured"};const{error:e}=await Pt.from("locations").delete().eq("id",a);return{error:e}},async addProduct(a){if(!Pt)return{error:"Supabase not configured"};const{data:e,error:i}=await Pt.from("products").insert([a]).select();return{data:e,error:i}},async getProducts(a){if(!Pt)return{error:"Supabase not configured"};let e=Pt.from("products").select("*").order("expiry_date",{ascending:!0});a&&(e=e.eq("pantry_id",a));const{data:i,error:o}=await e;return{data:i,error:o}},async updateProduct(a,e){if(!Pt)return{error:"Supabase not configured"};const{data:i,error:o}=await Pt.from("products").update(e).eq("id",a).select();return{data:i,error:o}},async deleteProduct(a){if(!Pt)return{error:"Supabase not configured"};const{error:e}=await Pt.from("products").delete().eq("id",a);return{error:e}},async deleteProductsByLocation(a){if(!Pt)return{error:"Supabase not configured"};const{error:e}=await Pt.from("products").delete().eq("location_id",a);return{error:e}},async getStats(a){if(!Pt)return{error:"Supabase not configured"};const{data:e,error:i}=await Pt.from("stats").select("*").eq("month",a).single();return{data:e,error:i}},async updateStats(a,e){if(!Pt)return{error:"Supabase not configured"};const{data:i,error:o}=await Pt.from("stats").upsert({month:a,...e},{onConflict:"month"}).select();return{data:i,error:o}}};class Vs extends Error{}class tA extends Vs{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class nA extends Vs{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class rA extends Vs{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class qo extends Vs{}class $p extends Vs{constructor(e){super(`Invalid unit ${e}`)}}class ir extends Vs{}class Qa extends Vs{constructor(){super("Zone is an abstract class")}}const Ne="numeric",Ai="short",qr="long",ud={year:Ne,month:Ne,day:Ne},ex={year:Ne,month:Ai,day:Ne},iA={year:Ne,month:Ai,day:Ne,weekday:Ai},tx={year:Ne,month:qr,day:Ne},nx={year:Ne,month:qr,day:Ne,weekday:qr},rx={hour:Ne,minute:Ne},ix={hour:Ne,minute:Ne,second:Ne},ax={hour:Ne,minute:Ne,second:Ne,timeZoneName:Ai},sx={hour:Ne,minute:Ne,second:Ne,timeZoneName:qr},ox={hour:Ne,minute:Ne,hourCycle:"h23"},lx={hour:Ne,minute:Ne,second:Ne,hourCycle:"h23"},cx={hour:Ne,minute:Ne,second:Ne,hourCycle:"h23",timeZoneName:Ai},ux={hour:Ne,minute:Ne,second:Ne,hourCycle:"h23",timeZoneName:qr},dx={year:Ne,month:Ne,day:Ne,hour:Ne,minute:Ne},fx={year:Ne,month:Ne,day:Ne,hour:Ne,minute:Ne,second:Ne},hx={year:Ne,month:Ai,day:Ne,hour:Ne,minute:Ne},gx={year:Ne,month:Ai,day:Ne,hour:Ne,minute:Ne,second:Ne},aA={year:Ne,month:Ai,day:Ne,weekday:Ai,hour:Ne,minute:Ne},mx={year:Ne,month:qr,day:Ne,hour:Ne,minute:Ne,timeZoneName:Ai},yx={year:Ne,month:qr,day:Ne,hour:Ne,minute:Ne,second:Ne,timeZoneName:Ai},px={year:Ne,month:qr,day:Ne,weekday:qr,hour:Ne,minute:Ne,timeZoneName:qr},xx={year:Ne,month:qr,day:Ne,weekday:qr,hour:Ne,minute:Ne,second:Ne,timeZoneName:qr};class vc{get type(){throw new Qa}get name(){throw new Qa}get ianaName(){return this.name}get isUniversal(){throw new Qa}offsetName(e,i){throw new Qa}formatOffset(e,i){throw new Qa}offset(e){throw new Qa}equals(e){throw new Qa}get isValid(){throw new Qa}}let Vh=null;class Ad extends vc{static get instance(){return Vh===null&&(Vh=new Ad),Vh}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:o}){return Nx(e,i,o)}formatOffset(e,i){return uc(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const D0=new Map;function sA(a){let e=D0.get(a);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),D0.set(a,e)),e}const oA={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function lA(a,e){const i=a.format(e).replace(/\u200E/g,""),o=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,h,m,x,A,E,v,T]=o;return[x,h,m,A,E,v,T]}function cA(a,e){const i=a.formatToParts(e),o=[];for(let h=0;h<i.length;h++){const{type:m,value:x}=i[h],A=oA[m];m==="era"?o[A]=x:rt(A)||(o[A]=parseInt(x,10))}return o}const Hh=new Map;class da extends vc{static create(e){let i=Hh.get(e);return i===void 0&&Hh.set(e,i=new da(e)),i}static resetCache(){Hh.clear(),D0.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=da.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:o}){return Nx(e,i,o,this.name)}formatOffset(e,i){return uc(this.offset(e),i)}offset(e){if(!this.valid)return NaN;const i=new Date(e);if(isNaN(i))return NaN;const o=sA(this.name);let[h,m,x,A,E,v,T]=o.formatToParts?cA(o,i):lA(o,i);A==="BC"&&(h=-Math.abs(h)+1);const j=Cd({year:h,month:m,day:x,hour:E===24?0:E,minute:v,second:T,millisecond:0});let U=+i;const G=U%1e3;return U-=G>=0?G:1e3+G,(j-U)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let sy={};function uA(a,e={}){const i=JSON.stringify([a,e]);let o=sy[i];return o||(o=new Intl.ListFormat(a,e),sy[i]=o),o}const M0=new Map;function B0(a,e={}){const i=JSON.stringify([a,e]);let o=M0.get(i);return o===void 0&&(o=new Intl.DateTimeFormat(a,e),M0.set(i,o)),o}const L0=new Map;function dA(a,e={}){const i=JSON.stringify([a,e]);let o=L0.get(i);return o===void 0&&(o=new Intl.NumberFormat(a,e),L0.set(i,o)),o}const j0=new Map;function fA(a,e={}){const{base:i,...o}=e,h=JSON.stringify([a,o]);let m=j0.get(h);return m===void 0&&(m=new Intl.RelativeTimeFormat(a,e),j0.set(h,m)),m}let ic=null;function hA(){return ic||(ic=new Intl.DateTimeFormat().resolvedOptions().locale,ic)}const U0=new Map;function wx(a){let e=U0.get(a);return e===void 0&&(e=new Intl.DateTimeFormat(a).resolvedOptions(),U0.set(a,e)),e}const P0=new Map;function gA(a){let e=P0.get(a);if(!e){const i=new Intl.Locale(a);e="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,"minimalDays"in e||(e={...bx,...e}),P0.set(a,e)}return e}function mA(a){const e=a.indexOf("-x-");e!==-1&&(a=a.substring(0,e));const i=a.indexOf("-u-");if(i===-1)return[a];{let o,h;try{o=B0(a).resolvedOptions(),h=a}catch{const E=a.substring(0,i);o=B0(E).resolvedOptions(),h=E}const{numberingSystem:m,calendar:x}=o;return[h,m,x]}}function yA(a,e,i){return(i||e)&&(a.includes("-u-")||(a+="-u"),i&&(a+=`-ca-${i}`),e&&(a+=`-nu-${e}`)),a}function pA(a){const e=[];for(let i=1;i<=12;i++){const o=et.utc(2009,i,1);e.push(a(o))}return e}function xA(a){const e=[];for(let i=1;i<=7;i++){const o=et.utc(2016,11,13+i);e.push(a(o))}return e}function Xu(a,e,i,o){const h=a.listingMode();return h==="error"?null:h==="en"?i(e):o(e)}function wA(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||wx(a.locale).numberingSystem==="latn"}class bA{constructor(e,i,o){this.padTo=o.padTo||0,this.floor=o.floor||!1;const{padTo:h,floor:m,...x}=o;if(!i||Object.keys(x).length>0){const A={useGrouping:!1,...o};o.padTo>0&&(A.minimumIntegerDigits=o.padTo),this.inf=dA(e,A)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):o1(e,3);return Un(i,this.padTo)}}}class vA{constructor(e,i,o){this.opts=o,this.originalZone=void 0;let h;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const x=-1*(e.offset/60),A=x>=0?`Etc/GMT+${x}`:`Etc/GMT${x}`;e.offset!==0&&da.create(A).valid?(h=A,this.dt=e):(h="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,h=e.zone.name):(h="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const m={...this.opts};m.timeZone=m.timeZone||h,this.dtf=B0(i,m)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(i=>{if(i.type==="timeZoneName"){const o=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:o}}else return i}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class EA{constructor(e,i,o){this.opts={style:"long",...o},!i&&Tx()&&(this.rtf=fA(e,o))}format(e,i){return this.rtf?this.rtf.format(e,i):GA(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}const bx={firstDay:1,minimalDays:4,weekend:[6,7]};class zt{static fromOpts(e){return zt.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,i,o,h,m=!1){const x=e||Sn.defaultLocale,A=x||(m?"en-US":hA()),E=i||Sn.defaultNumberingSystem,v=o||Sn.defaultOutputCalendar,T=F0(h)||Sn.defaultWeekSettings;return new zt(A,E,v,T,x)}static resetCache(){ic=null,M0.clear(),L0.clear(),j0.clear(),U0.clear(),P0.clear()}static fromObject({locale:e,numberingSystem:i,outputCalendar:o,weekSettings:h}={}){return zt.create(e,i,o,h)}constructor(e,i,o,h,m){const[x,A,E]=mA(e);this.locale=x,this.numberingSystem=i||A||null,this.outputCalendar=o||E||null,this.weekSettings=h,this.intl=yA(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=m,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=wA(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:zt.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,F0(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1){return Xu(this,e,kx,()=>{const o=this.intl==="ja"||this.intl.startsWith("ja-");i&=!o;const h=i?{month:e,day:"numeric"}:{month:e},m=i?"format":"standalone";if(!this.monthsCache[m][e]){const x=o?A=>this.dtFormatter(A,h).format():A=>this.extract(A,h,"month");this.monthsCache[m][e]=pA(x)}return this.monthsCache[m][e]})}weekdays(e,i=!1){return Xu(this,e,Bx,()=>{const o=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},h=i?"format":"standalone";return this.weekdaysCache[h][e]||(this.weekdaysCache[h][e]=xA(m=>this.extract(m,o,"weekday"))),this.weekdaysCache[h][e]})}meridiems(){return Xu(this,void 0,()=>Lx,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[et.utc(2016,11,13,9),et.utc(2016,11,13,19)].map(i=>this.extract(i,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Xu(this,e,jx,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[et.utc(-40,1,1),et.utc(2017,1,1)].map(o=>this.extract(o,i,"era"))),this.eraCache[e]})}extract(e,i,o){const h=this.dtFormatter(e,i),m=h.formatToParts(),x=m.find(A=>A.type.toLowerCase()===o);return x?x.value:null}numberFormatter(e={}){return new bA(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new vA(e,this.intl,i)}relFormatter(e={}){return new EA(this.intl,this.isEnglish(),e)}listFormatter(e={}){return uA(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||wx(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Ox()?gA(this.locale):bx}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Gh=null;class mr extends vc{static get utcInstance(){return Gh===null&&(Gh=new mr(0)),Gh}static instance(e){return e===0?mr.utcInstance:new mr(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new mr(Td(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${uc(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${uc(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return uc(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class SA extends vc{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function rs(a,e){if(rt(a)||a===null)return e;if(a instanceof vc)return a;if(NA(a)){const i=a.toLowerCase();return i==="default"?e:i==="local"||i==="system"?Ad.instance:i==="utc"||i==="gmt"?mr.utcInstance:mr.parseSpecifier(i)||da.create(a)}else return is(a)?mr.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new SA(a)}const r1={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},oy={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},AA=r1.hanidec.replace(/[\[|\]]/g,"").split("");function _A(a){let e=parseInt(a,10);if(isNaN(e)){e="";for(let i=0;i<a.length;i++){const o=a.charCodeAt(i);if(a[i].search(r1.hanidec)!==-1)e+=AA.indexOf(a[i]);else for(const h in oy){const[m,x]=oy[h];o>=m&&o<=x&&(e+=o-m)}}return parseInt(e,10)}else return e}const z0=new Map;function CA(){z0.clear()}function xi({numberingSystem:a},e=""){const i=a||"latn";let o=z0.get(i);o===void 0&&(o=new Map,z0.set(i,o));let h=o.get(e);return h===void 0&&(h=new RegExp(`${r1[i]}${e}`),o.set(e,h)),h}let ly=()=>Date.now(),cy="system",uy=null,dy=null,fy=null,hy=60,gy,my=null;class Sn{static get now(){return ly}static set now(e){ly=e}static set defaultZone(e){cy=e}static get defaultZone(){return rs(cy,Ad.instance)}static get defaultLocale(){return uy}static set defaultLocale(e){uy=e}static get defaultNumberingSystem(){return dy}static set defaultNumberingSystem(e){dy=e}static get defaultOutputCalendar(){return fy}static set defaultOutputCalendar(e){fy=e}static get defaultWeekSettings(){return my}static set defaultWeekSettings(e){my=F0(e)}static get twoDigitCutoffYear(){return hy}static set twoDigitCutoffYear(e){hy=e%100}static get throwOnInvalid(){return gy}static set throwOnInvalid(e){gy=e}static resetCaches(){zt.resetCache(),da.resetCache(),et.resetCache(),CA()}}class Si{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const vx=[0,31,59,90,120,151,181,212,243,273,304,334],Ex=[0,31,60,91,121,152,182,213,244,274,305,335];function oi(a,e){return new Si("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${a}, which is invalid`)}function i1(a,e,i){const o=new Date(Date.UTC(a,e-1,i));a<100&&a>=0&&o.setUTCFullYear(o.getUTCFullYear()-1900);const h=o.getUTCDay();return h===0?7:h}function Sx(a,e,i){return i+(Ec(a)?Ex:vx)[e-1]}function Ax(a,e){const i=Ec(a)?Ex:vx,o=i.findIndex(m=>m<e),h=e-i[o];return{month:o+1,day:h}}function a1(a,e){return(a-e+7)%7+1}function dd(a,e=4,i=1){const{year:o,month:h,day:m}=a,x=Sx(o,h,m),A=a1(i1(o,h,m),i);let E=Math.floor((x-A+14-e)/7),v;return E<1?(v=o-1,E=xc(v,e,i)):E>xc(o,e,i)?(v=o+1,E=1):v=o,{weekYear:v,weekNumber:E,weekday:A,...Od(a)}}function yy(a,e=4,i=1){const{weekYear:o,weekNumber:h,weekday:m}=a,x=a1(i1(o,1,e),i),A=Xo(o);let E=h*7+m-x-7+e,v;E<1?(v=o-1,E+=Xo(v)):E>A?(v=o+1,E-=Xo(o)):v=o;const{month:T,day:O}=Ax(v,E);return{year:v,month:T,day:O,...Od(a)}}function qh(a){const{year:e,month:i,day:o}=a,h=Sx(e,i,o);return{year:e,ordinal:h,...Od(a)}}function py(a){const{year:e,ordinal:i}=a,{month:o,day:h}=Ax(e,i);return{year:e,month:o,day:h,...Od(a)}}function xy(a,e){if(!rt(a.localWeekday)||!rt(a.localWeekNumber)||!rt(a.localWeekYear)){if(!rt(a.weekday)||!rt(a.weekNumber)||!rt(a.weekYear))throw new qo("Cannot mix locale-based week fields with ISO-based week fields");return rt(a.localWeekday)||(a.weekday=a.localWeekday),rt(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),rt(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function TA(a,e=4,i=1){const o=_d(a.weekYear),h=li(a.weekNumber,1,xc(a.weekYear,e,i)),m=li(a.weekday,1,7);return o?h?m?!1:oi("weekday",a.weekday):oi("week",a.weekNumber):oi("weekYear",a.weekYear)}function OA(a){const e=_d(a.year),i=li(a.ordinal,1,Xo(a.year));return e?i?!1:oi("ordinal",a.ordinal):oi("year",a.year)}function _x(a){const e=_d(a.year),i=li(a.month,1,12),o=li(a.day,1,fd(a.year,a.month));return e?i?o?!1:oi("day",a.day):oi("month",a.month):oi("year",a.year)}function Cx(a){const{hour:e,minute:i,second:o,millisecond:h}=a,m=li(e,0,23)||e===24&&i===0&&o===0&&h===0,x=li(i,0,59),A=li(o,0,59),E=li(h,0,999);return m?x?A?E?!1:oi("millisecond",h):oi("second",o):oi("minute",i):oi("hour",e)}function rt(a){return typeof a>"u"}function is(a){return typeof a=="number"}function _d(a){return typeof a=="number"&&a%1===0}function NA(a){return typeof a=="string"}function RA(a){return Object.prototype.toString.call(a)==="[object Date]"}function Tx(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Ox(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function IA(a){return Array.isArray(a)?a:[a]}function wy(a,e,i){if(a.length!==0)return a.reduce((o,h)=>{const m=[e(h),h];return o&&i(o[0],m[0])===o[0]?o:m},null)[1]}function kA(a,e){return e.reduce((i,o)=>(i[o]=a[o],i),{})}function Qo(a,e){return Object.prototype.hasOwnProperty.call(a,e)}function F0(a){if(a==null)return null;if(typeof a!="object")throw new ir("Week settings must be an object");if(!li(a.firstDay,1,7)||!li(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(e=>!li(e,1,7)))throw new ir("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function li(a,e,i){return _d(a)&&a>=e&&a<=i}function DA(a,e){return a-e*Math.floor(a/e)}function Un(a,e=2){const i=a<0;let o;return i?o="-"+(""+-a).padStart(e,"0"):o=(""+a).padStart(e,"0"),o}function ts(a){if(!(rt(a)||a===null||a===""))return parseInt(a,10)}function ks(a){if(!(rt(a)||a===null||a===""))return parseFloat(a)}function s1(a){if(!(rt(a)||a===null||a==="")){const e=parseFloat("0."+a)*1e3;return Math.floor(e)}}function o1(a,e,i="round"){const o=10**e;switch(i){case"expand":return a>0?Math.ceil(a*o)/o:Math.floor(a*o)/o;case"trunc":return Math.trunc(a*o)/o;case"round":return Math.round(a*o)/o;case"floor":return Math.floor(a*o)/o;case"ceil":return Math.ceil(a*o)/o;default:throw new RangeError(`Value rounding ${i} is out of range`)}}function Ec(a){return a%4===0&&(a%100!==0||a%400===0)}function Xo(a){return Ec(a)?366:365}function fd(a,e){const i=DA(e-1,12)+1,o=a+(e-i)/12;return i===2?Ec(o)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function Cd(a){let e=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(e=new Date(e),e.setUTCFullYear(a.year,a.month-1,a.day)),+e}function by(a,e,i){return-a1(i1(a,1,e),i)+e-1}function xc(a,e=4,i=1){const o=by(a,e,i),h=by(a+1,e,i);return(Xo(a)-o+h)/7}function V0(a){return a>99?a:a>Sn.twoDigitCutoffYear?1900+a:2e3+a}function Nx(a,e,i,o=null){const h=new Date(a),m={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};o&&(m.timeZone=o);const x={timeZoneName:e,...m},A=new Intl.DateTimeFormat(i,x).formatToParts(h).find(E=>E.type.toLowerCase()==="timezonename");return A?A.value:null}function Td(a,e){let i=parseInt(a,10);Number.isNaN(i)&&(i=0);const o=parseInt(e,10)||0,h=i<0||Object.is(i,-0)?-o:o;return i*60+h}function Rx(a){const e=Number(a);if(typeof a=="boolean"||a===""||!Number.isFinite(e))throw new ir(`Invalid unit value ${a}`);return e}function hd(a,e){const i={};for(const o in a)if(Qo(a,o)){const h=a[o];if(h==null)continue;i[e(o)]=Rx(h)}return i}function uc(a,e){const i=Math.trunc(Math.abs(a/60)),o=Math.trunc(Math.abs(a%60)),h=a>=0?"+":"-";switch(e){case"short":return`${h}${Un(i,2)}:${Un(o,2)}`;case"narrow":return`${h}${i}${o>0?`:${o}`:""}`;case"techie":return`${h}${Un(i,2)}${Un(o,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Od(a){return kA(a,["hour","minute","second","millisecond"])}const MA=["January","February","March","April","May","June","July","August","September","October","November","December"],Ix=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],BA=["J","F","M","A","M","J","J","A","S","O","N","D"];function kx(a){switch(a){case"narrow":return[...BA];case"short":return[...Ix];case"long":return[...MA];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Dx=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Mx=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],LA=["M","T","W","T","F","S","S"];function Bx(a){switch(a){case"narrow":return[...LA];case"short":return[...Mx];case"long":return[...Dx];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Lx=["AM","PM"],jA=["Before Christ","Anno Domini"],UA=["BC","AD"],PA=["B","A"];function jx(a){switch(a){case"narrow":return[...PA];case"short":return[...UA];case"long":return[...jA];default:return null}}function zA(a){return Lx[a.hour<12?0:1]}function FA(a,e){return Bx(e)[a.weekday-1]}function VA(a,e){return kx(e)[a.month-1]}function HA(a,e){return jx(e)[a.year<0?0:1]}function GA(a,e,i="always",o=!1){const h={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},m=["hours","minutes","seconds"].indexOf(a)===-1;if(i==="auto"&&m){const O=a==="days";switch(e){case 1:return O?"tomorrow":`next ${h[a][0]}`;case-1:return O?"yesterday":`last ${h[a][0]}`;case 0:return O?"today":`this ${h[a][0]}`}}const x=Object.is(e,-0)||e<0,A=Math.abs(e),E=A===1,v=h[a],T=o?E?v[1]:v[2]||v[1]:E?h[a][0]:a;return x?`${A} ${T} ago`:`in ${A} ${T}`}function vy(a,e){let i="";for(const o of a)o.literal?i+=o.val:i+=e(o.val);return i}const qA={D:ud,DD:ex,DDD:tx,DDDD:nx,t:rx,tt:ix,ttt:ax,tttt:sx,T:ox,TT:lx,TTT:cx,TTTT:ux,f:dx,ff:hx,fff:mx,ffff:px,F:fx,FF:gx,FFF:yx,FFFF:xx};class ar{static create(e,i={}){return new ar(e,i)}static parseFormat(e){let i=null,o="",h=!1;const m=[];for(let x=0;x<e.length;x++){const A=e.charAt(x);A==="'"?((o.length>0||h)&&m.push({literal:h||/^\s+$/.test(o),val:o===""?"'":o}),i=null,o="",h=!h):h||A===i?o+=A:(o.length>0&&m.push({literal:/^\s+$/.test(o),val:o}),o=A,i=A)}return o.length>0&&m.push({literal:h||/^\s+$/.test(o),val:o}),m}static macroTokenToFormatOpts(e){return qA[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}dtFormatter(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i})}formatDateTime(e,i){return this.dtFormatter(e,i).format()}formatDateTimeParts(e,i){return this.dtFormatter(e,i).formatToParts()}formatInterval(e,i){return this.dtFormatter(e.start,i).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i){return this.dtFormatter(e,i).resolvedOptions()}num(e,i=0,o=void 0){if(this.opts.forceSimple)return Un(e,i);const h={...this.opts};return i>0&&(h.padTo=i),o&&(h.signDisplay=o),this.loc.numberFormatter(h).format(e)}formatDateTimeFromString(e,i){const o=this.loc.listingMode()==="en",h=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",m=(U,G)=>this.loc.extract(e,U,G),x=U=>e.isOffsetFixed&&e.offset===0&&U.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,U.format):"",A=()=>o?zA(e):m({hour:"numeric",hourCycle:"h12"},"dayperiod"),E=(U,G)=>o?VA(e,U):m(G?{month:U}:{month:U,day:"numeric"},"month"),v=(U,G)=>o?FA(e,U):m(G?{weekday:U}:{weekday:U,month:"long",day:"numeric"},"weekday"),T=U=>{const G=ar.macroTokenToFormatOpts(U);return G?this.formatWithSystemDefault(e,G):U},O=U=>o?HA(e,U):m({era:U},"era"),j=U=>{switch(U){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return x({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return x({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return x({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return A();case"d":return h?m({day:"numeric"},"day"):this.num(e.day);case"dd":return h?m({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return v("short",!0);case"cccc":return v("long",!0);case"ccccc":return v("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return v("short",!1);case"EEEE":return v("long",!1);case"EEEEE":return v("narrow",!1);case"L":return h?m({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return h?m({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return E("short",!0);case"LLLL":return E("long",!0);case"LLLLL":return E("narrow",!0);case"M":return h?m({month:"numeric"},"month"):this.num(e.month);case"MM":return h?m({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return E("short",!1);case"MMMM":return E("long",!1);case"MMMMM":return E("narrow",!1);case"y":return h?m({year:"numeric"},"year"):this.num(e.year);case"yy":return h?m({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return h?m({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return h?m({year:"numeric"},"year"):this.num(e.year,6);case"G":return O("short");case"GG":return O("long");case"GGGGG":return O("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return T(U)}};return vy(ar.parseFormat(i),j)}formatDurationFromString(e,i){const o=this.opts.signMode==="negativeLargestOnly"?-1:1,h=T=>{switch(T[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},m=(T,O)=>j=>{const U=h(j);if(U){const G=O.isNegativeDuration&&U!==O.largestUnit?o:1;let H;return this.opts.signMode==="negativeLargestOnly"&&U!==O.largestUnit?H="never":this.opts.signMode==="all"?H="always":H="auto",this.num(T.get(U)*G,j.length,H)}else return j},x=ar.parseFormat(i),A=x.reduce((T,{literal:O,val:j})=>O?T:T.concat(j),[]),E=e.shiftTo(...A.map(h).filter(T=>T)),v={isNegativeDuration:E<0,largestUnit:Object.keys(E.values)[0]};return vy(x,m(E,v))}}const Ux=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Jo(...a){const e=a.reduce((i,o)=>i+o.source,"");return RegExp(`^${e}$`)}function $o(...a){return e=>a.reduce(([i,o,h],m)=>{const[x,A,E]=m(e,h);return[{...i,...x},A||o,E]},[{},null,1]).slice(0,2)}function el(a,...e){if(a==null)return[null,null];for(const[i,o]of e){const h=i.exec(a);if(h)return o(h)}return[null,null]}function Px(...a){return(e,i)=>{const o={};let h;for(h=0;h<a.length;h++)o[a[h]]=ts(e[i+h]);return[o,null,i+h]}}const zx=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,WA=`(?:${zx.source}?(?:\\[(${Ux.source})\\])?)?`,l1=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Fx=RegExp(`${l1.source}${WA}`),c1=RegExp(`(?:[Tt]${Fx.source})?`),YA=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,XA=/(\d{4})-?W(\d\d)(?:-?(\d))?/,ZA=/(\d{4})-?(\d{3})/,KA=Px("weekYear","weekNumber","weekDay"),QA=Px("year","ordinal"),JA=/(\d{4})-(\d\d)-(\d\d)/,Vx=RegExp(`${l1.source} ?(?:${zx.source}|(${Ux.source}))?`),$A=RegExp(`(?: ${Vx.source})?`);function Zo(a,e,i){const o=a[e];return rt(o)?i:ts(o)}function e_(a,e){return[{year:Zo(a,e),month:Zo(a,e+1,1),day:Zo(a,e+2,1)},null,e+3]}function tl(a,e){return[{hours:Zo(a,e,0),minutes:Zo(a,e+1,0),seconds:Zo(a,e+2,0),milliseconds:s1(a[e+3])},null,e+4]}function Sc(a,e){const i=!a[e]&&!a[e+1],o=Td(a[e+1],a[e+2]),h=i?null:mr.instance(o);return[{},h,e+3]}function Ac(a,e){const i=a[e]?da.create(a[e]):null;return[{},i,e+1]}const t_=RegExp(`^T?${l1.source}$`),n_=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function r_(a){const[e,i,o,h,m,x,A,E,v]=a,T=e[0]==="-",O=E&&E[0]==="-",j=(U,G=!1)=>U!==void 0&&(G||U&&T)?-U:U;return[{years:j(ks(i)),months:j(ks(o)),weeks:j(ks(h)),days:j(ks(m)),hours:j(ks(x)),minutes:j(ks(A)),seconds:j(ks(E),E==="-0"),milliseconds:j(s1(v),O)}]}const i_={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function u1(a,e,i,o,h,m,x){const A={year:e.length===2?V0(ts(e)):ts(e),month:Ix.indexOf(i)+1,day:ts(o),hour:ts(h),minute:ts(m)};return x&&(A.second=ts(x)),a&&(A.weekday=a.length>3?Dx.indexOf(a)+1:Mx.indexOf(a)+1),A}const a_=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function s_(a){const[,e,i,o,h,m,x,A,E,v,T,O]=a,j=u1(e,h,o,i,m,x,A);let U;return E?U=i_[E]:v?U=0:U=Td(T,O),[j,new mr(U)]}function o_(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const l_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,c_=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,u_=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Ey(a){const[,e,i,o,h,m,x,A]=a;return[u1(e,h,o,i,m,x,A),mr.utcInstance]}function d_(a){const[,e,i,o,h,m,x,A]=a;return[u1(e,A,i,o,h,m,x),mr.utcInstance]}const f_=Jo(YA,c1),h_=Jo(XA,c1),g_=Jo(ZA,c1),m_=Jo(Fx),Hx=$o(e_,tl,Sc,Ac),y_=$o(KA,tl,Sc,Ac),p_=$o(QA,tl,Sc,Ac),x_=$o(tl,Sc,Ac);function w_(a){return el(a,[f_,Hx],[h_,y_],[g_,p_],[m_,x_])}function b_(a){return el(o_(a),[a_,s_])}function v_(a){return el(a,[l_,Ey],[c_,Ey],[u_,d_])}function E_(a){return el(a,[n_,r_])}const S_=$o(tl);function A_(a){return el(a,[t_,S_])}const __=Jo(JA,$A),C_=Jo(Vx),T_=$o(tl,Sc,Ac);function O_(a){return el(a,[__,Hx],[C_,T_])}const Sy="Invalid Duration",Gx={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},N_={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...Gx},si=146097/400,Lo=146097/4800,R_={years:{quarters:4,months:12,weeks:si/7,days:si,hours:si*24,minutes:si*24*60,seconds:si*24*60*60,milliseconds:si*24*60*60*1e3},quarters:{months:3,weeks:si/28,days:si/4,hours:si*24/4,minutes:si*24*60/4,seconds:si*24*60*60/4,milliseconds:si*24*60*60*1e3/4},months:{weeks:Lo/7,days:Lo,hours:Lo*24,minutes:Lo*24*60,seconds:Lo*24*60*60,milliseconds:Lo*24*60*60*1e3},...Gx},zs=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],I_=zs.slice(0).reverse();function oa(a,e,i=!1){const o={values:i?e.values:{...a.values,...e.values||{}},loc:a.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||a.conversionAccuracy,matrix:e.matrix||a.matrix};return new Ot(o)}function qx(a,e){let i=e.milliseconds??0;for(const o of I_.slice(1))e[o]&&(i+=e[o]*a[o].milliseconds);return i}function Ay(a,e){const i=qx(a,e)<0?-1:1;zs.reduceRight((o,h)=>{if(rt(e[h]))return o;if(o){const m=e[o]*i,x=a[h][o],A=Math.floor(m/x);e[h]+=A*i,e[o]-=A*x*i}return h},null),zs.reduce((o,h)=>{if(rt(e[h]))return o;if(o){const m=e[o]%1;e[o]-=m,e[h]+=m*a[o][h]}return h},null)}function _y(a){const e={};for(const[i,o]of Object.entries(a))o!==0&&(e[i]=o);return e}class Ot{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let o=i?R_:N_;e.matrix&&(o=e.matrix),this.values=e.values,this.loc=e.loc||zt.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=o,this.isLuxonDuration=!0}static fromMillis(e,i){return Ot.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new ir(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Ot({values:hd(e,Ot.normalizeUnit),loc:zt.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(is(e))return Ot.fromMillis(e);if(Ot.isDuration(e))return e;if(typeof e=="object")return Ot.fromObject(e);throw new ir(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[o]=E_(e);return o?Ot.fromObject(o,i):Ot.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[o]=A_(e);return o?Ot.fromObject(o,i):Ot.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new ir("need to specify a reason the Duration is invalid");const o=e instanceof Si?e:new Si(e,i);if(Sn.throwOnInvalid)throw new rA(o);return new Ot({invalid:o})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new $p(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const o={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?ar.create(this.loc,o).formatDurationFromString(this,e):Sy}toHuman(e={}){if(!this.isValid)return Sy;const i=e.showZeros!==!1,o=zs.map(h=>{const m=this.values[h];return rt(m)||m===0&&!i?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:h.slice(0,-1)}).format(m)}).filter(h=>h);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(o)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=o1(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},et.fromMillis(i,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?qx(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Ot.fromDurationLike(e),o={};for(const h of zs)(Qo(i.values,h)||Qo(this.values,h))&&(o[h]=i.get(h)+this.get(h));return oa(this,{values:o},!0)}minus(e){if(!this.isValid)return this;const i=Ot.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const o of Object.keys(this.values))i[o]=Rx(e(this.values[o],o));return oa(this,{values:i},!0)}get(e){return this[Ot.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...hd(e,Ot.normalizeUnit)};return oa(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:o,matrix:h}={}){const x={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:h,conversionAccuracy:o};return oa(this,x)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Ay(this.matrix,e),oa(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=_y(this.normalize().shiftToAll().toObject());return oa(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(x=>Ot.normalizeUnit(x));const i={},o={},h=this.toObject();let m;for(const x of zs)if(e.indexOf(x)>=0){m=x;let A=0;for(const v in o)A+=this.matrix[v][x]*o[v],o[v]=0;is(h[x])&&(A+=h[x]);const E=Math.trunc(A);i[x]=E,o[x]=(A*1e3-E*1e3)/1e3}else is(h[x])&&(o[x]=h[x]);for(const x in o)o[x]!==0&&(i[m]+=x===m?o[x]:o[x]/this.matrix[m][x]);return Ay(this.matrix,i),oa(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return oa(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=_y(this.values);return oa(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(o,h){return o===void 0||o===0?h===void 0||h===0:o===h}for(const o of zs)if(!i(this.values[o],e.values[o]))return!1;return!0}}const jo="Invalid Interval";function k_(a,e){return!a||!a.isValid?vn.invalid("missing or invalid start"):!e||!e.isValid?vn.invalid("missing or invalid end"):e<a?vn.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${e.toISO()}`):null}class vn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new ir("need to specify a reason the Interval is invalid");const o=e instanceof Si?e:new Si(e,i);if(Sn.throwOnInvalid)throw new nA(o);return new vn({invalid:o})}static fromDateTimes(e,i){const o=$l(e),h=$l(i),m=k_(o,h);return m??new vn({start:o,end:h})}static after(e,i){const o=Ot.fromDurationLike(i),h=$l(e);return vn.fromDateTimes(h,h.plus(o))}static before(e,i){const o=Ot.fromDurationLike(i),h=$l(e);return vn.fromDateTimes(h.minus(o),h)}static fromISO(e,i){const[o,h]=(e||"").split("/",2);if(o&&h){let m,x;try{m=et.fromISO(o,i),x=m.isValid}catch{x=!1}let A,E;try{A=et.fromISO(h,i),E=A.isValid}catch{E=!1}if(x&&E)return vn.fromDateTimes(m,A);if(x){const v=Ot.fromISO(h,i);if(v.isValid)return vn.after(m,v)}else if(E){const v=Ot.fromISO(o,i);if(v.isValid)return vn.before(A,v)}}return vn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",i){if(!this.isValid)return NaN;const o=this.start.startOf(e,i);let h;return i?.useLocaleWeeks?h=this.end.reconfigure({locale:o.locale}):h=this.end,h=h.startOf(e,i),Math.floor(h.diff(o,e).get(e))+(h.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?vn.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map($l).filter(x=>this.contains(x)).sort((x,A)=>x.toMillis()-A.toMillis()),o=[];let{s:h}=this,m=0;for(;h<this.e;){const x=i[m]||this.e,A=+x>+this.e?this.e:x;o.push(vn.fromDateTimes(h,A)),h=A,m+=1}return o}splitBy(e){const i=Ot.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:o}=this,h=1,m;const x=[];for(;o<this.e;){const A=this.start.plus(i.mapUnits(E=>E*h));m=+A>+this.e?this.e:A,x.push(vn.fromDateTimes(o,m)),o=m,h+=1}return x}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,o=this.e<e.e?this.e:e.e;return i>=o?null:vn.fromDateTimes(i,o)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,o=this.e>e.e?this.e:e.e;return vn.fromDateTimes(i,o)}static merge(e){const[i,o]=e.sort((h,m)=>h.s-m.s).reduce(([h,m],x)=>m?m.overlaps(x)||m.abutsStart(x)?[h,m.union(x)]:[h.concat([m]),x]:[h,x],[[],null]);return o&&i.push(o),i}static xor(e){let i=null,o=0;const h=[],m=e.map(E=>[{time:E.s,type:"s"},{time:E.e,type:"e"}]),x=Array.prototype.concat(...m),A=x.sort((E,v)=>E.time-v.time);for(const E of A)o+=E.type==="s"?1:-1,o===1?i=E.time:(i&&+i!=+E.time&&h.push(vn.fromDateTimes(i,E.time)),i=null);return vn.merge(h)}difference(...e){return vn.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:jo}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=ud,i={}){return this.isValid?ar.create(this.s.loc.clone(i),e).formatInterval(this):jo}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:jo}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:jo}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:jo}toFormat(e,{separator:i="  "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:jo}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Ot.invalid(this.invalidReason)}mapEndpoints(e){return vn.fromDateTimes(e(this.s),e(this.e))}}class Zu{static hasDST(e=Sn.defaultZone){const i=et.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return da.isValidZone(e)}static normalizeZone(e){return rs(e,Sn.defaultZone)}static getStartOfWeek({locale:e=null,locObj:i=null}={}){return(i||zt.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:i=null}={}){return(i||zt.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:i=null}={}){return(i||zt.create(e)).getWeekendDays().slice()}static months(e="long",{locale:i=null,numberingSystem:o=null,locObj:h=null,outputCalendar:m="gregory"}={}){return(h||zt.create(i,o,m)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:o=null,locObj:h=null,outputCalendar:m="gregory"}={}){return(h||zt.create(i,o,m)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:o=null,locObj:h=null}={}){return(h||zt.create(i,o,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:o=null,locObj:h=null}={}){return(h||zt.create(i,o,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return zt.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return zt.create(i,null,"gregory").eras(e)}static features(){return{relative:Tx(),localeWeek:Ox()}}}function Cy(a,e){const i=h=>h.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),o=i(e)-i(a);return Math.floor(Ot.fromMillis(o).as("days"))}function D_(a,e,i){const o=[["years",(E,v)=>v.year-E.year],["quarters",(E,v)=>v.quarter-E.quarter+(v.year-E.year)*4],["months",(E,v)=>v.month-E.month+(v.year-E.year)*12],["weeks",(E,v)=>{const T=Cy(E,v);return(T-T%7)/7}],["days",Cy]],h={},m=a;let x,A;for(const[E,v]of o)i.indexOf(E)>=0&&(x=E,h[E]=v(a,e),A=m.plus(h),A>e?(h[E]--,a=m.plus(h),a>e&&(A=a,h[E]--,a=m.plus(h))):a=A);return[a,h,A,x]}function M_(a,e,i,o){let[h,m,x,A]=D_(a,e,i);const E=e-h,v=i.filter(O=>["hours","minutes","seconds","milliseconds"].indexOf(O)>=0);v.length===0&&(x<e&&(x=h.plus({[A]:1})),x!==h&&(m[A]=(m[A]||0)+E/(x-h)));const T=Ot.fromObject(m,o);return v.length>0?Ot.fromMillis(E,o).shiftTo(...v).plus(T):T}const B_="missing Intl.DateTimeFormat.formatToParts support";function Bt(a,e=i=>i){return{regex:a,deser:([i])=>e(_A(i))}}const L_="",Wx=`[ ${L_}]`,Yx=new RegExp(Wx,"g");function j_(a){return a.replace(/\./g,"\\.?").replace(Yx,Wx)}function Ty(a){return a.replace(/\./g,"").replace(Yx," ").toLowerCase()}function wi(a,e){return a===null?null:{regex:RegExp(a.map(j_).join("|")),deser:([i])=>a.findIndex(o=>Ty(i)===Ty(o))+e}}function Oy(a,e){return{regex:a,deser:([,i,o])=>Td(i,o),groups:e}}function Ku(a){return{regex:a,deser:([e])=>e}}function U_(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function P_(a,e){const i=xi(e),o=xi(e,"{2}"),h=xi(e,"{3}"),m=xi(e,"{4}"),x=xi(e,"{6}"),A=xi(e,"{1,2}"),E=xi(e,"{1,3}"),v=xi(e,"{1,6}"),T=xi(e,"{1,9}"),O=xi(e,"{2,4}"),j=xi(e,"{4,6}"),U=Z=>({regex:RegExp(U_(Z.val)),deser:([le])=>le,literal:!0}),H=(Z=>{if(a.literal)return U(Z);switch(Z.val){case"G":return wi(e.eras("short"),0);case"GG":return wi(e.eras("long"),0);case"y":return Bt(v);case"yy":return Bt(O,V0);case"yyyy":return Bt(m);case"yyyyy":return Bt(j);case"yyyyyy":return Bt(x);case"M":return Bt(A);case"MM":return Bt(o);case"MMM":return wi(e.months("short",!0),1);case"MMMM":return wi(e.months("long",!0),1);case"L":return Bt(A);case"LL":return Bt(o);case"LLL":return wi(e.months("short",!1),1);case"LLLL":return wi(e.months("long",!1),1);case"d":return Bt(A);case"dd":return Bt(o);case"o":return Bt(E);case"ooo":return Bt(h);case"HH":return Bt(o);case"H":return Bt(A);case"hh":return Bt(o);case"h":return Bt(A);case"mm":return Bt(o);case"m":return Bt(A);case"q":return Bt(A);case"qq":return Bt(o);case"s":return Bt(A);case"ss":return Bt(o);case"S":return Bt(E);case"SSS":return Bt(h);case"u":return Ku(T);case"uu":return Ku(A);case"uuu":return Bt(i);case"a":return wi(e.meridiems(),0);case"kkkk":return Bt(m);case"kk":return Bt(O,V0);case"W":return Bt(A);case"WW":return Bt(o);case"E":case"c":return Bt(i);case"EEE":return wi(e.weekdays("short",!1),1);case"EEEE":return wi(e.weekdays("long",!1),1);case"ccc":return wi(e.weekdays("short",!0),1);case"cccc":return wi(e.weekdays("long",!0),1);case"Z":case"ZZ":return Oy(new RegExp(`([+-]${A.source})(?::(${o.source}))?`),2);case"ZZZ":return Oy(new RegExp(`([+-]${A.source})(${o.source})?`),2);case"z":return Ku(/[a-z_+-/]{1,256}?/i);case" ":return Ku(/[^\S\n\r]/);default:return U(Z)}})(a)||{invalidReason:B_};return H.token=a,H}const z_={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function F_(a,e,i){const{type:o,value:h}=a;if(o==="literal"){const E=/^\s+$/.test(h);return{literal:!E,val:E?" ":h}}const m=e[o];let x=o;o==="hour"&&(e.hour12!=null?x=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?x="hour12":x="hour24":x=i.hour12?"hour12":"hour24");let A=z_[x];if(typeof A=="object"&&(A=A[m]),A)return{literal:!1,val:A}}function V_(a){return[`^${a.map(i=>i.regex).reduce((i,o)=>`${i}(${o.source})`,"")}$`,a]}function H_(a,e,i){const o=a.match(e);if(o){const h={};let m=1;for(const x in i)if(Qo(i,x)){const A=i[x],E=A.groups?A.groups+1:1;!A.literal&&A.token&&(h[A.token.val[0]]=A.deser(o.slice(m,m+E))),m+=E}return[o,h]}else return[o,{}]}function G_(a){const e=m=>{switch(m){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,o;return rt(a.z)||(i=da.create(a.z)),rt(a.Z)||(i||(i=new mr(a.Z)),o=a.Z),rt(a.q)||(a.M=(a.q-1)*3+1),rt(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),rt(a.u)||(a.S=s1(a.u)),[Object.keys(a).reduce((m,x)=>{const A=e(x);return A&&(m[A]=a[x]),m},{}),i,o]}let Wh=null;function q_(){return Wh||(Wh=et.fromMillis(1555555555555)),Wh}function W_(a,e){if(a.literal)return a;const i=ar.macroTokenToFormatOpts(a.val),o=Qx(i,e);return o==null||o.includes(void 0)?a:o}function Xx(a,e){return Array.prototype.concat(...a.map(i=>W_(i,e)))}class Zx{constructor(e,i){if(this.locale=e,this.format=i,this.tokens=Xx(ar.parseFormat(i),e),this.units=this.tokens.map(o=>P_(o,e)),this.disqualifyingUnit=this.units.find(o=>o.invalidReason),!this.disqualifyingUnit){const[o,h]=V_(this.units);this.regex=RegExp(o,"i"),this.handlers=h}}explainFromTokens(e){if(this.isValid){const[i,o]=H_(e,this.regex,this.handlers),[h,m,x]=o?G_(o):[null,null,void 0];if(Qo(o,"a")&&Qo(o,"H"))throw new qo("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:o,result:h,zone:m,specificOffset:x}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Kx(a,e,i){return new Zx(a,i).explainFromTokens(e)}function Y_(a,e,i){const{result:o,zone:h,specificOffset:m,invalidReason:x}=Kx(a,e,i);return[o,h,m,x]}function Qx(a,e){if(!a)return null;const o=ar.create(e,a).dtFormatter(q_()),h=o.formatToParts(),m=o.resolvedOptions();return h.map(x=>F_(x,a,m))}const Yh="Invalid DateTime",Ny=864e13;function ac(a){return new Si("unsupported zone",`the zone "${a.name}" is not supported`)}function Xh(a){return a.weekData===null&&(a.weekData=dd(a.c)),a.weekData}function Zh(a){return a.localWeekData===null&&(a.localWeekData=dd(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function Ds(a,e){const i={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new et({...i,...e,old:i})}function Jx(a,e,i){let o=a-e*60*1e3;const h=i.offset(o);if(e===h)return[o,e];o-=(h-e)*60*1e3;const m=i.offset(o);return h===m?[o,h]:[a-Math.min(h,m)*60*1e3,Math.max(h,m)]}function Qu(a,e){a+=e*60*1e3;const i=new Date(a);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function nd(a,e,i){return Jx(Cd(a),e,i)}function Ry(a,e){const i=a.o,o=a.c.year+Math.trunc(e.years),h=a.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,m={...a.c,year:o,month:h,day:Math.min(a.c.day,fd(o,h))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},x=Ot.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),A=Cd(m);let[E,v]=Jx(A,i,a.zone);return x!==0&&(E+=x,v=a.zone.offset(E)),{ts:E,o:v}}function Uo(a,e,i,o,h,m){const{setZone:x,zone:A}=i;if(a&&Object.keys(a).length!==0||e){const E=e||A,v=et.fromObject(a,{...i,zone:E,specificOffset:m});return x?v:v.setZone(A)}else return et.invalid(new Si("unparsable",`the input "${h}" can't be parsed as ${o}`))}function Ju(a,e,i=!0){return a.isValid?ar.create(zt.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(a,e):null}function Kh(a,e,i){const o=a.c.year>9999||a.c.year<0;let h="";if(o&&a.c.year>=0&&(h+="+"),h+=Un(a.c.year,o?6:4),i==="year")return h;if(e){if(h+="-",h+=Un(a.c.month),i==="month")return h;h+="-"}else if(h+=Un(a.c.month),i==="month")return h;return h+=Un(a.c.day),h}function Iy(a,e,i,o,h,m,x){let A=!i||a.c.millisecond!==0||a.c.second!==0,E="";switch(x){case"day":case"month":case"year":break;default:if(E+=Un(a.c.hour),x==="hour")break;if(e){if(E+=":",E+=Un(a.c.minute),x==="minute")break;A&&(E+=":",E+=Un(a.c.second))}else{if(E+=Un(a.c.minute),x==="minute")break;A&&(E+=Un(a.c.second))}if(x==="second")break;A&&(!o||a.c.millisecond!==0)&&(E+=".",E+=Un(a.c.millisecond,3))}return h&&(a.isOffsetFixed&&a.offset===0&&!m?E+="Z":a.o<0?(E+="-",E+=Un(Math.trunc(-a.o/60)),E+=":",E+=Un(Math.trunc(-a.o%60))):(E+="+",E+=Un(Math.trunc(a.o/60)),E+=":",E+=Un(Math.trunc(a.o%60)))),m&&(E+="["+a.zone.ianaName+"]"),E}const $x={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},X_={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Z_={ordinal:1,hour:0,minute:0,second:0,millisecond:0},rd=["year","month","day","hour","minute","second","millisecond"],K_=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Q_=["year","ordinal","hour","minute","second","millisecond"];function id(a){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!e)throw new $p(a);return e}function ky(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return id(a)}}function J_(a){if(sc===void 0&&(sc=Sn.now()),a.type!=="iana")return a.offset(sc);const e=a.name;let i=H0.get(e);return i===void 0&&(i=a.offset(sc),H0.set(e,i)),i}function Dy(a,e){const i=rs(e.zone,Sn.defaultZone);if(!i.isValid)return et.invalid(ac(i));const o=zt.fromObject(e);let h,m;if(rt(a.year))h=Sn.now();else{for(const E of rd)rt(a[E])&&(a[E]=$x[E]);const x=_x(a)||Cx(a);if(x)return et.invalid(x);const A=J_(i);[h,m]=nd(a,A,i)}return new et({ts:h,zone:i,loc:o,o:m})}function My(a,e,i){const o=rt(i.round)?!0:i.round,h=rt(i.rounding)?"trunc":i.rounding,m=(A,E)=>(A=o1(A,o||i.calendary?0:2,i.calendary?"round":h),e.loc.clone(i).relFormatter(i).format(A,E)),x=A=>i.calendary?e.hasSame(a,A)?0:e.startOf(A).diff(a.startOf(A),A).get(A):e.diff(a,A).get(A);if(i.unit)return m(x(i.unit),i.unit);for(const A of i.units){const E=x(A);if(Math.abs(E)>=1)return m(E,A)}return m(a>e?-0:0,i.units[i.units.length-1])}function By(a){let e={},i;return a.length>0&&typeof a[a.length-1]=="object"?(e=a[a.length-1],i=Array.from(a).slice(0,a.length-1)):i=Array.from(a),[e,i]}let sc;const H0=new Map;class et{constructor(e){const i=e.zone||Sn.defaultZone;let o=e.invalid||(Number.isNaN(e.ts)?new Si("invalid input"):null)||(i.isValid?null:ac(i));this.ts=rt(e.ts)?Sn.now():e.ts;let h=null,m=null;if(!o)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[h,m]=[e.old.c,e.old.o];else{const A=is(e.o)&&!e.old?e.o:i.offset(this.ts);h=Qu(this.ts,A),o=Number.isNaN(h.year)?new Si("invalid input"):null,h=o?null:h,m=o?null:A}this._zone=i,this.loc=e.loc||zt.create(),this.invalid=o,this.weekData=null,this.localWeekData=null,this.c=h,this.o=m,this.isLuxonDateTime=!0}static now(){return new et({})}static local(){const[e,i]=By(arguments),[o,h,m,x,A,E,v]=i;return Dy({year:o,month:h,day:m,hour:x,minute:A,second:E,millisecond:v},e)}static utc(){const[e,i]=By(arguments),[o,h,m,x,A,E,v]=i;return e.zone=mr.utcInstance,Dy({year:o,month:h,day:m,hour:x,minute:A,second:E,millisecond:v},e)}static fromJSDate(e,i={}){const o=RA(e)?e.valueOf():NaN;if(Number.isNaN(o))return et.invalid("invalid input");const h=rs(i.zone,Sn.defaultZone);return h.isValid?new et({ts:o,zone:h,loc:zt.fromObject(i)}):et.invalid(ac(h))}static fromMillis(e,i={}){if(is(e))return e<-Ny||e>Ny?et.invalid("Timestamp out of range"):new et({ts:e,zone:rs(i.zone,Sn.defaultZone),loc:zt.fromObject(i)});throw new ir(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(is(e))return new et({ts:e*1e3,zone:rs(i.zone,Sn.defaultZone),loc:zt.fromObject(i)});throw new ir("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const o=rs(i.zone,Sn.defaultZone);if(!o.isValid)return et.invalid(ac(o));const h=zt.fromObject(i),m=hd(e,ky),{minDaysInFirstWeek:x,startOfWeek:A}=xy(m,h),E=Sn.now(),v=rt(i.specificOffset)?o.offset(E):i.specificOffset,T=!rt(m.ordinal),O=!rt(m.year),j=!rt(m.month)||!rt(m.day),U=O||j,G=m.weekYear||m.weekNumber;if((U||T)&&G)throw new qo("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(j&&T)throw new qo("Can't mix ordinal dates with month/day");const H=G||m.weekday&&!U;let Z,le,Q=Qu(E,v);H?(Z=K_,le=X_,Q=dd(Q,x,A)):T?(Z=Q_,le=Z_,Q=qh(Q)):(Z=rd,le=$x);let q=!1;for(const At of Z){const ft=m[At];rt(ft)?q?m[At]=le[At]:m[At]=Q[At]:q=!0}const xe=H?TA(m,x,A):T?OA(m):_x(m),Le=xe||Cx(m);if(Le)return et.invalid(Le);const Se=H?yy(m,x,A):T?py(m):m,[$,we]=nd(Se,v,o),de=new et({ts:$,zone:o,o:we,loc:h});return m.weekday&&U&&e.weekday!==de.weekday?et.invalid("mismatched weekday",`you can't specify both a weekday of ${m.weekday} and a date of ${de.toISO()}`):de.isValid?de:et.invalid(de.invalid)}static fromISO(e,i={}){const[o,h]=w_(e);return Uo(o,h,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[o,h]=b_(e);return Uo(o,h,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[o,h]=v_(e);return Uo(o,h,i,"HTTP",i)}static fromFormat(e,i,o={}){if(rt(e)||rt(i))throw new ir("fromFormat requires an input string and a format");const{locale:h=null,numberingSystem:m=null}=o,x=zt.fromOpts({locale:h,numberingSystem:m,defaultToEN:!0}),[A,E,v,T]=Y_(x,e,i);return T?et.invalid(T):Uo(A,E,o,`format ${i}`,e,v)}static fromString(e,i,o={}){return et.fromFormat(e,i,o)}static fromSQL(e,i={}){const[o,h]=O_(e);return Uo(o,h,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new ir("need to specify a reason the DateTime is invalid");const o=e instanceof Si?e:new Si(e,i);if(Sn.throwOnInvalid)throw new tA(o);return new et({invalid:o})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const o=Qx(e,zt.fromObject(i));return o?o.map(h=>h?h.val:null).join(""):null}static expandFormat(e,i={}){return Xx(ar.parseFormat(e),zt.fromObject(i)).map(h=>h.val).join("")}static resetCache(){sc=void 0,H0.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Xh(this).weekYear:NaN}get weekNumber(){return this.isValid?Xh(this).weekNumber:NaN}get weekday(){return this.isValid?Xh(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Zh(this).weekday:NaN}get localWeekNumber(){return this.isValid?Zh(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Zh(this).weekYear:NaN}get ordinal(){return this.isValid?qh(this.c).ordinal:NaN}get monthShort(){return this.isValid?Zu.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Zu.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Zu.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Zu.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,i=6e4,o=Cd(this.c),h=this.zone.offset(o-e),m=this.zone.offset(o+e),x=this.zone.offset(o-h*i),A=this.zone.offset(o-m*i);if(x===A)return[this];const E=o-x*i,v=o-A*i,T=Qu(E,x),O=Qu(v,A);return T.hour===O.hour&&T.minute===O.minute&&T.second===O.second&&T.millisecond===O.millisecond?[Ds(this,{ts:E}),Ds(this,{ts:v})]:[this]}get isInLeapYear(){return Ec(this.year)}get daysInMonth(){return fd(this.year,this.month)}get daysInYear(){return this.isValid?Xo(this.year):NaN}get weeksInWeekYear(){return this.isValid?xc(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?xc(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:o,calendar:h}=ar.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:o,outputCalendar:h}}toUTC(e=0,i={}){return this.setZone(mr.instance(e),i)}toLocal(){return this.setZone(Sn.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:o=!1}={}){if(e=rs(e,Sn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let h=this.ts;if(i||o){const m=e.offset(this.ts),x=this.toObject();[h]=nd(x,m,e)}return Ds(this,{ts:h,zone:e})}else return et.invalid(ac(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:o}={}){const h=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:o});return Ds(this,{loc:h})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=hd(e,ky),{minDaysInFirstWeek:o,startOfWeek:h}=xy(i,this.loc),m=!rt(i.weekYear)||!rt(i.weekNumber)||!rt(i.weekday),x=!rt(i.ordinal),A=!rt(i.year),E=!rt(i.month)||!rt(i.day),v=A||E,T=i.weekYear||i.weekNumber;if((v||x)&&T)throw new qo("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(E&&x)throw new qo("Can't mix ordinal dates with month/day");let O;m?O=yy({...dd(this.c,o,h),...i},o,h):rt(i.ordinal)?(O={...this.toObject(),...i},rt(i.day)&&(O.day=Math.min(fd(O.year,O.month),O.day))):O=py({...qh(this.c),...i});const[j,U]=nd(O,this.o,this.zone);return Ds(this,{ts:j,o:U})}plus(e){if(!this.isValid)return this;const i=Ot.fromDurationLike(e);return Ds(this,Ry(this,i))}minus(e){if(!this.isValid)return this;const i=Ot.fromDurationLike(e).negate();return Ds(this,Ry(this,i))}startOf(e,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const o={},h=Ot.normalizeUnit(e);switch(h){case"years":o.month=1;case"quarters":case"months":o.day=1;case"weeks":case"days":o.hour=0;case"hours":o.minute=0;case"minutes":o.second=0;case"seconds":o.millisecond=0;break}if(h==="weeks")if(i){const m=this.loc.getStartOfWeek(),{weekday:x}=this;x<m&&(o.weekNumber=this.weekNumber-1),o.weekday=m}else o.weekday=1;if(h==="quarters"){const m=Math.ceil(this.month/3);o.month=(m-1)*3+1}return this.set(o)}endOf(e,i){return this.isValid?this.plus({[e]:1}).startOf(e,i).minus(1):this}toFormat(e,i={}){return this.isValid?ar.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):Yh}toLocaleString(e=ud,i={}){return this.isValid?ar.create(this.loc.clone(i),e).formatDateTime(this):Yh}toLocaleParts(e={}){return this.isValid?ar.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:o=!1,includeOffset:h=!0,extendedZone:m=!1,precision:x="milliseconds"}={}){if(!this.isValid)return null;x=id(x);const A=e==="extended";let E=Kh(this,A,x);return rd.indexOf(x)>=3&&(E+="T"),E+=Iy(this,A,i,o,h,m,x),E}toISODate({format:e="extended",precision:i="day"}={}){return this.isValid?Kh(this,e==="extended",id(i)):null}toISOWeekDate(){return Ju(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:o=!0,includePrefix:h=!1,extendedZone:m=!1,format:x="extended",precision:A="milliseconds"}={}){return this.isValid?(A=id(A),(h&&rd.indexOf(A)>=3?"T":"")+Iy(this,x==="extended",i,e,o,m,A)):null}toRFC2822(){return Ju(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ju(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Kh(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:o=!0}={}){let h="HH:mm:ss.SSS";return(i||e)&&(o&&(h+=" "),i?h+="z":e&&(h+="ZZ")),Ju(this,h,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Yh}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",o={}){if(!this.isValid||!e.isValid)return Ot.invalid("created by diffing an invalid DateTime");const h={locale:this.locale,numberingSystem:this.numberingSystem,...o},m=IA(i).map(Ot.normalizeUnit),x=e.valueOf()>this.valueOf(),A=x?this:e,E=x?e:this,v=M_(A,E,m,h);return x?v.negate():v}diffNow(e="milliseconds",i={}){return this.diff(et.now(),e,i)}until(e){return this.isValid?vn.fromDateTimes(this,e):this}hasSame(e,i,o){if(!this.isValid)return!1;const h=e.valueOf(),m=this.setZone(e.zone,{keepLocalTime:!0});return m.startOf(i,o)<=h&&h<=m.endOf(i,o)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||et.fromObject({},{zone:this.zone}),o=e.padding?this<i?-e.padding:e.padding:0;let h=["years","months","days","hours","minutes","seconds"],m=e.unit;return Array.isArray(e.unit)&&(h=e.unit,m=void 0),My(i,this.plus(o),{...e,numeric:"always",units:h,unit:m})}toRelativeCalendar(e={}){return this.isValid?My(e.base||et.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(et.isDateTime))throw new ir("min requires all arguments be DateTimes");return wy(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(et.isDateTime))throw new ir("max requires all arguments be DateTimes");return wy(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,o={}){const{locale:h=null,numberingSystem:m=null}=o,x=zt.fromOpts({locale:h,numberingSystem:m,defaultToEN:!0});return Kx(x,e,i)}static fromStringExplain(e,i,o={}){return et.fromFormatExplain(e,i,o)}static buildFormatParser(e,i={}){const{locale:o=null,numberingSystem:h=null}=i,m=zt.fromOpts({locale:o,numberingSystem:h,defaultToEN:!0});return new Zx(m,e)}static fromFormatParser(e,i,o={}){if(rt(e)||rt(i))throw new ir("fromFormatParser requires an input string and a format parser");const{locale:h=null,numberingSystem:m=null}=o,x=zt.fromOpts({locale:h,numberingSystem:m,defaultToEN:!0});if(!x.equals(i.locale))throw new ir(`fromFormatParser called with a locale of ${x}, but the format parser was created for ${i.locale}`);const{result:A,zone:E,specificOffset:v,invalidReason:T}=i.explainFromTokens(e);return T?et.invalid(T):Uo(A,E,o,`format ${i.format}`,e,v)}static get DATE_SHORT(){return ud}static get DATE_MED(){return ex}static get DATE_MED_WITH_WEEKDAY(){return iA}static get DATE_FULL(){return tx}static get DATE_HUGE(){return nx}static get TIME_SIMPLE(){return rx}static get TIME_WITH_SECONDS(){return ix}static get TIME_WITH_SHORT_OFFSET(){return ax}static get TIME_WITH_LONG_OFFSET(){return sx}static get TIME_24_SIMPLE(){return ox}static get TIME_24_WITH_SECONDS(){return lx}static get TIME_24_WITH_SHORT_OFFSET(){return cx}static get TIME_24_WITH_LONG_OFFSET(){return ux}static get DATETIME_SHORT(){return dx}static get DATETIME_SHORT_WITH_SECONDS(){return fx}static get DATETIME_MED(){return hx}static get DATETIME_MED_WITH_SECONDS(){return gx}static get DATETIME_MED_WITH_WEEKDAY(){return aA}static get DATETIME_FULL(){return mx}static get DATETIME_FULL_WITH_SECONDS(){return yx}static get DATETIME_HUGE(){return px}static get DATETIME_HUGE_WITH_SECONDS(){return xx}}function $l(a){if(et.isDateTime(a))return a;if(a&&a.valueOf&&is(a.valueOf()))return et.fromJSDate(a);if(a&&typeof a=="object")return et.fromObject(a);throw new ir(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const $_="pantry-shopping-list",d1="pantry-current-id",Hs=async()=>{const a=await Q0(d1);return a&&typeof a=="object"&&a.id?a.id:typeof a=="string"?a:null},ew=async()=>await Hs()&&await Q0("pantry-saved-family-details")||null,tw=async a=>{await dc(d1,a.id),await dc("pantry-saved-family-details",a)},nw=async()=>{await dc(d1,null),await dc("pantry-saved-family-details",null)},G0=async a=>{const{data:e,error:i}=await Rn.getLocations(a);if(i)return[];if(e.length===0){const{data:o}=await Rn.createLocation(a,"Dispensa Principale");return o?[o[0]]:[]}return e},f1=async(a,e)=>{const{data:i,error:o}=await Rn.createLocation(a,e);return{success:!o,location:i?i[0]:null}},rw=async a=>{await Rn.deleteProductsByLocation(a),await Rn.deleteLocation(a)},iw=async(a,e)=>{const{data:i,error:o}=await Rn.createPantry(a,e);if(o)return{success:!1,error:"Errore creazione: "+o.message};const h=i[0];return await tw(h),await f1(h.id,"Cucina"),{success:!0,pantryId:h.id}},aw=async(a,e)=>{const{data:i,error:o}=await Rn.verifyPantry(a,e);return o||!i?{success:!1,error:"Codice o PIN non validi."}:(await tw(i),{success:!0,pantryId:i.id})},sw=async a=>{const e=a||await Hs(),{data:i,error:o}=await Rn.getProducts(e);return o?(console.error("Errore recupero prodotti:",o),[]):i.map(h=>({...h,id:h.id,name:h.name,expiryDate:h.expiry_date,category:h.category,status:h.status,pantryId:h.pantry_id,locationId:h.location_id,finishedAt:h.finished_at}))},ow=async(a,e)=>{const i=e||await Hs(),o={name:a.name,expiry_date:a.expiryDate,category:a.category||"Dispensa",status:"active",pantry_id:i,location_id:a.locationId,created_at:new Date().toISOString(),quantity:a.quantity||1,price:a.price||0},{data:h,error:m}=await Rn.addProduct(o);if(m)return console.error("Errore aggiunta prodotto:",m),null;const x=h[0];return{...x,expiryDate:x.expiry_date}},e4=async(a,e)=>{const i={};e.expiryDate&&(i.expiry_date=e.expiryDate),e.pantryId&&(i.pantry_id=e.pantryId),e.finishedAt&&(i.finished_at=e.finishedAt),e.status&&(i.status=e.status),e.name&&(i.name=e.name),e.locationId&&(i.location_id=e.locationId),e.locationId&&(i.location_id=e.locationId),await Rn.updateProduct(a,i)},t4=async a=>{await Rn.deleteProduct(a)},n4=async(a,e)=>{const i=et.now().toFormat("yyyy-MM"),{data:o}=await Rn.getStats(i),h=(a.price||0)*(a.quantity||1),m={total_spent:o?.total_spent||0,total_wasted:o?.total_wasted||0,waste_items:(o?.waste_items||0)+1};e==="wasted"&&(m.total_wasted+=h),await Rn.updateStats(i,m),await Rn.deleteProduct(a.id)},h1=async()=>{const a=await Hs();if(!a)return[];const{data:e,error:i}=await Rn.getProducts(a);return i?[]:e.filter(o=>o.status==="shopping_list"||o.status==="shopping_bought").map(o=>({id:o.id,name:o.name,isBought:o.status==="shopping_bought"}))},g1=async a=>{const e=await Hs();if(!e)return;const i={name:a.name,status:"shopping_list",pantry_id:e,quantity:1,created_at:new Date().toISOString()};await Rn.addProduct(i)},lw=async(a,e)=>{const i=e?"shopping_list":"shopping_bought";await Rn.updateProduct(a,{status:i})},q0=async a=>{await Rn.deleteProduct(a)},r4=async()=>{const a=await h1(),e=await Q0(PANTRIES_KEY);return{products:[],shoppingList:a,pantries:e,exportedAt:new Date().toISOString(),version:3}},i4=async a=>(a.shoppingList&&await dc($_,a.shoppingList),!0),a4=Object.freeze(Object.defineProperty({__proto__:null,addLocation:f1,addProduct:ow,addToShoppingList:g1,createFamily:iw,deleteProduct:t4,deleteShoppingItem:q0,exportData:r4,finalizeProduct:n4,getCurrentFamily:ew,getCurrentPantryId:Hs,getLocations:G0,getProducts:sw,getShoppingList:h1,importData:i4,joinFamily:aw,logoutFamily:nw,removeLocation:rw,toggleShoppingItem:lw,updateProduct:e4},Symbol.toStringTag,{value:"Module"})),cw=6048e5,s4=864e5,uw=6e4,dw=36e5,Ly=Symbol.for("constructDateFrom");function fa(a,e){return typeof a=="function"?a(e):a&&typeof a=="object"&&Ly in a?a[Ly](e):a instanceof Date?new a.constructor(e):new Date(e)}function Wr(a,e){return fa(e||a,a)}let o4={};function Nd(){return o4}function Fs(a,e){const i=Nd(),o=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,h=Wr(a,e?.in),m=h.getDay(),x=(m<o?7:0)+m-o;return h.setDate(h.getDate()-x),h.setHours(0,0,0,0),h}function gd(a,e){return Fs(a,{...e,weekStartsOn:1})}function fw(a,e){const i=Wr(a,e?.in),o=i.getFullYear(),h=fa(i,0);h.setFullYear(o+1,0,4),h.setHours(0,0,0,0);const m=gd(h),x=fa(i,0);x.setFullYear(o,0,4),x.setHours(0,0,0,0);const A=gd(x);return i.getTime()>=m.getTime()?o+1:i.getTime()>=A.getTime()?o:o-1}function jy(a){const e=Wr(a),i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return i.setUTCFullYear(e.getFullYear()),+a-+i}function m1(a,...e){const i=fa.bind(null,a||e.find(o=>typeof o=="object"));return e.map(i)}function Uy(a,e){const i=Wr(a,e?.in);return i.setHours(0,0,0,0),i}function hw(a,e,i){const[o,h]=m1(i?.in,a,e),m=Uy(o),x=Uy(h),A=+m-jy(m),E=+x-jy(x);return Math.round((A-E)/s4)}function l4(a,e){const i=fw(a,e),o=fa(a,0);return o.setFullYear(i,0,4),o.setHours(0,0,0,0),gd(o)}function c4(a){return a instanceof Date||typeof a=="object"&&Object.prototype.toString.call(a)==="[object Date]"}function u4(a){return!(!c4(a)&&typeof a!="number"||isNaN(+Wr(a)))}function y1(a,e,i){const[o,h]=m1(i?.in,a,e),m=Py(o,h),x=Math.abs(hw(o,h));o.setDate(o.getDate()-m*x);const A=+(Py(o,h)===-m),E=m*(x-A);return E===0?0:E}function Py(a,e){const i=a.getFullYear()-e.getFullYear()||a.getMonth()-e.getMonth()||a.getDate()-e.getDate()||a.getHours()-e.getHours()||a.getMinutes()-e.getMinutes()||a.getSeconds()-e.getSeconds()||a.getMilliseconds()-e.getMilliseconds();return i<0?-1:i>0?1:i}function d4(a,e){const i=Wr(a,e?.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}const f4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},h4=(a,e,i)=>{let o;const h=f4[a];return typeof h=="string"?o=h:e===1?o=h.one:o=h.other.replace("{{count}}",e.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+o:o+" ago":o};function Ko(a){return(e={})=>{const i=e.width?String(e.width):a.defaultWidth;return a.formats[i]||a.formats[a.defaultWidth]}}const g4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},m4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},y4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},p4={date:Ko({formats:g4,defaultWidth:"full"}),time:Ko({formats:m4,defaultWidth:"full"}),dateTime:Ko({formats:y4,defaultWidth:"full"})},x4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},w4=(a,e,i,o)=>x4[a];function ji(a){return(e,i)=>{const o=i?.context?String(i.context):"standalone";let h;if(o==="formatting"&&a.formattingValues){const x=a.defaultFormattingWidth||a.defaultWidth,A=i?.width?String(i.width):x;h=a.formattingValues[A]||a.formattingValues[x]}else{const x=a.defaultWidth,A=i?.width?String(i.width):a.defaultWidth;h=a.values[A]||a.values[x]}const m=a.argumentCallback?a.argumentCallback(e):e;return h[m]}}const b4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},v4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},E4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},S4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},A4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},C4=(a,e)=>{const i=Number(a),o=i%100;if(o>20||o<10)switch(o%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},T4={ordinalNumber:C4,era:ji({values:b4,defaultWidth:"wide"}),quarter:ji({values:v4,defaultWidth:"wide",argumentCallback:a=>a-1}),month:ji({values:E4,defaultWidth:"wide"}),day:ji({values:S4,defaultWidth:"wide"}),dayPeriod:ji({values:A4,defaultWidth:"wide",formattingValues:_4,defaultFormattingWidth:"wide"})};function Ui(a){return(e,i={})=>{const o=i.width,h=o&&a.matchPatterns[o]||a.matchPatterns[a.defaultMatchWidth],m=e.match(h);if(!m)return null;const x=m[0],A=o&&a.parsePatterns[o]||a.parsePatterns[a.defaultParseWidth],E=Array.isArray(A)?N4(A,O=>O.test(x)):O4(A,O=>O.test(x));let v;v=a.valueCallback?a.valueCallback(E):E,v=i.valueCallback?i.valueCallback(v):v;const T=e.slice(x.length);return{value:v,rest:T}}}function O4(a,e){for(const i in a)if(Object.prototype.hasOwnProperty.call(a,i)&&e(a[i]))return i}function N4(a,e){for(let i=0;i<a.length;i++)if(e(a[i]))return i}function gw(a){return(e,i={})=>{const o=e.match(a.matchPattern);if(!o)return null;const h=o[0],m=e.match(a.parsePattern);if(!m)return null;let x=a.valueCallback?a.valueCallback(m[0]):m[0];x=i.valueCallback?i.valueCallback(x):x;const A=e.slice(h.length);return{value:x,rest:A}}}const R4=/^(\d+)(th|st|nd|rd)?/i,I4=/\d+/i,k4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},D4={any:[/^b/i,/^(a|c)/i]},M4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},B4={any:[/1/i,/2/i,/3/i,/4/i]},L4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},j4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},U4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},P4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},z4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},F4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},V4={ordinalNumber:gw({matchPattern:R4,parsePattern:I4,valueCallback:a=>parseInt(a,10)}),era:Ui({matchPatterns:k4,defaultMatchWidth:"wide",parsePatterns:D4,defaultParseWidth:"any"}),quarter:Ui({matchPatterns:M4,defaultMatchWidth:"wide",parsePatterns:B4,defaultParseWidth:"any",valueCallback:a=>a+1}),month:Ui({matchPatterns:L4,defaultMatchWidth:"wide",parsePatterns:j4,defaultParseWidth:"any"}),day:Ui({matchPatterns:U4,defaultMatchWidth:"wide",parsePatterns:P4,defaultParseWidth:"any"}),dayPeriod:Ui({matchPatterns:z4,defaultMatchWidth:"any",parsePatterns:F4,defaultParseWidth:"any"})},H4={code:"en-US",formatDistance:h4,formatLong:p4,formatRelative:w4,localize:T4,match:V4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function G4(a,e){const i=Wr(a,e?.in);return hw(i,d4(i))+1}function q4(a,e){const i=Wr(a,e?.in),o=+gd(i)-+l4(i);return Math.round(o/cw)+1}function mw(a,e){const i=Wr(a,e?.in),o=i.getFullYear(),h=Nd(),m=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??h.firstWeekContainsDate??h.locale?.options?.firstWeekContainsDate??1,x=fa(e?.in||a,0);x.setFullYear(o+1,0,m),x.setHours(0,0,0,0);const A=Fs(x,e),E=fa(e?.in||a,0);E.setFullYear(o,0,m),E.setHours(0,0,0,0);const v=Fs(E,e);return+i>=+A?o+1:+i>=+v?o:o-1}function W4(a,e){const i=Nd(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,h=mw(a,e),m=fa(e?.in||a,0);return m.setFullYear(h,0,o),m.setHours(0,0,0,0),Fs(m,e)}function Y4(a,e){const i=Wr(a,e?.in),o=+Fs(i,e)-+W4(i,e);return Math.round(o/cw)+1}function qt(a,e){const i=a<0?"-":"",o=Math.abs(a).toString().padStart(e,"0");return i+o}const Ja={y(a,e){const i=a.getFullYear(),o=i>0?i:1-i;return qt(e==="yy"?o%100:o,e.length)},M(a,e){const i=a.getMonth();return e==="M"?String(i+1):qt(i+1,2)},d(a,e){return qt(a.getDate(),e.length)},a(a,e){const i=a.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return i==="am"?"a.m.":"p.m."}},h(a,e){return qt(a.getHours()%12||12,e.length)},H(a,e){return qt(a.getHours(),e.length)},m(a,e){return qt(a.getMinutes(),e.length)},s(a,e){return qt(a.getSeconds(),e.length)},S(a,e){const i=e.length,o=a.getMilliseconds(),h=Math.trunc(o*Math.pow(10,i-3));return qt(h,e.length)}},Po={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},zy={G:function(a,e,i){const o=a.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return i.era(o,{width:"abbreviated"});case"GGGGG":return i.era(o,{width:"narrow"});default:return i.era(o,{width:"wide"})}},y:function(a,e,i){if(e==="yo"){const o=a.getFullYear(),h=o>0?o:1-o;return i.ordinalNumber(h,{unit:"year"})}return Ja.y(a,e)},Y:function(a,e,i,o){const h=mw(a,o),m=h>0?h:1-h;if(e==="YY"){const x=m%100;return qt(x,2)}return e==="Yo"?i.ordinalNumber(m,{unit:"year"}):qt(m,e.length)},R:function(a,e){const i=fw(a);return qt(i,e.length)},u:function(a,e){const i=a.getFullYear();return qt(i,e.length)},Q:function(a,e,i){const o=Math.ceil((a.getMonth()+1)/3);switch(e){case"Q":return String(o);case"QQ":return qt(o,2);case"Qo":return i.ordinalNumber(o,{unit:"quarter"});case"QQQ":return i.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(o,{width:"narrow",context:"formatting"});default:return i.quarter(o,{width:"wide",context:"formatting"})}},q:function(a,e,i){const o=Math.ceil((a.getMonth()+1)/3);switch(e){case"q":return String(o);case"qq":return qt(o,2);case"qo":return i.ordinalNumber(o,{unit:"quarter"});case"qqq":return i.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(o,{width:"narrow",context:"standalone"});default:return i.quarter(o,{width:"wide",context:"standalone"})}},M:function(a,e,i){const o=a.getMonth();switch(e){case"M":case"MM":return Ja.M(a,e);case"Mo":return i.ordinalNumber(o+1,{unit:"month"});case"MMM":return i.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(o,{width:"narrow",context:"formatting"});default:return i.month(o,{width:"wide",context:"formatting"})}},L:function(a,e,i){const o=a.getMonth();switch(e){case"L":return String(o+1);case"LL":return qt(o+1,2);case"Lo":return i.ordinalNumber(o+1,{unit:"month"});case"LLL":return i.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(o,{width:"narrow",context:"standalone"});default:return i.month(o,{width:"wide",context:"standalone"})}},w:function(a,e,i,o){const h=Y4(a,o);return e==="wo"?i.ordinalNumber(h,{unit:"week"}):qt(h,e.length)},I:function(a,e,i){const o=q4(a);return e==="Io"?i.ordinalNumber(o,{unit:"week"}):qt(o,e.length)},d:function(a,e,i){return e==="do"?i.ordinalNumber(a.getDate(),{unit:"date"}):Ja.d(a,e)},D:function(a,e,i){const o=G4(a);return e==="Do"?i.ordinalNumber(o,{unit:"dayOfYear"}):qt(o,e.length)},E:function(a,e,i){const o=a.getDay();switch(e){case"E":case"EE":case"EEE":return i.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(o,{width:"short",context:"formatting"});default:return i.day(o,{width:"wide",context:"formatting"})}},e:function(a,e,i,o){const h=a.getDay(),m=(h-o.weekStartsOn+8)%7||7;switch(e){case"e":return String(m);case"ee":return qt(m,2);case"eo":return i.ordinalNumber(m,{unit:"day"});case"eee":return i.day(h,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(h,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(h,{width:"short",context:"formatting"});default:return i.day(h,{width:"wide",context:"formatting"})}},c:function(a,e,i,o){const h=a.getDay(),m=(h-o.weekStartsOn+8)%7||7;switch(e){case"c":return String(m);case"cc":return qt(m,e.length);case"co":return i.ordinalNumber(m,{unit:"day"});case"ccc":return i.day(h,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(h,{width:"narrow",context:"standalone"});case"cccccc":return i.day(h,{width:"short",context:"standalone"});default:return i.day(h,{width:"wide",context:"standalone"})}},i:function(a,e,i){const o=a.getDay(),h=o===0?7:o;switch(e){case"i":return String(h);case"ii":return qt(h,e.length);case"io":return i.ordinalNumber(h,{unit:"day"});case"iii":return i.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(o,{width:"short",context:"formatting"});default:return i.day(o,{width:"wide",context:"formatting"})}},a:function(a,e,i){const h=a.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.dayPeriod(h,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(h,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(h,{width:"narrow",context:"formatting"});default:return i.dayPeriod(h,{width:"wide",context:"formatting"})}},b:function(a,e,i){const o=a.getHours();let h;switch(o===12?h=Po.noon:o===0?h=Po.midnight:h=o/12>=1?"pm":"am",e){case"b":case"bb":return i.dayPeriod(h,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(h,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(h,{width:"narrow",context:"formatting"});default:return i.dayPeriod(h,{width:"wide",context:"formatting"})}},B:function(a,e,i){const o=a.getHours();let h;switch(o>=17?h=Po.evening:o>=12?h=Po.afternoon:o>=4?h=Po.morning:h=Po.night,e){case"B":case"BB":case"BBB":return i.dayPeriod(h,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(h,{width:"narrow",context:"formatting"});default:return i.dayPeriod(h,{width:"wide",context:"formatting"})}},h:function(a,e,i){if(e==="ho"){let o=a.getHours()%12;return o===0&&(o=12),i.ordinalNumber(o,{unit:"hour"})}return Ja.h(a,e)},H:function(a,e,i){return e==="Ho"?i.ordinalNumber(a.getHours(),{unit:"hour"}):Ja.H(a,e)},K:function(a,e,i){const o=a.getHours()%12;return e==="Ko"?i.ordinalNumber(o,{unit:"hour"}):qt(o,e.length)},k:function(a,e,i){let o=a.getHours();return o===0&&(o=24),e==="ko"?i.ordinalNumber(o,{unit:"hour"}):qt(o,e.length)},m:function(a,e,i){return e==="mo"?i.ordinalNumber(a.getMinutes(),{unit:"minute"}):Ja.m(a,e)},s:function(a,e,i){return e==="so"?i.ordinalNumber(a.getSeconds(),{unit:"second"}):Ja.s(a,e)},S:function(a,e){return Ja.S(a,e)},X:function(a,e,i){const o=a.getTimezoneOffset();if(o===0)return"Z";switch(e){case"X":return Vy(o);case"XXXX":case"XX":return Ls(o);default:return Ls(o,":")}},x:function(a,e,i){const o=a.getTimezoneOffset();switch(e){case"x":return Vy(o);case"xxxx":case"xx":return Ls(o);default:return Ls(o,":")}},O:function(a,e,i){const o=a.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Fy(o,":");default:return"GMT"+Ls(o,":")}},z:function(a,e,i){const o=a.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Fy(o,":");default:return"GMT"+Ls(o,":")}},t:function(a,e,i){const o=Math.trunc(+a/1e3);return qt(o,e.length)},T:function(a,e,i){return qt(+a,e.length)}};function Fy(a,e=""){const i=a>0?"-":"+",o=Math.abs(a),h=Math.trunc(o/60),m=o%60;return m===0?i+String(h):i+String(h)+e+qt(m,2)}function Vy(a,e){return a%60===0?(a>0?"-":"+")+qt(Math.abs(a)/60,2):Ls(a,e)}function Ls(a,e=""){const i=a>0?"-":"+",o=Math.abs(a),h=qt(Math.trunc(o/60),2),m=qt(o%60,2);return i+h+e+m}const Hy=(a,e)=>{switch(a){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},yw=(a,e)=>{switch(a){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},X4=(a,e)=>{const i=a.match(/(P+)(p+)?/)||[],o=i[1],h=i[2];if(!h)return Hy(a,e);let m;switch(o){case"P":m=e.dateTime({width:"short"});break;case"PP":m=e.dateTime({width:"medium"});break;case"PPP":m=e.dateTime({width:"long"});break;default:m=e.dateTime({width:"full"});break}return m.replace("{{date}}",Hy(o,e)).replace("{{time}}",yw(h,e))},Z4={p:yw,P:X4},K4=/^D+$/,Q4=/^Y+$/,J4=["D","DD","YY","YYYY"];function $4(a){return K4.test(a)}function eC(a){return Q4.test(a)}function tC(a,e,i){const o=nC(a,e,i);if(console.warn(o),J4.includes(a))throw new RangeError(o)}function nC(a,e,i){const o=a[0]==="Y"?"years":"days of the month";return`Use \`${a.toLowerCase()}\` instead of \`${a}\` (in \`${e}\`) for formatting ${o} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const rC=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,iC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,aC=/^'([^]*?)'?$/,sC=/''/g,oC=/[a-zA-Z]/;function lC(a,e,i){const o=Nd(),h=i?.locale??o.locale??H4,m=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,x=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0,A=Wr(a,i?.in);if(!u4(A))throw new RangeError("Invalid time value");let E=e.match(iC).map(T=>{const O=T[0];if(O==="p"||O==="P"){const j=Z4[O];return j(T,h.formatLong)}return T}).join("").match(rC).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const O=T[0];if(O==="'")return{isToken:!1,value:cC(T)};if(zy[O])return{isToken:!0,value:T};if(O.match(oC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+O+"`");return{isToken:!1,value:T}});h.localize.preprocessor&&(E=h.localize.preprocessor(A,E));const v={firstWeekContainsDate:m,weekStartsOn:x,locale:h};return E.map(T=>{if(!T.isToken)return T.value;const O=T.value;(!i?.useAdditionalWeekYearTokens&&eC(O)||!i?.useAdditionalDayOfYearTokens&&$4(O))&&tC(O,e,String(a));const j=zy[O[0]];return j(A,O,h.localize,v)}).join("")}function cC(a){const e=a.match(aC);return e?e[1].replace(sC,"'"):a}function Gy(a,e,i){const[o,h]=m1(i?.in,a,e);return+Fs(o,i)==+Fs(h,i)}function md(a,e){const i=()=>fa(e?.in,NaN),h=hC(a);let m;if(h.date){const v=gC(h.date,2);m=mC(v.restDateString,v.year)}if(!m||isNaN(+m))return i();const x=+m;let A=0,E;if(h.time&&(A=yC(h.time),isNaN(A)))return i();if(h.timezone){if(E=pC(h.timezone),isNaN(E))return i()}else{const v=new Date(x+A),T=Wr(0,e?.in);return T.setFullYear(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()),T.setHours(v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds(),v.getUTCMilliseconds()),T}return Wr(x+A+E,e?.in)}const $u={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},uC=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,dC=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,fC=/^([+-])(\d{2})(?::?(\d{2}))?$/;function hC(a){const e={},i=a.split($u.dateTimeDelimiter);let o;if(i.length>2)return e;if(/:/.test(i[0])?o=i[0]:(e.date=i[0],o=i[1],$u.timeZoneDelimiter.test(e.date)&&(e.date=a.split($u.timeZoneDelimiter)[0],o=a.substr(e.date.length,a.length))),o){const h=$u.timezone.exec(o);h?(e.time=o.replace(h[1],""),e.timezone=h[1]):e.time=o}return e}function gC(a,e){const i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),o=a.match(i);if(!o)return{year:NaN,restDateString:""};const h=o[1]?parseInt(o[1]):null,m=o[2]?parseInt(o[2]):null;return{year:m===null?h:m*100,restDateString:a.slice((o[1]||o[2]).length)}}function mC(a,e){if(e===null)return new Date(NaN);const i=a.match(uC);if(!i)return new Date(NaN);const o=!!i[4],h=ec(i[1]),m=ec(i[2])-1,x=ec(i[3]),A=ec(i[4]),E=ec(i[5])-1;if(o)return EC(e,A,E)?xC(e,A,E):new Date(NaN);{const v=new Date(0);return!bC(e,m,x)||!vC(e,h)?new Date(NaN):(v.setUTCFullYear(e,m,Math.max(h,x)),v)}}function ec(a){return a?parseInt(a):1}function yC(a){const e=a.match(dC);if(!e)return NaN;const i=Qh(e[1]),o=Qh(e[2]),h=Qh(e[3]);return SC(i,o,h)?i*dw+o*uw+h*1e3:NaN}function Qh(a){return a&&parseFloat(a.replace(",","."))||0}function pC(a){if(a==="Z")return 0;const e=a.match(fC);if(!e)return 0;const i=e[1]==="+"?-1:1,o=parseInt(e[2]),h=e[3]&&parseInt(e[3])||0;return AC(o,h)?i*(o*dw+h*uw):NaN}function xC(a,e,i){const o=new Date(0);o.setUTCFullYear(a,0,4);const h=o.getUTCDay()||7,m=(e-1)*7+i+1-h;return o.setUTCDate(o.getUTCDate()+m),o}const wC=[31,null,31,30,31,30,31,31,30,31,30,31];function pw(a){return a%400===0||a%4===0&&a%100!==0}function bC(a,e,i){return e>=0&&e<=11&&i>=1&&i<=(wC[e]||(pw(a)?29:28))}function vC(a,e){return e>=1&&e<=(pw(a)?366:365)}function EC(a,e,i){return e>=1&&e<=53&&i>=0&&i<=6}function SC(a,e,i){return a===24?e===0&&i===0:i>=0&&i<60&&e>=0&&e<60&&a>=0&&a<25}function AC(a,e){return e>=0&&e<=59}const _C=async()=>"Notification"in window?await Notification.requestPermission()==="granted":(console.log("This browser does not support desktop notification"),!1),CC=a=>{const e=new Date,i=[],o="pantry_sent_notifications";let h={};try{h=JSON.parse(localStorage.getItem(o))||{}}catch(m){console.error("Error parsing sent notifications",m)}return a.forEach(m=>{if(m.status&&m.status!=="active")return;const x=md(m.expiryDate),A=y1(x,e);if(A<=3&&A>=0){const E=`${m.id}_${m.expiryDate}`;h[E]||(i.push({...m,daysUntilExpiry:A}),h[E]=new Date().toISOString())}}),localStorage.setItem(o,JSON.stringify(h)),i},TC=(a,e)=>{if(Notification.permission==="granted"){const i={body:e,icon:"/pwa-192x192.png",vibrate:[200,100,200],badge:"/pwa-192x192.png",tag:"pantry-expiry-alert",renotify:!0,requireInteraction:!0,silent:!1},o=` ${a} `;"serviceWorker"in navigator&&navigator.serviceWorker.ready?navigator.serviceWorker.ready.then(h=>{h.showNotification(o,i)}):new Notification(o,i)}},OC="modulepreload",NC=function(a){return"/"+a},qy={},p1=function(e,i,o){let h=Promise.resolve();if(i&&i.length>0){let v=function(T){return Promise.all(T.map(O=>Promise.resolve(O).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};var x=v;document.getElementsByTagName("link");const A=document.querySelector("meta[property=csp-nonce]"),E=A?.nonce||A?.getAttribute("nonce");h=v(i.map(T=>{if(T=NC(T),T in qy)return;qy[T]=!0;const O=T.endsWith(".css"),j=O?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${T}"]${j}`))return;const U=document.createElement("link");if(U.rel=O?"stylesheet":OC,O||(U.as="script"),U.crossOrigin="",U.href=T,E&&U.setAttribute("nonce",E),document.head.appendChild(U),O)return new Promise((G,H)=>{U.addEventListener("load",G),U.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${T}`)))})}))}function m(A){const E=new Event("vite:preloadError",{cancelable:!0});if(E.payload=A,window.dispatchEvent(E),!E.defaultPrevented)throw A}return h.then(A=>{for(const E of A||[])E.status==="rejected"&&m(E.reason);return e().catch(m)})},RC={lessThanXSeconds:{one:"meno di un secondo",other:"meno di {{count}} secondi"},xSeconds:{one:"un secondo",other:"{{count}} secondi"},halfAMinute:"alcuni secondi",lessThanXMinutes:{one:"meno di un minuto",other:"meno di {{count}} minuti"},xMinutes:{one:"un minuto",other:"{{count}} minuti"},aboutXHours:{one:"circa un'ora",other:"circa {{count}} ore"},xHours:{one:"un'ora",other:"{{count}} ore"},xDays:{one:"un giorno",other:"{{count}} giorni"},aboutXWeeks:{one:"circa una settimana",other:"circa {{count}} settimane"},xWeeks:{one:"una settimana",other:"{{count}} settimane"},aboutXMonths:{one:"circa un mese",other:"circa {{count}} mesi"},xMonths:{one:"un mese",other:"{{count}} mesi"},aboutXYears:{one:"circa un anno",other:"circa {{count}} anni"},xYears:{one:"un anno",other:"{{count}} anni"},overXYears:{one:"pi di un anno",other:"pi di {{count}} anni"},almostXYears:{one:"quasi un anno",other:"quasi {{count}} anni"}},IC=(a,e,i)=>{let o;const h=RC[a];return typeof h=="string"?o=h:e===1?o=h.one:o=h.other.replace("{{count}}",e.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"tra "+o:o+" fa":o},kC={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},DC={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},MC={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},BC={date:Ko({formats:kC,defaultWidth:"full"}),time:Ko({formats:DC,defaultWidth:"full"}),dateTime:Ko({formats:MC,defaultWidth:"full"})},x1=["domenica","luned","marted","mercoled","gioved","venerd","sabato"];function LC(a){return a===0?"'domenica scorsa alle' p":"'"+x1[a]+" scorso alle' p"}function Wy(a){return"'"+x1[a]+" alle' p"}function jC(a){return a===0?"'domenica prossima alle' p":"'"+x1[a]+" prossimo alle' p"}const UC={lastWeek:(a,e,i)=>{const o=a.getDay();return Gy(a,e,i)?Wy(o):LC(o)},yesterday:"'ieri alle' p",today:"'oggi alle' p",tomorrow:"'domani alle' p",nextWeek:(a,e,i)=>{const o=a.getDay();return Gy(a,e,i)?Wy(o):jC(o)},other:"P"},PC=(a,e,i,o)=>{const h=UC[a];return typeof h=="function"?h(e,i,o):h},zC={narrow:["aC","dC"],abbreviated:["a.C.","d.C."],wide:["avanti Cristo","dopo Cristo"]},FC={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},VC={narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],abbreviated:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],wide:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},HC={narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],abbreviated:["dom","lun","mar","mer","gio","ven","sab"],wide:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},GC={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"}},qC={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"}},WC=(a,e)=>{const i=Number(a);return String(i)},YC={ordinalNumber:WC,era:ji({values:zC,defaultWidth:"wide"}),quarter:ji({values:FC,defaultWidth:"wide",argumentCallback:a=>a-1}),month:ji({values:VC,defaultWidth:"wide"}),day:ji({values:HC,defaultWidth:"wide"}),dayPeriod:ji({values:GC,defaultWidth:"wide",formattingValues:qC,defaultFormattingWidth:"wide"})},XC=/^(\d+)()?/i,ZC=/\d+/i,KC={narrow:/^(aC|dC)/i,abbreviated:/^(a\.?\s?C\.?|a\.?\s?e\.?\s?v\.?|d\.?\s?C\.?|e\.?\s?v\.?)/i,wide:/^(avanti Cristo|avanti Era Volgare|dopo Cristo|Era Volgare)/i},QC={any:[/^a/i,/^(d|e)/i]},JC={narrow:/^[1234]/i,abbreviated:/^t[1234]/i,wide:/^[1234]()? trimestre/i},$C={any:[/1/i,/2/i,/3/i,/4/i]},eT={narrow:/^[gfmalsond]/i,abbreviated:/^(gen|feb|mar|apr|mag|giu|lug|ago|set|ott|nov|dic)/i,wide:/^(gennaio|febbraio|marzo|aprile|maggio|giugno|luglio|agosto|settembre|ottobre|novembre|dicembre)/i},tT={narrow:[/^g/i,/^f/i,/^m/i,/^a/i,/^m/i,/^g/i,/^l/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ge/i,/^f/i,/^mar/i,/^ap/i,/^mag/i,/^gi/i,/^l/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},nT={narrow:/^[dlmgvs]/i,short:/^(do|lu|ma|me|gi|ve|sa)/i,abbreviated:/^(dom|lun|mar|mer|gio|ven|sab)/i,wide:/^(domenica|luned[i|]|marted[i|]|mercoled[i|]|gioved[i|]|venerd[i|]|sabato)/i},rT={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^g/i,/^v/i,/^s/i],any:[/^d/i,/^l/i,/^ma/i,/^me/i,/^g/i,/^v/i,/^s/i]},iT={narrow:/^(a|m\.|p|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i,any:/^([ap]\.?\s?m\.?|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i},aT={any:{am:/^a/i,pm:/^p/i,midnight:/^mezza/i,noon:/^mezzo/i,morning:/mattina/i,afternoon:/pomeriggio/i,evening:/sera/i,night:/notte/i}},sT={ordinalNumber:gw({matchPattern:XC,parsePattern:ZC,valueCallback:a=>parseInt(a,10)}),era:Ui({matchPatterns:KC,defaultMatchWidth:"wide",parsePatterns:QC,defaultParseWidth:"any"}),quarter:Ui({matchPatterns:JC,defaultMatchWidth:"wide",parsePatterns:$C,defaultParseWidth:"any",valueCallback:a=>a+1}),month:Ui({matchPatterns:eT,defaultMatchWidth:"wide",parsePatterns:tT,defaultParseWidth:"any"}),day:Ui({matchPatterns:nT,defaultMatchWidth:"wide",parsePatterns:rT,defaultParseWidth:"any"}),dayPeriod:Ui({matchPatterns:iT,defaultMatchWidth:"any",parsePatterns:aT,defaultParseWidth:"any"})},oT={code:"it",formatDistance:IC,formatLong:BC,formatRelative:PC,localize:YC,match:sT,options:{weekStartsOn:1,firstWeekContainsDate:4}};function xw(a){var e,i,o="";if(typeof a=="string"||typeof a=="number")o+=a;else if(typeof a=="object")if(Array.isArray(a)){var h=a.length;for(e=0;e<h;e++)a[e]&&(i=xw(a[e]))&&(o&&(o+=" "),o+=i)}else for(i in a)a[i]&&(o&&(o+=" "),o+=i);return o}function gr(){for(var a,e,i=0,o="",h=arguments.length;i<h;i++)(a=arguments[i])&&(e=xw(a))&&(o&&(o+=" "),o+=e);return o}const lT=(a,e)=>{const i=new Array(a.length+e.length);for(let o=0;o<a.length;o++)i[o]=a[o];for(let o=0;o<e.length;o++)i[a.length+o]=e[o];return i},cT=(a,e)=>({classGroupId:a,validator:e}),ww=(a=new Map,e=null,i)=>({nextPart:a,validators:e,classGroupId:i}),yd="-",Yy=[],uT="arbitrary..",dT=a=>{const e=hT(a),{conflictingClassGroups:i,conflictingClassGroupModifiers:o}=a;return{getClassGroupId:x=>{if(x.startsWith("[")&&x.endsWith("]"))return fT(x);const A=x.split(yd),E=A[0]===""&&A.length>1?1:0;return bw(A,E,e)},getConflictingClassGroupIds:(x,A)=>{if(A){const E=o[x],v=i[x];return E?v?lT(v,E):E:v||Yy}return i[x]||Yy}}},bw=(a,e,i)=>{if(a.length-e===0)return i.classGroupId;const h=a[e],m=i.nextPart.get(h);if(m){const v=bw(a,e+1,m);if(v)return v}const x=i.validators;if(x===null)return;const A=e===0?a.join(yd):a.slice(e).join(yd),E=x.length;for(let v=0;v<E;v++){const T=x[v];if(T.validator(A))return T.classGroupId}},fT=a=>a.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=a.slice(1,-1),i=e.indexOf(":"),o=e.slice(0,i);return o?uT+o:void 0})(),hT=a=>{const{theme:e,classGroups:i}=a;return gT(i,e)},gT=(a,e)=>{const i=ww();for(const o in a){const h=a[o];w1(h,i,o,e)}return i},w1=(a,e,i,o)=>{const h=a.length;for(let m=0;m<h;m++){const x=a[m];mT(x,e,i,o)}},mT=(a,e,i,o)=>{if(typeof a=="string"){yT(a,e,i);return}if(typeof a=="function"){pT(a,e,i,o);return}xT(a,e,i,o)},yT=(a,e,i)=>{const o=a===""?e:vw(e,a);o.classGroupId=i},pT=(a,e,i,o)=>{if(wT(a)){w1(a(o),e,i,o);return}e.validators===null&&(e.validators=[]),e.validators.push(cT(i,a))},xT=(a,e,i,o)=>{const h=Object.entries(a),m=h.length;for(let x=0;x<m;x++){const[A,E]=h[x];w1(E,vw(e,A),i,o)}},vw=(a,e)=>{let i=a;const o=e.split(yd),h=o.length;for(let m=0;m<h;m++){const x=o[m];let A=i.nextPart.get(x);A||(A=ww(),i.nextPart.set(x,A)),i=A}return i},wT=a=>"isThemeGetter"in a&&a.isThemeGetter===!0,bT=a=>{if(a<1)return{get:()=>{},set:()=>{}};let e=0,i=Object.create(null),o=Object.create(null);const h=(m,x)=>{i[m]=x,e++,e>a&&(e=0,o=i,i=Object.create(null))};return{get(m){let x=i[m];if(x!==void 0)return x;if((x=o[m])!==void 0)return h(m,x),x},set(m,x){m in i?i[m]=x:h(m,x)}}},W0="!",Xy=":",vT=[],Zy=(a,e,i,o,h)=>({modifiers:a,hasImportantModifier:e,baseClassName:i,maybePostfixModifierPosition:o,isExternal:h}),ET=a=>{const{prefix:e,experimentalParseClassName:i}=a;let o=h=>{const m=[];let x=0,A=0,E=0,v;const T=h.length;for(let H=0;H<T;H++){const Z=h[H];if(x===0&&A===0){if(Z===Xy){m.push(h.slice(E,H)),E=H+1;continue}if(Z==="/"){v=H;continue}}Z==="["?x++:Z==="]"?x--:Z==="("?A++:Z===")"&&A--}const O=m.length===0?h:h.slice(E);let j=O,U=!1;O.endsWith(W0)?(j=O.slice(0,-1),U=!0):O.startsWith(W0)&&(j=O.slice(1),U=!0);const G=v&&v>E?v-E:void 0;return Zy(m,U,j,G)};if(e){const h=e+Xy,m=o;o=x=>x.startsWith(h)?m(x.slice(h.length)):Zy(vT,!1,x,void 0,!0)}if(i){const h=o;o=m=>i({className:m,parseClassName:h})}return o},ST=a=>{const e=new Map;return a.orderSensitiveModifiers.forEach((i,o)=>{e.set(i,1e6+o)}),i=>{const o=[];let h=[];for(let m=0;m<i.length;m++){const x=i[m],A=x[0]==="[",E=e.has(x);A||E?(h.length>0&&(h.sort(),o.push(...h),h=[]),o.push(x)):h.push(x)}return h.length>0&&(h.sort(),o.push(...h)),o}},AT=a=>({cache:bT(a.cacheSize),parseClassName:ET(a),sortModifiers:ST(a),...dT(a)}),_T=/\s+/,CT=(a,e)=>{const{parseClassName:i,getClassGroupId:o,getConflictingClassGroupIds:h,sortModifiers:m}=e,x=[],A=a.trim().split(_T);let E="";for(let v=A.length-1;v>=0;v-=1){const T=A[v],{isExternal:O,modifiers:j,hasImportantModifier:U,baseClassName:G,maybePostfixModifierPosition:H}=i(T);if(O){E=T+(E.length>0?" "+E:E);continue}let Z=!!H,le=o(Z?G.substring(0,H):G);if(!le){if(!Z){E=T+(E.length>0?" "+E:E);continue}if(le=o(G),!le){E=T+(E.length>0?" "+E:E);continue}Z=!1}const Q=j.length===0?"":j.length===1?j[0]:m(j).join(":"),q=U?Q+W0:Q,xe=q+le;if(x.indexOf(xe)>-1)continue;x.push(xe);const Le=h(le,Z);for(let Se=0;Se<Le.length;++Se){const $=Le[Se];x.push(q+$)}E=T+(E.length>0?" "+E:E)}return E},TT=(...a)=>{let e=0,i,o,h="";for(;e<a.length;)(i=a[e++])&&(o=Ew(i))&&(h&&(h+=" "),h+=o);return h},Ew=a=>{if(typeof a=="string")return a;let e,i="";for(let o=0;o<a.length;o++)a[o]&&(e=Ew(a[o]))&&(i&&(i+=" "),i+=e);return i},OT=(a,...e)=>{let i,o,h,m;const x=E=>{const v=e.reduce((T,O)=>O(T),a());return i=AT(v),o=i.cache.get,h=i.cache.set,m=A,A(E)},A=E=>{const v=o(E);if(v)return v;const T=CT(E,i);return h(E,T),T};return m=x,(...E)=>m(TT(...E))},NT=[],Gn=a=>{const e=i=>i[a]||NT;return e.isThemeGetter=!0,e},Sw=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Aw=/^\((?:(\w[\w-]*):)?(.+)\)$/i,RT=/^\d+\/\d+$/,IT=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,kT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,DT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,MT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,BT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zo=a=>RT.test(a),gt=a=>!!a&&!Number.isNaN(Number(a)),$a=a=>!!a&&Number.isInteger(Number(a)),Jh=a=>a.endsWith("%")&&gt(a.slice(0,-1)),la=a=>IT.test(a),LT=()=>!0,jT=a=>kT.test(a)&&!DT.test(a),_w=()=>!1,UT=a=>MT.test(a),PT=a=>BT.test(a),zT=a=>!je(a)&&!Ue(a),FT=a=>nl(a,Ow,_w),je=a=>Sw.test(a),Ms=a=>nl(a,Nw,jT),$h=a=>nl(a,WT,gt),Ky=a=>nl(a,Cw,_w),VT=a=>nl(a,Tw,PT),ed=a=>nl(a,Rw,UT),Ue=a=>Aw.test(a),tc=a=>rl(a,Nw),HT=a=>rl(a,YT),Qy=a=>rl(a,Cw),GT=a=>rl(a,Ow),qT=a=>rl(a,Tw),td=a=>rl(a,Rw,!0),nl=(a,e,i)=>{const o=Sw.exec(a);return o?o[1]?e(o[1]):i(o[2]):!1},rl=(a,e,i=!1)=>{const o=Aw.exec(a);return o?o[1]?e(o[1]):i:!1},Cw=a=>a==="position"||a==="percentage",Tw=a=>a==="image"||a==="url",Ow=a=>a==="length"||a==="size"||a==="bg-size",Nw=a=>a==="length",WT=a=>a==="number",YT=a=>a==="family-name",Rw=a=>a==="shadow",XT=()=>{const a=Gn("color"),e=Gn("font"),i=Gn("text"),o=Gn("font-weight"),h=Gn("tracking"),m=Gn("leading"),x=Gn("breakpoint"),A=Gn("container"),E=Gn("spacing"),v=Gn("radius"),T=Gn("shadow"),O=Gn("inset-shadow"),j=Gn("text-shadow"),U=Gn("drop-shadow"),G=Gn("blur"),H=Gn("perspective"),Z=Gn("aspect"),le=Gn("ease"),Q=Gn("animate"),q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],xe=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Le=()=>[...xe(),Ue,je],Se=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto","contain","none"],we=()=>[Ue,je,E],de=()=>[zo,"full","auto",...we()],At=()=>[$a,"none","subgrid",Ue,je],ft=()=>["auto",{span:["full",$a,Ue,je]},$a,Ue,je],Ie=()=>[$a,"auto",Ue,je],Ye=()=>["auto","min","max","fr",Ue,je],$e=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],re=()=>["start","end","center","stretch","center-safe","end-safe"],ee=()=>["auto",...we()],fe=()=>[zo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...we()],be=()=>[a,Ue,je],he=()=>[...xe(),Qy,Ky,{position:[Ue,je]}],ue=()=>["no-repeat",{repeat:["","x","y","space","round"]}],B=()=>["auto","cover","contain",GT,FT,{size:[Ue,je]}],Y=()=>[Jh,tc,Ms],ie=()=>["","none","full",v,Ue,je],J=()=>["",gt,tc,Ms],Te=()=>["solid","dashed","dotted","double"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Re=()=>[gt,Jh,Qy,Ky],He=()=>["","none",G,Ue,je],Oe=()=>["none",gt,Ue,je],We=()=>["none",gt,Ue,je],tt=()=>[gt,Ue,je],en=()=>[zo,"full",...we()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[la],breakpoint:[la],color:[LT],container:[la],"drop-shadow":[la],ease:["in","out","in-out"],font:[zT],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[la],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[la],shadow:[la],spacing:["px",gt],text:[la],"text-shadow":[la],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",zo,je,Ue,Z]}],container:["container"],columns:[{columns:[gt,je,Ue,A]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Le()}],overflow:[{overflow:Se()}],"overflow-x":[{"overflow-x":Se()}],"overflow-y":[{"overflow-y":Se()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:de()}],"inset-x":[{"inset-x":de()}],"inset-y":[{"inset-y":de()}],start:[{start:de()}],end:[{end:de()}],top:[{top:de()}],right:[{right:de()}],bottom:[{bottom:de()}],left:[{left:de()}],visibility:["visible","invisible","collapse"],z:[{z:[$a,"auto",Ue,je]}],basis:[{basis:[zo,"full","auto",A,...we()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[gt,zo,"auto","initial","none",je]}],grow:[{grow:["",gt,Ue,je]}],shrink:[{shrink:["",gt,Ue,je]}],order:[{order:[$a,"first","last","none",Ue,je]}],"grid-cols":[{"grid-cols":At()}],"col-start-end":[{col:ft()}],"col-start":[{"col-start":Ie()}],"col-end":[{"col-end":Ie()}],"grid-rows":[{"grid-rows":At()}],"row-start-end":[{row:ft()}],"row-start":[{"row-start":Ie()}],"row-end":[{"row-end":Ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ye()}],"auto-rows":[{"auto-rows":Ye()}],gap:[{gap:we()}],"gap-x":[{"gap-x":we()}],"gap-y":[{"gap-y":we()}],"justify-content":[{justify:[...$e(),"normal"]}],"justify-items":[{"justify-items":[...re(),"normal"]}],"justify-self":[{"justify-self":["auto",...re()]}],"align-content":[{content:["normal",...$e()]}],"align-items":[{items:[...re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...re(),{baseline:["","last"]}]}],"place-content":[{"place-content":$e()}],"place-items":[{"place-items":[...re(),"baseline"]}],"place-self":[{"place-self":["auto",...re()]}],p:[{p:we()}],px:[{px:we()}],py:[{py:we()}],ps:[{ps:we()}],pe:[{pe:we()}],pt:[{pt:we()}],pr:[{pr:we()}],pb:[{pb:we()}],pl:[{pl:we()}],m:[{m:ee()}],mx:[{mx:ee()}],my:[{my:ee()}],ms:[{ms:ee()}],me:[{me:ee()}],mt:[{mt:ee()}],mr:[{mr:ee()}],mb:[{mb:ee()}],ml:[{ml:ee()}],"space-x":[{"space-x":we()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":we()}],"space-y-reverse":["space-y-reverse"],size:[{size:fe()}],w:[{w:[A,"screen",...fe()]}],"min-w":[{"min-w":[A,"screen","none",...fe()]}],"max-w":[{"max-w":[A,"screen","none","prose",{screen:[x]},...fe()]}],h:[{h:["screen","lh",...fe()]}],"min-h":[{"min-h":["screen","lh","none",...fe()]}],"max-h":[{"max-h":["screen","lh",...fe()]}],"font-size":[{text:["base",i,tc,Ms]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,Ue,$h]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Jh,je]}],"font-family":[{font:[HT,je,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[h,Ue,je]}],"line-clamp":[{"line-clamp":[gt,"none",Ue,$h]}],leading:[{leading:[m,...we()]}],"list-image":[{"list-image":["none",Ue,je]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ue,je]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:be()}],"text-color":[{text:be()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Te(),"wavy"]}],"text-decoration-thickness":[{decoration:[gt,"from-font","auto",Ue,Ms]}],"text-decoration-color":[{decoration:be()}],"underline-offset":[{"underline-offset":[gt,"auto",Ue,je]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:we()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue,je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue,je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:he()}],"bg-repeat":[{bg:ue()}],"bg-size":[{bg:B()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},$a,Ue,je],radial:["",Ue,je],conic:[$a,Ue,je]},qT,VT]}],"bg-color":[{bg:be()}],"gradient-from-pos":[{from:Y()}],"gradient-via-pos":[{via:Y()}],"gradient-to-pos":[{to:Y()}],"gradient-from":[{from:be()}],"gradient-via":[{via:be()}],"gradient-to":[{to:be()}],rounded:[{rounded:ie()}],"rounded-s":[{"rounded-s":ie()}],"rounded-e":[{"rounded-e":ie()}],"rounded-t":[{"rounded-t":ie()}],"rounded-r":[{"rounded-r":ie()}],"rounded-b":[{"rounded-b":ie()}],"rounded-l":[{"rounded-l":ie()}],"rounded-ss":[{"rounded-ss":ie()}],"rounded-se":[{"rounded-se":ie()}],"rounded-ee":[{"rounded-ee":ie()}],"rounded-es":[{"rounded-es":ie()}],"rounded-tl":[{"rounded-tl":ie()}],"rounded-tr":[{"rounded-tr":ie()}],"rounded-br":[{"rounded-br":ie()}],"rounded-bl":[{"rounded-bl":ie()}],"border-w":[{border:J()}],"border-w-x":[{"border-x":J()}],"border-w-y":[{"border-y":J()}],"border-w-s":[{"border-s":J()}],"border-w-e":[{"border-e":J()}],"border-w-t":[{"border-t":J()}],"border-w-r":[{"border-r":J()}],"border-w-b":[{"border-b":J()}],"border-w-l":[{"border-l":J()}],"divide-x":[{"divide-x":J()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":J()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Te(),"hidden","none"]}],"divide-style":[{divide:[...Te(),"hidden","none"]}],"border-color":[{border:be()}],"border-color-x":[{"border-x":be()}],"border-color-y":[{"border-y":be()}],"border-color-s":[{"border-s":be()}],"border-color-e":[{"border-e":be()}],"border-color-t":[{"border-t":be()}],"border-color-r":[{"border-r":be()}],"border-color-b":[{"border-b":be()}],"border-color-l":[{"border-l":be()}],"divide-color":[{divide:be()}],"outline-style":[{outline:[...Te(),"none","hidden"]}],"outline-offset":[{"outline-offset":[gt,Ue,je]}],"outline-w":[{outline:["",gt,tc,Ms]}],"outline-color":[{outline:be()}],shadow:[{shadow:["","none",T,td,ed]}],"shadow-color":[{shadow:be()}],"inset-shadow":[{"inset-shadow":["none",O,td,ed]}],"inset-shadow-color":[{"inset-shadow":be()}],"ring-w":[{ring:J()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:be()}],"ring-offset-w":[{"ring-offset":[gt,Ms]}],"ring-offset-color":[{"ring-offset":be()}],"inset-ring-w":[{"inset-ring":J()}],"inset-ring-color":[{"inset-ring":be()}],"text-shadow":[{"text-shadow":["none",j,td,ed]}],"text-shadow-color":[{"text-shadow":be()}],opacity:[{opacity:[gt,Ue,je]}],"mix-blend":[{"mix-blend":[...me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[gt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Re()}],"mask-image-linear-to-pos":[{"mask-linear-to":Re()}],"mask-image-linear-from-color":[{"mask-linear-from":be()}],"mask-image-linear-to-color":[{"mask-linear-to":be()}],"mask-image-t-from-pos":[{"mask-t-from":Re()}],"mask-image-t-to-pos":[{"mask-t-to":Re()}],"mask-image-t-from-color":[{"mask-t-from":be()}],"mask-image-t-to-color":[{"mask-t-to":be()}],"mask-image-r-from-pos":[{"mask-r-from":Re()}],"mask-image-r-to-pos":[{"mask-r-to":Re()}],"mask-image-r-from-color":[{"mask-r-from":be()}],"mask-image-r-to-color":[{"mask-r-to":be()}],"mask-image-b-from-pos":[{"mask-b-from":Re()}],"mask-image-b-to-pos":[{"mask-b-to":Re()}],"mask-image-b-from-color":[{"mask-b-from":be()}],"mask-image-b-to-color":[{"mask-b-to":be()}],"mask-image-l-from-pos":[{"mask-l-from":Re()}],"mask-image-l-to-pos":[{"mask-l-to":Re()}],"mask-image-l-from-color":[{"mask-l-from":be()}],"mask-image-l-to-color":[{"mask-l-to":be()}],"mask-image-x-from-pos":[{"mask-x-from":Re()}],"mask-image-x-to-pos":[{"mask-x-to":Re()}],"mask-image-x-from-color":[{"mask-x-from":be()}],"mask-image-x-to-color":[{"mask-x-to":be()}],"mask-image-y-from-pos":[{"mask-y-from":Re()}],"mask-image-y-to-pos":[{"mask-y-to":Re()}],"mask-image-y-from-color":[{"mask-y-from":be()}],"mask-image-y-to-color":[{"mask-y-to":be()}],"mask-image-radial":[{"mask-radial":[Ue,je]}],"mask-image-radial-from-pos":[{"mask-radial-from":Re()}],"mask-image-radial-to-pos":[{"mask-radial-to":Re()}],"mask-image-radial-from-color":[{"mask-radial-from":be()}],"mask-image-radial-to-color":[{"mask-radial-to":be()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":xe()}],"mask-image-conic-pos":[{"mask-conic":[gt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Re()}],"mask-image-conic-to-pos":[{"mask-conic-to":Re()}],"mask-image-conic-from-color":[{"mask-conic-from":be()}],"mask-image-conic-to-color":[{"mask-conic-to":be()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:he()}],"mask-repeat":[{mask:ue()}],"mask-size":[{mask:B()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ue,je]}],filter:[{filter:["","none",Ue,je]}],blur:[{blur:He()}],brightness:[{brightness:[gt,Ue,je]}],contrast:[{contrast:[gt,Ue,je]}],"drop-shadow":[{"drop-shadow":["","none",U,td,ed]}],"drop-shadow-color":[{"drop-shadow":be()}],grayscale:[{grayscale:["",gt,Ue,je]}],"hue-rotate":[{"hue-rotate":[gt,Ue,je]}],invert:[{invert:["",gt,Ue,je]}],saturate:[{saturate:[gt,Ue,je]}],sepia:[{sepia:["",gt,Ue,je]}],"backdrop-filter":[{"backdrop-filter":["","none",Ue,je]}],"backdrop-blur":[{"backdrop-blur":He()}],"backdrop-brightness":[{"backdrop-brightness":[gt,Ue,je]}],"backdrop-contrast":[{"backdrop-contrast":[gt,Ue,je]}],"backdrop-grayscale":[{"backdrop-grayscale":["",gt,Ue,je]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[gt,Ue,je]}],"backdrop-invert":[{"backdrop-invert":["",gt,Ue,je]}],"backdrop-opacity":[{"backdrop-opacity":[gt,Ue,je]}],"backdrop-saturate":[{"backdrop-saturate":[gt,Ue,je]}],"backdrop-sepia":[{"backdrop-sepia":["",gt,Ue,je]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":we()}],"border-spacing-x":[{"border-spacing-x":we()}],"border-spacing-y":[{"border-spacing-y":we()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ue,je]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[gt,"initial",Ue,je]}],ease:[{ease:["linear","initial",le,Ue,je]}],delay:[{delay:[gt,Ue,je]}],animate:[{animate:["none",Q,Ue,je]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[H,Ue,je]}],"perspective-origin":[{"perspective-origin":Le()}],rotate:[{rotate:Oe()}],"rotate-x":[{"rotate-x":Oe()}],"rotate-y":[{"rotate-y":Oe()}],"rotate-z":[{"rotate-z":Oe()}],scale:[{scale:We()}],"scale-x":[{"scale-x":We()}],"scale-y":[{"scale-y":We()}],"scale-z":[{"scale-z":We()}],"scale-3d":["scale-3d"],skew:[{skew:tt()}],"skew-x":[{"skew-x":tt()}],"skew-y":[{"skew-y":tt()}],transform:[{transform:[Ue,je,"","none","gpu","cpu"]}],"transform-origin":[{origin:Le()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:en()}],"translate-x":[{"translate-x":en()}],"translate-y":[{"translate-y":en()}],"translate-z":[{"translate-z":en()}],"translate-none":["translate-none"],accent:[{accent:be()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:be()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue,je]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":we()}],"scroll-mx":[{"scroll-mx":we()}],"scroll-my":[{"scroll-my":we()}],"scroll-ms":[{"scroll-ms":we()}],"scroll-me":[{"scroll-me":we()}],"scroll-mt":[{"scroll-mt":we()}],"scroll-mr":[{"scroll-mr":we()}],"scroll-mb":[{"scroll-mb":we()}],"scroll-ml":[{"scroll-ml":we()}],"scroll-p":[{"scroll-p":we()}],"scroll-px":[{"scroll-px":we()}],"scroll-py":[{"scroll-py":we()}],"scroll-ps":[{"scroll-ps":we()}],"scroll-pe":[{"scroll-pe":we()}],"scroll-pt":[{"scroll-pt":we()}],"scroll-pr":[{"scroll-pr":we()}],"scroll-pb":[{"scroll-pb":we()}],"scroll-pl":[{"scroll-pl":we()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue,je]}],fill:[{fill:["none",...be()]}],"stroke-w":[{stroke:[gt,tc,Ms,$h]}],stroke:[{stroke:["none",...be()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ZT=OT(XT);function yr({children:a,className:e,intensity:i="medium",onClick:o}){const h=gr("rounded-[24px] transition-all duration-300 relative overflow-hidden","border border-gray-200 dark:border-white/10","shadow-none"),m={low:"bg-white dark:bg-pantry-bg-secondary",medium:"bg-white dark:bg-pantry-bg-secondary",high:"bg-white dark:bg-pantry-bg-secondary"};return I.jsx("div",{onClick:o,className:ZT(h,m[i],o&&"cursor-pointer hover:bg-gray-50 dark:hover:bg-white/5 active:scale-[0.99]",e),children:I.jsx("div",{className:"relative z-10",children:a})})}const Jy={Freschi:"",Dispensa:"",Surgelati:"",Bevande:"",Altro:""};function KT({products:a,onUpdate:e}){const[i,o]=Fe.useState("Tutti"),[h,m]=Fe.useState(null),[x,A]=Fe.useState(null),E=G=>{m(G)},v=async(G,H)=>{const Z=a.find(le=>le.id===G);Z&&(await p1(()=>Promise.resolve().then(()=>a4),void 0).then(le=>le.finalizeProduct(Z,H)),m(null),A(Z),e())},T=async G=>{G&&x&&await g1({name:x.name}),A(null)},O=a.filter(G=>!G.status||G.status==="active"),U=[...O.filter(G=>i==="Tutti"?!0:G.category===i)].sort((G,H)=>new Date(G.expiryDate)-new Date(H.expiryDate));return O.length===0&&i==="Tutti"?I.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[I.jsx("div",{className:"w-20 h-20 bg-white/30 backdrop-blur-xl rounded-[32px] flex items-center justify-center mb-4 shadow-lg border border-white/40",children:I.jsx("span",{className:"text-4xl",children:""})}),I.jsx("p",{className:"text-lg font-medium",children:"La dispensa  vuota."}),I.jsx("p",{className:"text-sm opacity-70 mt-1",children:"Premi + per iniziare"})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-6 -mx-5 pl-8 pr-5 no-scrollbar snap-x",children:[I.jsx("button",{onClick:()=>o("Tutti"),className:gr("px-6 py-2.5 rounded-2xl text-sm font-bold whitespace-nowrap transition-all duration-300 snap-start border",i==="Tutti"?"bg-gray-900 text-white border-transparent dark:bg-white dark:text-gray-900 shadow-md":"bg-white/40 text-gray-600 border-white/40 dark:bg-pantry-bg-secondary dark:text-white hover:bg-white/60 dark:hover:bg-white/10"),children:"Tutti"}),Object.entries(Jy).map(([G,H])=>I.jsxs("button",{onClick:()=>o(G),className:gr("px-5 py-2.5 rounded-2xl text-sm font-bold whitespace-nowrap transition-all duration-300 snap-start border",i===G?"bg-gray-900 text-white border-transparent dark:bg-white dark:text-gray-900 shadow-md":"bg-white/40 text-gray-600 border-white/40 dark:bg-pantry-bg-secondary dark:text-white hover:bg-white/60 dark:hover:bg-white/10"),children:[I.jsx("span",{className:"mr-1.5",children:H})," ",G]},G))]}),I.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-6 pb-24 auto-rows-fr",children:U.map(G=>{const H=y1(md(G.expiryDate),new Date);let Z=null,le="",Q="text-gray-900 dark:text-pantry-text-primary",q="bg-green-100 text-green-700 dark:bg-green-500/10 dark:text-green-400";return Z=null,H<3?(q="bg-red-100 text-red-700 dark:bg-red-500/10 dark:text-red-400",Z=I.jsx(b0,{size:14,className:"text-red-600 dark:text-red-400"})):H<=5&&(q="bg-yellow-100 text-yellow-800 dark:bg-yellow-500/10 dark:text-yellow-400",Z=I.jsx(b0,{size:14,className:"text-yellow-600 dark:text-yellow-400"})),I.jsx(yr,{className:gr("p-4 sm:p-5 md:p-6 lg:p-8 transition-all flex flex-col justify-center h-full",le),children:I.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 md:gap-5",children:[I.jsx("div",{className:"flex-shrink-0 w-12 h-12 md:w-16 md:h-16 rounded-2xl bg-white/60 shadow-sm flex items-center justify-center text-2xl md:text-4xl",children:Jy[G.category||"Dispensa"]||""}),I.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center min-h-[48px]",children:[I.jsxs("div",{className:"flex items-center justify-between gap-2",children:[I.jsx("h3",{className:gr("font-bold text-lg md:text-xl lg:text-2xl leading-tight truncate pr-1",Q),children:G.name}),I.jsx("button",{onClick:()=>E(G.id),className:"flex-shrink-0 w-8 h-8 md:w-10 md:h-10 flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all active:scale-90 -mr-1",children:I.jsx(wd,{size:18,className:"md:w-6 md:h-6",strokeWidth:2.5})})]}),I.jsxs("div",{className:gr("self-start inline-flex items-center gap-1.5 px-2.5 py-1 md:px-3 md:py-1.5 rounded-lg text-xs md:text-sm font-bold mt-1 md:mt-2",q),children:[Z,I.jsxs("span",{children:[H<0?"Scaduto il ":"Scade il ",lC(md(G.expiryDate),"d MMM yyyy",{locale:oT}).toUpperCase()]}),H>=0&&H<=7&&I.jsxs("span",{className:"opacity-80",children:["(",H,"g)"]})]})]})]})},G.id)})}),h&&I.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center p-6 z-50 animate-fade-in-up",children:I.jsxs(yr,{intensity:"high",className:"w-full max-w-sm p-8 text-center border-white/80 shadow-2xl",children:[I.jsx("h3",{className:"text-2xl font-bold mb-8 text-gray-800",children:"Cosa ne hai fatto?"}),I.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[I.jsxs("button",{onClick:()=>v(h,"consumed"),className:"flex flex-col items-center justify-center p-5 bg-green-50/50 hover:bg-green-100 border border-green-100 text-green-700 rounded-2xl transition hover:scale-105 active:scale-95 duration-200",children:[I.jsx("span",{className:"text-5xl mb-3 drop-shadow-sm",children:""}),I.jsx("span",{className:"font-bold",children:"Mangiato"})]}),I.jsxs("button",{onClick:()=>v(h,"wasted"),className:"flex flex-col items-center justify-center p-5 bg-red-50/50 hover:bg-red-100 border border-red-100 text-red-700 rounded-2xl transition hover:scale-105 active:scale-95 duration-200",children:[I.jsx("span",{className:"text-5xl mb-3 drop-shadow-sm",children:""}),I.jsx("span",{className:"font-bold",children:"Buttato"})]})]}),I.jsx("button",{onClick:()=>m(null),className:"mt-8 text-gray-400 text-sm font-medium hover:text-gray-600",children:"Annulla"})]})}),x&&I.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center p-6 z-50 animate-fade-in-up",children:I.jsxs(yr,{intensity:"high",className:"w-full max-w-sm p-8 text-center border-white/80 shadow-2xl",children:[I.jsx("div",{className:"w-20 h-20 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-inner",children:I.jsx(Z0,{size:36,strokeWidth:2.5})}),I.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900 dark:text-white",children:"Lista Spesa?"}),I.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mb-8 leading-relaxed",children:["Vuoi aggiungere ",I.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:x.name})," alla lista della spesa?"]}),I.jsxs("div",{className:"flex gap-4",children:[I.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-3.5 border border-gray-200 bg-white text-gray-600 font-bold rounded-xl hover:bg-gray-50 dark:bg-white/10 dark:border-white/10 dark:text-gray-300 dark:hover:bg-white/20 transition",children:"No"}),I.jsx("button",{onClick:()=>T(!0),className:"flex-1 py-3.5 bg-gray-900 text-white dark:bg-white dark:text-black font-bold rounded-xl hover:bg-black shadow-lg hover:shadow-xl transition transform hover:-translate-y-0.5",children:"S, aggiungi"})]})]})})]})}function QT({onComplete:a,onCancel:e,isAdding:i}){const[o,h]=Fe.useState("welcome"),[m,x]=Fe.useState({name:"",pin:"",inviteCode:""}),[A,E]=Fe.useState(""),[v,T]=Fe.useState(!1),O=async j=>{j.preventDefault(),E(""),T(!0);try{let U;o==="create"?U=await iw(m.name,m.pin):U=await aw(m.inviteCode,m.pin),U.success?a(U.pantryId):E(U.error)}catch{E("Errore imprevisto. Riprova.")}finally{T(!1)}};return o==="welcome"?I.jsxs("div",{className:"h-[100dvh] flex flex-col items-center justify-center p-6 bg-gradient-to-br from-teal-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:to-gray-800 text-center animate-fade-in-up",children:[I.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center shadow-lg mb-6",children:I.jsx(v0,{size:40,className:"text-white"})}),I.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Pantry Family"}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-12 max-w-xs mx-auto",children:"Gestisci la dispensa insieme ai tuoi coinquilini o familiari."}),I.jsxs("div",{className:"w-full max-w-sm space-y-4",children:[I.jsxs("button",{onClick:()=>h("create"),className:"w-full py-4 bg-blue-600 text-white font-bold rounded-2xl shadow-lg hover:shadow-blue-500/30 hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-3",children:[I.jsx(v0,{size:20}),"Crea Nuova Famiglia"]}),I.jsxs("button",{onClick:()=>h("join"),className:"w-full py-4 bg-white dark:bg-white/10 text-gray-800 dark:text-white font-bold rounded-2xl border border-gray-100 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/20 transition-all flex items-center justify-center gap-3",children:[I.jsx(qv,{size:20}),"Unisciti ad una Famiglia"]})]})]}):I.jsxs("div",{className:"h-[100dvh] flex flex-col p-6 bg-white dark:bg-gray-900 animate-fade-in-up",children:[I.jsx("button",{onClick:()=>{h("welcome"),E("")},className:"self-start p-2 -ml-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:" Indietro"}),e&&o==="welcome"&&I.jsx("button",{onClick:e,className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 font-bold",children:"Annulla"}),I.jsxs("div",{className:"flex-1 flex flex-col justify-center max-w-sm mx-auto w-full",children:[I.jsxs("div",{className:"mb-8",children:[I.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:o==="create"?"Crea Famiglia":"Unisciti alla Famiglia"}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:o==="create"?"Scegli un nome e un PIN segreto per il tuo gruppo.":"Inserisci il codice invito ricevuto e il PIN di sicurezza."})]}),I.jsxs("form",{onSubmit:O,className:"space-y-5",children:[o==="create"?I.jsxs(I.Fragment,{children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Nome Famiglia"}),I.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all dark:text-white font-medium",placeholder:"Es. Casa Mare",value:m.name,onChange:j=>x({...m,name:j.target.value})})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Scegli PIN (4 cifre)"}),I.jsx("input",{type:"tel",required:!0,maxLength:4,pattern:"[0-9]{4}",className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all dark:text-white font-medium tracking-widest text-center text-lg",placeholder:"0000",value:m.pin,onChange:j=>x({...m,pin:j.target.value})})]})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Codice Invito (UUID)"}),I.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all dark:text-white font-mono text-sm",placeholder:"xxxxxxxx-xxxx-...",value:m.inviteCode,onChange:j=>x({...m,inviteCode:j.target.value})})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"PIN di Accesso"}),I.jsx("input",{type:"tel",required:!0,maxLength:4,className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all dark:text-white font-medium tracking-widest text-center text-lg",placeholder:"",value:m.pin,onChange:j=>x({...m,pin:j.target.value})})]})]}),A&&I.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-xl font-medium text-center animate-shake",children:A}),I.jsxs("button",{type:"submit",disabled:v,className:"w-full py-4 bg-blue-600 text-white font-bold rounded-2xl shadow-lg hover:shadow-blue-500/30 hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-2",children:[v?"Attendere...":o==="create"?"Crea Gruppo":"Entra nel Gruppo",!v&&I.jsx(pv,{size:20})]})]})]})]})}var De;(function(a){a[a.QR_CODE=0]="QR_CODE",a[a.AZTEC=1]="AZTEC",a[a.CODABAR=2]="CODABAR",a[a.CODE_39=3]="CODE_39",a[a.CODE_93=4]="CODE_93",a[a.CODE_128=5]="CODE_128",a[a.DATA_MATRIX=6]="DATA_MATRIX",a[a.MAXICODE=7]="MAXICODE",a[a.ITF=8]="ITF",a[a.EAN_13=9]="EAN_13",a[a.EAN_8=10]="EAN_8",a[a.PDF_417=11]="PDF_417",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(De||(De={}));var $y=new Map([[De.QR_CODE,"QR_CODE"],[De.AZTEC,"AZTEC"],[De.CODABAR,"CODABAR"],[De.CODE_39,"CODE_39"],[De.CODE_93,"CODE_93"],[De.CODE_128,"CODE_128"],[De.DATA_MATRIX,"DATA_MATRIX"],[De.MAXICODE,"MAXICODE"],[De.ITF,"ITF"],[De.EAN_13,"EAN_13"],[De.EAN_8,"EAN_8"],[De.PDF_417,"PDF_417"],[De.RSS_14,"RSS_14"],[De.RSS_EXPANDED,"RSS_EXPANDED"],[De.UPC_A,"UPC_A"],[De.UPC_E,"UPC_E"],[De.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),ep;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.URL=1]="URL"})(ep||(ep={}));function JT(a){return Object.values(De).includes(a)}var wc;(function(a){a[a.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",a[a.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(wc||(wc={}));var $T=(function(){function a(){}return a.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",a.SCAN_DEFAULT_FPS=2,a.DEFAULT_DISABLE_FLIP=!1,a.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,a.DEFAULT_SUPPORTED_SCAN_TYPE=[wc.SCAN_TYPE_CAMERA,wc.SCAN_TYPE_FILE],a})(),Iw=(function(){function a(e,i){this.format=e,this.formatName=i}return a.prototype.toString=function(){return this.formatName},a.create=function(e){if(!$y.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new a(e,$y.get(e))},a})(),tp=(function(){function a(){}return a.createFromText=function(e){var i={text:e};return{decodedText:e,result:i}},a.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},a})(),Y0;(function(a){a[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Y0||(Y0={}));var e8=(function(){function a(){}return a.createFrom=function(e){return{errorMessage:e,type:Y0.UNKWOWN_ERROR}},a})(),t8=(function(){function a(e){this.verbose=e}return a.prototype.log=function(e){this.verbose&&console.log(e)},a.prototype.warn=function(e){this.verbose&&console.warn(e)},a.prototype.logError=function(e,i){(this.verbose||i===!0)&&console.error(e)},a.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},a})();function ca(a){return typeof a>"u"||a===null}var Wo=(function(){function a(){}return a.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},a.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},a.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},a.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},a.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},a.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},a.scannerPaused=function(){return"Scanner paused"},a})(),kw=(function(){function a(){}return a.isMediaStreamConstraintsValid=function(e,i){if(typeof e!="object"){var o=typeof e;return i.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(h),x=Object.keys(e),A=0,E=x;A<E.length;A++){var v=E[A];if(m.has(v))return i.logError("".concat(v," is not supported videoConstaints."),!0),!1}return!0},a})(),oc={exports:{}},n8=oc.exports,np;function r8(){return np||(np=1,(function(a,e){(function(i,o){o(e)})(n8,(function(i){function o(N){return N==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,n){N.__proto__=n}||function(N,n){for(var s in n)n.hasOwnProperty(s)&&(N[s]=n[s])};function m(N,n){h(N,n);function s(){this.constructor=N}N.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}function x(N,n){var s=Object.setPrototypeOf;s?s(N,n):N.__proto__=n}function A(N,n){n===void 0&&(n=N.constructor);var s=Error.captureStackTrace;s&&s(N,n)}var E=(function(N){m(n,N);function n(s){var l=this.constructor,u=N.call(this,s)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),x(u,l.prototype),A(u),u}return n})(Error);class v extends E{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}v.kind="Exception";class T extends v{}T.kind="ArgumentException";class O extends v{}O.kind="IllegalArgumentException";class j{constructor(n){if(this.binarizer=n,n===null)throw new O("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,s){return this.binarizer.getBlackRow(n,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,s,l,u){const d=this.binarizer.getLuminanceSource().crop(n,s,l,u);return new j(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new j(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new j(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class U extends v{static getChecksumInstance(){return new U}}U.kind="ChecksumException";class G{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class H{static arraycopy(n,s,l,u,d){for(;d--;)l[u++]=n[s++]}static currentTimeMillis(){return Date.now()}}class Z extends v{}Z.kind="IndexOutOfBoundsException";class le extends Z{constructor(n=void 0,s=void 0){super(s),this.index=n,this.message=s}}le.kind="ArrayIndexOutOfBoundsException";class Q{static fill(n,s){for(let l=0,u=n.length;l<u;l++)n[l]=s}static fillWithin(n,s,l,u){Q.rangeCheck(n.length,s,l);for(let d=s;d<l;d++)n[d]=u}static rangeCheck(n,s,l){if(s>l)throw new O("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new le(s);if(l>n)throw new le(l)}static asList(...n){return n}static create(n,s,l){return Array.from({length:n}).map(d=>Array.from({length:s}).fill(l))}static createInt32Array(n,s,l){return Array.from({length:n}).map(d=>Int32Array.from({length:s}).fill(l))}static equals(n,s){if(!n||!s||!n.length||!s.length||n.length!==s.length)return!1;for(let l=0,u=n.length;l<u;l++)if(n[l]!==s[l])return!1;return!0}static hashCode(n){if(n===null)return 0;let s=1;for(const l of n)s=31*s+l;return s}static fillUint8Array(n,s){for(let l=0;l!==n.length;l++)n[l]=s}static copyOf(n,s){return n.slice(0,s)}static copyOfUint8Array(n,s){if(n.length<=s){const l=new Uint8Array(s);return l.set(n),l}return n.slice(0,s)}static copyOfRange(n,s,l){const u=l-s,d=new Int32Array(u);return H.arraycopy(n,s,d,0,u),d}static binarySearch(n,s,l){l===void 0&&(l=Q.numberComparator);let u=0,d=n.length-1;for(;u<=d;){const g=d+u>>1,y=l(s,n[g]);if(y>0)u=g+1;else if(y<0)d=g-1;else return g}return-u-1}static numberComparator(n,s){return n-s}}class q{static numberOfTrailingZeros(n){let s;if(n===0)return 32;let l=31;return s=n<<16,s!==0&&(l-=16,n=s),s=n<<8,s!==0&&(l-=8,n=s),s=n<<4,s!==0&&(l-=4,n=s),s=n<<2,s!==0&&(l-=2,n=s),l-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let s=1;return n>>>16||(s+=16,n<<=16),n>>>24||(s+=8,n<<=8),n>>>28||(s+=4,n<<=4),n>>>30||(s+=2,n<<=2),s-=n>>>31,s}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,s){return Math.trunc(n/s)}static parseInt(n,s=void 0){return parseInt(n,s)}}q.MIN_VALUE_32_BITS=-2147483648,q.MAX_VALUE=Number.MAX_SAFE_INTEGER;class xe{constructor(n,s){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,s==null?this.bits=xe.makeArray(n):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const s=xe.makeArray(n);H.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const s=this.size;if(n>=s)return s;const l=this.bits;let u=Math.floor(n/32),d=l[u];d&=~((1<<(n&31))-1);const g=l.length;for(;d===0;){if(++u===g)return s;d=l[u]}const y=u*32+q.numberOfTrailingZeros(d);return y>s?s:y}getNextUnset(n){const s=this.size;if(n>=s)return s;const l=this.bits;let u=Math.floor(n/32),d=~l[u];d&=~((1<<(n&31))-1);const g=l.length;for(;d===0;){if(++u===g)return s;d=~l[u]}const y=u*32+q.numberOfTrailingZeros(d);return y>s?s:y}setBulk(n,s){this.bits[Math.floor(n/32)]=s}setRange(n,s){if(s<n||n<0||s>this.size)throw new O;if(s===n)return;s--;const l=Math.floor(n/32),u=Math.floor(s/32),d=this.bits;for(let g=l;g<=u;g++){const y=g>l?0:n&31,S=(2<<(g<u?31:s&31))-(1<<y);d[g]|=S}}clear(){const n=this.bits.length,s=this.bits;for(let l=0;l<n;l++)s[l]=0}isRange(n,s,l){if(s<n||n<0||s>this.size)throw new O;if(s===n)return!0;s--;const u=Math.floor(n/32),d=Math.floor(s/32),g=this.bits;for(let y=u;y<=d;y++){const w=y>u?0:n&31,_=(2<<(y<d?31:s&31))-(1<<w)&4294967295;if((g[y]&_)!==(l?_:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,s){if(s<0||s>32)throw new O("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit((n>>l-1&1)===1)}appendBitArray(n){const s=n.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(n.get(l))}xor(n){if(this.size!==n.size)throw new O("Sizes don't match");const s=this.bits;for(let l=0,u=s.length;l<u;l++)s[l]^=n.bits[l]}toBytes(n,s,l,u){for(let d=0;d<u;d++){let g=0;for(let y=0;y<8;y++)this.get(n)&&(g|=1<<7-y),n++;s[l+d]=g}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,u=this.bits;for(let d=0;d<l;d++){let g=u[d];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,n[s-d]=g}if(this.size!==l*32){const d=l*32-this.size;let g=n[0]>>>d;for(let y=1;y<l;y++){const w=n[y];g|=w<<32-d,n[y-1]=g,g=w>>>d}n[l-1]=g}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof xe))return!1;const s=n;return this.size===s.size&&Q.equals(this.bits,s.bits)}hashCode(){return 31*this.size+Q.hashCode(this.bits)}toString(){let n="";for(let s=0,l=this.size;s<l;s++)(s&7)===0&&(n+=" "),n+=this.get(s)?"X":".";return n}clone(){return new xe(this.size,this.bits.slice())}}var Le;(function(N){N[N.OTHER=0]="OTHER",N[N.PURE_BARCODE=1]="PURE_BARCODE",N[N.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",N[N.TRY_HARDER=3]="TRY_HARDER",N[N.CHARACTER_SET=4]="CHARACTER_SET",N[N.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",N[N.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",N[N.ASSUME_GS1=7]="ASSUME_GS1",N[N.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",N[N.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",N[N.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Le||(Le={}));var Se=Le;class $ extends v{static getFormatInstance(){return new $}}$.kind="FormatException";var we;(function(N){N[N.Cp437=0]="Cp437",N[N.ISO8859_1=1]="ISO8859_1",N[N.ISO8859_2=2]="ISO8859_2",N[N.ISO8859_3=3]="ISO8859_3",N[N.ISO8859_4=4]="ISO8859_4",N[N.ISO8859_5=5]="ISO8859_5",N[N.ISO8859_6=6]="ISO8859_6",N[N.ISO8859_7=7]="ISO8859_7",N[N.ISO8859_8=8]="ISO8859_8",N[N.ISO8859_9=9]="ISO8859_9",N[N.ISO8859_10=10]="ISO8859_10",N[N.ISO8859_11=11]="ISO8859_11",N[N.ISO8859_13=12]="ISO8859_13",N[N.ISO8859_14=13]="ISO8859_14",N[N.ISO8859_15=14]="ISO8859_15",N[N.ISO8859_16=15]="ISO8859_16",N[N.SJIS=16]="SJIS",N[N.Cp1250=17]="Cp1250",N[N.Cp1251=18]="Cp1251",N[N.Cp1252=19]="Cp1252",N[N.Cp1256=20]="Cp1256",N[N.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",N[N.UTF8=22]="UTF8",N[N.ASCII=23]="ASCII",N[N.Big5=24]="Big5",N[N.GB18030=25]="GB18030",N[N.EUC_KR=26]="EUC_KR"})(we||(we={}));class de{constructor(n,s,l,...u){this.valueIdentifier=n,this.name=l,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,de.VALUE_IDENTIFIER_TO_ECI.set(n,this),de.NAME_TO_ECI.set(l,this);const d=this.values;for(let g=0,y=d.length;g!==y;g++){const w=d[g];de.VALUES_TO_ECI.set(w,this)}for(const g of u)de.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new $("incorect value");const s=de.VALUES_TO_ECI.get(n);if(s===void 0)throw new $("incorect value");return s}static getCharacterSetECIByName(n){const s=de.NAME_TO_ECI.get(n);if(s===void 0)throw new $("incorect value");return s}equals(n){if(!(n instanceof de))return!1;const s=n;return this.getName()===s.getName()}}de.VALUE_IDENTIFIER_TO_ECI=new Map,de.VALUES_TO_ECI=new Map,de.NAME_TO_ECI=new Map,de.Cp437=new de(we.Cp437,Int32Array.from([0,2]),"Cp437"),de.ISO8859_1=new de(we.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),de.ISO8859_2=new de(we.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),de.ISO8859_3=new de(we.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),de.ISO8859_4=new de(we.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),de.ISO8859_5=new de(we.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),de.ISO8859_6=new de(we.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),de.ISO8859_7=new de(we.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),de.ISO8859_8=new de(we.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),de.ISO8859_9=new de(we.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),de.ISO8859_10=new de(we.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),de.ISO8859_11=new de(we.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),de.ISO8859_13=new de(we.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),de.ISO8859_14=new de(we.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),de.ISO8859_15=new de(we.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),de.ISO8859_16=new de(we.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),de.SJIS=new de(we.SJIS,20,"SJIS","Shift_JIS"),de.Cp1250=new de(we.Cp1250,21,"Cp1250","windows-1250"),de.Cp1251=new de(we.Cp1251,22,"Cp1251","windows-1251"),de.Cp1252=new de(we.Cp1252,23,"Cp1252","windows-1252"),de.Cp1256=new de(we.Cp1256,24,"Cp1256","windows-1256"),de.UnicodeBigUnmarked=new de(we.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),de.UTF8=new de(we.UTF8,26,"UTF8","UTF-8"),de.ASCII=new de(we.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),de.Big5=new de(we.Big5,28,"Big5"),de.GB18030=new de(we.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),de.EUC_KR=new de(we.EUC_KR,30,"EUC_KR","EUC-KR");class At extends v{}At.kind="UnsupportedOperationException";class ft{static decode(n,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(n,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(n,l):new TextDecoder(l).decode(n)}static shouldDecodeOnFallback(n){return!ft.isBrowser()&&n==="ISO-8859-1"}static encode(n,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(n,l):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof de?n:de.getCharacterSetECIByName(n)}static decodeFallback(n,s){const l=this.encodingCharacterSet(s);if(ft.isDecodeFallbackSupported(l)){let u="";for(let d=0,g=n.length;d<g;d++){let y=n[d].toString(16);y.length<2&&(y="0"+y),u+="%"+y}return decodeURIComponent(u)}if(l.equals(de.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new At(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(de.UTF8)||n.equals(de.ISO8859_1)||n.equals(de.ASCII)}static encodeFallback(n){const l=btoa(unescape(encodeURIComponent(n))).split(""),u=[];for(let d=0;d<l.length;d++)u.push(l[d].charCodeAt(0));return new Uint8Array(u)}}class Ie{static castAsNonUtf8Char(n,s=null){const l=s?s.getName():this.ISO88591;return ft.decode(new Uint8Array([n]),l)}static guessEncoding(n,s){if(s!=null&&s.get(Se.CHARACTER_SET)!==void 0)return s.get(Se.CHARACTER_SET).toString();const l=n.length;let u=!0,d=!0,g=!0,y=0,w=0,S=0,_=0,R=0,k=0,L=0,z=0,F=0,X=0,se=0;const _e=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let Ae=0;Ae<l&&(u||d||g);Ae++){const Ee=n[Ae]&255;g&&(y>0?(Ee&128)===0?g=!1:y--:(Ee&128)!==0&&((Ee&64)===0?g=!1:(y++,(Ee&32)===0?w++:(y++,(Ee&16)===0?S++:(y++,(Ee&8)===0?_++:g=!1))))),u&&(Ee>127&&Ee<160?u=!1:Ee>159&&(Ee<192||Ee===215||Ee===247)&&se++),d&&(R>0?Ee<64||Ee===127||Ee>252?d=!1:R--:Ee===128||Ee===160||Ee>239?d=!1:Ee>160&&Ee<224?(k++,z=0,L++,L>F&&(F=L)):Ee>127?(R++,L=0,z++,z>X&&(X=z)):(L=0,z=0))}return g&&y>0&&(g=!1),d&&R>0&&(d=!1),g&&(_e||w+S+_>0)?Ie.UTF8:d&&(Ie.ASSUME_SHIFT_JIS||F>=3||X>=3)?Ie.SHIFT_JIS:u&&d?F===2&&k===2||se*10>=l?Ie.SHIFT_JIS:Ie.ISO88591:u?Ie.ISO88591:d?Ie.SHIFT_JIS:g?Ie.UTF8:Ie.PLATFORM_DEFAULT_ENCODING}static format(n,...s){let l=-1;function u(g,y,w,S,_,R){if(g==="%%")return"%";if(s[++l]===void 0)return;g=S?parseInt(S.substr(1)):void 0;let k=_?parseInt(_.substr(1)):void 0,L;switch(R){case"s":L=s[l];break;case"c":L=s[l][0];break;case"f":L=parseFloat(s[l]).toFixed(g);break;case"p":L=parseFloat(s[l]).toPrecision(g);break;case"e":L=parseFloat(s[l]).toExponential(g);break;case"x":L=parseInt(s[l]).toString(k||16);break;case"d":L=parseFloat(parseInt(s[l],k||10).toPrecision(g)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(k);let z=parseInt(w),F=w&&w[0]+""=="0"?"0":" ";for(;L.length<z;)L=y!==void 0?L+F:F+L;return L}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(d,u)}static getBytes(n,s){return ft.encode(n,s)}static getCharCode(n,s=0){return n.charCodeAt(s)}static getCharAt(n){return String.fromCharCode(n)}}Ie.SHIFT_JIS=de.SJIS.getName(),Ie.GB2312="GB2312",Ie.ISO88591=de.ISO8859_1.getName(),Ie.EUC_JP="EUC_JP",Ie.UTF8=de.UTF8.getName(),Ie.PLATFORM_DEFAULT_ENCODING=Ie.UTF8,Ie.ASSUME_SHIFT_JIS=!1;class Ye{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=Ie.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,s,l){for(let u=s;s<s+l;u++)this.append(n[u]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,s){this.value=this.value.substr(0,n)+s+this.value.substr(n+1)}substring(n,s){return this.value.substring(n,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,s){this.value=this.value.substr(0,n)+s+this.value.substr(n+s.length)}}class $e{constructor(n,s,l,u){if(this.width=n,this.height=s,this.rowSize=l,this.bits=u,s==null&&(s=n),this.height=s,n<1||s<1)throw new O("Both dimensions must be greater than 0");l==null&&(l=Math.floor((n+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const s=n.length,l=n[0].length,u=new $e(l,s);for(let d=0;d<s;d++){const g=n[d];for(let y=0;y<l;y++)g[y]&&u.set(y,d)}return u}static parseFromString(n,s,l){if(n===null)throw new O("stringRepresentation cannot be null");const u=new Array(n.length);let d=0,g=0,y=-1,w=0,S=0;for(;S<n.length;)if(n.charAt(S)===`
`||n.charAt(S)==="\r"){if(d>g){if(y===-1)y=d-g;else if(d-g!==y)throw new O("row lengths do not match");g=d,w++}S++}else if(n.substring(S,S+s.length)===s)S+=s.length,u[d]=!0,d++;else if(n.substring(S,S+l.length)===l)S+=l.length,u[d]=!1,d++;else throw new O("illegal character encountered: "+n.substring(S));if(d>g){if(y===-1)y=d-g;else if(d-g!==y)throw new O("row lengths do not match");w++}const _=new $e(y,w);for(let R=0;R<d;R++)u[R]&&_.set(Math.floor(R%y),Math.floor(R/y));return _}get(n,s){const l=s*this.rowSize+Math.floor(n/32);return(this.bits[l]>>>(n&31)&1)!==0}set(n,s){const l=s*this.rowSize+Math.floor(n/32);this.bits[l]|=1<<(n&31)&4294967295}unset(n,s){const l=s*this.rowSize+Math.floor(n/32);this.bits[l]&=~(1<<(n&31)&4294967295)}flip(n,s){const l=s*this.rowSize+Math.floor(n/32);this.bits[l]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new O("input matrix dimensions do not match");const s=new xe(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let d=0,g=this.height;d<g;d++){const y=d*l,w=n.getRow(d,s).getBitArray();for(let S=0;S<l;S++)u[y+S]^=w[S]}}clear(){const n=this.bits,s=n.length;for(let l=0;l<s;l++)n[l]=0}setRegion(n,s,l,u){if(s<0||n<0)throw new O("Left and top must be nonnegative");if(u<1||l<1)throw new O("Height and width must be at least 1");const d=n+l,g=s+u;if(g>this.height||d>this.width)throw new O("The region must fit inside the matrix");const y=this.rowSize,w=this.bits;for(let S=s;S<g;S++){const _=S*y;for(let R=n;R<d;R++)w[_+Math.floor(R/32)]|=1<<(R&31)&4294967295}}getRow(n,s){s==null||s.getSize()<this.width?s=new xe(this.width):s.clear();const l=this.rowSize,u=this.bits,d=n*l;for(let g=0;g<l;g++)s.setBulk(g*32,u[d+g]);return s}setRow(n,s){H.arraycopy(s.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),s=this.getHeight();let l=new xe(n),u=new xe(n);for(let d=0,g=Math.floor((s+1)/2);d<g;d++)l=this.getRow(d,l),u=this.getRow(s-1-d,u),l.reverse(),u.reverse(),this.setRow(d,u),this.setRow(s-1-d,l)}getEnclosingRectangle(){const n=this.width,s=this.height,l=this.rowSize,u=this.bits;let d=n,g=s,y=-1,w=-1;for(let S=0;S<s;S++)for(let _=0;_<l;_++){const R=u[S*l+_];if(R!==0){if(S<g&&(g=S),S>w&&(w=S),_*32<d){let k=0;for(;(R<<31-k&4294967295)===0;)k++;_*32+k<d&&(d=_*32+k)}if(_*32+31>y){let k=31;for(;!(R>>>k);)k--;_*32+k>y&&(y=_*32+k)}}}return y<d||w<g?null:Int32Array.from([d,g,y-d+1,w-g+1])}getTopLeftOnBit(){const n=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&s[l]===0;)l++;if(l===s.length)return null;const u=l/n;let d=l%n*32;const g=s[l];let y=0;for(;(g<<31-y&4294967295)===0;)y++;return d+=y,Int32Array.from([d,u])}getBottomRightOnBit(){const n=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&s[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/n);let d=Math.floor(l%n)*32;const g=s[l];let y=31;for(;!(g>>>y);)y--;return d+=y,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof $e))return!1;const s=n;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&Q.equals(this.bits,s.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+Q.hashCode(this.bits),n}toString(n="X ",s="  ",l=`
`){return this.buildToString(n,s,l)}buildToString(n,s,l){let u=new Ye;for(let d=0,g=this.height;d<g;d++){for(let y=0,w=this.width;y<w;y++)u.append(this.get(y,d)?n:s);u.append(l)}return u.toString()}clone(){return new $e(this.width,this.height,this.rowSize,this.bits.slice())}}class re extends v{static getNotFoundInstance(){return new re}}re.kind="NotFoundException";class ee extends G{constructor(n){super(n),this.luminances=ee.EMPTY,this.buckets=new Int32Array(ee.LUMINANCE_BUCKETS)}getBlackRow(n,s){const l=this.getLuminanceSource(),u=l.getWidth();s==null||s.getSize()<u?s=new xe(u):s.clear(),this.initArrays(u);const d=l.getRow(n,this.luminances),g=this.buckets;for(let w=0;w<u;w++)g[(d[w]&255)>>ee.LUMINANCE_SHIFT]++;const y=ee.estimateBlackPoint(g);if(u<3)for(let w=0;w<u;w++)(d[w]&255)<y&&s.set(w);else{let w=d[0]&255,S=d[1]&255;for(let _=1;_<u-1;_++){const R=d[_+1]&255;(S*4-w-R)/2<y&&s.set(_),w=S,S=R}}return s}getBlackMatrix(){const n=this.getLuminanceSource(),s=n.getWidth(),l=n.getHeight(),u=new $e(s,l);this.initArrays(s);const d=this.buckets;for(let w=1;w<5;w++){const S=Math.floor(l*w/5),_=n.getRow(S,this.luminances),R=Math.floor(s*4/5);for(let k=Math.floor(s/5);k<R;k++){const L=_[k]&255;d[L>>ee.LUMINANCE_SHIFT]++}}const g=ee.estimateBlackPoint(d),y=n.getMatrix();for(let w=0;w<l;w++){const S=w*s;for(let _=0;_<s;_++)(y[S+_]&255)<g&&u.set(_,w)}return u}createBinarizer(n){return new ee(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const s=this.buckets;for(let l=0;l<ee.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(n){const s=n.length;let l=0,u=0,d=0;for(let _=0;_<s;_++)n[_]>d&&(u=_,d=n[_]),n[_]>l&&(l=n[_]);let g=0,y=0;for(let _=0;_<s;_++){const R=_-u,k=n[_]*R*R;k>y&&(g=_,y=k)}if(u>g){const _=u;u=g,g=_}if(g-u<=s/16)throw new re;let w=g-1,S=-1;for(let _=g-1;_>u;_--){const R=_-u,k=R*R*(g-_)*(l-n[_]);k>S&&(w=_,S=k)}return w<<ee.LUMINANCE_SHIFT}}ee.LUMINANCE_BITS=5,ee.LUMINANCE_SHIFT=8-ee.LUMINANCE_BITS,ee.LUMINANCE_BUCKETS=1<<ee.LUMINANCE_BITS,ee.EMPTY=Uint8ClampedArray.from([0]);class fe extends ee{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),s=n.getWidth(),l=n.getHeight();if(s>=fe.MINIMUM_DIMENSION&&l>=fe.MINIMUM_DIMENSION){const u=n.getMatrix();let d=s>>fe.BLOCK_SIZE_POWER;(s&fe.BLOCK_SIZE_MASK)!==0&&d++;let g=l>>fe.BLOCK_SIZE_POWER;(l&fe.BLOCK_SIZE_MASK)!==0&&g++;const y=fe.calculateBlackPoints(u,d,g,s,l),w=new $e(s,l);fe.calculateThresholdForBlock(u,d,g,s,l,y,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new fe(n)}static calculateThresholdForBlock(n,s,l,u,d,g,y){const w=d-fe.BLOCK_SIZE,S=u-fe.BLOCK_SIZE;for(let _=0;_<l;_++){let R=_<<fe.BLOCK_SIZE_POWER;R>w&&(R=w);const k=fe.cap(_,2,l-3);for(let L=0;L<s;L++){let z=L<<fe.BLOCK_SIZE_POWER;z>S&&(z=S);const F=fe.cap(L,2,s-3);let X=0;for(let _e=-2;_e<=2;_e++){const Ae=g[k+_e];X+=Ae[F-2]+Ae[F-1]+Ae[F]+Ae[F+1]+Ae[F+2]}const se=X/25;fe.thresholdBlock(n,z,R,se,u,y)}}}static cap(n,s,l){return n<s?s:n>l?l:n}static thresholdBlock(n,s,l,u,d,g){for(let y=0,w=l*d+s;y<fe.BLOCK_SIZE;y++,w+=d)for(let S=0;S<fe.BLOCK_SIZE;S++)(n[w+S]&255)<=u&&g.set(s+S,l+y)}static calculateBlackPoints(n,s,l,u,d){const g=d-fe.BLOCK_SIZE,y=u-fe.BLOCK_SIZE,w=new Array(l);for(let S=0;S<l;S++){w[S]=new Int32Array(s);let _=S<<fe.BLOCK_SIZE_POWER;_>g&&(_=g);for(let R=0;R<s;R++){let k=R<<fe.BLOCK_SIZE_POWER;k>y&&(k=y);let L=0,z=255,F=0;for(let se=0,_e=_*u+k;se<fe.BLOCK_SIZE;se++,_e+=u){for(let Ae=0;Ae<fe.BLOCK_SIZE;Ae++){const Ee=n[_e+Ae]&255;L+=Ee,Ee<z&&(z=Ee),Ee>F&&(F=Ee)}if(F-z>fe.MIN_DYNAMIC_RANGE)for(se++,_e+=u;se<fe.BLOCK_SIZE;se++,_e+=u)for(let Ae=0;Ae<fe.BLOCK_SIZE;Ae++)L+=n[_e+Ae]&255}let X=L>>fe.BLOCK_SIZE_POWER*2;if(F-z<=fe.MIN_DYNAMIC_RANGE&&(X=z/2,S>0&&R>0)){const se=(w[S-1][R]+2*w[S][R-1]+w[S-1][R-1])/4;z<se&&(X=se)}w[S][R]=X}}return w}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class be{constructor(n,s){this.width=n,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,s,l,u){throw new At("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new At("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new At("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let s=new Ye;for(let l=0;l<this.height;l++){const u=this.getRow(l,n);for(let d=0;d<this.width;d++){const g=u[d]&255;let y;g<64?y="#":g<128?y="+":g<192?y=".":y=" ",s.append(y)}s.append(`
`)}return s.toString()}}class he extends be{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,s){const l=this.delegate.getRow(n,s),u=this.getWidth();for(let d=0;d<u;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const n=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let u=0;u<s;u++)l[u]=255-(n[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(n,s,l,u){return new he(this.delegate.crop(n,s,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new he(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new he(this.delegate.rotateCounterClockwise45())}}class ue extends be{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=ue.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const s=n.getContext("2d").getImageData(0,0,n.width,n.height);return ue.toGrayscaleBuffer(s.data,n.width,n.height)}static toGrayscaleBuffer(n,s,l){const u=new Uint8ClampedArray(s*l);for(let d=0,g=0,y=n.length;d<y;d+=4,g++){let w;if(n[d+3]===0)w=255;else{const _=n[d],R=n[d+1],k=n[d+2];w=306*_+601*R+117*k+512>>10}u[g]=w}return u}getRow(n,s){if(n<0||n>=this.getHeight())throw new O("Requested row is outside the image: "+n);const l=this.getWidth(),u=n*l;return s===null?s=this.buffer.slice(u,u+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(u,u+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,s,l,u){return super.crop(n,s,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const s=this.getTempCanvasElement(),l=s.getContext("2d"),u=n*ue.DEGREE_TO_RADIANS,d=this.canvas.width,g=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*g),w=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*g);return s.width=y,s.height=w,l.translate(y/2,w/2),l.rotate(u),l.drawImage(this.canvas,d/-2,g/-2),this.buffer=ue.makeBufferFromCanvasImageData(s),this}invert(){return new he(this)}}ue.DEGREE_TO_RADIANS=Math.PI/180;class B{constructor(n,s,l){this.deviceId=n,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Y=(globalThis||Hu||self||window||void 0)&&(globalThis||Hu||self||window||void 0).__awaiter||function(N,n,s,l){function u(d){return d instanceof s?d:new s(function(g){g(d)})}return new(s||(s=Promise))(function(d,g){function y(_){try{S(l.next(_))}catch(R){g(R)}}function w(_){try{S(l.throw(_))}catch(R){g(R)}}function S(_){_.done?d(_.value):u(_.value).then(y,w)}S((l=l.apply(N,n||[])).next())})};class ie{constructor(n,s=500,l){this.reader=n,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return Y(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of n){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const d=l.deviceId||l.id,g=l.label||`Video device ${s.length+1}`,y=l.groupId,w={deviceId:d,label:g,kind:u,groupId:y};s.push(w)}return s})}getVideoInputDevices(){return Y(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new B(s.deviceId,s.label))})}findDeviceById(n){return Y(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===n):null})}decodeFromInputVideoDevice(n,s){return Y(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,s)})}decodeOnceFromVideoDevice(n,s){return Y(this,void 0,void 0,function*(){this.reset();let l;n?l={deviceId:{exact:n}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(n,s){return Y(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(n,s){return Y(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(n,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(n,s,l){return Y(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,s,l)})}decodeFromVideoDevice(n,s,l){return Y(this,void 0,void 0,function*(){let u;n?u={deviceId:{exact:n}}:u={facingMode:"environment"};const d={video:u};return yield this.decodeFromConstraints(d,s,l)})}decodeFromConstraints(n,s,l){return Y(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(u,s,l)})}decodeFromStream(n,s,l){return Y(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(n,s);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,s){return Y(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,n),this.videoElement=l,this.stream=n,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(n){return new Promise((s,l)=>this.playVideoOnLoad(n,()=>s()))}playVideoOnLoad(n,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",s),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return Y(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,s){const l=document.getElementById(n);if(!l)throw new T(`element with id '${n}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new T(`element with id '${n}' must be an ${s} element`);return l}decodeFromImage(n,s){if(!n&&!s)throw new T("either imageElement with a src set or an url must be provided");return s&&!n?this.decodeFromImageUrl(s):this.decodeFromImageElement(n)}decodeFromVideo(n,s){if(!n&&!s)throw new T("Either an element with a src set or an URL must be provided");return s&&!n?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,s,l){if(n===void 0&&s===void 0)throw new T("Either an element with a src set or an URL must be provided");return s&&!n?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(n,l)}decodeFromImageElement(n){if(!n)throw new T("An image element must be provided.");this.reset();const s=this.prepareImageElement(n);this.imageElement=s;let l;return this.isImageLoaded(s)?l=this.decodeOnce(s,!1,!0):l=this._decodeOnLoadImage(s),l}decodeFromVideoElement(n){const s=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(n,s){const l=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(n){if(!n)throw new T("A video element must be provided.");this.reset();const s=this.prepareVideoElement(n);return this.videoElement=s,s}decodeFromImageUrl(n){if(!n)throw new T("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=n,l}decodeFromVideoUrl(n){if(!n)throw new T("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=n,l}decodeFromVideoUrlContinuously(n,s){if(!n)throw new T("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,s);return l.src=n,u}_decodeOnLoadImage(n){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(s,l),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return Y(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,s){return Y(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,s)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let s;return typeof n>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof n=="string"&&(s=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(s=n),s}prepareVideoElement(n){let s;return!n&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof n=="string"&&(s=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(s=n),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(n,s=!0,l=!0){this._stopAsyncDecode=!1;const u=(d,g)=>{if(this._stopAsyncDecode){g(new re("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(n);d(y)}catch(y){const w=s&&y instanceof re,_=(y instanceof U||y instanceof $)&&l;if(w||_)return setTimeout(u,this._timeBetweenDecodingAttempts,d,g);g(y)}};return new Promise((d,g)=>u(d,g))}decodeContinuously(n,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(n);s(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){s(null,u);const d=u instanceof U||u instanceof $,g=u instanceof re;(d||g)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(n){const s=this.createBinaryBitmap(n);return this.decodeBitmap(s)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,s,l){s||(s={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(n,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(n,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(n,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const s=this.getCaptureCanvas(n),l=new ue(s),u=new fe(l);return new j(u)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const s=this.createCaptureCanvas(n);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,u;return typeof n<"u"&&(n instanceof HTMLVideoElement?(l=n.videoWidth,u=n.videoHeight):n instanceof HTMLImageElement&&(l=n.naturalWidth||n.width,u=n.naturalHeight||n.height)),s.style.width=l+"px",s.style.height=u+"px",s.width=l,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,s){try{n.srcObject=s}catch{n.src=URL.createObjectURL(s)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class J{constructor(n,s,l=s==null?0:8*s.length,u,d,g=H.currentTimeMillis()){this.text=n,this.rawBytes=s,this.numBits=l,this.resultPoints=u,this.format=d,this.timestamp=g,this.text=n,this.rawBytes=s,l==null?this.numBits=s==null?0:8*s.length:this.numBits=l,this.resultPoints=u,this.format=d,this.resultMetadata=null,g==null?this.timestamp=H.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,s)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const s=this.resultPoints;if(s===null)this.resultPoints=n;else if(n!==null&&n.length>0){const l=new Array(s.length+n.length);H.arraycopy(s,0,l,0,s.length),H.arraycopy(n,0,l,s.length,n.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Te;(function(N){N[N.AZTEC=0]="AZTEC",N[N.CODABAR=1]="CODABAR",N[N.CODE_39=2]="CODE_39",N[N.CODE_93=3]="CODE_93",N[N.CODE_128=4]="CODE_128",N[N.DATA_MATRIX=5]="DATA_MATRIX",N[N.EAN_8=6]="EAN_8",N[N.EAN_13=7]="EAN_13",N[N.ITF=8]="ITF",N[N.MAXICODE=9]="MAXICODE",N[N.PDF_417=10]="PDF_417",N[N.QR_CODE=11]="QR_CODE",N[N.RSS_14=12]="RSS_14",N[N.RSS_EXPANDED=13]="RSS_EXPANDED",N[N.UPC_A=14]="UPC_A",N[N.UPC_E=15]="UPC_E",N[N.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Te||(Te={}));var me=Te,Re;(function(N){N[N.OTHER=0]="OTHER",N[N.ORIENTATION=1]="ORIENTATION",N[N.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",N[N.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",N[N.ISSUE_NUMBER=4]="ISSUE_NUMBER",N[N.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",N[N.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",N[N.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",N[N.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",N[N.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",N[N.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Re||(Re={}));var He=Re;class Oe{constructor(n,s,l,u,d=-1,g=-1){this.rawBytes=n,this.text=s,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=g,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class We{exp(n){return this.expTable[n]}log(n){if(n===0)throw new O;return this.logTable[n]}static addOrSubtract(n,s){return n^s}}class tt{constructor(n,s){if(s.length===0)throw new O;this.field=n;const l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),H.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const s=this.coefficients;let l;if(n===1){l=0;for(let g=0,y=s.length;g!==y;g++){const w=s[g];l=We.addOrSubtract(l,w)}return l}l=s[0];const u=s.length,d=this.field;for(let g=1;g<u;g++)l=We.addOrSubtract(d.multiply(n,l),s[g]);return l}addOrSubtract(n){if(!this.field.equals(n.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let s=this.coefficients,l=n.coefficients;if(s.length>l.length){const g=s;s=l,l=g}let u=new Int32Array(l.length);const d=l.length-s.length;H.arraycopy(l,0,u,0,d);for(let g=d;g<l.length;g++)u[g]=We.addOrSubtract(s[g-d],l[g]);return new tt(this.field,u)}multiply(n){if(!this.field.equals(n.field))throw new O("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,u=n.coefficients,d=u.length,g=new Int32Array(l+d-1),y=this.field;for(let w=0;w<l;w++){const S=s[w];for(let _=0;_<d;_++)g[w+_]=We.addOrSubtract(g[w+_],y.multiply(S,u[_]))}return new tt(y,g)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const s=this.coefficients.length,l=this.field,u=new Int32Array(s),d=this.coefficients;for(let g=0;g<s;g++)u[g]=l.multiply(d[g],n);return new tt(l,u)}multiplyByMonomial(n,s){if(n<0)throw new O;if(s===0)return this.field.getZero();const l=this.coefficients,u=l.length,d=new Int32Array(u+n),g=this.field;for(let y=0;y<u;y++)d[y]=g.multiply(l[y],s);return new tt(g,d)}divide(n){if(!this.field.equals(n.field))throw new O("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new O("Divide by 0");const s=this.field;let l=s.getZero(),u=this;const d=n.getCoefficient(n.getDegree()),g=s.inverse(d);for(;u.getDegree()>=n.getDegree()&&!u.isZero();){const y=u.getDegree()-n.getDegree(),w=s.multiply(u.getCoefficient(u.getDegree()),g),S=n.multiplyByMonomial(y,w),_=s.buildMonomial(y,w);l=l.addOrSubtract(_),u=u.addOrSubtract(S)}return[l,u]}toString(){let n="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(l!==0){if(l<0?(n+=" - ",l=-l):n.length>0&&(n+=" + "),s===0||l!==1){const u=this.field.log(l);u===0?n+="1":u===1?n+="a":(n+="a^",n+=u)}s!==0&&(s===1?n+="x":(n+="x^",n+=s))}}return n}}class en extends v{}en.kind="ArithmeticException";class nt extends We{constructor(n,s,l){super(),this.primitive=n,this.size=s,this.generatorBase=l;const u=new Int32Array(s);let d=1;for(let y=0;y<s;y++)u[y]=d,d*=2,d>=s&&(d^=n,d&=s-1);this.expTable=u;const g=new Int32Array(s);for(let y=0;y<s-1;y++)g[u[y]]=y;this.logTable=g,this.zero=new tt(this,Int32Array.from([0])),this.one=new tt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,s){if(n<0)throw new O;if(s===0)return this.zero;const l=new Int32Array(n+1);return l[0]=s,new tt(this,l)}inverse(n){if(n===0)throw new en;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,s){return n===0||s===0?0:this.expTable[(this.logTable[n]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+q.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}nt.AZTEC_DATA_12=new nt(4201,4096,1),nt.AZTEC_DATA_10=new nt(1033,1024,1),nt.AZTEC_DATA_6=new nt(67,64,1),nt.AZTEC_PARAM=new nt(19,16,1),nt.QR_CODE_FIELD_256=new nt(285,256,0),nt.DATA_MATRIX_FIELD_256=new nt(301,256,1),nt.AZTEC_DATA_8=nt.DATA_MATRIX_FIELD_256,nt.MAXICODE_FIELD_64=nt.AZTEC_DATA_6;class rn extends v{}rn.kind="ReedSolomonException";class sr extends v{}sr.kind="IllegalStateException";class Tr{constructor(n){this.field=n}decode(n,s){const l=this.field,u=new tt(l,n),d=new Int32Array(s);let g=!0;for(let L=0;L<s;L++){const z=u.evaluateAt(l.exp(L+l.getGeneratorBase()));d[d.length-1-L]=z,z!==0&&(g=!1)}if(g)return;const y=new tt(l,d),w=this.runEuclideanAlgorithm(l.buildMonomial(s,1),y,s),S=w[0],_=w[1],R=this.findErrorLocations(S),k=this.findErrorMagnitudes(_,R);for(let L=0;L<R.length;L++){const z=n.length-1-l.log(R[L]);if(z<0)throw new rn("Bad error location");n[z]=nt.addOrSubtract(n[z],k[L])}}runEuclideanAlgorithm(n,s,l){if(n.getDegree()<s.getDegree()){const L=n;n=s,s=L}const u=this.field;let d=n,g=s,y=u.getZero(),w=u.getOne();for(;g.getDegree()>=(l/2|0);){let L=d,z=y;if(d=g,y=w,d.isZero())throw new rn("r_{i-1} was zero");g=L;let F=u.getZero();const X=d.getCoefficient(d.getDegree()),se=u.inverse(X);for(;g.getDegree()>=d.getDegree()&&!g.isZero();){const _e=g.getDegree()-d.getDegree(),Ae=u.multiply(g.getCoefficient(g.getDegree()),se);F=F.addOrSubtract(u.buildMonomial(_e,Ae)),g=g.addOrSubtract(d.multiplyByMonomial(_e,Ae))}if(w=F.multiply(y).addOrSubtract(z),g.getDegree()>=d.getDegree())throw new sr("Division algorithm failed to reduce polynomial?")}const S=w.getCoefficient(0);if(S===0)throw new rn("sigmaTilde(0) was zero");const _=u.inverse(S),R=w.multiplyScalar(_),k=g.multiplyScalar(_);return[R,k]}findErrorLocations(n){const s=n.getDegree();if(s===1)return Int32Array.from([n.getCoefficient(1)]);const l=new Int32Array(s);let u=0;const d=this.field;for(let g=1;g<d.getSize()&&u<s;g++)n.evaluateAt(g)===0&&(l[u]=d.inverse(g),u++);if(u!==s)throw new rn("Error locator degree does not match number of roots");return l}findErrorMagnitudes(n,s){const l=s.length,u=new Int32Array(l),d=this.field;for(let g=0;g<l;g++){const y=d.inverse(s[g]);let w=1;for(let S=0;S<l;S++)if(g!==S){const _=d.multiply(s[S],y),R=(_&1)===0?_|1:_&-2;w=d.multiply(w,R)}u[g]=d.multiply(n.evaluateAt(y),d.inverse(w)),d.getGeneratorBase()!==0&&(u[g]=d.multiply(u[g],y))}return u}}var An;(function(N){N[N.UPPER=0]="UPPER",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.DIGIT=3]="DIGIT",N[N.PUNCT=4]="PUNCT",N[N.BINARY=5]="BINARY"})(An||(An={}));class Ft{decode(n){this.ddata=n;let s=n.getBits(),l=this.extractBits(s),u=this.correctBits(l),d=Ft.convertBoolArrayToByteArray(u),g=Ft.getEncodedData(u),y=new Oe(d,g,null,null);return y.setNumBits(u.length),y}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let s=n.length,l=An.UPPER,u=An.UPPER,d="",g=0;for(;g<s;)if(u===An.BINARY){if(s-g<5)break;let y=Ft.readCode(n,g,5);if(g+=5,y===0){if(s-g<11)break;y=Ft.readCode(n,g,11)+31,g+=11}for(let w=0;w<y;w++){if(s-g<8){g=s;break}const S=Ft.readCode(n,g,8);d+=Ie.castAsNonUtf8Char(S),g+=8}u=l}else{let y=u===An.DIGIT?4:5;if(s-g<y)break;let w=Ft.readCode(n,g,y);g+=y;let S=Ft.getCharacter(u,w);S.startsWith("CTRL_")?(l=u,u=Ft.getTable(S.charAt(5)),S.charAt(6)==="L"&&(l=u)):(d+=S,u=l)}return d}static getTable(n){switch(n){case"L":return An.LOWER;case"P":return An.PUNCT;case"M":return An.MIXED;case"D":return An.DIGIT;case"B":return An.BINARY;default:return An.UPPER}}static getCharacter(n,s){switch(n){case An.UPPER:return Ft.UPPER_TABLE[s];case An.LOWER:return Ft.LOWER_TABLE[s];case An.MIXED:return Ft.MIXED_TABLE[s];case An.PUNCT:return Ft.PUNCT_TABLE[s];case An.DIGIT:return Ft.DIGIT_TABLE[s];default:throw new sr("Bad table")}}correctBits(n){let s,l;this.ddata.getNbLayers()<=2?(l=6,s=nt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,s=nt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,s=nt.AZTEC_DATA_10):(l=12,s=nt.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),d=n.length/l;if(d<u)throw new $;let g=n.length%l,y=new Int32Array(d);for(let k=0;k<d;k++,g+=l)y[k]=Ft.readCode(n,g,l);try{new Tr(s).decode(y,d-u)}catch(k){throw new $(k)}let w=(1<<l)-1,S=0;for(let k=0;k<u;k++){let L=y[k];if(L===0||L===w)throw new $;(L===1||L===w-1)&&S++}let _=new Array(u*l-S),R=0;for(let k=0;k<u;k++){let L=y[k];if(L===1||L===w-1)_.fill(L>1,R,R+l-1),R+=l-1;else for(let z=l-1;z>=0;--z)_[R++]=(L&1<<z)!==0}return _}extractBits(n){let s=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(s?11:14)+l*4,d=new Int32Array(u),g=new Array(this.totalBitsInLayer(l,s));if(s)for(let y=0;y<d.length;y++)d[y]=y;else{let y=u+1+2*q.truncDivision(q.truncDivision(u,2)-1,15),w=u/2,S=q.truncDivision(y,2);for(let _=0;_<w;_++){let R=_+q.truncDivision(_,15);d[w-_-1]=S-R-1,d[w+_]=S+R+1}}for(let y=0,w=0;y<l;y++){let S=(l-y)*4+(s?9:12),_=y*2,R=u-1-_;for(let k=0;k<S;k++){let L=k*2;for(let z=0;z<2;z++)g[w+L+z]=n.get(d[_+z],d[_+k]),g[w+2*S+L+z]=n.get(d[_+k],d[R-z]),g[w+4*S+L+z]=n.get(d[R-z],d[R-k]),g[w+6*S+L+z]=n.get(d[R-k],d[_+z])}w+=S*8}return g}static readCode(n,s,l){let u=0;for(let d=s;d<s+l;d++)u<<=1,n[d]&&(u|=1);return u}static readByte(n,s){let l=n.length-s;return l>=8?Ft.readCode(n,s,8):Ft.readCode(n,s,l)<<8-l}static convertBoolArrayToByteArray(n){let s=new Uint8Array((n.length+7)/8);for(let l=0;l<s.length;l++)s[l]=Ft.readByte(n,8*l);return s}totalBitsInLayer(n,s){return((s?88:112)+16*n)*n}}Ft.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ft.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ft.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ft.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ft.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class mt{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,s,l,u){const d=n-l,g=s-u;return Math.sqrt(d*d+g*g)}static sum(n){let s=0;for(let l=0,u=n.length;l!==u;l++){const d=n[l];s+=d}return s}}class ga{static floatToIntBits(n){return n}}ga.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Me{constructor(n,s){this.x=n,this.y=s}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof Me){const s=n;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*ga.floatToIntBits(this.x)+ga.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const s=this.distance(n[0],n[1]),l=this.distance(n[1],n[2]),u=this.distance(n[0],n[2]);let d,g,y;if(l>=s&&l>=u?(g=n[0],d=n[1],y=n[2]):u>=l&&u>=s?(g=n[1],d=n[0],y=n[2]):(g=n[2],d=n[0],y=n[1]),this.crossProductZ(d,g,y)<0){const w=d;d=y,y=w}n[0]=d,n[1]=g,n[2]=y}static distance(n,s){return mt.distance(n.x,n.y,s.x,s.y)}static crossProductZ(n,s,l){const u=s.x,d=s.y;return(l.x-u)*(n.y-d)-(l.y-d)*(n.x-u)}}class Gs{constructor(n,s){this.bits=n,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class _c extends Gs{constructor(n,s,l,u,d){super(n,s),this.compact=l,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class hn{constructor(n,s,l,u){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),s==null&&(s=hn.INIT_SIZE),l==null&&(l=n.getWidth()/2|0),u==null&&(u=n.getHeight()/2|0);const d=s/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=u-d,this.downInit=u+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new re}detect(){let n=this.leftInit,s=this.rightInit,l=this.upInit,u=this.downInit,d=!1,g=!0,y=!1,w=!1,S=!1,_=!1,R=!1;const k=this.width,L=this.height;for(;g;){g=!1;let z=!0;for(;(z||!w)&&s<k;)z=this.containsBlackPoint(l,u,s,!1),z?(s++,g=!0,w=!0):w||s++;if(s>=k){d=!0;break}let F=!0;for(;(F||!S)&&u<L;)F=this.containsBlackPoint(n,s,u,!0),F?(u++,g=!0,S=!0):S||u++;if(u>=L){d=!0;break}let X=!0;for(;(X||!_)&&n>=0;)X=this.containsBlackPoint(l,u,n,!1),X?(n--,g=!0,_=!0):_||n--;if(n<0){d=!0;break}let se=!0;for(;(se||!R)&&l>=0;)se=this.containsBlackPoint(n,s,l,!0),se?(l--,g=!0,R=!0):R||l--;if(l<0){d=!0;break}g&&(y=!0)}if(!d&&y){const z=s-n;let F=null;for(let Ae=1;F===null&&Ae<z;Ae++)F=this.getBlackPointOnSegment(n,u-Ae,n+Ae,u);if(F==null)throw new re;let X=null;for(let Ae=1;X===null&&Ae<z;Ae++)X=this.getBlackPointOnSegment(n,l+Ae,n+Ae,l);if(X==null)throw new re;let se=null;for(let Ae=1;se===null&&Ae<z;Ae++)se=this.getBlackPointOnSegment(s,l+Ae,s-Ae,l);if(se==null)throw new re;let _e=null;for(let Ae=1;_e===null&&Ae<z;Ae++)_e=this.getBlackPointOnSegment(s,u-Ae,s-Ae,u);if(_e==null)throw new re;return this.centerEdges(_e,F,se,X)}else throw new re}getBlackPointOnSegment(n,s,l,u){const d=mt.round(mt.distance(n,s,l,u)),g=(l-n)/d,y=(u-s)/d,w=this.image;for(let S=0;S<d;S++){const _=mt.round(n+S*g),R=mt.round(s+S*y);if(w.get(_,R))return new Me(_,R)}return null}centerEdges(n,s,l,u){const d=n.getX(),g=n.getY(),y=s.getX(),w=s.getY(),S=l.getX(),_=l.getY(),R=u.getX(),k=u.getY(),L=hn.CORR;return d<this.width/2?[new Me(R-L,k+L),new Me(y+L,w+L),new Me(S-L,_-L),new Me(d+L,g-L)]:[new Me(R+L,k+L),new Me(y+L,w-L),new Me(S-L,_+L),new Me(d-L,g-L)]}containsBlackPoint(n,s,l,u){const d=this.image;if(u){for(let g=n;g<=s;g++)if(d.get(g,l))return!0}else for(let g=n;g<=s;g++)if(d.get(l,g))return!0;return!1}}hn.INIT_SIZE=10,hn.CORR=1;class il{static checkAndNudgePoints(n,s){const l=n.getWidth(),u=n.getHeight();let d=!0;for(let g=0;g<s.length&&d;g+=2){const y=Math.floor(s[g]),w=Math.floor(s[g+1]);if(y<-1||y>l||w<-1||w>u)throw new re;d=!1,y===-1?(s[g]=0,d=!0):y===l&&(s[g]=l-1,d=!0),w===-1?(s[g+1]=0,d=!0):w===u&&(s[g+1]=u-1,d=!0)}d=!0;for(let g=s.length-2;g>=0&&d;g-=2){const y=Math.floor(s[g]),w=Math.floor(s[g+1]);if(y<-1||y>l||w<-1||w>u)throw new re;d=!1,y===-1?(s[g]=0,d=!0):y===l&&(s[g]=l-1,d=!0),w===-1?(s[g+1]=0,d=!0):w===u&&(s[g+1]=u-1,d=!0)}}}class pr{constructor(n,s,l,u,d,g,y,w,S){this.a11=n,this.a21=s,this.a31=l,this.a12=u,this.a22=d,this.a32=g,this.a13=y,this.a23=w,this.a33=S}static quadrilateralToQuadrilateral(n,s,l,u,d,g,y,w,S,_,R,k,L,z,F,X){const se=pr.quadrilateralToSquare(n,s,l,u,d,g,y,w);return pr.squareToQuadrilateral(S,_,R,k,L,z,F,X).times(se)}transformPoints(n){const s=n.length,l=this.a11,u=this.a12,d=this.a13,g=this.a21,y=this.a22,w=this.a23,S=this.a31,_=this.a32,R=this.a33;for(let k=0;k<s;k+=2){const L=n[k],z=n[k+1],F=d*L+w*z+R;n[k]=(l*L+g*z+S)/F,n[k+1]=(u*L+y*z+_)/F}}transformPointsWithValues(n,s){const l=this.a11,u=this.a12,d=this.a13,g=this.a21,y=this.a22,w=this.a23,S=this.a31,_=this.a32,R=this.a33,k=n.length;for(let L=0;L<k;L++){const z=n[L],F=s[L],X=d*z+w*F+R;n[L]=(l*z+g*F+S)/X,s[L]=(u*z+y*F+_)/X}}static squareToQuadrilateral(n,s,l,u,d,g,y,w){const S=n-l+d-y,_=s-u+g-w;if(S===0&&_===0)return new pr(l-n,d-l,n,u-s,g-u,s,0,0,1);{const R=l-d,k=y-d,L=u-g,z=w-g,F=R*z-k*L,X=(S*z-k*_)/F,se=(R*_-S*L)/F;return new pr(l-n+X*l,y-n+se*y,n,u-s+X*u,w-s+se*w,s,X,se,1)}}static quadrilateralToSquare(n,s,l,u,d,g,y,w){return pr.squareToQuadrilateral(n,s,l,u,d,g,y,w).buildAdjoint()}buildAdjoint(){return new pr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new pr(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class al extends il{sampleGrid(n,s,l,u,d,g,y,w,S,_,R,k,L,z,F,X,se,_e,Ae){const Ee=pr.quadrilateralToQuadrilateral(u,d,g,y,w,S,_,R,k,L,z,F,X,se,_e,Ae);return this.sampleGridWithTransform(n,s,l,Ee)}sampleGridWithTransform(n,s,l,u){if(s<=0||l<=0)throw new re;const d=new $e(s,l),g=new Float32Array(2*s);for(let y=0;y<l;y++){const w=g.length,S=y+.5;for(let _=0;_<w;_+=2)g[_]=_/2+.5,g[_+1]=S;u.transformPoints(g),il.checkAndNudgePoints(n,g);try{for(let _=0;_<w;_+=2)n.get(Math.floor(g[_]),Math.floor(g[_+1]))&&d.set(_/2,y)}catch{throw new re}}return d}}class Or{static setGridSampler(n){Or.gridSampler=n}static getInstance(){return Or.gridSampler}}Or.gridSampler=new al;class Xn{constructor(n,s){this.x=n,this.y=s}toResultPoint(){return new Me(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class sl{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(n){let g=l[0];l[0]=l[2],l[2]=g}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new _c(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new re;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(n[0],n[1],s),this.sampleLine(n[1],n[2],s),this.sampleLine(n[2],n[3],s),this.sampleLine(n[3],n[0],s)]);this.shift=this.getRotation(l,s);let u=0;for(let g=0;g<4;g++){let y=l[(this.shift+g)%4];this.compact?(u<<=7,u+=y>>1&127):(u<<=10,u+=(y>>2&992)+(y>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(n,s){let l=0;n.forEach((u,d,g)=>{let y=(u>>s-2<<1)+(u&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(q.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new re}getCorrectedParameterData(n,s){let l,u;s?(l=7,u=2):(l=10,u=4);let d=l-u,g=new Int32Array(l);for(let w=l-1;w>=0;--w)g[w]=n&15,n>>=4;try{new Tr(nt.AZTEC_PARAM).decode(g,d)}catch{throw new re}let y=0;for(let w=0;w<u;w++)y=(y<<4)+g[w];return y}getBullsEyeCorners(n){let s=n,l=n,u=n,d=n,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let R=this.getFirstDifferent(s,g,1,-1),k=this.getFirstDifferent(l,g,1,1),L=this.getFirstDifferent(u,g,-1,1),z=this.getFirstDifferent(d,g,-1,-1);if(this.nbCenterLayers>2){let F=this.distancePoint(z,R)*this.nbCenterLayers/(this.distancePoint(d,s)*(this.nbCenterLayers+2));if(F<.75||F>1.25||!this.isWhiteOrBlackRectangle(R,k,L,z))break}s=R,l=k,u=L,d=z,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new re;this.compact=this.nbCenterLayers===5;let y=new Me(s.getX()+.5,s.getY()-.5),w=new Me(l.getX()+.5,l.getY()+.5),S=new Me(u.getX()-.5,u.getY()+.5),_=new Me(d.getX()-.5,d.getY()-.5);return this.expandSquare([y,w,S,_],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,s,l,u;try{let y=new hn(this.image).detect();n=y[0],s=y[1],l=y[2],u=y[3]}catch{let w=this.image.getWidth()/2,S=this.image.getHeight()/2;n=this.getFirstDifferent(new Xn(w+7,S-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Xn(w+7,S+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Xn(w-7,S+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Xn(w-7,S-7),!1,-1,-1).toResultPoint()}let d=mt.round((n.getX()+u.getX()+s.getX()+l.getX())/4),g=mt.round((n.getY()+u.getY()+s.getY()+l.getY())/4);try{let y=new hn(this.image,15,d,g).detect();n=y[0],s=y[1],l=y[2],u=y[3]}catch{n=this.getFirstDifferent(new Xn(d+7,g-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Xn(d+7,g+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Xn(d-7,g+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Xn(d-7,g-7),!1,-1,-1).toResultPoint()}return d=mt.round((n.getX()+u.getX()+s.getX()+l.getX())/4),g=mt.round((n.getY()+u.getY()+s.getY()+l.getY())/4),new Xn(d,g)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,s,l,u,d){let g=Or.getInstance(),y=this.getDimension(),w=y/2-this.nbCenterLayers,S=y/2+this.nbCenterLayers;return g.sampleGrid(n,y,y,w,w,S,w,S,S,w,S,s.getX(),s.getY(),l.getX(),l.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(n,s,l){let u=0,d=this.distanceResultPoint(n,s),g=d/l,y=n.getX(),w=n.getY(),S=g*(s.getX()-n.getX())/d,_=g*(s.getY()-n.getY())/d;for(let R=0;R<l;R++)this.image.get(mt.round(y+R*S),mt.round(w+R*_))&&(u|=1<<l-R-1);return u}isWhiteOrBlackRectangle(n,s,l,u){let d=3;n=new Xn(n.getX()-d,n.getY()+d),s=new Xn(s.getX()-d,s.getY()-d),l=new Xn(l.getX()+d,l.getY()-d),u=new Xn(u.getX()+d,u.getY()+d);let g=this.getColor(u,n);if(g===0)return!1;let y=this.getColor(n,s);return y!==g||(y=this.getColor(s,l),y!==g)?!1:(y=this.getColor(l,u),y===g)}getColor(n,s){let l=this.distancePoint(n,s),u=(s.getX()-n.getX())/l,d=(s.getY()-n.getY())/l,g=0,y=n.getX(),w=n.getY(),S=this.image.get(n.getX(),n.getY()),_=Math.ceil(l);for(let k=0;k<_;k++)y+=u,w+=d,this.image.get(mt.round(y),mt.round(w))!==S&&g++;let R=g/l;return R>.1&&R<.9?0:R<=.1===S?1:-1}getFirstDifferent(n,s,l,u){let d=n.getX()+l,g=n.getY()+u;for(;this.isValid(d,g)&&this.image.get(d,g)===s;)d+=l,g+=u;for(d-=l,g-=u;this.isValid(d,g)&&this.image.get(d,g)===s;)d+=l;for(d-=l;this.isValid(d,g)&&this.image.get(d,g)===s;)g+=u;return g-=u,new Xn(d,g)}expandSquare(n,s,l){let u=l/(2*s),d=n[0].getX()-n[2].getX(),g=n[0].getY()-n[2].getY(),y=(n[0].getX()+n[2].getX())/2,w=(n[0].getY()+n[2].getY())/2,S=new Me(y+u*d,w+u*g),_=new Me(y-u*d,w-u*g);d=n[1].getX()-n[3].getX(),g=n[1].getY()-n[3].getY(),y=(n[1].getX()+n[3].getX())/2,w=(n[1].getY()+n[3].getY())/2;let R=new Me(y+u*d,w+u*g),k=new Me(y-u*d,w-u*g);return[S,R,_,k]}isValid(n,s){return n>=0&&n<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(n){let s=mt.round(n.getX()),l=mt.round(n.getY());return this.isValid(s,l)}distancePoint(n,s){return mt.distance(n.getX(),n.getY(),s.getX(),s.getY())}distanceResultPoint(n,s){return mt.distance(n.getX(),n.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(q.truncDivision(this.nbLayers-4,8)+1)+15}}class qs{decode(n,s=null){let l=null,u=new sl(n.getBlackMatrix()),d=null,g=null;try{let _=u.detectMirror(!1);d=_.getPoints(),this.reportFoundResultPoints(s,d),g=new Ft().decode(_)}catch(_){l=_}if(g==null)try{let _=u.detectMirror(!0);d=_.getPoints(),this.reportFoundResultPoints(s,d),g=new Ft().decode(_)}catch(_){throw l??_}let y=new J(g.getText(),g.getRawBytes(),g.getNumBits(),d,me.AZTEC,H.currentTimeMillis()),w=g.getByteSegments();w!=null&&y.putMetadata(He.BYTE_SEGMENTS,w);let S=g.getECLevel();return S!=null&&y.putMetadata(He.ERROR_CORRECTION_LEVEL,S),y}reportFoundResultPoints(n,s){if(n!=null){let l=n.get(Se.NEED_RESULT_POINT_CALLBACK);l!=null&&s.forEach((u,d,g)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class Rd extends ie{constructor(n=500){super(new qs,n)}}class tn{decode(n,s){try{return this.doDecode(n,s)}catch{if(s&&s.get(Se.TRY_HARDER)===!0&&n.isRotateSupported()){const d=n.rotateCounterClockwise(),g=this.doDecode(d,s),y=g.getResultMetadata();let w=270;y!==null&&y.get(He.ORIENTATION)===!0&&(w=w+y.get(He.ORIENTATION)%360),g.putMetadata(He.ORIENTATION,w);const S=g.getResultPoints();if(S!==null){const _=d.getHeight();for(let R=0;R<S.length;R++)S[R]=new Me(_-S[R].getY()-1,S[R].getX())}return g}else throw new re}}reset(){}doDecode(n,s){const l=n.getWidth(),u=n.getHeight();let d=new xe(l);const g=s&&s.get(Se.TRY_HARDER)===!0,y=Math.max(1,u>>(g?8:5));let w;g?w=u:w=15;const S=Math.trunc(u/2);for(let _=0;_<w;_++){const R=Math.trunc((_+1)/2),k=(_&1)===0,L=S+y*(k?R:-R);if(L<0||L>=u)break;try{d=n.getBlackRow(L,d)}catch{continue}for(let z=0;z<2;z++){if(z===1&&(d.reverse(),s&&s.get(Se.NEED_RESULT_POINT_CALLBACK)===!0)){const F=new Map;s.forEach((X,se)=>F.set(se,X)),F.delete(Se.NEED_RESULT_POINT_CALLBACK),s=F}try{const F=this.decodeRow(L,d,s);if(z===1){F.putMetadata(He.ORIENTATION,180);const X=F.getResultPoints();X!==null&&(X[0]=new Me(l-X[0].getX()-1,X[0].getY()),X[1]=new Me(l-X[1].getX()-1,X[1].getY()))}return F}catch{}}}throw new re}static recordPattern(n,s,l){const u=l.length;for(let S=0;S<u;S++)l[S]=0;const d=n.getSize();if(s>=d)throw new re;let g=!n.get(s),y=0,w=s;for(;w<d;){if(n.get(w)!==g)l[y]++;else{if(++y===u)break;l[y]=1,g=!g}w++}if(!(y===u||y===u-1&&w===d))throw new re}static recordPatternInReverse(n,s,l){let u=l.length,d=n.get(s);for(;s>0&&u>=0;)n.get(--s)!==d&&(u--,d=!d);if(u>=0)throw new re;tn.recordPattern(n,s+1,l)}static patternMatchVariance(n,s,l){const u=n.length;let d=0,g=0;for(let S=0;S<u;S++)d+=n[S],g+=s[S];if(d<g)return Number.POSITIVE_INFINITY;const y=d/g;l*=y;let w=0;for(let S=0;S<u;S++){const _=n[S],R=s[S]*y,k=_>R?_-R:R-_;if(k>l)return Number.POSITIVE_INFINITY;w+=k}return w/d}}class Ce extends tn{static findStartPattern(n){const s=n.getSize(),l=n.getNextSet(0);let u=0,d=Int32Array.from([0,0,0,0,0,0]),g=l,y=!1;const w=6;for(let S=l;S<s;S++)if(n.get(S)!==y)d[u]++;else{if(u===w-1){let _=Ce.MAX_AVG_VARIANCE,R=-1;for(let k=Ce.CODE_START_A;k<=Ce.CODE_START_C;k++){const L=tn.patternMatchVariance(d,Ce.CODE_PATTERNS[k],Ce.MAX_INDIVIDUAL_VARIANCE);L<_&&(_=L,R=k)}if(R>=0&&n.isRange(Math.max(0,g-(S-g)/2),g,!1))return Int32Array.from([g,S,R]);g+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,y=!y}throw new re}static decodeCode(n,s,l){tn.recordPattern(n,l,s);let u=Ce.MAX_AVG_VARIANCE,d=-1;for(let g=0;g<Ce.CODE_PATTERNS.length;g++){const y=Ce.CODE_PATTERNS[g],w=this.patternMatchVariance(s,y,Ce.MAX_INDIVIDUAL_VARIANCE);w<u&&(u=w,d=g)}if(d>=0)return d;throw new re}decodeRow(n,s,l){const u=l&&l.get(Se.ASSUME_GS1)===!0,d=Ce.findStartPattern(s),g=d[2];let y=0;const w=new Uint8Array(20);w[y++]=g;let S;switch(g){case Ce.CODE_START_A:S=Ce.CODE_CODE_A;break;case Ce.CODE_START_B:S=Ce.CODE_CODE_B;break;case Ce.CODE_START_C:S=Ce.CODE_CODE_C;break;default:throw new $}let _=!1,R=!1,k="",L=d[0],z=d[1];const F=Int32Array.from([0,0,0,0,0,0]);let X=0,se=0,_e=g,Ae=0,Ee=!0,dt=!1,at=!1;for(;!_;){const qi=R;switch(R=!1,X=se,se=Ce.decodeCode(s,F,z),w[y++]=se,se!==Ce.CODE_STOP&&(Ee=!0),se!==Ce.CODE_STOP&&(Ae++,_e+=Ae*se),L=z,z+=F.reduce((zc,xl)=>zc+xl,0),se){case Ce.CODE_START_A:case Ce.CODE_START_B:case Ce.CODE_START_C:throw new $}switch(S){case Ce.CODE_CODE_A:if(se<64)at===dt?k+=String.fromCharCode(32+se):k+=String.fromCharCode(32+se+128),at=!1;else if(se<96)at===dt?k+=String.fromCharCode(se-64):k+=String.fromCharCode(se+64),at=!1;else switch(se!==Ce.CODE_STOP&&(Ee=!1),se){case Ce.CODE_FNC_1:u&&(k.length===0?k+="]C1":k+="");break;case Ce.CODE_FNC_2:case Ce.CODE_FNC_3:break;case Ce.CODE_FNC_4_A:!dt&&at?(dt=!0,at=!1):dt&&at?(dt=!1,at=!1):at=!0;break;case Ce.CODE_SHIFT:R=!0,S=Ce.CODE_CODE_B;break;case Ce.CODE_CODE_B:S=Ce.CODE_CODE_B;break;case Ce.CODE_CODE_C:S=Ce.CODE_CODE_C;break;case Ce.CODE_STOP:_=!0;break}break;case Ce.CODE_CODE_B:if(se<96)at===dt?k+=String.fromCharCode(32+se):k+=String.fromCharCode(32+se+128),at=!1;else switch(se!==Ce.CODE_STOP&&(Ee=!1),se){case Ce.CODE_FNC_1:u&&(k.length===0?k+="]C1":k+="");break;case Ce.CODE_FNC_2:case Ce.CODE_FNC_3:break;case Ce.CODE_FNC_4_B:!dt&&at?(dt=!0,at=!1):dt&&at?(dt=!1,at=!1):at=!0;break;case Ce.CODE_SHIFT:R=!0,S=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_A:S=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_C:S=Ce.CODE_CODE_C;break;case Ce.CODE_STOP:_=!0;break}break;case Ce.CODE_CODE_C:if(se<100)se<10&&(k+="0"),k+=se;else switch(se!==Ce.CODE_STOP&&(Ee=!1),se){case Ce.CODE_FNC_1:u&&(k.length===0?k+="]C1":k+="");break;case Ce.CODE_CODE_A:S=Ce.CODE_CODE_A;break;case Ce.CODE_CODE_B:S=Ce.CODE_CODE_B;break;case Ce.CODE_STOP:_=!0;break}break}qi&&(S=S===Ce.CODE_CODE_A?Ce.CODE_CODE_B:Ce.CODE_CODE_A)}const xn=z-L;if(z=s.getNextUnset(z),!s.isRange(z,Math.min(s.getSize(),z+(z-L)/2),!1))throw new re;if(_e-=Ae*X,_e%103!==X)throw new U;const vr=k.length;if(vr===0)throw new re;vr>0&&Ee&&(S===Ce.CODE_CODE_C?k=k.substring(0,vr-2):k=k.substring(0,vr-1));const Kn=(d[1]+d[0])/2,Ut=L+xn/2,Vn=w.length,fr=new Uint8Array(Vn);for(let qi=0;qi<Vn;qi++)fr[qi]=w[qi];const Oa=[new Me(Kn,n),new Me(Ut,n)];return new J(k,fr,0,Oa,me.CODE_128,new Date().getTime())}}Ce.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ce.MAX_AVG_VARIANCE=.25,Ce.MAX_INDIVIDUAL_VARIANCE=.7,Ce.CODE_SHIFT=98,Ce.CODE_CODE_C=99,Ce.CODE_CODE_B=100,Ce.CODE_CODE_A=101,Ce.CODE_FNC_1=102,Ce.CODE_FNC_2=97,Ce.CODE_FNC_3=96,Ce.CODE_FNC_4_A=101,Ce.CODE_FNC_4_B=100,Ce.CODE_START_A=103,Ce.CODE_START_B=104,Ce.CODE_START_C=105,Ce.CODE_STOP=106;class Wt extends tn{constructor(n=!1,s=!1){super(),this.usingCheckDigit=n,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,s,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let d=Wt.findAsteriskPattern(s,u),g=s.getNextSet(d[1]),y=s.getSize(),w,S;do{Wt.recordPattern(s,g,u);let F=Wt.toNarrowWidePattern(u);if(F<0)throw new re;w=Wt.patternToChar(F),this.decodeRowResult+=w,S=g;for(let X of u)g+=X;g=s.getNextSet(g)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let _=0;for(let F of u)_+=F;let R=g-S-_;if(g!==y&&R*2<_)throw new re;if(this.usingCheckDigit){let F=this.decodeRowResult.length-1,X=0;for(let se=0;se<F;se++)X+=Wt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(se));if(this.decodeRowResult.charAt(F)!==Wt.ALPHABET_STRING.charAt(X%43))throw new U;this.decodeRowResult=this.decodeRowResult.substring(0,F)}if(this.decodeRowResult.length===0)throw new re;let k;this.extendedMode?k=Wt.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let L=(d[1]+d[0])/2,z=S+_/2;return new J(k,null,0,[new Me(L,n),new Me(z,n)],me.CODE_39,new Date().getTime())}static findAsteriskPattern(n,s){let l=n.getSize(),u=n.getNextSet(0),d=0,g=u,y=!1,w=s.length;for(let S=u;S<l;S++)if(n.get(S)!==y)s[d]++;else{if(d===w-1){if(this.toNarrowWidePattern(s)===Wt.ASTERISK_ENCODING&&n.isRange(Math.max(0,g-Math.floor((S-g)/2)),g,!1))return[g,S];g+=s[0]+s[1],s.copyWithin(0,2,2+d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,y=!y}throw new re}static toNarrowWidePattern(n){let s=n.length,l=0,u;do{let d=2147483647;for(let w of n)w<d&&w>l&&(d=w);l=d,u=0;let g=0,y=0;for(let w=0;w<s;w++){let S=n[w];S>l&&(y|=1<<s-1-w,u++,g+=S)}if(u===3){for(let w=0;w<s&&u>0;w++){let S=n[w];if(S>l&&(u--,S*2>=g))return-1}return y}}while(u>3);return-1}static patternToChar(n){for(let s=0;s<Wt.CHARACTER_ENCODINGS.length;s++)if(Wt.CHARACTER_ENCODINGS[s]===n)return Wt.ALPHABET_STRING.charAt(s);if(n===Wt.ASTERISK_ENCODING)return"*";throw new re}static decodeExtended(n){let s=n.length,l="";for(let u=0;u<s;u++){let d=n.charAt(u);if(d==="+"||d==="$"||d==="%"||d==="/"){let g=n.charAt(u+1),y="\0";switch(d){case"+":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)+32);else throw new $;break;case"$":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)-64);else throw new $;break;case"%":if(g>="A"&&g<="E")y=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")y=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")y=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")y="\0";else if(g==="V")y="@";else if(g==="W")y="`";else if(g==="X"||g==="Y"||g==="Z")y="";else throw new $;break;case"/":if(g>="A"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")y=":";else throw new $;break}l+=y,u++}else l+=d}return l}}Wt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Wt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Wt.ASTERISK_ENCODING=148;class lt extends tn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,s,l){let u=this.decodeStart(s),d=this.decodeEnd(s),g=new Ye;lt.decodeMiddle(s,u[1],d[0],g);let y=g.toString(),w=null;l!=null&&(w=l.get(Se.ALLOWED_LENGTHS)),w==null&&(w=lt.DEFAULT_ALLOWED_LENGTHS);let S=y.length,_=!1,R=0;for(let z of w){if(S===z){_=!0;break}z>R&&(R=z)}if(!_&&S>R&&(_=!0),!_)throw new $;const k=[new Me(u[1],n),new Me(d[0],n)];return new J(y,null,0,k,me.ITF,new Date().getTime())}static decodeMiddle(n,s,l,u){let d=new Int32Array(10),g=new Int32Array(5),y=new Int32Array(5);for(d.fill(0),g.fill(0),y.fill(0);s<l;){tn.recordPattern(n,s,d);for(let S=0;S<5;S++){let _=2*S;g[S]=d[_],y[S]=d[_+1]}let w=lt.decodeDigit(g);u.append(w.toString()),w=this.decodeDigit(y),u.append(w.toString()),d.forEach(function(S){s+=S})}}decodeStart(n){let s=lt.skipWhiteSpace(n),l=lt.findGuardPattern(n,s,lt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(n,l[0]),l}validateQuietZone(n,s){let l=this.narrowLineWidth*10;l=l<s?l:s;for(let u=s-1;l>0&&u>=0&&!n.get(u);u--)l--;if(l!==0)throw new re}static skipWhiteSpace(n){const s=n.getSize(),l=n.getNextSet(0);if(l===s)throw new re;return l}decodeEnd(n){n.reverse();try{let s=lt.skipWhiteSpace(n),l;try{l=lt.findGuardPattern(n,s,lt.END_PATTERN_REVERSED[0])}catch(d){d instanceof re&&(l=lt.findGuardPattern(n,s,lt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,l[0]);let u=l[0];return l[0]=n.getSize()-l[1],l[1]=n.getSize()-u,l}finally{n.reverse()}}static findGuardPattern(n,s,l){let u=l.length,d=new Int32Array(u),g=n.getSize(),y=!1,w=0,S=s;d.fill(0);for(let _=s;_<g;_++)if(n.get(_)!==y)d[w]++;else{if(w===u-1){if(tn.patternMatchVariance(d,l,lt.MAX_INDIVIDUAL_VARIANCE)<lt.MAX_AVG_VARIANCE)return[S,_];S+=d[0]+d[1],H.arraycopy(d,2,d,0,w-1),d[w-1]=0,d[w]=0,w--}else w++;d[w]=1,y=!y}throw new re}static decodeDigit(n){let s=lt.MAX_AVG_VARIANCE,l=-1,u=lt.PATTERNS.length;for(let d=0;d<u;d++){let g=lt.PATTERNS[d],y=tn.patternMatchVariance(n,g,lt.MAX_INDIVIDUAL_VARIANCE);y<s?(s=y,l=d):y===s&&(l=-1)}if(l>=0)return l%10;throw new re}}lt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],lt.MAX_AVG_VARIANCE=.38,lt.MAX_INDIVIDUAL_VARIANCE=.5,lt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],lt.START_PATTERN=Int32Array.from([1,1,1,1]),lt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class un extends tn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let s=!1,l,u=0,d=Int32Array.from([0,0,0]);for(;!s;){d=Int32Array.from([0,0,0]),l=un.findGuardPattern(n,u,!1,this.START_END_PATTERN,d);let g=l[0];u=l[1];let y=g-(u-g);y>=0&&(s=n.isRange(y,g,!1))}return l}static checkChecksum(n){return un.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let s=n.length;if(s===0)return!1;let l=parseInt(n.charAt(s-1),10);return un.getStandardUPCEANChecksum(n.substring(0,s-1))===l}static getStandardUPCEANChecksum(n){let s=n.length,l=0;for(let u=s-1;u>=0;u-=2){let d=n.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new $;l+=d}l*=3;for(let u=s-2;u>=0;u-=2){let d=n.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new $;l+=d}return(1e3-l)%10}static decodeEnd(n,s){return un.findGuardPattern(n,s,!1,un.START_END_PATTERN,new Int32Array(un.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,s,l,u){return this.findGuardPattern(n,s,l,u,new Int32Array(u.length))}static findGuardPattern(n,s,l,u,d){let g=n.getSize();s=l?n.getNextUnset(s):n.getNextSet(s);let y=0,w=s,S=u.length,_=l;for(let R=s;R<g;R++)if(n.get(R)!==_)d[y]++;else{if(y===S-1){if(tn.patternMatchVariance(d,u,un.MAX_INDIVIDUAL_VARIANCE)<un.MAX_AVG_VARIANCE)return Int32Array.from([w,R]);w+=d[0]+d[1];let k=d.slice(2,d.length-1);for(let L=0;L<y-1;L++)d[L]=k[L];d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,_=!_}throw new re}static decodeDigit(n,s,l,u){this.recordPattern(n,l,s);let d=this.MAX_AVG_VARIANCE,g=-1,y=u.length;for(let w=0;w<y;w++){let S=u[w],_=tn.patternMatchVariance(s,S,un.MAX_INDIVIDUAL_VARIANCE);_<d&&(d=_,g=w)}if(g>=0)return g;throw new re}}un.MAX_AVG_VARIANCE=.48,un.MAX_INDIVIDUAL_VARIANCE=.7,un.START_END_PATTERN=Int32Array.from([1,1,1]),un.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),un.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),un.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class as{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,s,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(s,l,u),g=u.toString(),y=as.parseExtensionString(g),w=[new Me((l[0]+l[1])/2,n),new Me(d,n)],S=new J(g,null,0,w,me.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&S.putAllMetadata(y),S}decodeMiddle(n,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=n.getSize(),g=s[1],y=0;for(let S=0;S<5&&g<d;S++){let _=un.decodeDigit(n,u,g,un.L_AND_G_PATTERNS);l+=String.fromCharCode(48+_%10);for(let R of u)g+=R;_>=10&&(y|=1<<4-S),S!==4&&(g=n.getNextSet(g),g=n.getNextUnset(g))}if(l.length!==5)throw new re;let w=this.determineCheckDigit(y);if(as.extensionChecksum(l.toString())!==w)throw new re;return g}static extensionChecksum(n){let s=n.length,l=0;for(let u=s-2;u>=0;u-=2)l+=n.charAt(u).charCodeAt(0)-48;l*=3;for(let u=s-1;u>=0;u-=2)l+=n.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(n){for(let s=0;s<10;s++)if(n===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new re}static parseExtensionString(n){if(n.length!==5)return null;let s=as.parseExtension5String(n);return s==null?null:new Map([[He.SUGGESTED_PRICE,s]])}static parseExtension5String(n){let s;switch(n.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let l=parseInt(n.substring(1)),u=(l/100).toString(),d=l%100,g=d<10?"0"+d:d.toString();return s+u+"."+g}}class ol{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,s,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(s,l,u),g=u.toString(),y=ol.parseExtensionString(g),w=[new Me((l[0]+l[1])/2,n),new Me(d,n)],S=new J(g,null,0,w,me.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&S.putAllMetadata(y),S}decodeMiddle(n,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=n.getSize(),g=s[1],y=0;for(let w=0;w<2&&g<d;w++){let S=un.decodeDigit(n,u,g,un.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let _ of u)g+=_;S>=10&&(y|=1<<1-w),w!==1&&(g=n.getNextSet(g),g=n.getNextUnset(g))}if(l.length!==2)throw new re;if(parseInt(l.toString())%4!==y)throw new re;return g}static parseExtensionString(n){return n.length!==2?null:new Map([[He.ISSUE_NUMBER,parseInt(n)]])}}class ss{static decodeRow(n,s,l){let u=un.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new as().decodeRow(n,s,u)}catch{return new ol().decodeRow(n,s,u)}}}ss.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class wt extends un{constructor(){super(),this.decodeRowStringBuffer="",wt.L_AND_G_PATTERNS=wt.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let s=wt.L_PATTERNS[n-10],l=new Int32Array(s.length);for(let u=0;u<s.length;u++)l[u]=s[s.length-u-1];wt.L_AND_G_PATTERNS[n]=l}}decodeRow(n,s,l){let u=wt.findStartGuardPattern(s),d=l==null?null:l.get(Se.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Ee=new Me((u[0]+u[1])/2,n);d.foundPossibleResultPoint(Ee)}let g=this.decodeMiddle(s,u,this.decodeRowStringBuffer),y=g.rowOffset,w=g.resultString;if(d!=null){const Ee=new Me(y,n);d.foundPossibleResultPoint(Ee)}let S=this.decodeEnd(s,y);if(d!=null){const Ee=new Me((S[0]+S[1])/2,n);d.foundPossibleResultPoint(Ee)}let _=S[1],R=_+(_-S[0]);if(R>=s.getSize()||!s.isRange(_,R,!1))throw new re;let k=w.toString();if(k.length<8)throw new $;if(!wt.checkChecksum(k))throw new U;let L=(u[1]+u[0])/2,z=(S[1]+S[0])/2,F=this.getBarcodeFormat(),X=[new Me(L,n),new Me(z,n)],se=new J(k,null,0,X,F,new Date().getTime()),_e=0;try{let Ee=ss.decodeRow(n,s,S[1]);se.putMetadata(He.UPC_EAN_EXTENSION,Ee.getText()),se.putAllMetadata(Ee.getResultMetadata()),se.addResultPoints(Ee.getResultPoints()),_e=Ee.getText().length}catch{}let Ae=l==null?null:l.get(Se.ALLOWED_EAN_EXTENSIONS);if(Ae!=null){let Ee=!1;for(let dt in Ae)if(_e.toString()===dt){Ee=!0;break}if(!Ee)throw new re}return se}decodeEnd(n,s){return wt.findGuardPattern(n,s,!1,wt.START_END_PATTERN,new Int32Array(wt.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return wt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let s=n.length;if(s===0)return!1;let l=parseInt(n.charAt(s-1),10);return wt.getStandardUPCEANChecksum(n.substring(0,s-1))===l}static getStandardUPCEANChecksum(n){let s=n.length,l=0;for(let u=s-1;u>=0;u-=2){let d=n.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new $;l+=d}l*=3;for(let u=s-2;u>=0;u-=2){let d=n.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new $;l+=d}return(1e3-l)%10}}class Yr extends wt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=n.getSize(),g=s[1],y=0;for(let S=0;S<6&&g<d;S++){let _=wt.decodeDigit(n,u,g,wt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+_%10);for(let R of u)g+=R;_>=10&&(y|=1<<5-S)}l=Yr.determineFirstDigit(l,y),g=wt.findGuardPattern(n,g,!0,wt.MIDDLE_PATTERN,new Int32Array(wt.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&g<d;S++){let _=wt.decodeDigit(n,u,g,wt.L_PATTERNS);l+=String.fromCharCode(48+_);for(let R of u)g+=R}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return me.EAN_13}static determineFirstDigit(n,s){for(let l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return n=String.fromCharCode(48+l)+n,n;throw new re}}Yr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class _i extends wt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,s,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=n.getSize(),g=s[1];for(let w=0;w<4&&g<d;w++){let S=wt.decodeDigit(n,u,g,wt.L_PATTERNS);l+=String.fromCharCode(48+S);for(let _ of u)g+=_}g=wt.findGuardPattern(n,g,!0,wt.MIDDLE_PATTERN,new Int32Array(wt.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&g<d;w++){let S=wt.decodeDigit(n,u,g,wt.L_PATTERNS);l+=String.fromCharCode(48+S);for(let _ of u)g+=_}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return me.EAN_8}}class os extends wt{constructor(){super(...arguments),this.ean13Reader=new Yr}getBarcodeFormat(){return me.UPC_A}decode(n,s){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,s,l))}decodeMiddle(n,s,l){return this.ean13Reader.decodeMiddle(n,s,l)}maybeReturnResult(n){let s=n.getText();if(s.charAt(0)==="0"){let l=new J(s.substring(1),null,null,n.getResultPoints(),me.UPC_A);return n.getResultMetadata()!=null&&l.putAllMetadata(n.getResultMetadata()),l}else throw new re}reset(){this.ean13Reader.reset()}}class Zn extends wt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,s,l){const u=this.decodeMiddleCounters.map(S=>S);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const d=n.getSize();let g=s[1],y=0;for(let S=0;S<6&&g<d;S++){const _=Zn.decodeDigit(n,u,g,Zn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+_%10);for(let R of u)g+=R;_>=10&&(y|=1<<5-S)}let w=Zn.determineNumSysAndCheckDigit(l,y);return{rowOffset:g,resultString:w}}decodeEnd(n,s){return Zn.findGuardPatternWithoutCounters(n,s,!0,Zn.MIDDLE_END_PATTERN)}checkChecksum(n){return wt.checkChecksum(Zn.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,s){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let d=String.fromCharCode(48+l),g=String.fromCharCode(48+u);return d+n+g}throw re.getNotFoundInstance()}getBarcodeFormat(){return me.UPC_E}static convertUPCEtoUPCA(n){const s=n.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new Ye;l.append(n.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(u),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(u);break}return n.length>=8&&l.append(n.charAt(7)),l.toString()}}Zn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Zn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ll extends tn{constructor(n){super();let s=n==null?null:n.get(Se.POSSIBLE_FORMATS),l=[];o(s)?(l.push(new Yr),l.push(new os),l.push(new _i),l.push(new Zn)):(s.indexOf(me.EAN_13)>-1&&l.push(new Yr),s.indexOf(me.UPC_A)>-1&&l.push(new os),s.indexOf(me.EAN_8)>-1&&l.push(new _i),s.indexOf(me.UPC_E)>-1&&l.push(new Zn)),this.readers=l}decodeRow(n,s,l){for(let u of this.readers)try{const d=u.decodeRow(n,s,l),g=d.getBarcodeFormat()===me.EAN_13&&d.getText().charAt(0)==="0",y=l==null?null:l.get(Se.POSSIBLE_FORMATS),w=y==null||y.includes(me.UPC_A);if(g&&w){const S=d.getRawBytes(),_=new J(d.getText().substring(1),S,S?S.length:null,d.getResultPoints(),me.UPC_A);return _.putAllMetadata(d.getResultMetadata()),_}return d}catch{}throw new re}reset(){for(let n of this.readers)n.reset()}}class Pn extends tn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,s){for(let l=0;l<s.length;l++)if(tn.patternMatchVariance(n,s[l],Pn.MAX_INDIVIDUAL_VARIANCE)<Pn.MAX_AVG_VARIANCE)return l;throw new re}static count(n){return mt.sum(new Int32Array(n))}static increment(n,s){let l=0,u=s[0];for(let d=1;d<n.length;d++)s[d]>u&&(u=s[d],l=d);n[l]++}static decrement(n,s){let l=0,u=s[0];for(let d=1;d<n.length;d++)s[d]<u&&(u=s[d],l=d);n[l]--}static isFinderPattern(n){let s=n[0]+n[1],l=s+n[2]+n[3],u=s/l;if(u>=Pn.MIN_FINDER_PATTERN_RATIO&&u<=Pn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let y of n)y>g&&(g=y),y<d&&(d=y);return g<10*d}return!1}}Pn.MAX_AVG_VARIANCE=.2,Pn.MAX_INDIVIDUAL_VARIANCE=.45,Pn.MIN_FINDER_PATTERN_RATIO=9.5/12,Pn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ci{constructor(n,s){this.value=n,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof Ci))return!1;const s=n;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ti{constructor(n,s,l,u,d){this.value=n,this.startEnd=s,this.value=n,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Me(l,d)),this.resultPoints.push(new Me(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof Ti))return!1;const s=n;return this.value===s.value}hashCode(){return this.value}}class Xr{constructor(){}static getRSSvalue(n,s,l){let u=0;for(let w of n)u+=w;let d=0,g=0,y=n.length;for(let w=0;w<y-1;w++){let S;for(S=1,g|=1<<w;S<n[w];S++,g&=~(1<<w)){let _=Xr.combins(u-S-1,y-w-2);if(l&&g===0&&u-S-(y-w-1)>=y-w-1&&(_-=Xr.combins(u-S-(y-w),y-w-2)),y-w-1>1){let R=0;for(let k=u-S-(y-w-2);k>s;k--)R+=Xr.combins(u-S-k-1,y-w-3);_-=R*(y-1-w)}else u-S>s&&_--;d+=_}u-=S}return d}static combins(n,s){let l,u;n-s>s?(u=s,l=n-s):(u=n-s,l=s);let d=1,g=1;for(let y=n;y>l;y--)d*=y,g<=u&&(d/=g,g++);for(;g<=u;)d/=g,g++;return d}}class Cc{static buildBitArray(n){let s=n.length*2-1;n[n.length-1].getRightChar()==null&&(s-=1);let l=12*s,u=new xe(l),d=0,y=n[0].getRightChar().getValue();for(let w=11;w>=0;--w)(y&1<<w)!=0&&u.set(d),d++;for(let w=1;w<n.length;++w){let S=n[w],_=S.getLeftChar().getValue();for(let R=11;R>=0;--R)(_&1<<R)!=0&&u.set(d),d++;if(S.getRightChar()!=null){let R=S.getRightChar().getValue();for(let k=11;k>=0;--k)(R&1<<k)!=0&&u.set(d),d++}}return u}}class Oi{constructor(n,s){s?this.decodedInformation=null:(this.finished=n,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ws{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class Wn extends Ws{constructor(n,s){super(n),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Wn.FNC1}}Wn.FNC1="$";class ci extends Ws{constructor(n,s,l){super(n),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class or extends Ws{constructor(n,s,l){if(super(n),s<0||s>10||l<0||l>10)throw new $;this.firstDigit=s,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===or.FNC1}isSecondDigitFNC1(){return this.secondDigit===or.FNC1}isAnyFNC1(){return this.firstDigit===or.FNC1||this.secondDigit===or.FNC1}}or.FNC1=10;class ke{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new re;let s=n.substring(0,2);for(let d of ke.TWO_DIGIT_DATA_LENGTH)if(d[0]===s)return d[1]===ke.VARIABLE_LENGTH?ke.processVariableAI(2,d[2],n):ke.processFixedAI(2,d[1],n);if(n.length<3)throw new re;let l=n.substring(0,3);for(let d of ke.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===ke.VARIABLE_LENGTH?ke.processVariableAI(3,d[2],n):ke.processFixedAI(3,d[1],n);for(let d of ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===ke.VARIABLE_LENGTH?ke.processVariableAI(4,d[2],n):ke.processFixedAI(4,d[1],n);if(n.length<4)throw new re;let u=n.substring(0,4);for(let d of ke.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===ke.VARIABLE_LENGTH?ke.processVariableAI(4,d[2],n):ke.processFixedAI(4,d[1],n);throw new re}static processFixedAI(n,s,l){if(l.length<n)throw new re;let u=l.substring(0,n);if(l.length<n+s)throw new re;let d=l.substring(n,n+s),g=l.substring(n+s),y="("+u+")"+d,w=ke.parseFieldsInGeneralPurpose(g);return w==null?y:y+w}static processVariableAI(n,s,l){let u=l.substring(0,n),d;l.length<n+s?d=l.length:d=n+s;let g=l.substring(n,d),y=l.substring(d),w="("+u+")"+g,S=ke.parseFieldsInGeneralPurpose(y);return S==null?w:w+S}}ke.VARIABLE_LENGTH=[],ke.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ke.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ke.VARIABLE_LENGTH,20],["22",ke.VARIABLE_LENGTH,29],["30",ke.VARIABLE_LENGTH,8],["37",ke.VARIABLE_LENGTH,8],["90",ke.VARIABLE_LENGTH,30],["91",ke.VARIABLE_LENGTH,30],["92",ke.VARIABLE_LENGTH,30],["93",ke.VARIABLE_LENGTH,30],["94",ke.VARIABLE_LENGTH,30],["95",ke.VARIABLE_LENGTH,30],["96",ke.VARIABLE_LENGTH,30],["97",ke.VARIABLE_LENGTH,3],["98",ke.VARIABLE_LENGTH,30],["99",ke.VARIABLE_LENGTH,30]],ke.THREE_DIGIT_DATA_LENGTH=[["240",ke.VARIABLE_LENGTH,30],["241",ke.VARIABLE_LENGTH,30],["242",ke.VARIABLE_LENGTH,6],["250",ke.VARIABLE_LENGTH,30],["251",ke.VARIABLE_LENGTH,30],["253",ke.VARIABLE_LENGTH,17],["254",ke.VARIABLE_LENGTH,20],["400",ke.VARIABLE_LENGTH,30],["401",ke.VARIABLE_LENGTH,30],["402",17],["403",ke.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ke.VARIABLE_LENGTH,20],["421",ke.VARIABLE_LENGTH,15],["422",3],["423",ke.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ke.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ke.VARIABLE_LENGTH,15],["391",ke.VARIABLE_LENGTH,18],["392",ke.VARIABLE_LENGTH,15],["393",ke.VARIABLE_LENGTH,18],["703",ke.VARIABLE_LENGTH,30]],ke.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ke.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ke.VARIABLE_LENGTH,20],["8003",ke.VARIABLE_LENGTH,30],["8004",ke.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ke.VARIABLE_LENGTH,30],["8008",ke.VARIABLE_LENGTH,12],["8018",18],["8020",ke.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ke.VARIABLE_LENGTH,70],["8200",ke.VARIABLE_LENGTH,70]];class lr{constructor(n){this.buffer=new Ye,this.information=n}decodeAllCodes(n,s){let l=s,u=null;do{let d=this.decodeGeneralPurposeField(l,u),g=ke.parseFieldsInGeneralPurpose(d.getNewString());if(g!=null&&n.append(g),d.isRemaining()?u=""+d.getRemainingValue():u=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let s=n;s<n+3;++s)if(this.information.get(s))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(n,4);return d===0?new or(this.information.getSize(),or.FNC1,or.FNC1):new or(this.information.getSize(),d-1,or.FNC1)}let s=this.extractNumericValueFromBitArray(n,7),l=(s-8)/11,u=(s-8)%11;return new or(n+7,l,u)}extractNumericValueFromBitArray(n,s){return lr.extractNumericValueFromBitArray(this.information,n,s)}static extractNumericValueFromBitArray(n,s,l){let u=0;for(let d=0;d<l;++d)n.get(s+d)&&(u|=1<<l-d-1);return u}decodeGeneralPurposeField(n,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(n);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new ci(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new ci(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),n=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),n=s.isFinished()):(s=this.parseNumericBlock(),n=s.isFinished()),!(l!==this.current.getPosition())&&!n)break}while(!n);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let s;return n.isSecondDigitFNC1()?s=new ci(this.current.getPosition(),this.buffer.toString()):s=new ci(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new Oi(!0,s)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let s=new ci(this.current.getPosition(),this.buffer.toString());return new Oi(!0,s)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Oi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let s=new ci(this.current.getPosition(),this.buffer.toString());return new Oi(!0,s)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Oi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let s=new ci(this.current.getPosition(),this.buffer.toString());return new Oi(!0,s)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Oi(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,5);if(s>=5&&s<16)return!0;if(n+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(n,7);if(l>=64&&l<116)return!0;if(n+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(n,8);return u>=232&&u<253}decodeIsoIec646(n){let s=this.extractNumericValueFromBitArray(n,5);if(s===15)return new Wn(n+5,Wn.FNC1);if(s>=5&&s<15)return new Wn(n+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(n,7);if(l>=64&&l<90)return new Wn(n+7,""+(l+1));if(l>=90&&l<116)return new Wn(n+7,""+(l+7));let u=this.extractNumericValueFromBitArray(n,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new $}return new Wn(n+8,d)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(n,5);if(s>=5&&s<16)return!0;if(n+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(n,6);return l>=16&&l<63}decodeAlphanumeric(n){let s=this.extractNumericValueFromBitArray(n,5);if(s===15)return new Wn(n+5,Wn.FNC1);if(s>=5&&s<15)return new Wn(n+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(n,6);if(l>=32&&l<58)return new Wn(n+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new sr("Decoding invalid alphanumeric value: "+l)}return new Wn(n+6,u)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let s=0;s<5&&s+n<this.information.getSize();++s)if(s===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+s))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let s=n;s<n+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let s=0;s<4&&s+n<this.information.getSize();++s)if(this.information.get(n+s))return!1;return!0}}class _n{constructor(n){this.information=n,this.generalDecoder=new lr(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Vt extends _n{constructor(n){super(n)}encodeCompressedGtin(n,s){n.append("(01)");let l=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,s,l)}encodeCompressedGtinWithoutAI(n,s,l){for(let u=0;u<4;++u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);d/100===0&&n.append("0"),d/10===0&&n.append("0"),n.append(d)}Vt.appendCheckDigit(n,l)}static appendCheckDigit(n,s){let l=0;for(let u=0;u<13;u++){let d=n.charAt(u+s).charCodeAt(0)-48;l+=(u&1)===0?3*d:d}l=10-l%10,l===10&&(l=0),n.append(l)}}Vt.GTIN_SIZE=40;class Nr extends Vt{constructor(n){super(n)}parseInformation(){let n=new Ye;n.append("(01)");let s=n.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Nr.HEADER_SIZE,4);return n.append(l),this.encodeCompressedGtinWithoutAI(n,Nr.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(n,Nr.HEADER_SIZE+44)}}Nr.HEADER_SIZE=4;class ma extends _n{constructor(n){super(n)}parseInformation(){let n=new Ye;return this.getGeneralDecoder().decodeAllCodes(n,ma.HEADER_SIZE)}}ma.HEADER_SIZE=5;class Ys extends Vt{constructor(n){super(n)}encodeCompressedWeight(n,s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(n,u);let d=this.checkWeight(u),g=1e5;for(let y=0;y<5;++y)d/g===0&&n.append("0"),g/=10;n.append(d)}}class Zr extends Ys{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=Zr.HEADER_SIZE+Ys.GTIN_SIZE+Zr.WEIGHT_SIZE)throw new re;let n=new Ye;return this.encodeCompressedGtin(n,Zr.HEADER_SIZE),this.encodeCompressedWeight(n,Zr.HEADER_SIZE+Ys.GTIN_SIZE,Zr.WEIGHT_SIZE),n.toString()}}Zr.HEADER_SIZE=5,Zr.WEIGHT_SIZE=15;class Tc extends Zr{constructor(n){super(n)}addWeightCode(n,s){n.append("(3103)")}checkWeight(n){return n}}class ls extends Zr{constructor(n){super(n)}addWeightCode(n,s){s<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class xr extends Vt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<xr.HEADER_SIZE+Vt.GTIN_SIZE)throw new re;let n=new Ye;this.encodeCompressedGtin(n,xr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(xr.HEADER_SIZE+Vt.GTIN_SIZE,xr.LAST_DIGIT_SIZE);n.append("(392"),n.append(s),n.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(xr.HEADER_SIZE+Vt.GTIN_SIZE+xr.LAST_DIGIT_SIZE,null);return n.append(l.getNewString()),n.toString()}}xr.HEADER_SIZE=8,xr.LAST_DIGIT_SIZE=2;class yn extends Vt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<yn.HEADER_SIZE+Vt.GTIN_SIZE)throw new re;let n=new Ye;this.encodeCompressedGtin(n,yn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(yn.HEADER_SIZE+Vt.GTIN_SIZE,yn.LAST_DIGIT_SIZE);n.append("(393"),n.append(s),n.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(yn.HEADER_SIZE+Vt.GTIN_SIZE+yn.LAST_DIGIT_SIZE,yn.FIRST_THREE_DIGITS_SIZE);l/100==0&&n.append("0"),l/10==0&&n.append("0"),n.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(yn.HEADER_SIZE+Vt.GTIN_SIZE+yn.LAST_DIGIT_SIZE+yn.FIRST_THREE_DIGITS_SIZE,null);return n.append(u.getNewString()),n.toString()}}yn.HEADER_SIZE=8,yn.LAST_DIGIT_SIZE=2,yn.FIRST_THREE_DIGITS_SIZE=10;class kt extends Ys{constructor(n,s,l){super(n),this.dateCode=l,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=kt.HEADER_SIZE+kt.GTIN_SIZE+kt.WEIGHT_SIZE+kt.DATE_SIZE)throw new re;let n=new Ye;return this.encodeCompressedGtin(n,kt.HEADER_SIZE),this.encodeCompressedWeight(n,kt.HEADER_SIZE+kt.GTIN_SIZE,kt.WEIGHT_SIZE),this.encodeCompressedDate(n,kt.HEADER_SIZE+kt.GTIN_SIZE+kt.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,kt.DATE_SIZE);if(l==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let u=l%32;l/=32;let d=l%12+1;l/=12;let g=l;g/10==0&&n.append("0"),n.append(g),d/10==0&&n.append("0"),n.append(d),u/10==0&&n.append("0"),n.append(u)}addWeightCode(n,s){n.append("("),n.append(this.firstAIdigits),n.append(s/1e5),n.append(")")}checkWeight(n){return n%1e5}}kt.HEADER_SIZE=8,kt.WEIGHT_SIZE=20,kt.DATE_SIZE=16;function ya(N){try{if(N.get(1))return new Nr(N);if(!N.get(2))return new ma(N);switch(lr.extractNumericValueFromBitArray(N,1,4)){case 4:return new Tc(N);case 5:return new ls(N)}switch(lr.extractNumericValueFromBitArray(N,1,5)){case 12:return new xr(N);case 13:return new yn(N)}switch(lr.extractNumericValueFromBitArray(N,1,7)){case 56:return new kt(N,"310","11");case 57:return new kt(N,"320","11");case 58:return new kt(N,"310","13");case 59:return new kt(N,"320","13");case 60:return new kt(N,"310","15");case 61:return new kt(N,"320","15");case 62:return new kt(N,"310","17");case 63:return new kt(N,"320","17")}}catch(n){throw console.log(n),new sr("unknown decoder: "+N)}}class cr{constructor(n,s,l,u){this.leftchar=n,this.rightchar=s,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,s){return n instanceof cr?cr.equalsOrNull(n.leftchar,s.leftchar)&&cr.equalsOrNull(n.rightchar,s.rightchar)&&cr.equalsOrNull(n.finderpattern,s.finderpattern):!1}static equalsOrNull(n,s){return n===null?s===null:cr.equals(n,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class pn{constructor(n,s,l){this.pairs=n,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,s){return n instanceof pn?this.checkEqualitity(n,s)&&n.wasReversed===s.wasReversed:!1}checkEqualitity(n,s){if(!n||!s)return;let l;return n.forEach((u,d)=>{s.forEach(g=>{u.getLeftChar().getValue()===g.getLeftChar().getValue()&&u.getRightChar().getValue()===g.getRightChar().getValue()&&u.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(l=!0)})}),l}}class ve extends Pn{constructor(n){super(...arguments),this.pairs=new Array(ve.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,s,l){this.pairs.length=0,this.startFromEven=!1;try{return ve.constructResult(this.decodeRow2pairs(n,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,ve.constructResult(this.decodeRow2pairs(n,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,s){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,n))}catch(d){if(d instanceof re){if(!this.pairs.length)throw new re;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(n,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new re}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return n&&(this.rows=this.rows.reverse()),s}checkRows(n,s){for(let l=s;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let g of n)this.pairs.push(g.getPairs());if(this.pairs.push(u.getPairs()),!ve.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(n);d.push(u);try{return this.checkRows(d,l+1)}catch(g){this.verbose&&console.log(g)}}throw new re}static isValidSequence(n){for(let s of ve.FINDER_PATTERN_SEQUENCES){if(n.length>s.length)continue;let l=!0;for(let u=0;u<n.length;u++)if(n[u].getFinderPattern().getValue()!=s[u]){l=!1;break}if(l)return!0}return!1}storeRow(n,s){let l=0,u=!1,d=!1;for(;l<this.rows.length;){let g=this.rows[l];if(g.getRowNumber()>n){d=g.isEquivalent(this.pairs);break}u=g.isEquivalent(this.pairs),l++}d||u||ve.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new pn(this.pairs,n,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,s){for(let l of s)if(l.getPairs().length!==n.length){for(let u of l.getPairs())for(let d of n)if(cr.equals(u,d))break}}static isPartialRow(n,s){for(let l of s){let u=!0;for(let d of n){let g=!1;for(let y of l.getPairs())if(d.equals(y)){g=!0;break}if(!g){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(n){let s=Cc.buildBitArray(n),u=ya(s).parseInformation(),d=n[0].getFinderPattern().getResultPoints(),g=n[n.length-1].getFinderPattern().getResultPoints(),y=[d[0],d[1],g[0],g[1]];return new J(u,null,null,y,me.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),s=n.getLeftChar(),l=n.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),d=2;for(let y=1;y<this.pairs.size();++y){let w=this.pairs.get(y);u+=w.getLeftChar().getChecksumPortion(),d++;let S=w.getRightChar();S!=null&&(u+=S.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==s.getValue()}static getNextSecondBar(n,s){let l;return n.get(s)?(l=n.getNextUnset(s),l=n.getNextSet(l)):(l=n.getNextSet(s),l=n.getNextUnset(l)),l}retrieveNextPair(n,s,l){let u=s.length%2==0;this.startFromEven&&(u=!u);let d,g=!0,y=-1;do this.findNextPair(n,s,y),d=this.parseFoundFinderPattern(n,l,u),d==null?y=ve.getNextSecondBar(n,this.startEnd[0]):g=!1;while(g);let w=this.decodeDataCharacter(n,d,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new re;let S;try{S=this.decodeDataCharacter(n,d,u,!1)}catch(_){S=null,this.verbose&&console.log(_)}return new cr(w,S,d,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=n.getSize(),g;l>=0?g=l:this.isEmptyPair(s)?g=0:g=s[s.length-1].getFinderPattern().getStartEnd()[1];let y=s.length%2!=0;this.startFromEven&&(y=!y);let w=!1;for(;g<d&&(w=!n.get(g),!!w);)g++;let S=0,_=g;for(let R=g;R<d;R++)if(n.get(R)!=w)u[S]++;else{if(S==3){if(y&&ve.reverseCounters(u),ve.isFinderPattern(u)){this.startEnd[0]=_,this.startEnd[1]=R;return}y&&ve.reverseCounters(u),_+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,S--}else S++;u[S]=1,w=!w}throw new re}static reverseCounters(n){let s=n.length;for(let l=0;l<s/2;++l){let u=n[l];n[l]=n[s-l-1],n[s-l-1]=u}}parseFoundFinderPattern(n,s,l){let u,d,g;if(l){let S=this.startEnd[0]-1;for(;S>=0&&!n.get(S);)S--;S++,u=this.startEnd[0]-S,d=S,g=this.startEnd[1]}else d=this.startEnd[0],g=n.getNextUnset(this.startEnd[1]+1),u=g-this.startEnd[1];let y=this.getDecodeFinderCounters();H.arraycopy(y,0,y,1,y.length-1),y[0]=u;let w;try{w=this.parseFinderValue(y,ve.FINDER_PATTERNS)}catch{return null}return new Ti(w,[d,g],d,g,s)}decodeDataCharacter(n,s,l,u){let d=this.getDataCharacterCounters();for(let Ut=0;Ut<d.length;Ut++)d[Ut]=0;if(u)ve.recordPatternInReverse(n,s.getStartEnd()[0],d);else{ve.recordPattern(n,s.getStartEnd()[1],d);for(let Ut=0,Vn=d.length-1;Ut<Vn;Ut++,Vn--){let fr=d[Ut];d[Ut]=d[Vn],d[Vn]=fr}}let g=17,y=mt.sum(new Int32Array(d))/g,w=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(y-w)/w>.3)throw new re;let S=this.getOddCounts(),_=this.getEvenCounts(),R=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let Ut=0;Ut<d.length;Ut++){let Vn=1*d[Ut]/y,fr=Vn+.5;if(fr<1){if(Vn<.3)throw new re;fr=1}else if(fr>8){if(Vn>8.7)throw new re;fr=8}let Oa=Ut/2;(Ut&1)==0?(S[Oa]=fr,R[Oa]=Vn-fr):(_[Oa]=fr,k[Oa]=Vn-fr)}this.adjustOddEvenCounts(g);let L=4*s.getValue()+(l?0:2)+(u?0:1)-1,z=0,F=0;for(let Ut=S.length-1;Ut>=0;Ut--){if(ve.isNotA1left(s,l,u)){let Vn=ve.WEIGHTS[L][2*Ut];F+=S[Ut]*Vn}z+=S[Ut]}let X=0;for(let Ut=_.length-1;Ut>=0;Ut--)if(ve.isNotA1left(s,l,u)){let Vn=ve.WEIGHTS[L][2*Ut+1];X+=_[Ut]*Vn}let se=F+X;if((z&1)!=0||z>13||z<4)throw new re;let _e=(13-z)/2,Ae=ve.SYMBOL_WIDEST[_e],Ee=9-Ae,dt=Xr.getRSSvalue(S,Ae,!0),at=Xr.getRSSvalue(_,Ee,!1),xn=ve.EVEN_TOTAL_SUBSET[_e],vr=ve.GSUM[_e],Kn=dt*xn+at+vr;return new Ci(Kn,se)}static isNotA1left(n,s,l){return!(n.getValue()==0&&s&&l)}adjustOddEvenCounts(n){let s=mt.sum(new Int32Array(this.getOddCounts())),l=mt.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;s>13?d=!0:s<4&&(u=!0);let g=!1,y=!1;l>13?y=!0:l<4&&(g=!0);let w=s+l-n,S=(s&1)==1,_=(l&1)==0;if(w==1)if(S){if(_)throw new re;d=!0}else{if(!_)throw new re;y=!0}else if(w==-1)if(S){if(_)throw new re;u=!0}else{if(!_)throw new re;g=!0}else if(w==0){if(S){if(!_)throw new re;s<l?(u=!0,y=!0):(d=!0,g=!0)}else if(_)throw new re}else throw new re;if(u){if(d)throw new re;ve.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&ve.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new re;ve.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&ve.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ve.SYMBOL_WIDEST=[7,5,4,3,1],ve.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ve.GSUM=[0,348,1388,2948,3988],ve.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ve.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ve.FINDER_PAT_A=0,ve.FINDER_PAT_B=1,ve.FINDER_PAT_C=2,ve.FINDER_PAT_D=3,ve.FINDER_PAT_E=4,ve.FINDER_PAT_F=5,ve.FINDER_PATTERN_SEQUENCES=[[ve.FINDER_PAT_A,ve.FINDER_PAT_A],[ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B],[ve.FINDER_PAT_A,ve.FINDER_PAT_C,ve.FINDER_PAT_B,ve.FINDER_PAT_D],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_C],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_D,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_D],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_E],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F]],ve.MAX_PAIRS=11;class Oc extends Ci{constructor(n,s,l){super(n,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Lt extends Pn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,s,l){const u=this.decodePair(s,!1,n,l);Lt.addOrTally(this.possibleLeftPairs,u),s.reverse();let d=this.decodePair(s,!0,n,l);Lt.addOrTally(this.possibleRightPairs,d),s.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&Lt.checkChecksum(g,y))return Lt.constructResult(g,y)}throw new re}static addOrTally(n,s){if(s==null)return;let l=!1;for(let u of n)if(u.getValue()===s.getValue()){u.incrementCount(),l=!0;break}l||n.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,s){let l=4537077*n.getValue()+s.getValue(),u=new String(l).toString(),d=new Ye;for(let S=13-u.length;S>0;S--)d.append("0");d.append(u);let g=0;for(let S=0;S<13;S++){let _=d.charAt(S).charCodeAt(0)-48;g+=(S&1)===0?3*_:_}g=10-g%10,g===10&&(g=0),d.append(g.toString());let y=n.getFinderPattern().getResultPoints(),w=s.getFinderPattern().getResultPoints();return new J(d.toString(),null,0,[y[0],y[1],w[0],w[1]],me.RSS_14,new Date().getTime())}static checkChecksum(n,s){let l=(n.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*n.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(n,s,l,u){try{let d=this.findFinderPattern(n,s),g=this.parseFoundFinderPattern(n,l,s,d),y=u==null?null:u.get(Se.NEED_RESULT_POINT_CALLBACK);if(y!=null){let _=(d[0]+d[1])/2;s&&(_=n.getSize()-1-_),y.foundPossibleResultPoint(new Me(_,l))}let w=this.decodeDataCharacter(n,g,!0),S=this.decodeDataCharacter(n,g,!1);return new Oc(1597*w.getValue()+S.getValue(),w.getChecksumPortion()+4*S.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(n,s,l){let u=this.getDataCharacterCounters();for(let X=0;X<u.length;X++)u[X]=0;if(l)tn.recordPatternInReverse(n,s.getStartEnd()[0],u);else{tn.recordPattern(n,s.getStartEnd()[1]+1,u);for(let X=0,se=u.length-1;X<se;X++,se--){let _e=u[X];u[X]=u[se],u[se]=_e}}let d=l?16:15,g=mt.sum(new Int32Array(u))/d,y=this.getOddCounts(),w=this.getEvenCounts(),S=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors();for(let X=0;X<u.length;X++){let se=u[X]/g,_e=Math.floor(se+.5);_e<1?_e=1:_e>8&&(_e=8);let Ae=Math.floor(X/2);(X&1)===0?(y[Ae]=_e,S[Ae]=se-_e):(w[Ae]=_e,_[Ae]=se-_e)}this.adjustOddEvenCounts(l,d);let R=0,k=0;for(let X=y.length-1;X>=0;X--)k*=9,k+=y[X],R+=y[X];let L=0,z=0;for(let X=w.length-1;X>=0;X--)L*=9,L+=w[X],z+=w[X];let F=k+3*L;if(l){if((R&1)!==0||R>12||R<4)throw new re;let X=(12-R)/2,se=Lt.OUTSIDE_ODD_WIDEST[X],_e=9-se,Ae=Xr.getRSSvalue(y,se,!1),Ee=Xr.getRSSvalue(w,_e,!0),dt=Lt.OUTSIDE_EVEN_TOTAL_SUBSET[X],at=Lt.OUTSIDE_GSUM[X];return new Ci(Ae*dt+Ee+at,F)}else{if((z&1)!==0||z>10||z<4)throw new re;let X=(10-z)/2,se=Lt.INSIDE_ODD_WIDEST[X],_e=9-se,Ae=Xr.getRSSvalue(y,se,!0),Ee=Xr.getRSSvalue(w,_e,!1),dt=Lt.INSIDE_ODD_TOTAL_SUBSET[X],at=Lt.INSIDE_GSUM[X];return new Ci(Ee*dt+Ae+at,F)}}findFinderPattern(n,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=n.getSize(),d=!1,g=0;for(;g<u&&(d=!n.get(g),s!==d);)g++;let y=0,w=g;for(let S=g;S<u;S++)if(n.get(S)!==d)l[y]++;else{if(y===3){if(Pn.isFinderPattern(l))return[w,S];w+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,d=!d}throw new re}parseFoundFinderPattern(n,s,l,u){let d=n.get(u[0]),g=u[0]-1;for(;g>=0&&d!==n.get(g);)g--;g++;const y=u[0]-g,w=this.getDecodeFinderCounters(),S=new Int32Array(w.length);H.arraycopy(w,0,S,1,w.length-1),S[0]=y;const _=this.parseFinderValue(S,Lt.FINDER_PATTERNS);let R=g,k=u[1];return l&&(R=n.getSize()-1-R,k=n.getSize()-1-k),new Ti(_,[g,u[1]],R,k,s)}adjustOddEvenCounts(n,s){let l=mt.sum(new Int32Array(this.getOddCounts())),u=mt.sum(new Int32Array(this.getEvenCounts())),d=!1,g=!1,y=!1,w=!1;n?(l>12?g=!0:l<4&&(d=!0),u>12?w=!0:u<4&&(y=!0)):(l>11?g=!0:l<5&&(d=!0),u>10?w=!0:u<4&&(y=!0));let S=l+u-s,_=(l&1)===(n?1:0),R=(u&1)===1;if(S===1)if(_){if(R)throw new re;g=!0}else{if(!R)throw new re;w=!0}else if(S===-1)if(_){if(R)throw new re;d=!0}else{if(!R)throw new re;y=!0}else if(S===0){if(_){if(!R)throw new re;l<u?(d=!0,w=!0):(g=!0,y=!0)}else if(R)throw new re}else throw new re;if(d){if(g)throw new re;Pn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&Pn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(w)throw new re;Pn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Pn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Lt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Lt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Lt.OUTSIDE_GSUM=[0,161,961,2015,2715],Lt.INSIDE_GSUM=[0,336,1036,1516],Lt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Lt.INSIDE_ODD_WIDEST=[2,4,6,8],Lt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Rr extends tn{constructor(n,s){super(),this.readers=[],this.verbose=s===!0;const l=n?n.get(Se.POSSIBLE_FORMATS):null,u=n&&n.get(Se.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(me.EAN_13)||l.includes(me.UPC_A)||l.includes(me.EAN_8)||l.includes(me.UPC_E))&&this.readers.push(new ll(n)),l.includes(me.CODE_39)&&this.readers.push(new Wt(u)),l.includes(me.CODE_128)&&this.readers.push(new Ce),l.includes(me.ITF)&&this.readers.push(new lt),l.includes(me.RSS_14)&&this.readers.push(new Lt),l.includes(me.RSS_EXPANDED)&&this.readers.push(new ve(this.verbose))):(this.readers.push(new ll(n)),this.readers.push(new Wt),this.readers.push(new ll(n)),this.readers.push(new Ce),this.readers.push(new lt),this.readers.push(new Lt),this.readers.push(new ve(this.verbose)))}decodeRow(n,s,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(n,s,l)}catch{}throw new re}reset(){this.readers.forEach(n=>n.reset())}}class Id extends ie{constructor(n=500,s){super(new Rr(s),n,s)}}class Tt{constructor(n,s,l){this.ecCodewords=n,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class _t{constructor(n,s){this.count=n,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class yt{constructor(n,s,l,u,d,g){this.versionNumber=n,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=g;let y=0;const w=g.getECCodewords(),S=g.getECBlocks();for(let _ of S)y+=_.getCount()*(_.getDataCodewords()+w);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,s){if((n&1)!==0||(s&1)!==0)throw new $;for(let l of yt.VERSIONS)if(l.symbolSizeRows===n&&l.symbolSizeColumns===s)return l;throw new $}toString(){return""+this.versionNumber}static buildVersions(){return[new yt(1,10,10,8,8,new Tt(5,new _t(1,3))),new yt(2,12,12,10,10,new Tt(7,new _t(1,5))),new yt(3,14,14,12,12,new Tt(10,new _t(1,8))),new yt(4,16,16,14,14,new Tt(12,new _t(1,12))),new yt(5,18,18,16,16,new Tt(14,new _t(1,18))),new yt(6,20,20,18,18,new Tt(18,new _t(1,22))),new yt(7,22,22,20,20,new Tt(20,new _t(1,30))),new yt(8,24,24,22,22,new Tt(24,new _t(1,36))),new yt(9,26,26,24,24,new Tt(28,new _t(1,44))),new yt(10,32,32,14,14,new Tt(36,new _t(1,62))),new yt(11,36,36,16,16,new Tt(42,new _t(1,86))),new yt(12,40,40,18,18,new Tt(48,new _t(1,114))),new yt(13,44,44,20,20,new Tt(56,new _t(1,144))),new yt(14,48,48,22,22,new Tt(68,new _t(1,174))),new yt(15,52,52,24,24,new Tt(42,new _t(2,102))),new yt(16,64,64,14,14,new Tt(56,new _t(2,140))),new yt(17,72,72,16,16,new Tt(36,new _t(4,92))),new yt(18,80,80,18,18,new Tt(48,new _t(4,114))),new yt(19,88,88,20,20,new Tt(56,new _t(4,144))),new yt(20,96,96,22,22,new Tt(68,new _t(4,174))),new yt(21,104,104,24,24,new Tt(56,new _t(6,136))),new yt(22,120,120,18,18,new Tt(68,new _t(6,175))),new yt(23,132,132,20,20,new Tt(62,new _t(8,163))),new yt(24,144,144,22,22,new Tt(62,new _t(8,156),new _t(2,155))),new yt(25,8,18,6,16,new Tt(7,new _t(1,5))),new yt(26,8,32,6,14,new Tt(11,new _t(1,10))),new yt(27,12,26,10,24,new Tt(14,new _t(1,16))),new yt(28,12,36,10,16,new Tt(18,new _t(1,22))),new yt(29,16,36,14,16,new Tt(24,new _t(1,32))),new yt(30,16,48,14,22,new Tt(28,new _t(1,49)))]}}yt.VERSIONS=yt.buildVersions();class pa{constructor(n){const s=n.getHeight();if(s<8||s>144||(s&1)!==0)throw new $;this.version=pa.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new $e(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const s=n.getHeight(),l=n.getWidth();return yt.getVersionForDimensions(s,l)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,u=0;const d=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let y=!1,w=!1,S=!1,_=!1;do if(l===d&&u===0&&!y)n[s++]=this.readCorner1(d,g)&255,l-=2,u+=2,y=!0;else if(l===d-2&&u===0&&(g&3)!==0&&!w)n[s++]=this.readCorner2(d,g)&255,l-=2,u+=2,w=!0;else if(l===d+4&&u===2&&(g&7)===0&&!S)n[s++]=this.readCorner3(d,g)&255,l-=2,u+=2,S=!0;else if(l===d-2&&u===0&&(g&7)===4&&!_)n[s++]=this.readCorner4(d,g)&255,l-=2,u+=2,_=!0;else{do l<d&&u>=0&&!this.readMappingMatrix.get(u,l)&&(n[s++]=this.readUtah(l,u,d,g)&255),l-=2,u+=2;while(l>=0&&u<g);l+=1,u+=3;do l>=0&&u<g&&!this.readMappingMatrix.get(u,l)&&(n[s++]=this.readUtah(l,u,d,g)&255),l+=2,u-=2;while(l<d&&u>=0);l+=3,u+=1}while(l<d||u<g);if(s!==this.version.getTotalCodewords())throw new $;return n}readModule(n,s,l,u){return n<0&&(n+=l,s+=4-(l+4&7)),s<0&&(s+=u,n+=4-(u+4&7)),this.readMappingMatrix.set(s,n),this.mappingBitMatrix.get(s,n)}readUtah(n,s,l,u){let d=0;return this.readModule(n-2,s-2,l,u)&&(d|=1),d<<=1,this.readModule(n-2,s-1,l,u)&&(d|=1),d<<=1,this.readModule(n-1,s-2,l,u)&&(d|=1),d<<=1,this.readModule(n-1,s-1,l,u)&&(d|=1),d<<=1,this.readModule(n-1,s,l,u)&&(d|=1),d<<=1,this.readModule(n,s-2,l,u)&&(d|=1),d<<=1,this.readModule(n,s-1,l,u)&&(d|=1),d<<=1,this.readModule(n,s,l,u)&&(d|=1),d}readCorner1(n,s){let l=0;return this.readModule(n-1,0,n,s)&&(l|=1),l<<=1,this.readModule(n-1,1,n,s)&&(l|=1),l<<=1,this.readModule(n-1,2,n,s)&&(l|=1),l<<=1,this.readModule(0,s-2,n,s)&&(l|=1),l<<=1,this.readModule(0,s-1,n,s)&&(l|=1),l<<=1,this.readModule(1,s-1,n,s)&&(l|=1),l<<=1,this.readModule(2,s-1,n,s)&&(l|=1),l<<=1,this.readModule(3,s-1,n,s)&&(l|=1),l}readCorner2(n,s){let l=0;return this.readModule(n-3,0,n,s)&&(l|=1),l<<=1,this.readModule(n-2,0,n,s)&&(l|=1),l<<=1,this.readModule(n-1,0,n,s)&&(l|=1),l<<=1,this.readModule(0,s-4,n,s)&&(l|=1),l<<=1,this.readModule(0,s-3,n,s)&&(l|=1),l<<=1,this.readModule(0,s-2,n,s)&&(l|=1),l<<=1,this.readModule(0,s-1,n,s)&&(l|=1),l<<=1,this.readModule(1,s-1,n,s)&&(l|=1),l}readCorner3(n,s){let l=0;return this.readModule(n-1,0,n,s)&&(l|=1),l<<=1,this.readModule(n-1,s-1,n,s)&&(l|=1),l<<=1,this.readModule(0,s-3,n,s)&&(l|=1),l<<=1,this.readModule(0,s-2,n,s)&&(l|=1),l<<=1,this.readModule(0,s-1,n,s)&&(l|=1),l<<=1,this.readModule(1,s-3,n,s)&&(l|=1),l<<=1,this.readModule(1,s-2,n,s)&&(l|=1),l<<=1,this.readModule(1,s-1,n,s)&&(l|=1),l}readCorner4(n,s){let l=0;return this.readModule(n-3,0,n,s)&&(l|=1),l<<=1,this.readModule(n-2,0,n,s)&&(l|=1),l<<=1,this.readModule(n-1,0,n,s)&&(l|=1),l<<=1,this.readModule(0,s-2,n,s)&&(l|=1),l<<=1,this.readModule(0,s-1,n,s)&&(l|=1),l<<=1,this.readModule(1,s-1,n,s)&&(l|=1),l<<=1,this.readModule(2,s-1,n,s)&&(l|=1),l<<=1,this.readModule(3,s-1,n,s)&&(l|=1),l}extractDataRegion(n){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(n.getHeight()!==s)throw new O("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),g=s/u|0,y=l/d|0,w=g*u,S=y*d,_=new $e(S,w);for(let R=0;R<g;++R){const k=R*u;for(let L=0;L<y;++L){const z=L*d;for(let F=0;F<u;++F){const X=R*(u+2)+1+F,se=k+F;for(let _e=0;_e<d;++_e){const Ae=L*(d+2)+1+_e;if(n.get(Ae,X)){const Ee=z+_e;_.set(Ee,se)}}}}}return _}}class xa{constructor(n,s){this.numDataCodewords=n,this.codewords=s}static getDataBlocks(n,s){const l=s.getECBlocks();let u=0;const d=l.getECBlocks();for(let F of d)u+=F.getCount();const g=new Array(u);let y=0;for(let F of d)for(let X=0;X<F.getCount();X++){const se=F.getDataCodewords(),_e=l.getECCodewords()+se;g[y++]=new xa(se,new Uint8Array(_e))}const S=g[0].codewords.length-l.getECCodewords(),_=S-1;let R=0;for(let F=0;F<_;F++)for(let X=0;X<y;X++)g[X].codewords[F]=n[R++];const k=s.getVersionNumber()===24,L=k?8:y;for(let F=0;F<L;F++)g[F].codewords[S-1]=n[R++];const z=g[0].codewords.length;for(let F=S;F<z;F++)for(let X=0;X<y;X++){const se=k?(X+8)%y:X,_e=k&&se>7?F-1:F;g[se].codewords[_e]=n[R++]}if(R!==n.length)throw new O;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ir{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new O(""+n);let s=0,l=this.bitOffset,u=this.byteOffset;const d=this.bytes;if(l>0){const g=8-l,y=n<g?n:g,w=g-y,S=255>>8-y<<w;s=(d[u]&S)>>w,n-=y,l+=y,l===8&&(l=0,u++)}if(n>0){for(;n>=8;)s=s<<8|d[u]&255,u++,n-=8;if(n>0){const g=8-n,y=255>>g<<g;s=s<<n|(d[u]&y)>>g,l+=n}}return this.bitOffset=l,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Nt;(function(N){N[N.PAD_ENCODE=0]="PAD_ENCODE",N[N.ASCII_ENCODE=1]="ASCII_ENCODE",N[N.C40_ENCODE=2]="C40_ENCODE",N[N.TEXT_ENCODE=3]="TEXT_ENCODE",N[N.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",N[N.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",N[N.BASE256_ENCODE=6]="BASE256_ENCODE"})(Nt||(Nt={}));class ui{static decode(n){const s=new Ir(n),l=new Ye,u=new Ye,d=new Array;let g=Nt.ASCII_ENCODE;do if(g===Nt.ASCII_ENCODE)g=this.decodeAsciiSegment(s,l,u);else{switch(g){case Nt.C40_ENCODE:this.decodeC40Segment(s,l);break;case Nt.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case Nt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case Nt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case Nt.BASE256_ENCODE:this.decodeBase256Segment(s,l,d);break;default:throw new $}g=Nt.ASCII_ENCODE}while(g!==Nt.PAD_ENCODE&&s.available()>0);return u.length()>0&&l.append(u.toString()),new Oe(n,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(n,s,l){let u=!1;do{let d=n.readBits(8);if(d===0)throw new $;if(d<=128)return u&&(d+=128),s.append(String.fromCharCode(d-1)),Nt.ASCII_ENCODE;if(d===129)return Nt.PAD_ENCODE;if(d<=229){const g=d-130;g<10&&s.append("0"),s.append(""+g)}else switch(d){case 230:return Nt.C40_ENCODE;case 231:return Nt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),l.insert(0,"");break;case 237:s.append("[)>06"),l.insert(0,"");break;case 238:return Nt.ANSIX12_ENCODE;case 239:return Nt.TEXT_ENCODE;case 240:return Nt.EDIFACT_ENCODE;case 241:break;default:if(d!==254||n.available()!==0)throw new $;break}}while(n.available()>0);return Nt.ASCII_ENCODE}static decodeC40Segment(n,s){let l=!1;const u=[];let d=0;do{if(n.available()===8)return;const g=n.readBits(8);if(g===254)return;this.parseTwoBytes(g,n.readBits(8),u);for(let y=0;y<3;y++){const w=u[y];switch(d){case 0:if(w<3)d=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[w];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else throw new $;break;case 1:l?(s.append(String.fromCharCode(w+128)),l=!1):s.append(String.fromCharCode(w)),d=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[w];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else switch(w){case 27:s.append("");break;case 30:l=!0;break;default:throw new $}d=0;break;case 3:l?(s.append(String.fromCharCode(w+224)),l=!1):s.append(String.fromCharCode(w+96)),d=0;break;default:throw new $}}}while(n.available()>0)}static decodeTextSegment(n,s){let l=!1,u=[],d=0;do{if(n.available()===8)return;const g=n.readBits(8);if(g===254)return;this.parseTwoBytes(g,n.readBits(8),u);for(let y=0;y<3;y++){const w=u[y];switch(d){case 0:if(w<3)d=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[w];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else throw new $;break;case 1:l?(s.append(String.fromCharCode(w+128)),l=!1):s.append(String.fromCharCode(w)),d=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[w];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S)}else switch(w){case 27:s.append("");break;case 30:l=!0;break;default:throw new $}d=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[w];l?(s.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):s.append(S),d=0}else throw new $;break;default:throw new $}}}while(n.available()>0)}static decodeAnsiX12Segment(n,s){const l=[];do{if(n.available()===8)return;const u=n.readBits(8);if(u===254)return;this.parseTwoBytes(u,n.readBits(8),l);for(let d=0;d<3;d++){const g=l[d];switch(g){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(g<14)s.append(String.fromCharCode(g+44));else if(g<40)s.append(String.fromCharCode(g+51));else throw new $;break}}}while(n.available()>0)}static parseTwoBytes(n,s,l){let u=(n<<8)+s-1,d=Math.floor(u/1600);l[0]=d,u-=d*1600,d=Math.floor(u/40),l[1]=d,l[2]=u-d*40}static decodeEdifactSegment(n,s){do{if(n.available()<=16)return;for(let l=0;l<4;l++){let u=n.readBits(6);if(u===31){const d=8-n.getBitOffset();d!==8&&n.readBits(d);return}(u&32)===0&&(u|=64),s.append(String.fromCharCode(u))}}while(n.available()>0)}static decodeBase256Segment(n,s,l){let u=1+n.getByteOffset();const d=this.unrandomize255State(n.readBits(8),u++);let g;if(d===0?g=n.available()/8|0:d<250?g=d:g=250*(d-249)+this.unrandomize255State(n.readBits(8),u++),g<0)throw new $;const y=new Uint8Array(g);for(let w=0;w<g;w++){if(n.available()<8)throw new $;y[w]=this.unrandomize255State(n.readBits(8),u++)}l.push(y);try{s.append(ft.decode(y,Ie.ISO88591))}catch(w){throw new sr("Platform does not support required encoding: "+w.message)}}static unrandomize255State(n,s){const l=149*s%255+1,u=n-l;return u>=0?u:u+256}}ui.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ui.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ui.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ui.TEXT_SHIFT2_SET_CHARS=ui.C40_SHIFT2_SET_CHARS,ui.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class kd{constructor(){this.rsDecoder=new Tr(nt.DATA_MATRIX_FIELD_256)}decode(n){const s=new pa(n),l=s.getVersion(),u=s.readCodewords(),d=xa.getDataBlocks(u,l);let g=0;for(let S of d)g+=S.getNumDataCodewords();const y=new Uint8Array(g),w=d.length;for(let S=0;S<w;S++){const _=d[S],R=_.getCodewords(),k=_.getNumDataCodewords();this.correctErrors(R,k);for(let L=0;L<k;L++)y[L*w+S]=R[L]}return ui.decode(y)}correctErrors(n,s){const l=new Int32Array(n);try{this.rsDecoder.decode(l,n.length-s)}catch{throw new U}for(let u=0;u<s;u++)n[u]=l[u]}}class an{constructor(n){this.image=n,this.rectangleDetector=new hn(this.image)}detect(){const n=this.rectangleDetector.detect();let s=this.detectSolid1(n);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new re;s=this.shiftToModuleCenter(s);const l=s[0],u=s[1],d=s[2],g=s[3];let y=this.transitionsBetween(l,g)+1,w=this.transitionsBetween(d,g)+1;(y&1)===1&&(y+=1),(w&1)===1&&(w+=1),4*y<7*w&&4*w<7*y&&(y=w=Math.max(y,w));let S=an.sampleGrid(this.image,l,u,d,g,y,w);return new Gs(S,[l,u,d,g])}static shiftPoint(n,s,l){let u=(s.getX()-n.getX())/(l+1),d=(s.getY()-n.getY())/(l+1);return new Me(n.getX()+u,n.getY()+d)}static moveAway(n,s,l){let u=n.getX(),d=n.getY();return u<s?u-=1:u+=1,d<l?d-=1:d+=1,new Me(u,d)}detectSolid1(n){let s=n[0],l=n[1],u=n[3],d=n[2],g=this.transitionsBetween(s,l),y=this.transitionsBetween(l,u),w=this.transitionsBetween(u,d),S=this.transitionsBetween(d,s),_=g,R=[d,s,l,u];return _>y&&(_=y,R[0]=s,R[1]=l,R[2]=u,R[3]=d),_>w&&(_=w,R[0]=l,R[1]=u,R[2]=d,R[3]=s),_>S&&(R[0]=u,R[1]=d,R[2]=s,R[3]=l),R}detectSolid2(n){let s=n[0],l=n[1],u=n[2],d=n[3],g=this.transitionsBetween(s,d),y=an.shiftPoint(l,u,(g+1)*4),w=an.shiftPoint(u,l,(g+1)*4),S=this.transitionsBetween(y,s),_=this.transitionsBetween(w,d);return S<_?(n[0]=s,n[1]=l,n[2]=u,n[3]=d):(n[0]=l,n[1]=u,n[2]=d,n[3]=s),n}correctTopRight(n){let s=n[0],l=n[1],u=n[2],d=n[3],g=this.transitionsBetween(s,d),y=this.transitionsBetween(l,d),w=an.shiftPoint(s,l,(y+1)*4),S=an.shiftPoint(u,l,(g+1)*4);g=this.transitionsBetween(w,d),y=this.transitionsBetween(S,d);let _=new Me(d.getX()+(u.getX()-l.getX())/(g+1),d.getY()+(u.getY()-l.getY())/(g+1)),R=new Me(d.getX()+(s.getX()-l.getX())/(y+1),d.getY()+(s.getY()-l.getY())/(y+1));if(!this.isValid(_))return this.isValid(R)?R:null;if(!this.isValid(R))return _;let k=this.transitionsBetween(w,_)+this.transitionsBetween(S,_),L=this.transitionsBetween(w,R)+this.transitionsBetween(S,R);return k>L?_:R}shiftToModuleCenter(n){let s=n[0],l=n[1],u=n[2],d=n[3],g=this.transitionsBetween(s,d)+1,y=this.transitionsBetween(u,d)+1,w=an.shiftPoint(s,l,y*4),S=an.shiftPoint(u,l,g*4);g=this.transitionsBetween(w,d)+1,y=this.transitionsBetween(S,d)+1,(g&1)===1&&(g+=1),(y&1)===1&&(y+=1);let _=(s.getX()+l.getX()+u.getX()+d.getX())/4,R=(s.getY()+l.getY()+u.getY()+d.getY())/4;s=an.moveAway(s,_,R),l=an.moveAway(l,_,R),u=an.moveAway(u,_,R),d=an.moveAway(d,_,R);let k,L;return w=an.shiftPoint(s,l,y*4),w=an.shiftPoint(w,d,g*4),k=an.shiftPoint(l,s,y*4),k=an.shiftPoint(k,u,g*4),S=an.shiftPoint(u,d,y*4),S=an.shiftPoint(S,l,g*4),L=an.shiftPoint(d,u,y*4),L=an.shiftPoint(L,s,g*4),[w,k,S,L]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,s,l,u,d,g,y){return Or.getInstance().sampleGrid(n,g,y,.5,.5,g-.5,.5,g-.5,y-.5,.5,y-.5,s.getX(),s.getY(),d.getX(),d.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(n,s){let l=Math.trunc(n.getX()),u=Math.trunc(n.getY()),d=Math.trunc(s.getX()),g=Math.trunc(s.getY()),y=Math.abs(g-u)>Math.abs(d-l);if(y){let F=l;l=u,u=F,F=d,d=g,g=F}let w=Math.abs(d-l),S=Math.abs(g-u),_=-w/2,R=u<g?1:-1,k=l<d?1:-1,L=0,z=this.image.get(y?u:l,y?l:u);for(let F=l,X=u;F!==d;F+=k){let se=this.image.get(y?X:F,y?F:X);if(se!==z&&(L++,z=se),_+=S,_>0){if(X===g)break;X+=R,_-=w}}return L}}class di{constructor(){this.decoder=new kd}decode(n,s=null){let l,u;if(s!=null&&s.has(Se.PURE_BARCODE)){const S=di.extractPureBits(n.getBlackMatrix());l=this.decoder.decode(S),u=di.NO_POINTS}else{const S=new an(n.getBlackMatrix()).detect();l=this.decoder.decode(S.getBits()),u=S.getPoints()}const d=l.getRawBytes(),g=new J(l.getText(),d,8*d.length,u,me.DATA_MATRIX,H.currentTimeMillis()),y=l.getByteSegments();y!=null&&g.putMetadata(He.BYTE_SEGMENTS,y);const w=l.getECLevel();return w!=null&&g.putMetadata(He.ERROR_CORRECTION_LEVEL,w),g}reset(){}static extractPureBits(n){const s=n.getTopLeftOnBit(),l=n.getBottomRightOnBit();if(s==null||l==null)throw new re;const u=this.moduleSize(s,n);let d=s[1];const g=l[1];let y=s[0];const S=(l[0]-y+1)/u,_=(g-d+1)/u;if(S<=0||_<=0)throw new re;const R=u/2;d+=R,y+=R;const k=new $e(S,_);for(let L=0;L<_;L++){const z=d+L*u;for(let F=0;F<S;F++)n.get(y+F*u,z)&&k.set(F,L)}return k}static moduleSize(n,s){const l=s.getWidth();let u=n[0];const d=n[1];for(;u<l&&s.get(u,d);)u++;if(u===l)throw new re;const g=u-n[0];if(g===0)throw new re;return g}}di.NO_POINTS=[];class Xs extends ie{constructor(n=500){super(new di,n)}}var wa;(function(N){N[N.L=0]="L",N[N.M=1]="M",N[N.Q=2]="Q",N[N.H=3]="H"})(wa||(wa={}));class ht{constructor(n,s,l){this.value=n,this.stringValue=s,this.bits=l,ht.FOR_BITS.set(l,this),ht.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return ht.L;case"M":return ht.M;case"Q":return ht.Q;case"H":return ht.H;default:throw new T(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof ht))return!1;const s=n;return this.value===s.value}static forBits(n){if(n<0||n>=ht.FOR_BITS.size)throw new O;return ht.FOR_BITS.get(n)}}ht.FOR_BITS=new Map,ht.FOR_VALUE=new Map,ht.L=new ht(wa.L,"L",1),ht.M=new ht(wa.M,"M",0),ht.Q=new ht(wa.Q,"Q",3),ht.H=new ht(wa.H,"H",2);class In{constructor(n){this.errorCorrectionLevel=ht.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,s){return q.bitCount(n^s)}static decodeFormatInformation(n,s){const l=In.doDecodeFormatInformation(n,s);return l!==null?l:In.doDecodeFormatInformation(n^In.FORMAT_INFO_MASK_QR,s^In.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,s){let l=Number.MAX_SAFE_INTEGER,u=0;for(const d of In.FORMAT_INFO_DECODE_LOOKUP){const g=d[0];if(g===n||g===s)return new In(d[1]);let y=In.numBitsDiffering(n,g);y<l&&(u=d[1],l=y),n!==s&&(y=In.numBitsDiffering(s,g),y<l&&(u=d[1],l=y))}return l<=3?new In(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof In))return!1;const s=n;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}In.FORMAT_INFO_MASK_QR=21522,In.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class K{constructor(n,...s){this.ecCodewordsPerBlock=n,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const s=this.ecBlocks;for(const l of s)n+=l.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class M{constructor(n,s){this.count=n,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Pe{constructor(n,s,...l){this.versionNumber=n,this.alignmentPatternCenters=s,this.ecBlocks=l;let u=0;const d=l[0].getECCodewordsPerBlock(),g=l[0].getECBlocks();for(const y of g)u+=y.getCount()*(y.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new $;try{return this.getVersionForNumber((n-17)/4)}catch{throw new $}}static getVersionForNumber(n){if(n<1||n>40)throw new O;return Pe.VERSIONS[n-1]}static decodeVersionInformation(n){let s=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<Pe.VERSION_DECODE_INFO.length;u++){const d=Pe.VERSION_DECODE_INFO[u];if(d===n)return Pe.getVersionForNumber(u+7);const g=In.numBitsDiffering(n,d);g<s&&(l=u+7,s=g)}return s<=3?Pe.getVersionForNumber(l):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),s=new $e(n);s.setRegion(0,0,9,9),s.setRegion(n-8,0,8,9),s.setRegion(0,n-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const d=this.alignmentPatternCenters[u]-2;for(let g=0;g<l;g++)u===0&&(g===0||g===l-1)||u===l-1&&g===0||s.setRegion(this.alignmentPatternCenters[g]-2,d,5,5)}return s.setRegion(6,9,1,n-17),s.setRegion(9,6,n-17,1),this.versionNumber>6&&(s.setRegion(n-11,0,3,6),s.setRegion(0,n-11,6,3)),s}toString(){return""+this.versionNumber}}Pe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Pe.VERSIONS=[new Pe(1,new Int32Array(0),new K(7,new M(1,19)),new K(10,new M(1,16)),new K(13,new M(1,13)),new K(17,new M(1,9))),new Pe(2,Int32Array.from([6,18]),new K(10,new M(1,34)),new K(16,new M(1,28)),new K(22,new M(1,22)),new K(28,new M(1,16))),new Pe(3,Int32Array.from([6,22]),new K(15,new M(1,55)),new K(26,new M(1,44)),new K(18,new M(2,17)),new K(22,new M(2,13))),new Pe(4,Int32Array.from([6,26]),new K(20,new M(1,80)),new K(18,new M(2,32)),new K(26,new M(2,24)),new K(16,new M(4,9))),new Pe(5,Int32Array.from([6,30]),new K(26,new M(1,108)),new K(24,new M(2,43)),new K(18,new M(2,15),new M(2,16)),new K(22,new M(2,11),new M(2,12))),new Pe(6,Int32Array.from([6,34]),new K(18,new M(2,68)),new K(16,new M(4,27)),new K(24,new M(4,19)),new K(28,new M(4,15))),new Pe(7,Int32Array.from([6,22,38]),new K(20,new M(2,78)),new K(18,new M(4,31)),new K(18,new M(2,14),new M(4,15)),new K(26,new M(4,13),new M(1,14))),new Pe(8,Int32Array.from([6,24,42]),new K(24,new M(2,97)),new K(22,new M(2,38),new M(2,39)),new K(22,new M(4,18),new M(2,19)),new K(26,new M(4,14),new M(2,15))),new Pe(9,Int32Array.from([6,26,46]),new K(30,new M(2,116)),new K(22,new M(3,36),new M(2,37)),new K(20,new M(4,16),new M(4,17)),new K(24,new M(4,12),new M(4,13))),new Pe(10,Int32Array.from([6,28,50]),new K(18,new M(2,68),new M(2,69)),new K(26,new M(4,43),new M(1,44)),new K(24,new M(6,19),new M(2,20)),new K(28,new M(6,15),new M(2,16))),new Pe(11,Int32Array.from([6,30,54]),new K(20,new M(4,81)),new K(30,new M(1,50),new M(4,51)),new K(28,new M(4,22),new M(4,23)),new K(24,new M(3,12),new M(8,13))),new Pe(12,Int32Array.from([6,32,58]),new K(24,new M(2,92),new M(2,93)),new K(22,new M(6,36),new M(2,37)),new K(26,new M(4,20),new M(6,21)),new K(28,new M(7,14),new M(4,15))),new Pe(13,Int32Array.from([6,34,62]),new K(26,new M(4,107)),new K(22,new M(8,37),new M(1,38)),new K(24,new M(8,20),new M(4,21)),new K(22,new M(12,11),new M(4,12))),new Pe(14,Int32Array.from([6,26,46,66]),new K(30,new M(3,115),new M(1,116)),new K(24,new M(4,40),new M(5,41)),new K(20,new M(11,16),new M(5,17)),new K(24,new M(11,12),new M(5,13))),new Pe(15,Int32Array.from([6,26,48,70]),new K(22,new M(5,87),new M(1,88)),new K(24,new M(5,41),new M(5,42)),new K(30,new M(5,24),new M(7,25)),new K(24,new M(11,12),new M(7,13))),new Pe(16,Int32Array.from([6,26,50,74]),new K(24,new M(5,98),new M(1,99)),new K(28,new M(7,45),new M(3,46)),new K(24,new M(15,19),new M(2,20)),new K(30,new M(3,15),new M(13,16))),new Pe(17,Int32Array.from([6,30,54,78]),new K(28,new M(1,107),new M(5,108)),new K(28,new M(10,46),new M(1,47)),new K(28,new M(1,22),new M(15,23)),new K(28,new M(2,14),new M(17,15))),new Pe(18,Int32Array.from([6,30,56,82]),new K(30,new M(5,120),new M(1,121)),new K(26,new M(9,43),new M(4,44)),new K(28,new M(17,22),new M(1,23)),new K(28,new M(2,14),new M(19,15))),new Pe(19,Int32Array.from([6,30,58,86]),new K(28,new M(3,113),new M(4,114)),new K(26,new M(3,44),new M(11,45)),new K(26,new M(17,21),new M(4,22)),new K(26,new M(9,13),new M(16,14))),new Pe(20,Int32Array.from([6,34,62,90]),new K(28,new M(3,107),new M(5,108)),new K(26,new M(3,41),new M(13,42)),new K(30,new M(15,24),new M(5,25)),new K(28,new M(15,15),new M(10,16))),new Pe(21,Int32Array.from([6,28,50,72,94]),new K(28,new M(4,116),new M(4,117)),new K(26,new M(17,42)),new K(28,new M(17,22),new M(6,23)),new K(30,new M(19,16),new M(6,17))),new Pe(22,Int32Array.from([6,26,50,74,98]),new K(28,new M(2,111),new M(7,112)),new K(28,new M(17,46)),new K(30,new M(7,24),new M(16,25)),new K(24,new M(34,13))),new Pe(23,Int32Array.from([6,30,54,78,102]),new K(30,new M(4,121),new M(5,122)),new K(28,new M(4,47),new M(14,48)),new K(30,new M(11,24),new M(14,25)),new K(30,new M(16,15),new M(14,16))),new Pe(24,Int32Array.from([6,28,54,80,106]),new K(30,new M(6,117),new M(4,118)),new K(28,new M(6,45),new M(14,46)),new K(30,new M(11,24),new M(16,25)),new K(30,new M(30,16),new M(2,17))),new Pe(25,Int32Array.from([6,32,58,84,110]),new K(26,new M(8,106),new M(4,107)),new K(28,new M(8,47),new M(13,48)),new K(30,new M(7,24),new M(22,25)),new K(30,new M(22,15),new M(13,16))),new Pe(26,Int32Array.from([6,30,58,86,114]),new K(28,new M(10,114),new M(2,115)),new K(28,new M(19,46),new M(4,47)),new K(28,new M(28,22),new M(6,23)),new K(30,new M(33,16),new M(4,17))),new Pe(27,Int32Array.from([6,34,62,90,118]),new K(30,new M(8,122),new M(4,123)),new K(28,new M(22,45),new M(3,46)),new K(30,new M(8,23),new M(26,24)),new K(30,new M(12,15),new M(28,16))),new Pe(28,Int32Array.from([6,26,50,74,98,122]),new K(30,new M(3,117),new M(10,118)),new K(28,new M(3,45),new M(23,46)),new K(30,new M(4,24),new M(31,25)),new K(30,new M(11,15),new M(31,16))),new Pe(29,Int32Array.from([6,30,54,78,102,126]),new K(30,new M(7,116),new M(7,117)),new K(28,new M(21,45),new M(7,46)),new K(30,new M(1,23),new M(37,24)),new K(30,new M(19,15),new M(26,16))),new Pe(30,Int32Array.from([6,26,52,78,104,130]),new K(30,new M(5,115),new M(10,116)),new K(28,new M(19,47),new M(10,48)),new K(30,new M(15,24),new M(25,25)),new K(30,new M(23,15),new M(25,16))),new Pe(31,Int32Array.from([6,30,56,82,108,134]),new K(30,new M(13,115),new M(3,116)),new K(28,new M(2,46),new M(29,47)),new K(30,new M(42,24),new M(1,25)),new K(30,new M(23,15),new M(28,16))),new Pe(32,Int32Array.from([6,34,60,86,112,138]),new K(30,new M(17,115)),new K(28,new M(10,46),new M(23,47)),new K(30,new M(10,24),new M(35,25)),new K(30,new M(19,15),new M(35,16))),new Pe(33,Int32Array.from([6,30,58,86,114,142]),new K(30,new M(17,115),new M(1,116)),new K(28,new M(14,46),new M(21,47)),new K(30,new M(29,24),new M(19,25)),new K(30,new M(11,15),new M(46,16))),new Pe(34,Int32Array.from([6,34,62,90,118,146]),new K(30,new M(13,115),new M(6,116)),new K(28,new M(14,46),new M(23,47)),new K(30,new M(44,24),new M(7,25)),new K(30,new M(59,16),new M(1,17))),new Pe(35,Int32Array.from([6,30,54,78,102,126,150]),new K(30,new M(12,121),new M(7,122)),new K(28,new M(12,47),new M(26,48)),new K(30,new M(39,24),new M(14,25)),new K(30,new M(22,15),new M(41,16))),new Pe(36,Int32Array.from([6,24,50,76,102,128,154]),new K(30,new M(6,121),new M(14,122)),new K(28,new M(6,47),new M(34,48)),new K(30,new M(46,24),new M(10,25)),new K(30,new M(2,15),new M(64,16))),new Pe(37,Int32Array.from([6,28,54,80,106,132,158]),new K(30,new M(17,122),new M(4,123)),new K(28,new M(29,46),new M(14,47)),new K(30,new M(49,24),new M(10,25)),new K(30,new M(24,15),new M(46,16))),new Pe(38,Int32Array.from([6,32,58,84,110,136,162]),new K(30,new M(4,122),new M(18,123)),new K(28,new M(13,46),new M(32,47)),new K(30,new M(48,24),new M(14,25)),new K(30,new M(42,15),new M(32,16))),new Pe(39,Int32Array.from([6,26,54,82,110,138,166]),new K(30,new M(20,117),new M(4,118)),new K(28,new M(40,47),new M(7,48)),new K(30,new M(43,24),new M(22,25)),new K(30,new M(10,15),new M(67,16))),new Pe(40,Int32Array.from([6,30,58,86,114,142,170]),new K(30,new M(19,118),new M(6,119)),new K(28,new M(18,47),new M(31,48)),new K(30,new M(34,24),new M(34,25)),new K(30,new M(20,15),new M(61,16)))];var Cn;(function(N){N[N.DATA_MASK_000=0]="DATA_MASK_000",N[N.DATA_MASK_001=1]="DATA_MASK_001",N[N.DATA_MASK_010=2]="DATA_MASK_010",N[N.DATA_MASK_011=3]="DATA_MASK_011",N[N.DATA_MASK_100=4]="DATA_MASK_100",N[N.DATA_MASK_101=5]="DATA_MASK_101",N[N.DATA_MASK_110=6]="DATA_MASK_110",N[N.DATA_MASK_111=7]="DATA_MASK_111"})(Cn||(Cn={}));class ur{constructor(n,s){this.value=n,this.isMasked=s}unmaskBitMatrix(n,s){for(let l=0;l<s;l++)for(let u=0;u<s;u++)this.isMasked(l,u)&&n.flip(u,l)}}ur.values=new Map([[Cn.DATA_MASK_000,new ur(Cn.DATA_MASK_000,(N,n)=>(N+n&1)===0)],[Cn.DATA_MASK_001,new ur(Cn.DATA_MASK_001,(N,n)=>(N&1)===0)],[Cn.DATA_MASK_010,new ur(Cn.DATA_MASK_010,(N,n)=>n%3===0)],[Cn.DATA_MASK_011,new ur(Cn.DATA_MASK_011,(N,n)=>(N+n)%3===0)],[Cn.DATA_MASK_100,new ur(Cn.DATA_MASK_100,(N,n)=>(Math.floor(N/2)+Math.floor(n/3)&1)===0)],[Cn.DATA_MASK_101,new ur(Cn.DATA_MASK_101,(N,n)=>N*n%6===0)],[Cn.DATA_MASK_110,new ur(Cn.DATA_MASK_110,(N,n)=>N*n%6<3)],[Cn.DATA_MASK_111,new ur(Cn.DATA_MASK_111,(N,n)=>(N+n+N*n%3&1)===0)]]);class ba{constructor(n){const s=n.getHeight();if(s<21||(s&3)!==1)throw new $;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let d=0;d<6;d++)n=this.copyBit(d,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let d=5;d>=0;d--)n=this.copyBit(8,d,n);const s=this.bitMatrix.getHeight();let l=0;const u=s-7;for(let d=s-1;d>=u;d--)l=this.copyBit(8,d,l);for(let d=s-8;d<s;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=In.decodeFormatInformation(n,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new $}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),s=Math.floor((n-17)/4);if(s<=6)return Pe.getVersionForNumber(s);let l=0;const u=n-11;for(let g=5;g>=0;g--)for(let y=n-9;y>=u;y--)l=this.copyBit(y,g,l);let d=Pe.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===n)return this.parsedVersion=d,d;l=0;for(let g=5;g>=0;g--)for(let y=n-9;y>=u;y--)l=this.copyBit(g,y,l);if(d=Pe.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===n)return this.parsedVersion=d,d;throw new $}copyBit(n,s,l){return(this.isMirror?this.bitMatrix.get(s,n):this.bitMatrix.get(n,s))?l<<1|1:l<<1}readCodewords(){const n=this.readFormatInformation(),s=this.readVersion(),l=ur.values.get(n.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const d=s.buildFunctionPattern();let g=!0;const y=new Uint8Array(s.getTotalCodewords());let w=0,S=0,_=0;for(let R=u-1;R>0;R-=2){R===6&&R--;for(let k=0;k<u;k++){const L=g?u-1-k:k;for(let z=0;z<2;z++)d.get(R-z,L)||(_++,S<<=1,this.bitMatrix.get(R-z,L)&&(S|=1),_===8&&(y[w++]=S,_=0,S=0))}g=!g}if(w!==s.getTotalCodewords())throw new $;return y}remask(){if(this.parsedFormatInfo===null)return;const n=ur.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,s)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let s=0,l=n.getWidth();s<l;s++)for(let u=s+1,d=n.getHeight();u<d;u++)n.get(s,u)!==n.get(u,s)&&(n.flip(u,s),n.flip(s,u))}}class cl{constructor(n,s){this.numDataCodewords=n,this.codewords=s}static getDataBlocks(n,s,l){if(n.length!==s.getTotalCodewords())throw new O;const u=s.getECBlocksForLevel(l);let d=0;const g=u.getECBlocks();for(const z of g)d+=z.getCount();const y=new Array(d);let w=0;for(const z of g)for(let F=0;F<z.getCount();F++){const X=z.getDataCodewords(),se=u.getECCodewordsPerBlock()+X;y[w++]=new cl(X,new Uint8Array(se))}const S=y[0].codewords.length;let _=y.length-1;for(;_>=0&&y[_].codewords.length!==S;)_--;_++;const R=S-u.getECCodewordsPerBlock();let k=0;for(let z=0;z<R;z++)for(let F=0;F<w;F++)y[F].codewords[z]=n[k++];for(let z=_;z<w;z++)y[z].codewords[R]=n[k++];const L=y[0].codewords.length;for(let z=R;z<L;z++)for(let F=0;F<w;F++){const X=F<_?z:z+1;y[F].codewords[X]=n[k++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var dr;(function(N){N[N.TERMINATOR=0]="TERMINATOR",N[N.NUMERIC=1]="NUMERIC",N[N.ALPHANUMERIC=2]="ALPHANUMERIC",N[N.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",N[N.BYTE=4]="BYTE",N[N.ECI=5]="ECI",N[N.KANJI=6]="KANJI",N[N.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",N[N.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",N[N.HANZI=9]="HANZI"})(dr||(dr={}));class Ge{constructor(n,s,l,u){this.value=n,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=u,Ge.FOR_BITS.set(u,this),Ge.FOR_VALUE.set(n,this)}static forBits(n){const s=Ge.FOR_BITS.get(n);if(s===void 0)throw new O;return s}getCharacterCountBits(n){const s=n.getVersionNumber();let l;return s<=9?l=0:s<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof Ge))return!1;const s=n;return this.value===s.value}toString(){return this.stringValue}}Ge.FOR_BITS=new Map,Ge.FOR_VALUE=new Map,Ge.TERMINATOR=new Ge(dr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ge.NUMERIC=new Ge(dr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ge.ALPHANUMERIC=new Ge(dr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ge.STRUCTURED_APPEND=new Ge(dr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ge.BYTE=new Ge(dr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ge.ECI=new Ge(dr.ECI,"ECI",Int32Array.from([0,0,0]),7),Ge.KANJI=new Ge(dr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ge.FNC1_FIRST_POSITION=new Ge(dr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ge.FNC1_SECOND_POSITION=new Ge(dr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ge.HANZI=new Ge(dr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Kt{static decode(n,s,l,u){const d=new Ir(n);let g=new Ye;const y=new Array;let w=-1,S=-1;try{let _=null,R=!1,k;do{if(d.available()<4)k=Ge.TERMINATOR;else{const L=d.readBits(4);k=Ge.forBits(L)}switch(k){case Ge.TERMINATOR:break;case Ge.FNC1_FIRST_POSITION:case Ge.FNC1_SECOND_POSITION:R=!0;break;case Ge.STRUCTURED_APPEND:if(d.available()<16)throw new $;w=d.readBits(8),S=d.readBits(8);break;case Ge.ECI:const L=Kt.parseECIValue(d);if(_=de.getCharacterSetECIByValue(L),_===null)throw new $;break;case Ge.HANZI:const z=d.readBits(4),F=d.readBits(k.getCharacterCountBits(s));z===Kt.GB2312_SUBSET&&Kt.decodeHanziSegment(d,g,F);break;default:const X=d.readBits(k.getCharacterCountBits(s));switch(k){case Ge.NUMERIC:Kt.decodeNumericSegment(d,g,X);break;case Ge.ALPHANUMERIC:Kt.decodeAlphanumericSegment(d,g,X,R);break;case Ge.BYTE:Kt.decodeByteSegment(d,g,X,_,y,u);break;case Ge.KANJI:Kt.decodeKanjiSegment(d,g,X);break;default:throw new $}break}}while(k!==Ge.TERMINATOR)}catch{throw new $}return new Oe(n,g.toString(),y.length===0?null:y,l===null?null:l.toString(),w,S)}static decodeHanziSegment(n,s,l){if(l*13>n.available())throw new $;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const g=n.readBits(13);let y=g/96<<8&4294967295|g%96;y<959?y+=41377:y+=42657,u[d]=y>>8&255,u[d+1]=y&255,d+=2,l--}try{s.append(ft.decode(u,Ie.GB2312))}catch(g){throw new $(g)}}static decodeKanjiSegment(n,s,l){if(l*13>n.available())throw new $;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const g=n.readBits(13);let y=g/192<<8&4294967295|g%192;y<7936?y+=33088:y+=49472,u[d]=y>>8,u[d+1]=y,d+=2,l--}try{s.append(ft.decode(u,Ie.SHIFT_JIS))}catch(g){throw new $(g)}}static decodeByteSegment(n,s,l,u,d,g){if(8*l>n.available())throw new $;const y=new Uint8Array(l);for(let S=0;S<l;S++)y[S]=n.readBits(8);let w;u===null?w=Ie.guessEncoding(y,g):w=u.getName();try{s.append(ft.decode(y,w))}catch(S){throw new $(S)}d.push(y)}static toAlphaNumericChar(n){if(n>=Kt.ALPHANUMERIC_CHARS.length)throw new $;return Kt.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,s,l,u){const d=s.length();for(;l>1;){if(n.available()<11)throw new $;const g=n.readBits(11);s.append(Kt.toAlphaNumericChar(Math.floor(g/45))),s.append(Kt.toAlphaNumericChar(g%45)),l-=2}if(l===1){if(n.available()<6)throw new $;s.append(Kt.toAlphaNumericChar(n.readBits(6)))}if(u)for(let g=d;g<s.length();g++)s.charAt(g)==="%"&&(g<s.length()-1&&s.charAt(g+1)==="%"?s.deleteCharAt(g+1):s.setCharAt(g,""))}static decodeNumericSegment(n,s,l){for(;l>=3;){if(n.available()<10)throw new $;const u=n.readBits(10);if(u>=1e3)throw new $;s.append(Kt.toAlphaNumericChar(Math.floor(u/100))),s.append(Kt.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(Kt.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(n.available()<7)throw new $;const u=n.readBits(7);if(u>=100)throw new $;s.append(Kt.toAlphaNumericChar(Math.floor(u/10))),s.append(Kt.toAlphaNumericChar(u%10))}else if(l===1){if(n.available()<4)throw new $;const u=n.readBits(4);if(u>=10)throw new $;s.append(Kt.toAlphaNumericChar(u))}}static parseECIValue(n){const s=n.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const l=n.readBits(8);return(s&63)<<8&4294967295|l}if((s&224)===192){const l=n.readBits(16);return(s&31)<<16&4294967295|l}throw new $}}Kt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Kt.GB2312_SUBSET=1;class Nc{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const s=n[0];n[0]=n[2],n[2]=s}}class Dd{constructor(){this.rsDecoder=new Tr(nt.QR_CODE_FIELD_256)}decodeBooleanArray(n,s){return this.decodeBitMatrix($e.parseFromBooleanArray(n),s)}decodeBitMatrix(n,s){const l=new ba(n);let u=null;try{return this.decodeBitMatrixParser(l,s)}catch(d){u=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,s);return d.setOther(new Nc(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(n,s){const l=n.readVersion(),u=n.readFormatInformation().getErrorCorrectionLevel(),d=n.readCodewords(),g=cl.getDataBlocks(d,l,u);let y=0;for(const _ of g)y+=_.getNumDataCodewords();const w=new Uint8Array(y);let S=0;for(const _ of g){const R=_.getCodewords(),k=_.getNumDataCodewords();this.correctErrors(R,k);for(let L=0;L<k;L++)w[S++]=R[L]}return Kt.decode(w,l,u,s)}correctErrors(n,s){const l=new Int32Array(n);try{this.rsDecoder.decode(l,n.length-s)}catch{throw new U}for(let u=0;u<s;u++)n[u]=l[u]}}class va extends Me{constructor(n,s,l){super(n,s),this.estimatedModuleSize=l}aboutEquals(n,s,l){if(Math.abs(s-this.getY())<=n&&Math.abs(l-this.getX())<=n){const u=Math.abs(n-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(n,s,l){const u=(this.getX()+s)/2,d=(this.getY()+n)/2,g=(this.estimatedModuleSize+l)/2;return new va(u,d,g)}}class wr{constructor(n,s,l,u,d,g,y){this.image=n,this.startX=s,this.startY=l,this.width=u,this.height=d,this.moduleSize=g,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,s=this.height,l=this.width,u=n+l,d=this.startY+s/2,g=new Int32Array(3),y=this.image;for(let w=0;w<s;w++){const S=d+((w&1)===0?Math.floor((w+1)/2):-Math.floor((w+1)/2));g[0]=0,g[1]=0,g[2]=0;let _=n;for(;_<u&&!y.get(_,S);)_++;let R=0;for(;_<u;){if(y.get(_,S))if(R===1)g[1]++;else if(R===2){if(this.foundPatternCross(g)){const k=this.handlePossibleCenter(g,S,_);if(k!==null)return k}g[0]=g[2],g[1]=1,g[2]=0,R=1}else g[++R]++;else R===1&&R++,g[R]++;_++}if(this.foundPatternCross(g)){const k=this.handlePossibleCenter(g,S,u);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new re}static centerFromEnd(n,s){return s-n[2]-n[1]/2}foundPatternCross(n){const s=this.moduleSize,l=s/2;for(let u=0;u<3;u++)if(Math.abs(s-n[u])>=l)return!1;return!0}crossCheckVertical(n,s,l,u){const d=this.image,g=d.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let w=n;for(;w>=0&&d.get(s,w)&&y[1]<=l;)y[1]++,w--;if(w<0||y[1]>l)return NaN;for(;w>=0&&!d.get(s,w)&&y[0]<=l;)y[0]++,w--;if(y[0]>l)return NaN;for(w=n+1;w<g&&d.get(s,w)&&y[1]<=l;)y[1]++,w++;if(w===g||y[1]>l)return NaN;for(;w<g&&!d.get(s,w)&&y[2]<=l;)y[2]++,w++;if(y[2]>l)return NaN;const S=y[0]+y[1]+y[2];return 5*Math.abs(S-u)>=2*u?NaN:this.foundPatternCross(y)?wr.centerFromEnd(y,w):NaN}handlePossibleCenter(n,s,l){const u=n[0]+n[1]+n[2],d=wr.centerFromEnd(n,l),g=this.crossCheckVertical(s,d,2*n[1],u);if(!isNaN(g)){const y=(n[0]+n[1]+n[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(y,g,d))return S.combineEstimate(g,d,y);const w=new va(d,g,y);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class cs extends Me{constructor(n,s,l,u){super(n,s),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,s,l){if(Math.abs(s-this.getY())<=n&&Math.abs(l-this.getX())<=n){const u=Math.abs(n-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(n,s,l){const u=this.count+1,d=(this.count*this.getX()+s)/u,g=(this.count*this.getY()+n)/u,y=(this.count*this.estimatedModuleSize+l)/u;return new cs(d,g,y,u)}}class ul{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class sn{constructor(n,s){this.image=n,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const s=n!=null&&n.get(Se.TRY_HARDER)!==void 0,l=n!=null&&n.get(Se.PURE_BARCODE)!==void 0,u=this.image,d=u.getHeight(),g=u.getWidth();let y=Math.floor(3*d/(4*sn.MAX_MODULES));(y<sn.MIN_SKIP||s)&&(y=sn.MIN_SKIP);let w=!1;const S=new Int32Array(5);for(let R=y-1;R<d&&!w;R+=y){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let k=0;for(let L=0;L<g;L++)if(u.get(L,R))(k&1)===1&&k++,S[k]++;else if((k&1)===0)if(k===4)if(sn.foundPatternCross(S)){if(this.handlePossibleCenter(S,R,L,l)===!0)if(y=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const F=this.findRowSkip();F>S[2]&&(R+=F-S[2]-y,L=g-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,k=3;continue}k=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,k=3;else S[++k]++;else S[k]++;sn.foundPatternCross(S)&&this.handlePossibleCenter(S,R,g,l)===!0&&(y=S[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const _=this.selectBestPatterns();return Me.orderBestPatterns(_),new ul(_)}static centerFromEnd(n,s){return s-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let s=0;for(let d=0;d<5;d++){const g=n[d];if(g===0)return!1;s+=g}if(s<7)return!1;const l=s/7,u=l/2;return Math.abs(l-n[0])<u&&Math.abs(l-n[1])<u&&Math.abs(3*l-n[2])<3*u&&Math.abs(l-n[3])<u&&Math.abs(l-n[4])<u}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,s,l,u){const d=this.getCrossCheckStateCount();let g=0;const y=this.image;for(;n>=g&&s>=g&&y.get(s-g,n-g);)d[2]++,g++;if(n<g||s<g)return!1;for(;n>=g&&s>=g&&!y.get(s-g,n-g)&&d[1]<=l;)d[1]++,g++;if(n<g||s<g||d[1]>l)return!1;for(;n>=g&&s>=g&&y.get(s-g,n-g)&&d[0]<=l;)d[0]++,g++;if(d[0]>l)return!1;const w=y.getHeight(),S=y.getWidth();for(g=1;n+g<w&&s+g<S&&y.get(s+g,n+g);)d[2]++,g++;if(n+g>=w||s+g>=S)return!1;for(;n+g<w&&s+g<S&&!y.get(s+g,n+g)&&d[3]<l;)d[3]++,g++;if(n+g>=w||s+g>=S||d[3]>=l)return!1;for(;n+g<w&&s+g<S&&y.get(s+g,n+g)&&d[4]<l;)d[4]++,g++;if(d[4]>=l)return!1;const _=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(_-u)<2*u&&sn.foundPatternCross(d)}crossCheckVertical(n,s,l,u){const d=this.image,g=d.getHeight(),y=this.getCrossCheckStateCount();let w=n;for(;w>=0&&d.get(s,w);)y[2]++,w--;if(w<0)return NaN;for(;w>=0&&!d.get(s,w)&&y[1]<=l;)y[1]++,w--;if(w<0||y[1]>l)return NaN;for(;w>=0&&d.get(s,w)&&y[0]<=l;)y[0]++,w--;if(y[0]>l)return NaN;for(w=n+1;w<g&&d.get(s,w);)y[2]++,w++;if(w===g)return NaN;for(;w<g&&!d.get(s,w)&&y[3]<l;)y[3]++,w++;if(w===g||y[3]>=l)return NaN;for(;w<g&&d.get(s,w)&&y[4]<l;)y[4]++,w++;if(y[4]>=l)return NaN;const S=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(S-u)>=2*u?NaN:sn.foundPatternCross(y)?sn.centerFromEnd(y,w):NaN}crossCheckHorizontal(n,s,l,u){const d=this.image,g=d.getWidth(),y=this.getCrossCheckStateCount();let w=n;for(;w>=0&&d.get(w,s);)y[2]++,w--;if(w<0)return NaN;for(;w>=0&&!d.get(w,s)&&y[1]<=l;)y[1]++,w--;if(w<0||y[1]>l)return NaN;for(;w>=0&&d.get(w,s)&&y[0]<=l;)y[0]++,w--;if(y[0]>l)return NaN;for(w=n+1;w<g&&d.get(w,s);)y[2]++,w++;if(w===g)return NaN;for(;w<g&&!d.get(w,s)&&y[3]<l;)y[3]++,w++;if(w===g||y[3]>=l)return NaN;for(;w<g&&d.get(w,s)&&y[4]<l;)y[4]++,w++;if(y[4]>=l)return NaN;const S=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(S-u)>=u?NaN:sn.foundPatternCross(y)?sn.centerFromEnd(y,w):NaN}handlePossibleCenter(n,s,l,u){const d=n[0]+n[1]+n[2]+n[3]+n[4];let g=sn.centerFromEnd(n,l),y=this.crossCheckVertical(s,Math.floor(g),n[2],d);if(!isNaN(y)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(y),n[2],d),!isNaN(g)&&(!u||this.crossCheckDiagonal(Math.floor(y),Math.floor(g),n[2],d)))){const w=d/7;let S=!1;const _=this.possibleCenters;for(let R=0,k=_.length;R<k;R++){const L=_[R];if(L.aboutEquals(w,y,g)){_[R]=L.combineEstimate(y,g,w),S=!0;break}}if(!S){const R=new cs(g,y,w);_.push(R),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(R)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const l of this.possibleCenters)if(l.getCount()>=sn.CENTER_QUORUM)if(s==null)s=l;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-l.getX())-Math.abs(s.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,s=0;const l=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=sn.CENTER_QUORUM&&(n++,s+=g.getEstimatedModuleSize());if(n<3)return!1;const u=s/l;let d=0;for(const g of this.possibleCenters)d+=Math.abs(g.getEstimatedModuleSize()-u);return d<=.05*s}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new re;const s=this.possibleCenters;let l;if(n>3){let u=0,d=0;for(const w of this.possibleCenters){const S=w.getEstimatedModuleSize();u+=S,d+=S*S}l=u/n;let g=Math.sqrt(d/n-l*l);s.sort((w,S)=>{const _=Math.abs(S.getEstimatedModuleSize()-l),R=Math.abs(w.getEstimatedModuleSize()-l);return _<R?-1:_>R?1:0});const y=Math.max(.2*l,g);for(let w=0;w<s.length&&s.length>3;w++){const S=s[w];Math.abs(S.getEstimatedModuleSize()-l)>y&&(s.splice(w,1),w--)}}if(s.length>3){let u=0;for(const d of s)u+=d.getEstimatedModuleSize();l=u/s.length,s.sort((d,g)=>{if(g.getCount()===d.getCount()){const y=Math.abs(g.getEstimatedModuleSize()-l),w=Math.abs(d.getEstimatedModuleSize()-l);return y<w?1:y>w?-1:0}else return g.getCount()-d.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}sn.CENTER_QUORUM=2,sn.MIN_SKIP=3,sn.MAX_MODULES=57;class Kr{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(Se.NEED_RESULT_POINT_CALLBACK);const l=new sn(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(l)}processFinderPatternInfo(n){const s=n.getTopLeft(),l=n.getTopRight(),u=n.getBottomLeft(),d=this.calculateModuleSize(s,l,u);if(d<1)throw new re("No pattern found in proccess finder.");const g=Kr.computeDimension(s,l,u,d),y=Pe.getProvisionalVersionForDimension(g),w=y.getDimensionForVersion()-7;let S=null;if(y.getAlignmentPatternCenters().length>0){const L=l.getX()-s.getX()+u.getX(),z=l.getY()-s.getY()+u.getY(),F=1-3/w,X=Math.floor(s.getX()+F*(L-s.getX())),se=Math.floor(s.getY()+F*(z-s.getY()));for(let _e=4;_e<=16;_e<<=1)try{S=this.findAlignmentInRegion(d,X,se,_e);break}catch(Ae){if(!(Ae instanceof re))throw Ae}}const _=Kr.createTransform(s,l,u,S,g),R=Kr.sampleGrid(this.image,_,g);let k;return S===null?k=[u,s,l]:k=[u,s,l,S],new Gs(R,k)}static createTransform(n,s,l,u,d){const g=d-3.5;let y,w,S,_;return u!==null?(y=u.getX(),w=u.getY(),S=g-3,_=S):(y=s.getX()-n.getX()+l.getX(),w=s.getY()-n.getY()+l.getY(),S=g,_=g),pr.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,S,_,3.5,g,n.getX(),n.getY(),s.getX(),s.getY(),y,w,l.getX(),l.getY())}static sampleGrid(n,s,l){return Or.getInstance().sampleGridWithTransform(n,l,l,s)}static computeDimension(n,s,l,u){const d=mt.round(Me.distance(n,s)/u),g=mt.round(Me.distance(n,l)/u);let y=Math.floor((d+g)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new re("Dimensions could be not found.")}return y}calculateModuleSize(n,s,l){return(this.calculateModuleSizeOneWay(n,s)+this.calculateModuleSizeOneWay(n,l))/2}calculateModuleSizeOneWay(n,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(n,s,l,u){let d=this.sizeOfBlackWhiteBlackRun(n,s,l,u),g=1,y=n-(l-n);y<0?(g=n/(n-y),y=0):y>=this.image.getWidth()&&(g=(this.image.getWidth()-1-n)/(y-n),y=this.image.getWidth()-1);let w=Math.floor(s-(u-s)*g);return g=1,w<0?(g=s/(s-w),w=0):w>=this.image.getHeight()&&(g=(this.image.getHeight()-1-s)/(w-s),w=this.image.getHeight()-1),y=Math.floor(n+(y-n)*g),d+=this.sizeOfBlackWhiteBlackRun(n,s,y,w),d-1}sizeOfBlackWhiteBlackRun(n,s,l,u){const d=Math.abs(u-s)>Math.abs(l-n);if(d){let L=n;n=s,s=L,L=l,l=u,u=L}const g=Math.abs(l-n),y=Math.abs(u-s);let w=-g/2;const S=n<l?1:-1,_=s<u?1:-1;let R=0;const k=l+S;for(let L=n,z=s;L!==k;L+=S){const F=d?z:L,X=d?L:z;if(R===1===this.image.get(F,X)){if(R===2)return mt.distance(L,z,n,s);R++}if(w+=y,w>0){if(z===u)break;z+=_,w-=g}}return R===2?mt.distance(l+S,u,n,s):NaN}findAlignmentInRegion(n,s,l,u){const d=Math.floor(u*n),g=Math.max(0,s-d),y=Math.min(this.image.getWidth()-1,s+d);if(y-g<n*3)throw new re("Alignment top exceeds estimated module size.");const w=Math.max(0,l-d),S=Math.min(this.image.getHeight()-1,l+d);if(S-w<n*3)throw new re("Alignment bottom exceeds estimated module size.");return new wr(this.image,g,w,y-g,S-w,n,this.resultPointCallback).find()}}class fi{constructor(){this.decoder=new Dd}getDecoder(){return this.decoder}decode(n,s){let l,u;if(s!=null&&s.get(Se.PURE_BARCODE)!==void 0){const w=fi.extractPureBits(n.getBlackMatrix());l=this.decoder.decodeBitMatrix(w,s),u=fi.NO_POINTS}else{const w=new Kr(n.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(w.getBits(),s),u=w.getPoints()}l.getOther()instanceof Nc&&l.getOther().applyMirroredCorrection(u);const d=new J(l.getText(),l.getRawBytes(),void 0,u,me.QR_CODE,void 0),g=l.getByteSegments();g!==null&&d.putMetadata(He.BYTE_SEGMENTS,g);const y=l.getECLevel();return y!==null&&d.putMetadata(He.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(d.putMetadata(He.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(He.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(n){const s=n.getTopLeftOnBit(),l=n.getBottomRightOnBit();if(s===null||l===null)throw new re;const u=this.moduleSize(s,n);let d=s[1],g=l[1],y=s[0],w=l[0];if(y>=w||d>=g)throw new re;if(g-d!==w-y&&(w=y+(g-d),w>=n.getWidth()))throw new re;const S=Math.round((w-y+1)/u),_=Math.round((g-d+1)/u);if(S<=0||_<=0)throw new re;if(_!==S)throw new re;const R=Math.floor(u/2);d+=R,y+=R;const k=y+Math.floor((S-1)*u)-w;if(k>0){if(k>R)throw new re;y-=k}const L=d+Math.floor((_-1)*u)-g;if(L>0){if(L>R)throw new re;d-=L}const z=new $e(S,_);for(let F=0;F<_;F++){const X=d+Math.floor(F*u);for(let se=0;se<S;se++)n.get(y+Math.floor(se*u),X)&&z.set(se,F)}return z}static moduleSize(n,s){const l=s.getHeight(),u=s.getWidth();let d=n[0],g=n[1],y=!0,w=0;for(;d<u&&g<l;){if(y!==s.get(d,g)){if(++w===5)break;y=!y}d++,g++}if(d===u||g===l)throw new re;return(d-n[0])/7}}fi.NO_POINTS=new Array;class Xe{PDF417Common(){}static getBitCountSum(n){return mt.sum(n)}static toIntArray(n){if(n==null||!n.length)return Xe.EMPTY_INT_ARRAY;const s=new Int32Array(n.length);let l=0;for(const u of n)s[l++]=u;return s}static getCodeword(n){const s=Q.binarySearch(Xe.SYMBOL_TABLE,n&262143);return s<0?-1:(Xe.CODEWORD_TABLE[s]-1)%Xe.NUMBER_OF_CODEWORDS}}Xe.NUMBER_OF_CODEWORDS=929,Xe.MAX_CODEWORDS_IN_BARCODE=Xe.NUMBER_OF_CODEWORDS-1,Xe.MIN_ROWS_IN_BARCODE=3,Xe.MAX_ROWS_IN_BARCODE=90,Xe.MODULES_IN_CODEWORD=17,Xe.MODULES_IN_STOP_PATTERN=18,Xe.BARS_IN_MODULE=8,Xe.EMPTY_INT_ARRAY=new Int32Array([]),Xe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Xe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Rc{constructor(n,s){this.bits=n,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class it{static detectMultiple(n,s,l){let u=n.getBlackMatrix(),d=it.detect(l,u);return d.length||(u=u.clone(),u.rotate180(),d=it.detect(l,u)),new Rc(u,d)}static detect(n,s){const l=new Array;let u=0,d=0,g=!1;for(;u<s.getHeight();){const y=it.findVertices(s,u,d);if(y[0]==null&&y[3]==null){if(!g)break;g=!1,d=0;for(const w of l)w[1]!=null&&(u=Math.trunc(Math.max(u,w[1].getY()))),w[3]!=null&&(u=Math.max(u,Math.trunc(w[3].getY())));u+=it.ROW_STEP;continue}if(g=!0,l.push(y),!n)break;y[2]!=null?(d=Math.trunc(y[2].getX()),u=Math.trunc(y[2].getY())):(d=Math.trunc(y[4].getX()),u=Math.trunc(y[4].getY()))}return l}static findVertices(n,s,l){const u=n.getHeight(),d=n.getWidth(),g=new Array(8);return it.copyToResult(g,it.findRowsWithPattern(n,u,d,s,l,it.START_PATTERN),it.INDEXES_START_PATTERN),g[4]!=null&&(l=Math.trunc(g[4].getX()),s=Math.trunc(g[4].getY())),it.copyToResult(g,it.findRowsWithPattern(n,u,d,s,l,it.STOP_PATTERN),it.INDEXES_STOP_PATTERN),g}static copyToResult(n,s,l){for(let u=0;u<l.length;u++)n[l[u]]=s[u]}static findRowsWithPattern(n,s,l,u,d,g){const y=new Array(4);let w=!1;const S=new Int32Array(g.length);for(;u<s;u+=it.ROW_STEP){let R=it.findGuardPattern(n,d,u,l,!1,g,S);if(R!=null){for(;u>0;){const k=it.findGuardPattern(n,d,--u,l,!1,g,S);if(k!=null)R=k;else{u++;break}}y[0]=new Me(R[0],u),y[1]=new Me(R[1],u),w=!0;break}}let _=u+1;if(w){let R=0,k=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;_<s;_++){const L=it.findGuardPattern(n,k[0],_,l,!1,g,S);if(L!=null&&Math.abs(k[0]-L[0])<it.MAX_PATTERN_DRIFT&&Math.abs(k[1]-L[1])<it.MAX_PATTERN_DRIFT)k=L,R=0;else{if(R>it.SKIPPED_ROW_COUNT_MAX)break;R++}}_-=R+1,y[2]=new Me(k[0],_),y[3]=new Me(k[1],_)}return _-u<it.BARCODE_MIN_HEIGHT&&Q.fill(y,null),y}static findGuardPattern(n,s,l,u,d,g,y){Q.fillWithin(y,0,y.length,0);let w=s,S=0;for(;n.get(w,l)&&w>0&&S++<it.MAX_PIXEL_DRIFT;)w--;let _=w,R=0,k=g.length;for(let L=d;_<u;_++)if(n.get(_,l)!==L)y[R]++;else{if(R===k-1){if(it.patternMatchVariance(y,g,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return new Int32Array([w,_]);w+=y[0]+y[1],H.arraycopy(y,2,y,0,R-1),y[R-1]=0,y[R]=0,R--}else R++;y[R]=1,L=!L}return R===k-1&&it.patternMatchVariance(y,g,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE?new Int32Array([w,_-1]):null}static patternMatchVariance(n,s,l){let u=n.length,d=0,g=0;for(let S=0;S<u;S++)d+=n[S],g+=s[S];if(d<g)return 1/0;let y=d/g;l*=y;let w=0;for(let S=0;S<u;S++){let _=n[S],R=s[S]*y,k=_>R?_-R:R-_;if(k>l)return 1/0;w+=k}return w/d}}it.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),it.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),it.MAX_AVG_VARIANCE=.42,it.MAX_INDIVIDUAL_VARIANCE=.8,it.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),it.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),it.MAX_PIXEL_DRIFT=3,it.MAX_PATTERN_DRIFT=5,it.SKIPPED_ROW_COUNT_MAX=25,it.ROW_STEP=5,it.BARCODE_MIN_HEIGHT=10;class Qt{constructor(n,s){if(s.length===0)throw new O;this.field=n;let l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),H.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let s=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)s=this.field.add(this.field.multiply(n,s),this.coefficients[u]);return s}add(n){if(!this.field.equals(n.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let s=this.coefficients,l=n.coefficients;if(s.length>l.length){let g=s;s=l,l=g}let u=new Int32Array(l.length),d=l.length-s.length;H.arraycopy(l,0,u,0,d);for(let g=d;g<l.length;g++)u[g]=this.field.add(s[g-d],l[g]);return new Qt(this.field,u)}subtract(n){if(!this.field.equals(n.field))throw new O("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof Qt?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new O("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new Qt(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,u=n.coefficients,d=u.length,g=new Int32Array(l+d-1);for(let y=0;y<l;y++){let w=s[y];for(let S=0;S<d;S++)g[y+S]=this.field.add(g[y+S],this.field.multiply(w,u[S]))}return new Qt(this.field,g)}negative(){let n=this.coefficients.length,s=new Int32Array(n);for(let l=0;l<n;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new Qt(this.field,s)}multiplyScalar(n){if(n===0)return new Qt(this.field,new Int32Array([0]));if(n===1)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.multiply(this.coefficients[u],n);return new Qt(this.field,l)}multiplyByMonomial(n,s){if(n<0)throw new O;if(s===0)return new Qt(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+n);for(let d=0;d<l;d++)u[d]=this.field.multiply(this.coefficients[d],s);return new Qt(this.field,u)}toString(){let n=new Ye;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);l!==0&&(l<0?(n.append(" - "),l=-l):n.length()>0&&n.append(" + "),(s===0||l!==1)&&n.append(l),s!==0&&(s===1?n.append("x"):(n.append("x^"),n.append(s))))}return n.toString()}}class dl{add(n,s){return(n+s)%this.modulus}subtract(n,s){return(this.modulus+n-s)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new O;return this.logTable[n]}inverse(n){if(n===0)throw new en;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,s){return n===0||s===0?0:this.expTable[(this.logTable[n]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class Pi extends dl{constructor(n,s){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let l=1;for(let u=0;u<n;u++)this.expTable[u]=l,l=l*s%n;for(let u=0;u<n-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Qt(this,new Int32Array([0])),this.one=new Qt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,s){if(n<0)throw new O;if(s===0)return this.zero;let l=new Int32Array(n+1);return l[0]=s,new Qt(this,l)}}Pi.PDF417_GF=new Pi(Xe.NUMBER_OF_CODEWORDS,3);class hi{constructor(){this.field=Pi.PDF417_GF}decode(n,s,l){let u=new Qt(this.field,n),d=new Int32Array(s),g=!1;for(let z=s;z>0;z--){let F=u.evaluateAt(this.field.exp(z));d[s-z]=F,F!==0&&(g=!0)}if(!g)return 0;let y=this.field.getOne();if(l!=null)for(const z of l){let F=this.field.exp(n.length-1-z),X=new Qt(this.field,new Int32Array([this.field.subtract(0,F),1]));y=y.multiply(X)}let w=new Qt(this.field,d),S=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),w,s),_=S[0],R=S[1],k=this.findErrorLocations(_),L=this.findErrorMagnitudes(R,_,k);for(let z=0;z<k.length;z++){let F=n.length-1-this.field.log(k[z]);if(F<0)throw U.getChecksumInstance();n[F]=this.field.subtract(n[F],L[z])}return k.length}runEuclideanAlgorithm(n,s,l){if(n.getDegree()<s.getDegree()){let k=n;n=s,s=k}let u=n,d=s,g=this.field.getZero(),y=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let k=u,L=g;if(u=d,g=y,u.isZero())throw U.getChecksumInstance();d=k;let z=this.field.getZero(),F=u.getCoefficient(u.getDegree()),X=this.field.inverse(F);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let se=d.getDegree()-u.getDegree(),_e=this.field.multiply(d.getCoefficient(d.getDegree()),X);z=z.add(this.field.buildMonomial(se,_e)),d=d.subtract(u.multiplyByMonomial(se,_e))}y=z.multiply(g).subtract(L).negative()}let w=y.getCoefficient(0);if(w===0)throw U.getChecksumInstance();let S=this.field.inverse(w),_=y.multiply(S),R=d.multiply(S);return[_,R]}findErrorLocations(n){let s=n.getDegree(),l=new Int32Array(s),u=0;for(let d=1;d<this.field.getSize()&&u<s;d++)n.evaluateAt(d)===0&&(l[u]=this.field.inverse(d),u++);if(u!==s)throw U.getChecksumInstance();return l}findErrorMagnitudes(n,s,l){let u=s.getDegree(),d=new Int32Array(u);for(let S=1;S<=u;S++)d[u-S]=this.field.multiply(S,s.getCoefficient(S));let g=new Qt(this.field,d),y=l.length,w=new Int32Array(y);for(let S=0;S<y;S++){let _=this.field.inverse(l[S]),R=this.field.subtract(0,n.evaluateAt(_)),k=this.field.inverse(g.evaluateAt(_));w[S]=this.field.multiply(R,k)}return w}}class gi{constructor(n,s,l,u,d){n instanceof gi?this.constructor_2(n):this.constructor_1(n,s,l,u,d)}constructor_1(n,s,l,u,d){const g=s==null||l==null,y=u==null||d==null;if(g&&y)throw new re;g?(s=new Me(0,u.getY()),l=new Me(0,d.getY())):y&&(u=new Me(n.getWidth()-1,s.getY()),d=new Me(n.getWidth()-1,l.getY())),this.image=n,this.topLeft=s,this.bottomLeft=l,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,s){return n==null?s:s==null?n:new gi(n.image,n.topLeft,n.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(n,s,l){let u=this.topLeft,d=this.bottomLeft,g=this.topRight,y=this.bottomRight;if(n>0){let w=l?this.topLeft:this.topRight,S=Math.trunc(w.getY()-n);S<0&&(S=0);let _=new Me(w.getX(),S);l?u=_:g=_}if(s>0){let w=l?this.bottomLeft:this.bottomRight,S=Math.trunc(w.getY()+s);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let _=new Me(w.getX(),S);l?d=_:y=_}return new gi(this.image,u,d,g,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Zs{constructor(n,s,l,u){this.columnCount=n,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ea{constructor(){this.buffer=""}static form(n,s){let l=-1;function u(g,y,w,S,_,R){if(g==="%%")return"%";if(s[++l]===void 0)return;g=S?parseInt(S.substr(1)):void 0;let k=_?parseInt(_.substr(1)):void 0,L;switch(R){case"s":L=s[l];break;case"c":L=s[l][0];break;case"f":L=parseFloat(s[l]).toFixed(g);break;case"p":L=parseFloat(s[l]).toPrecision(g);break;case"e":L=parseFloat(s[l]).toExponential(g);break;case"x":L=parseInt(s[l]).toString(k||16);break;case"d":L=parseFloat(parseInt(s[l],k||10).toPrecision(g)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(k);let z=parseInt(w),F=w&&w[0]+""=="0"?"0":" ";for(;L.length<z;)L=y!==void 0?L+F:F+L;return L}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(d,u)}format(n,...s){this.buffer+=Ea.form(n,s)}toString(){return this.buffer}}class Ni{constructor(n){this.boundingBox=new gi(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let s=this.getCodeword(n);if(s!=null)return s;for(let l=1;l<Ni.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(n)-l;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(n)+l,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,s){this.codewords[this.imageRowToCodewordIndex(n)]=s}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new Ea;let s=0;for(const l of this.codewords){if(l==null){n.format("%3d:    |   %n",s++);continue}n.format("%3d: %3d|%3d%n",s++,l.getRowNumber(),l.getValue())}return n.toString()}}Ni.MAX_NEARBY_DISTANCE=5;class Ri{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let s=this.values.get(n);s==null&&(s=0),s++,this.values.set(n,s)}getValue(){let n=-1,s=new Array;for(const[l,u]of this.values.entries()){const d={getKey:()=>l,getValue:()=>u};d.getValue()>n?(n=d.getValue(),s=[],s.push(d.getKey())):d.getValue()===n&&s.push(d.getKey())}return Xe.toIntArray(s)}getConfidence(n){return this.values.get(n)}}class fl extends Ni{constructor(n,s){super(n),this._isLeft=s}setRowNumbers(){for(let n of this.getCodewords())n?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,n);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.imageRowToCodewordIndex(Math.trunc(d.getY())),w=-1,S=1,_=0;for(let R=g;R<y;R++){if(s[R]==null)continue;let k=s[R],L=k.getRowNumber()-w;if(L===0)_++;else if(L===1)S=Math.max(S,_),_=1,w=k.getRowNumber();else if(L<0||k.getRowNumber()>=n.getRowCount()||L>R)s[R]=null;else{let z;S>2?z=(S-2)*L:z=L;let F=z>=R;for(let X=1;X<=z&&!F;X++)F=s[R-X]!=null;F?s[R]=null:(w=k.getRowNumber(),_=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let s=new Int32Array(n.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(n){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.getCodewords(),w=-1;for(let S=d;S<g;S++){if(y[S]==null)continue;let _=y[S];_.setRowNumberAsRowIndicatorColumn();let R=_.getRowNumber()-w;R===0||(R===1?w=_.getRowNumber():_.getRowNumber()>=n.getRowCount()?y[S]=null:w=_.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),s=new Ri,l=new Ri,u=new Ri,d=new Ri;for(let y of n){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let w=y.getValue()%30,S=y.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:l.setValue(w*3+1);break;case 1:d.setValue(w/3),u.setValue(w%3);break;case 2:s.setValue(w+1);break}}if(s.getValue().length===0||l.getValue().length===0||u.getValue().length===0||d.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<Xe.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>Xe.MAX_ROWS_IN_BARCODE)return null;let g=new Zs(s.getValue()[0],l.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(n,g),g}removeIncorrectCodewords(n,s){for(let l=0;l<n.length;l++){let u=n[l];if(n[l]==null)continue;let d=u.getValue()%30,g=u.getRowNumber();if(g>s.getRowCount()){n[l]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:d*3+1!==s.getRowCountUpperPart()&&(n[l]=null);break;case 1:(Math.trunc(d/3)!==s.getErrorCorrectionLevel()||d%3!==s.getRowCountLowerPart())&&(n[l]=null);break;case 2:d+1!==s.getColumnCount()&&(n[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class kn{constructor(n,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=Xe.MAX_CODEWORDS_IN_BARCODE,s;do s=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,l))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<n.length;l++)if(n[l]!=null&&s[l]!=null&&n[l].getRowNumber()===s[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[l];d!=null&&(d.setRowNumber(n[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),d=0;for(let g=this.barcodeColumnCount+1;g>0&&d<this.ADJUST_ROW_NUMBER_SKIP;g--){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(d=kn.adjustRowNumberIfValid(u,d,y),y.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),d=0;for(let g=1;g<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;g++){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(d=kn.adjustRowNumberIfValid(u,d,y),y.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,s,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(n)?(l.setRowNumber(n),s=0):++s),s}adjustRowNumbers(n,s,l){if(!this.detectionResultColumns[n-1])return;let u=l[s],d=this.detectionResultColumns[n-1].getCodewords(),g=d;this.detectionResultColumns[n+1]!=null&&(g=this.detectionResultColumns[n+1].getCodewords());let y=new Array(14);y[2]=d[s],y[3]=g[s],s>0&&(y[0]=l[s-1],y[4]=d[s-1],y[5]=g[s-1]),s>1&&(y[8]=l[s-2],y[10]=d[s-2],y[11]=g[s-2]),s<l.length-1&&(y[1]=l[s+1],y[6]=d[s+1],y[7]=g[s+1]),s<l.length-2&&(y[9]=l[s+2],y[12]=d[s+2],y[13]=g[s+2]);for(let w of y)if(kn.adjustRowNumber(u,w))return}static adjustRowNumber(n,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===n.getBucket()?(n.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,s){this.detectionResultColumns[n]=s}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Ea;for(let l=0;l<n.getCodewords().length;l++){s.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[l];if(d==null){s.format("    |   ");continue}s.format(" %3d|%3d",d.getRowNumber(),d.getValue())}s.format("%n")}return s.toString()}}class kr{constructor(n,s,l,u){this.rowNumber=kr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(s),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==kr.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}kr.BARCODE_ROW_UNKNOWN=-1;class zn{static initialize(){for(let n=0;n<Xe.SYMBOL_TABLE.length;n++){let s=Xe.SYMBOL_TABLE[n],l=s&1;for(let u=0;u<Xe.BARS_IN_MODULE;u++){let d=0;for(;(s&1)===l;)d+=1,s>>=1;l=s&1,zn.RATIOS_TABLE[n]||(zn.RATIOS_TABLE[n]=new Array(Xe.BARS_IN_MODULE)),zn.RATIOS_TABLE[n][Xe.BARS_IN_MODULE-u-1]=Math.fround(d/Xe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let s=zn.getDecodedCodewordValue(zn.sampleBitCounts(n));return s!==-1?s:zn.getClosestDecodedValue(n)}static sampleBitCounts(n){let s=mt.sum(n),l=new Int32Array(Xe.BARS_IN_MODULE),u=0,d=0;for(let g=0;g<Xe.MODULES_IN_CODEWORD;g++){let y=s/(2*Xe.MODULES_IN_CODEWORD)+g*s/Xe.MODULES_IN_CODEWORD;d+n[u]<=y&&(d+=n[u],u++),l[u]++}return l}static getDecodedCodewordValue(n){let s=zn.getBitValue(n);return Xe.getCodeword(s)===-1?-1:s}static getBitValue(n){let s=0;for(let l=0;l<n.length;l++)for(let u=0;u<n[l];u++)s=s<<1|(l%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(n){let s=mt.sum(n),l=new Array(Xe.BARS_IN_MODULE);if(s>1)for(let g=0;g<l.length;g++)l[g]=Math.fround(n[g]/s);let u=ga.MAX_VALUE,d=-1;this.bSymbolTableReady||zn.initialize();for(let g=0;g<zn.RATIOS_TABLE.length;g++){let y=0,w=zn.RATIOS_TABLE[g];for(let S=0;S<Xe.BARS_IN_MODULE;S++){let _=Math.fround(w[S]-l[S]);if(y+=Math.fround(_*_),y>=u)break}y<u&&(u=y,d=Xe.SYMBOL_TABLE[g])}return d}}zn.bSymbolTableReady=!1,zn.RATIOS_TABLE=new Array(Xe.SYMBOL_TABLE.length).map(N=>new Array(Xe.BARS_IN_MODULE));class Sa{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class Ic{static parseLong(n,s=void 0){return parseInt(n,s)}}class Ks extends v{}Ks.kind="NullPointerException";class hl{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,s,l){if(n==null)throw new Ks;if(s<0||s>n.length||l<0||s+l>n.length||s+l<0)throw new Z;if(l===0)return;for(let u=0;u<l;u++)this.write(n[s+u])}flush(){}close(){}}class us extends v{}class Qs extends hl{constructor(n=32){if(super(),this.count=0,n<0)throw new O("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let l=this.buf.length<<1;if(l-n<0&&(l=n),l<0){if(n<0)throw new us;l=q.MAX_VALUE}this.buf=Q.copyOfUint8Array(this.buf,l)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,s,l){if(s<0||s>n.length||l<0||s+l-n.length>0)throw new Z;this.ensureCapacity(this.count+l),H.arraycopy(n,s,this.buf,this.count,l),this.count+=l}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Q.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var Dt;(function(N){N[N.ALPHA=0]="ALPHA",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.PUNCT=3]="PUNCT",N[N.ALPHA_SHIFT=4]="ALPHA_SHIFT",N[N.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Dt||(Dt={}));function kc(){if(typeof window<"u")return window.BigInt||null;if(typeof Hu<"u")return Hu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Js;function Ii(N){if(typeof Js>"u"&&(Js=kc()),Js===null)throw new Error("BigInt is not supported!");return Js(N)}function gl(){let N=[];N[0]=Ii(1);let n=Ii(900);N[1]=n;for(let s=2;s<16;s++)N[s]=N[s-1]*n;return N}class oe{static decode(n,s){let l=new Ye(""),u=de.ISO8859_1;l.enableDecoding(u);let d=1,g=n[d++],y=new Sa;for(;d<n[0];){switch(g){case oe.TEXT_COMPACTION_MODE_LATCH:d=oe.textCompaction(n,d,l);break;case oe.BYTE_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:d=oe.byteCompaction(g,n,u,d,l);break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[d++]);break;case oe.NUMERIC_COMPACTION_MODE_LATCH:d=oe.numericCompaction(n,d,l);break;case oe.ECI_CHARSET:de.getCharacterSetECIByValue(n[d++]);break;case oe.ECI_GENERAL_PURPOSE:d+=2;break;case oe.ECI_USER_DEFINED:d++;break;case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=oe.decodeMacroBlock(n,d,y);break;case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:throw new $;default:d--,d=oe.textCompaction(n,d,l);break}if(d<n.length)g=n[d++];else throw $.getFormatInstance()}if(l.length()===0)throw $.getFormatInstance();let w=new Oe(null,l.toString(),null,s);return w.setOther(y),w}static decodeMacroBlock(n,s,l){if(s+oe.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw $.getFormatInstance();let u=new Int32Array(oe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<oe.NUMBER_OF_SEQUENCE_CODEWORDS;y++,s++)u[y]=n[s];l.setSegmentIndex(q.parseInt(oe.decodeBase900toBase10(u,oe.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new Ye;s=oe.textCompaction(n,s,d),l.setFileId(d.toString());let g=-1;for(n[s]===oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=s+1);s<n[0];)switch(n[s]){case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,n[s]){case oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new Ye;s=oe.textCompaction(n,s+1,y),l.setFileName(y.toString());break;case oe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new Ye;s=oe.textCompaction(n,s+1,w),l.setSender(w.toString());break;case oe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new Ye;s=oe.textCompaction(n,s+1,S),l.setAddressee(S.toString());break;case oe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let _=new Ye;s=oe.numericCompaction(n,s+1,_),l.setSegmentCount(q.parseInt(_.toString()));break;case oe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let R=new Ye;s=oe.numericCompaction(n,s+1,R),l.setTimestamp(Ic.parseLong(R.toString()));break;case oe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new Ye;s=oe.numericCompaction(n,s+1,k),l.setChecksum(q.parseInt(k.toString()));break;case oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let L=new Ye;s=oe.numericCompaction(n,s+1,L),l.setFileSize(Ic.parseLong(L.toString()));break;default:throw $.getFormatInstance()}break;case oe.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw $.getFormatInstance()}if(g!==-1){let y=s-g;l.isLastSegment()&&y--,l.setOptionalData(Q.copyOfRange(n,g,g+y))}return s}static textCompaction(n,s,l){let u=new Int32Array((n[0]-s)*2),d=new Int32Array((n[0]-s)*2),g=0,y=!1;for(;s<n[0]&&!y;){let w=n[s++];if(w<oe.TEXT_COMPACTION_MODE_LATCH)u[g]=w/30,u[g+1]=w%30,g+=2;else switch(w){case oe.TEXT_COMPACTION_MODE_LATCH:u[g++]=oe.TEXT_COMPACTION_MODE_LATCH;break;case oe.BYTE_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:case oe.NUMERIC_COMPACTION_MODE_LATCH:case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:s--,y=!0;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[g]=oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=n[s++],d[g]=w,g++;break}}return oe.decodeTextCompaction(u,d,g,l),s}static decodeTextCompaction(n,s,l,u){let d=Dt.ALPHA,g=Dt.ALPHA,y=0;for(;y<l;){let w=n[y],S="";switch(d){case Dt.ALPHA:if(w<26)S=String.fromCharCode(65+w);else switch(w){case 26:S=" ";break;case oe.LL:d=Dt.LOWER;break;case oe.ML:d=Dt.MIXED;break;case oe.PS:g=d,d=Dt.PUNCT_SHIFT;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case oe.TEXT_COMPACTION_MODE_LATCH:d=Dt.ALPHA;break}break;case Dt.LOWER:if(w<26)S=String.fromCharCode(97+w);else switch(w){case 26:S=" ";break;case oe.AS:g=d,d=Dt.ALPHA_SHIFT;break;case oe.ML:d=Dt.MIXED;break;case oe.PS:g=d,d=Dt.PUNCT_SHIFT;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case oe.TEXT_COMPACTION_MODE_LATCH:d=Dt.ALPHA;break}break;case Dt.MIXED:if(w<oe.PL)S=oe.MIXED_CHARS[w];else switch(w){case oe.PL:d=Dt.PUNCT;break;case 26:S=" ";break;case oe.LL:d=Dt.LOWER;break;case oe.AL:d=Dt.ALPHA;break;case oe.PS:g=d,d=Dt.PUNCT_SHIFT;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case oe.TEXT_COMPACTION_MODE_LATCH:d=Dt.ALPHA;break}break;case Dt.PUNCT:if(w<oe.PAL)S=oe.PUNCT_CHARS[w];else switch(w){case oe.PAL:d=Dt.ALPHA;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case oe.TEXT_COMPACTION_MODE_LATCH:d=Dt.ALPHA;break}break;case Dt.ALPHA_SHIFT:if(d=g,w<26)S=String.fromCharCode(65+w);else switch(w){case 26:S=" ";break;case oe.TEXT_COMPACTION_MODE_LATCH:d=Dt.ALPHA;break}break;case Dt.PUNCT_SHIFT:if(d=g,w<oe.PAL)S=oe.PUNCT_CHARS[w];else switch(w){case oe.PAL:d=Dt.ALPHA;break;case oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case oe.TEXT_COMPACTION_MODE_LATCH:d=Dt.ALPHA;break}break}S!==""&&u.append(S),y++}}static byteCompaction(n,s,l,u,d){let g=new Qs,y=0,w=0,S=!1;switch(n){case oe.BYTE_COMPACTION_MODE_LATCH:let _=new Int32Array(6),R=s[u++];for(;u<s[0]&&!S;)switch(_[y++]=R,w=900*w+R,R=s[u++],R){case oe.TEXT_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH:case oe.NUMERIC_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:u--,S=!0;break;default:if(y%5===0&&y>0){for(let k=0;k<6;++k)g.write(Number(Ii(w)>>Ii(8*(5-k))));w=0,y=0}break}u===s[0]&&R<oe.TEXT_COMPACTION_MODE_LATCH&&(_[y++]=R);for(let k=0;k<y;k++)g.write(_[k]);break;case oe.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!S;){let k=s[u++];if(k<oe.TEXT_COMPACTION_MODE_LATCH)y++,w=900*w+k;else switch(k){case oe.TEXT_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH:case oe.NUMERIC_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:u--,S=!0;break}if(y%5===0&&y>0){for(let L=0;L<6;++L)g.write(Number(Ii(w)>>Ii(8*(5-L))));w=0,y=0}}break}return d.append(ft.decode(g.toByteArray(),l)),u}static numericCompaction(n,s,l){let u=0,d=!1,g=new Int32Array(oe.MAX_NUMERIC_CODEWORDS);for(;s<n[0]&&!d;){let y=n[s++];if(s===n[0]&&(d=!0),y<oe.TEXT_COMPACTION_MODE_LATCH)g[u]=y,u++;else switch(y){case oe.TEXT_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH:case oe.BYTE_COMPACTION_MODE_LATCH_6:case oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case oe.MACRO_PDF417_TERMINATOR:s--,d=!0;break}(u%oe.MAX_NUMERIC_CODEWORDS===0||y===oe.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(l.append(oe.decodeBase900toBase10(g,u)),u=0)}return s}static decodeBase900toBase10(n,s){let l=Ii(0);for(let d=0;d<s;d++)l+=oe.EXP900[s-d-1]*Ii(n[d]);let u=l.toString();if(u.charAt(0)!=="1")throw new $;return u.substring(1)}}oe.TEXT_COMPACTION_MODE_LATCH=900,oe.BYTE_COMPACTION_MODE_LATCH=901,oe.NUMERIC_COMPACTION_MODE_LATCH=902,oe.BYTE_COMPACTION_MODE_LATCH_6=924,oe.ECI_USER_DEFINED=925,oe.ECI_GENERAL_PURPOSE=926,oe.ECI_CHARSET=927,oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,oe.MACRO_PDF417_TERMINATOR=922,oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,oe.MAX_NUMERIC_CODEWORDS=15,oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,oe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,oe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,oe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,oe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,oe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,oe.PL=25,oe.LL=27,oe.AS=27,oe.ML=28,oe.AL=28,oe.PS=29,oe.PAL=29,oe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,oe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",oe.EXP900=kc()?gl():[],oe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ct{constructor(){}static decode(n,s,l,u,d,g,y){let w=new gi(n,s,l,u,d),S=null,_=null,R;for(let z=!0;;z=!1){if(s!=null&&(S=ct.getRowIndicatorColumn(n,w,s,!0,g,y)),u!=null&&(_=ct.getRowIndicatorColumn(n,w,u,!1,g,y)),R=ct.merge(S,_),R==null)throw re.getNotFoundInstance();let F=R.getBoundingBox();if(z&&F!=null&&(F.getMinY()<w.getMinY()||F.getMaxY()>w.getMaxY()))w=F;else break}R.setBoundingBox(w);let k=R.getBarcodeColumnCount()+1;R.setDetectionResultColumn(0,S),R.setDetectionResultColumn(k,_);let L=S!=null;for(let z=1;z<=k;z++){let F=L?z:k-z;if(R.getDetectionResultColumn(F)!==void 0)continue;let X;F===0||F===k?X=new fl(w,F===0):X=new Ni(w),R.setDetectionResultColumn(F,X);let se=-1,_e=se;for(let Ae=w.getMinY();Ae<=w.getMaxY();Ae++){if(se=ct.getStartColumn(R,F,Ae,L),se<0||se>w.getMaxX()){if(_e===-1)continue;se=_e}let Ee=ct.detectCodeword(n,w.getMinX(),w.getMaxX(),L,se,Ae,g,y);Ee!=null&&(X.setCodeword(Ae,Ee),_e=se,g=Math.min(g,Ee.getWidth()),y=Math.max(y,Ee.getWidth()))}}return ct.createDecoderResult(R)}static merge(n,s){if(n==null&&s==null)return null;let l=ct.getBarcodeMetadata(n,s);if(l==null)return null;let u=gi.merge(ct.adjustBoundingBox(n),ct.adjustBoundingBox(s));return new kn(l,u)}static adjustBoundingBox(n){if(n==null)return null;let s=n.getRowHeights();if(s==null)return null;let l=ct.getMax(s),u=0;for(let y of s)if(u+=l-y,y>0)break;let d=n.getCodewords();for(let y=0;u>0&&d[y]==null;y++)u--;let g=0;for(let y=s.length-1;y>=0&&(g+=l-s[y],!(s[y]>0));y--);for(let y=d.length-1;g>0&&d[y]==null;y--)g--;return n.getBoundingBox().addMissingRows(u,g,n.isLeft())}static getMax(n){let s=-1;for(let l of n)s=Math.max(s,l);return s}static getBarcodeMetadata(n,s){let l;if(n==null||(l=n.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(n,s,l,u,d,g){let y=new fl(s,u);for(let w=0;w<2;w++){let S=w===0?1:-1,_=Math.trunc(Math.trunc(l.getX()));for(let R=Math.trunc(Math.trunc(l.getY()));R<=s.getMaxY()&&R>=s.getMinY();R+=S){let k=ct.detectCodeword(n,0,n.getWidth(),u,_,R,d,g);k!=null&&(y.setCodeword(R,k),u?_=k.getStartX():_=k.getEndX())}}return y}static adjustCodewordCount(n,s){let l=s[0][1],u=l.getValue(),d=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-ct.getNumberOfECCodeWords(n.getBarcodeECLevel());if(u.length===0){if(d<1||d>Xe.MAX_CODEWORDS_IN_BARCODE)throw re.getNotFoundInstance();l.setValue(d)}else u[0]!==d&&l.setValue(d)}static createDecoderResult(n){let s=ct.createBarcodeMatrix(n);ct.adjustCodewordCount(n,s);let l=new Array,u=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),d=[],g=new Array;for(let w=0;w<n.getBarcodeRowCount();w++)for(let S=0;S<n.getBarcodeColumnCount();S++){let _=s[w][S+1].getValue(),R=w*n.getBarcodeColumnCount()+S;_.length===0?l.push(R):_.length===1?u[R]=_[0]:(g.push(R),d.push(_))}let y=new Array(d.length);for(let w=0;w<y.length;w++)y[w]=d[w];return ct.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),u,Xe.toIntArray(l),Xe.toIntArray(g),y)}static createDecoderResultFromAmbiguousValues(n,s,l,u,d){let g=new Int32Array(u.length),y=100;for(;y-- >0;){for(let w=0;w<g.length;w++)s[u[w]]=d[w][g[w]];try{return ct.decodeCodewords(s,n,l)}catch(w){if(!(w instanceof U))throw w}if(g.length===0)throw U.getChecksumInstance();for(let w=0;w<g.length;w++)if(g[w]<d[w].length-1){g[w]++;break}else if(g[w]=0,w===g.length-1)throw U.getChecksumInstance()}throw U.getChecksumInstance()}static createBarcodeMatrix(n){let s=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let d=0;d<s[u].length;d++)s[u][d]=new Ri;let l=0;for(let u of n.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let g=d.getRowNumber();if(g>=0){if(g>=s.length)continue;s[g][l].setValue(d.getValue())}}}l++}return s}static isValidBarcodeColumn(n,s){return s>=0&&s<=n.getBarcodeColumnCount()+1}static getStartColumn(n,s,l,u){let d=u?1:-1,g=null;if(ct.isValidBarcodeColumn(n,s-d)&&(g=n.getDetectionResultColumn(s-d).getCodeword(l)),g!=null)return u?g.getEndX():g.getStartX();if(g=n.getDetectionResultColumn(s).getCodewordNearby(l),g!=null)return u?g.getStartX():g.getEndX();if(ct.isValidBarcodeColumn(n,s-d)&&(g=n.getDetectionResultColumn(s-d).getCodewordNearby(l)),g!=null)return u?g.getEndX():g.getStartX();let y=0;for(;ct.isValidBarcodeColumn(n,s-d);){s-=d;for(let w of n.getDetectionResultColumn(s).getCodewords())if(w!=null)return(u?w.getEndX():w.getStartX())+d*y*(w.getEndX()-w.getStartX());y++}return u?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,s,l,u,d,g,y,w){d=ct.adjustCodewordStartColumn(n,s,l,u,d,g);let S=ct.getModuleBitCount(n,s,l,u,d,g);if(S==null)return null;let _,R=mt.sum(S);if(u)_=d+R;else{for(let z=0;z<S.length/2;z++){let F=S[z];S[z]=S[S.length-1-z],S[S.length-1-z]=F}_=d,d=_-R}if(!ct.checkCodewordSkew(R,y,w))return null;let k=zn.getDecodedValue(S),L=Xe.getCodeword(k);return L===-1?null:new kr(d,_,ct.getCodewordBucketNumber(k),L)}static getModuleBitCount(n,s,l,u,d,g){let y=d,w=new Int32Array(8),S=0,_=u?1:-1,R=u;for(;(u?y<l:y>=s)&&S<w.length;)n.get(y,g)===R?(w[S]++,y+=_):(S++,R=!R);return S===w.length||y===(u?l:s)&&S===w.length-1?w:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,s,l,u,d,g){let y=d,w=u?-1:1;for(let S=0;S<2;S++){for(;(u?y>=s:y<l)&&u===n.get(y,g);){if(Math.abs(d-y)>ct.CODEWORD_SKEW_SIZE)return d;y+=w}w=-w,u=!u}return y}static checkCodewordSkew(n,s,l){return s-ct.CODEWORD_SKEW_SIZE<=n&&n<=l+ct.CODEWORD_SKEW_SIZE}static decodeCodewords(n,s,l){if(n.length===0)throw $.getFormatInstance();let u=1<<s+1,d=ct.correctErrors(n,l,u);ct.verifyCodewordCount(n,u);let g=oe.decode(n,""+s);return g.setErrorsCorrected(d),g.setErasures(l.length),g}static correctErrors(n,s,l){if(s!=null&&s.length>l/2+ct.MAX_ERRORS||l<0||l>ct.MAX_EC_CODEWORDS)throw U.getChecksumInstance();return ct.errorCorrection.decode(n,l,s)}static verifyCodewordCount(n,s){if(n.length<4)throw $.getFormatInstance();let l=n[0];if(l>n.length)throw $.getFormatInstance();if(l===0)if(s<n.length)n[0]=n.length-s;else throw $.getFormatInstance()}static getBitCountForCodeword(n){let s=new Int32Array(8),l=0,u=s.length-1;for(;!((n&1)!==l&&(l=n&1,u--,u<0));)s[u]++,n>>=1;return s}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return ct.getCodewordBucketNumber(ct.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let s=new Ea;for(let l=0;l<n.length;l++){s.format("Row %2d: ",l);for(let u=0;u<n[l].length;u++){let d=n[l][u];d.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}s.format("%n")}return s.toString()}}ct.CODEWORD_SKEW_SIZE=2,ct.MAX_ERRORS=3,ct.MAX_EC_CODEWORDS=512,ct.errorCorrection=new hi;class Fn{decode(n,s=null){let l=Fn.decode(n,s,!1);if(l==null||l.length===0||l[0]==null)throw re.getNotFoundInstance();return l[0]}decodeMultiple(n,s=null){try{return Fn.decode(n,s,!0)}catch(l){throw l instanceof $||l instanceof U?re.getNotFoundInstance():l}}static decode(n,s,l){const u=new Array,d=it.detectMultiple(n,s,l);for(const g of d.getPoints()){const y=ct.decode(d.getBits(),g[4],g[5],g[6],g[7],Fn.getMinCodewordWidth(g),Fn.getMaxCodewordWidth(g)),w=new J(y.getText(),y.getRawBytes(),void 0,g,me.PDF_417);w.putMetadata(He.ERROR_CORRECTION_LEVEL,y.getECLevel());const S=y.getOther();S!=null&&w.putMetadata(He.PDF417_EXTRA_METADATA,S),u.push(w)}return u.map(g=>g)}static getMaxWidth(n,s){return n==null||s==null?0:Math.trunc(Math.abs(n.getX()-s.getX()))}static getMinWidth(n,s){return n==null||s==null?q.MAX_VALUE:Math.trunc(Math.abs(n.getX()-s.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(Fn.getMaxWidth(n[0],n[4]),Fn.getMaxWidth(n[6],n[2])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN),Math.max(Fn.getMaxWidth(n[1],n[5]),Fn.getMaxWidth(n[7],n[3])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(Fn.getMinWidth(n[0],n[4]),Fn.getMinWidth(n[6],n[2])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN),Math.min(Fn.getMinWidth(n[1],n[5]),Fn.getMinWidth(n[7],n[3])*Xe.MODULES_IN_CODEWORD/Xe.MODULES_IN_STOP_PATTERN)))}reset(){}}class $s extends v{}$s.kind="ReaderException";class Dc{constructor(n,s){this.verbose=n===!0,s&&this.setHints(s)}decode(n,s){return s&&this.setHints(s),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const s=!o(n)&&n.get(Se.TRY_HARDER)===!0,l=o(n)?null:n.get(Se.POSSIBLE_FORMATS),u=new Array;if(!o(l)){const d=l.some(g=>g===me.UPC_A||g===me.UPC_E||g===me.EAN_13||g===me.EAN_8||g===me.CODABAR||g===me.CODE_39||g===me.CODE_93||g===me.CODE_128||g===me.ITF||g===me.RSS_14||g===me.RSS_EXPANDED);d&&!s&&u.push(new Rr(n,this.verbose)),l.includes(me.QR_CODE)&&u.push(new fi),l.includes(me.DATA_MATRIX)&&u.push(new di),l.includes(me.AZTEC)&&u.push(new qs),l.includes(me.PDF_417)&&u.push(new Fn),d&&s&&u.push(new Rr(n,this.verbose))}u.length===0&&(s||u.push(new Rr(n,this.verbose)),u.push(new fi),u.push(new di),u.push(new qs),u.push(new Fn),s&&u.push(new Rr(n,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new $s("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(n,this.hints)}catch(l){if(l instanceof $s)continue}throw new re("No MultiFormat Readers were able to detect the code.")}}class Mc extends ie{constructor(n=null,s=500){const l=new Dc;l.setHints(n),super(l,s)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class Md extends ie{constructor(n=500){super(new Fn,n)}}class Bd extends ie{constructor(n=500){super(new fi,n)}}var ml;(function(N){N[N.ERROR_CORRECTION=0]="ERROR_CORRECTION",N[N.CHARACTER_SET=1]="CHARACTER_SET",N[N.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",N[N.MIN_SIZE=3]="MIN_SIZE",N[N.MAX_SIZE=4]="MAX_SIZE",N[N.MARGIN=5]="MARGIN",N[N.PDF417_COMPACT=6]="PDF417_COMPACT",N[N.PDF417_COMPACTION=7]="PDF417_COMPACTION",N[N.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",N[N.AZTEC_LAYERS=9]="AZTEC_LAYERS",N[N.QR_VERSION=10]="QR_VERSION"})(ml||(ml={}));var Tn=ml;class ds{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new tt(n,Int32Array.from([1])))}buildGenerator(n){const s=this.cachedGenerators;if(n>=s.length){let l=s[s.length-1];const u=this.field;for(let d=s.length;d<=n;d++){const g=l.multiply(new tt(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));s.push(g),l=g}}return s[n]}encode(n,s){if(s===0)throw new O("No error correction bytes");const l=n.length-s;if(l<=0)throw new O("No data bytes provided");const u=this.buildGenerator(s),d=new Int32Array(l);H.arraycopy(n,0,d,0,l);let g=new tt(this.field,d);g=g.multiplyByMonomial(s,1);const w=g.divide(u)[1].getCoefficients(),S=s-w.length;for(let _=0;_<S;_++)n[l+_]=0;H.arraycopy(w,0,n,l+S,w.length)}}class dn{constructor(){}static applyMaskPenaltyRule1(n){return dn.applyMaskPenaltyRule1Internal(n,!0)+dn.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let s=0;const l=n.getArray(),u=n.getWidth(),d=n.getHeight();for(let g=0;g<d-1;g++){const y=l[g];for(let w=0;w<u-1;w++){const S=y[w];S===y[w+1]&&S===l[g+1][w]&&S===l[g+1][w+1]&&s++}}return dn.N2*s}static applyMaskPenaltyRule3(n){let s=0;const l=n.getArray(),u=n.getWidth(),d=n.getHeight();for(let g=0;g<d;g++)for(let y=0;y<u;y++){const w=l[g];y+6<u&&w[y]===1&&w[y+1]===0&&w[y+2]===1&&w[y+3]===1&&w[y+4]===1&&w[y+5]===0&&w[y+6]===1&&(dn.isWhiteHorizontal(w,y-4,y)||dn.isWhiteHorizontal(w,y+7,y+11))&&s++,g+6<d&&l[g][y]===1&&l[g+1][y]===0&&l[g+2][y]===1&&l[g+3][y]===1&&l[g+4][y]===1&&l[g+5][y]===0&&l[g+6][y]===1&&(dn.isWhiteVertical(l,y,g-4,g)||dn.isWhiteVertical(l,y,g+7,g+11))&&s++}return s*dn.N3}static isWhiteHorizontal(n,s,l){s=Math.max(s,0),l=Math.min(l,n.length);for(let u=s;u<l;u++)if(n[u]===1)return!1;return!0}static isWhiteVertical(n,s,l,u){l=Math.max(l,0),u=Math.min(u,n.length);for(let d=l;d<u;d++)if(n[d][s]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let s=0;const l=n.getArray(),u=n.getWidth(),d=n.getHeight();for(let w=0;w<d;w++){const S=l[w];for(let _=0;_<u;_++)S[_]===1&&s++}const g=n.getHeight()*n.getWidth();return Math.floor(Math.abs(s*2-g)*10/g)*dn.N4}static getDataMaskBit(n,s,l){let u,d;switch(n){case 0:u=l+s&1;break;case 1:u=l&1;break;case 2:u=s%3;break;case 3:u=(l+s)%3;break;case 4:u=Math.floor(l/2)+Math.floor(s/3)&1;break;case 5:d=l*s,u=(d&1)+d%3;break;case 6:d=l*s,u=(d&1)+d%3&1;break;case 7:d=l*s,u=d%3+(l+s&1)&1;break;default:throw new O("Invalid mask pattern: "+n)}return u===0}static applyMaskPenaltyRule1Internal(n,s){let l=0;const u=s?n.getHeight():n.getWidth(),d=s?n.getWidth():n.getHeight(),g=n.getArray();for(let y=0;y<u;y++){let w=0,S=-1;for(let _=0;_<d;_++){const R=s?g[y][_]:g[_][y];R===S?w++:(w>=5&&(l+=dn.N1+(w-5)),w=1,S=R)}w>=5&&(l+=dn.N1+(w-5))}return l}}dn.N1=3,dn.N2=3,dn.N3=40,dn.N4=10;class eo{constructor(n,s){this.width=n,this.height=s;const l=new Array(s);for(let u=0;u!==s;u++)l[u]=new Uint8Array(n);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(n,s){return this.bytes[s][n]}getArray(){return this.bytes}setNumber(n,s,l){this.bytes[s][n]=l}setBoolean(n,s,l){this.bytes[s][n]=l?1:0}clear(n){for(const s of this.bytes)Q.fill(s,n)}equals(n){if(!(n instanceof eo))return!1;const s=n;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,u=this.height;l<u;++l){const d=this.bytes[l],g=s.bytes[l];for(let y=0,w=this.width;y<w;++y)if(d[y]!==g[y])return!1}return!0}toString(){const n=new Ye;for(let s=0,l=this.height;s<l;++s){const u=this.bytes[s];for(let d=0,g=this.width;d<g;++d)switch(u[d]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class zi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new Ye;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<zi.NUM_MASK_PATTERNS}}zi.NUM_MASK_PATTERNS=8;class jt extends v{}jt.kind="WriterException";class Ze{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,s,l,u,d){Ze.clearMatrix(d),Ze.embedBasicPatterns(l,d),Ze.embedTypeInfo(s,u,d),Ze.maybeEmbedVersionInfo(l,d),Ze.embedDataBits(n,u,d)}static embedBasicPatterns(n,s){Ze.embedPositionDetectionPatternsAndSeparators(s),Ze.embedDarkDotAtLeftBottomCorner(s),Ze.maybeEmbedPositionAdjustmentPatterns(n,s),Ze.embedTimingPatterns(s)}static embedTypeInfo(n,s,l){const u=new xe;Ze.makeTypeInfoBits(n,s,u);for(let d=0,g=u.getSize();d<g;++d){const y=u.get(u.getSize()-1-d),w=Ze.TYPE_INFO_COORDINATES[d],S=w[0],_=w[1];if(l.setBoolean(S,_,y),d<8){const R=l.getWidth()-d-1;l.setBoolean(R,8,y)}else{const k=l.getHeight()-7+(d-8);l.setBoolean(8,k,y)}}}static maybeEmbedVersionInfo(n,s){if(n.getVersionNumber()<7)return;const l=new xe;Ze.makeVersionInfoBits(n,l);let u=17;for(let d=0;d<6;++d)for(let g=0;g<3;++g){const y=l.get(u);u--,s.setBoolean(d,s.getHeight()-11+g,y),s.setBoolean(s.getHeight()-11+g,d,y)}}static embedDataBits(n,s,l){let u=0,d=-1,g=l.getWidth()-1,y=l.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);y>=0&&y<l.getHeight();){for(let w=0;w<2;++w){const S=g-w;if(!Ze.isEmpty(l.get(S,y)))continue;let _;u<n.getSize()?(_=n.get(u),++u):_=!1,s!==255&&dn.getDataMaskBit(s,S,y)&&(_=!_),l.setBoolean(S,y,_)}y+=d}d=-d,y+=d,g-=2}if(u!==n.getSize())throw new jt("Not all bits consumed: "+u+"/"+n.getSize())}static findMSBSet(n){return 32-q.numberOfLeadingZeros(n)}static calculateBCHCode(n,s){if(s===0)throw new O("0 polynomial");const l=Ze.findMSBSet(s);for(n<<=l-1;Ze.findMSBSet(n)>=l;)n^=s<<Ze.findMSBSet(n)-l;return n}static makeTypeInfoBits(n,s,l){if(!zi.isValidMaskPattern(s))throw new jt("Invalid mask pattern");const u=n.getBits()<<3|s;l.appendBits(u,5);const d=Ze.calculateBCHCode(u,Ze.TYPE_INFO_POLY);l.appendBits(d,10);const g=new xe;if(g.appendBits(Ze.TYPE_INFO_MASK_PATTERN,15),l.xor(g),l.getSize()!==15)throw new jt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(n,s){s.appendBits(n.getVersionNumber(),6);const l=Ze.calculateBCHCode(n.getVersionNumber(),Ze.VERSION_INFO_POLY);if(s.appendBits(l,12),s.getSize()!==18)throw new jt("should not happen but we got: "+s.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let s=8;s<n.getWidth()-8;++s){const l=(s+1)%2;Ze.isEmpty(n.get(s,6))&&n.setNumber(s,6,l),Ze.isEmpty(n.get(6,s))&&n.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new jt;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,s,l){for(let u=0;u<8;++u){if(!Ze.isEmpty(l.get(n+u,s)))throw new jt;l.setNumber(n+u,s,0)}}static embedVerticalSeparationPattern(n,s,l){for(let u=0;u<7;++u){if(!Ze.isEmpty(l.get(n,s+u)))throw new jt;l.setNumber(n,s+u,0)}}static embedPositionAdjustmentPattern(n,s,l){for(let u=0;u<5;++u){const d=Ze.POSITION_ADJUSTMENT_PATTERN[u];for(let g=0;g<5;++g)l.setNumber(n+g,s+u,d[g])}}static embedPositionDetectionPattern(n,s,l){for(let u=0;u<7;++u){const d=Ze.POSITION_DETECTION_PATTERN[u];for(let g=0;g<7;++g)l.setNumber(n+g,s+u,d[g])}}static embedPositionDetectionPatternsAndSeparators(n){const s=Ze.POSITION_DETECTION_PATTERN[0].length;Ze.embedPositionDetectionPattern(0,0,n),Ze.embedPositionDetectionPattern(n.getWidth()-s,0,n),Ze.embedPositionDetectionPattern(0,n.getWidth()-s,n);const l=8;Ze.embedHorizontalSeparationPattern(0,l-1,n),Ze.embedHorizontalSeparationPattern(n.getWidth()-l,l-1,n),Ze.embedHorizontalSeparationPattern(0,n.getWidth()-l,n);const u=7;Ze.embedVerticalSeparationPattern(u,0,n),Ze.embedVerticalSeparationPattern(n.getHeight()-u-1,0,n),Ze.embedVerticalSeparationPattern(u,n.getHeight()-u,n)}static maybeEmbedPositionAdjustmentPatterns(n,s){if(n.getVersionNumber()<2)return;const l=n.getVersionNumber()-1,u=Ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,g=u.length;d!==g;d++){const y=u[d];if(y>=0)for(let w=0;w!==g;w++){const S=u[w];S>=0&&Ze.isEmpty(s.get(S,y))&&Ze.embedPositionAdjustmentPattern(S-2,y-2,s)}}}}Ze.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ze.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ze.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ze.VERSION_INFO_POLY=7973,Ze.TYPE_INFO_POLY=1335,Ze.TYPE_INFO_MASK_PATTERN=21522;class Ld{constructor(n,s){this.dataBytes=n,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Jt{constructor(){}static calculateMaskPenalty(n){return dn.applyMaskPenaltyRule1(n)+dn.applyMaskPenaltyRule2(n)+dn.applyMaskPenaltyRule3(n)+dn.applyMaskPenaltyRule4(n)}static encode(n,s,l=null){let u=Jt.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(Tn.CHARACTER_SET)!==void 0;d&&(u=l.get(Tn.CHARACTER_SET).toString());const g=this.chooseMode(n,u),y=new xe;if(g===Ge.BYTE&&(d||Jt.DEFAULT_BYTE_MODE_ENCODING!==u)){const Ae=de.getCharacterSetECIByName(u);Ae!==void 0&&this.appendECI(Ae,y)}this.appendModeInfo(g,y);const w=new xe;this.appendBytes(n,g,w,u);let S;if(l!==null&&l.get(Tn.QR_VERSION)!==void 0){const Ae=Number.parseInt(l.get(Tn.QR_VERSION).toString(),10);S=Pe.getVersionForNumber(Ae);const Ee=this.calculateBitsNeeded(g,y,w,S);if(!this.willFit(Ee,S,s))throw new jt("Data too big for requested version")}else S=this.recommendVersion(s,g,y,w);const _=new xe;_.appendBitArray(y);const R=g===Ge.BYTE?w.getSizeInBytes():n.length;this.appendLengthInfo(R,S,g,_),_.appendBitArray(w);const k=S.getECBlocksForLevel(s),L=S.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(L,_);const z=this.interleaveWithECBytes(_,S.getTotalCodewords(),L,k.getNumBlocks()),F=new zi;F.setECLevel(s),F.setMode(g),F.setVersion(S);const X=S.getDimensionForVersion(),se=new eo(X,X),_e=this.chooseMaskPattern(z,s,S,se);return F.setMaskPattern(_e),Ze.buildMatrix(z,s,S,_e,se),F.setMatrix(se),F}static recommendVersion(n,s,l,u){const d=this.calculateBitsNeeded(s,l,u,Pe.getVersionForNumber(1)),g=this.chooseVersion(d,n),y=this.calculateBitsNeeded(s,l,u,g);return this.chooseVersion(y,n)}static calculateBitsNeeded(n,s,l,u){return s.getSize()+n.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(n){return n<Jt.ALPHANUMERIC_TABLE.length?Jt.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,s=null){if(de.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(n))return Ge.KANJI;let l=!1,u=!1;for(let d=0,g=n.length;d<g;++d){const y=n.charAt(d);if(Jt.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)u=!0;else return Ge.BYTE}return u?Ge.ALPHANUMERIC:l?Ge.NUMERIC:Ge.BYTE}static isOnlyDoubleByteKanji(n){let s;try{s=ft.encode(n,de.SJIS)}catch{return!1}const l=s.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const d=s[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(n,s,l,u){let d=Number.MAX_SAFE_INTEGER,g=-1;for(let y=0;y<zi.NUM_MASK_PATTERNS;y++){Ze.buildMatrix(n,s,l,y,u);let w=this.calculateMaskPenalty(u);w<d&&(d=w,g=y)}return g}static chooseVersion(n,s){for(let l=1;l<=40;l++){const u=Pe.getVersionForNumber(l);if(Jt.willFit(n,u,s))return u}throw new jt("Data too big")}static willFit(n,s,l){const u=s.getTotalCodewords(),g=s.getECBlocksForLevel(l).getTotalECCodewords(),y=u-g,w=(n+7)/8;return y>=w}static terminateBits(n,s){const l=n*8;if(s.getSize()>l)throw new jt("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let g=0;g<4&&s.getSize()<l;++g)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let g=u;g<8;g++)s.appendBit(!1);const d=n-s.getSizeInBytes();for(let g=0;g<d;++g)s.appendBits((g&1)===0?236:17,8);if(s.getSize()!==l)throw new jt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,s,l,u,d,g){if(u>=l)throw new jt("Block ID too large");const y=n%l,w=l-y,S=Math.floor(n/l),_=S+1,R=Math.floor(s/l),k=R+1,L=S-R,z=_-k;if(L!==z)throw new jt("EC bytes mismatch");if(l!==w+y)throw new jt("RS blocks mismatch");if(n!==(R+L)*w+(k+z)*y)throw new jt("Total bytes mismatch");u<w?(d[0]=R,g[0]=L):(d[0]=k,g[0]=z)}static interleaveWithECBytes(n,s,l,u){if(n.getSizeInBytes()!==l)throw new jt("Number of bits and data bytes does not match");let d=0,g=0,y=0;const w=new Array;for(let _=0;_<u;++_){const R=new Int32Array(1),k=new Int32Array(1);Jt.getNumDataBytesAndNumECBytesForBlockID(s,l,u,_,R,k);const L=R[0],z=new Uint8Array(L);n.toBytes(8*d,z,0,L);const F=Jt.generateECBytes(z,k[0]);w.push(new Ld(z,F)),g=Math.max(g,L),y=Math.max(y,F.length),d+=R[0]}if(l!==d)throw new jt("Data bytes does not match offset");const S=new xe;for(let _=0;_<g;++_)for(const R of w){const k=R.getDataBytes();_<k.length&&S.appendBits(k[_],8)}for(let _=0;_<y;++_)for(const R of w){const k=R.getErrorCorrectionBytes();_<k.length&&S.appendBits(k[_],8)}if(s!==S.getSizeInBytes())throw new jt("Interleaving error: "+s+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(n,s){const l=n.length,u=new Int32Array(l+s);for(let g=0;g<l;g++)u[g]=n[g]&255;new ds(nt.QR_CODE_FIELD_256).encode(u,s);const d=new Uint8Array(s);for(let g=0;g<s;g++)d[g]=u[l+g];return d}static appendModeInfo(n,s){s.appendBits(n.getBits(),4)}static appendLengthInfo(n,s,l,u){const d=l.getCharacterCountBits(s);if(n>=1<<d)throw new jt(n+" is bigger than "+((1<<d)-1));u.appendBits(n,d)}static appendBytes(n,s,l,u){switch(s){case Ge.NUMERIC:Jt.appendNumericBytes(n,l);break;case Ge.ALPHANUMERIC:Jt.appendAlphanumericBytes(n,l);break;case Ge.BYTE:Jt.append8BitBytes(n,l,u);break;case Ge.KANJI:Jt.appendKanjiBytes(n,l);break;default:throw new jt("Invalid mode: "+s)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const s=Jt.getDigit(n);return s>=0&&s<=9}static appendNumericBytes(n,s){const l=n.length;let u=0;for(;u<l;){const d=Jt.getDigit(n.charAt(u));if(u+2<l){const g=Jt.getDigit(n.charAt(u+1)),y=Jt.getDigit(n.charAt(u+2));s.appendBits(d*100+g*10+y,10),u+=3}else if(u+1<l){const g=Jt.getDigit(n.charAt(u+1));s.appendBits(d*10+g,7),u+=2}else s.appendBits(d,4),u++}}static appendAlphanumericBytes(n,s){const l=n.length;let u=0;for(;u<l;){const d=Jt.getAlphanumericCode(n.charCodeAt(u));if(d===-1)throw new jt;if(u+1<l){const g=Jt.getAlphanumericCode(n.charCodeAt(u+1));if(g===-1)throw new jt;s.appendBits(d*45+g,11),u+=2}else s.appendBits(d,6),u++}}static append8BitBytes(n,s,l){let u;try{u=ft.encode(n,l)}catch(d){throw new jt(d)}for(let d=0,g=u.length;d!==g;d++){const y=u[d];s.appendBits(y,8)}}static appendKanjiBytes(n,s){let l;try{l=ft.encode(n,de.SJIS)}catch(d){throw new jt(d)}const u=l.length;for(let d=0;d<u;d+=2){const g=l[d]&255,y=l[d+1]&255,w=g<<8&4294967295|y;let S=-1;if(w>=33088&&w<=40956?S=w-33088:w>=57408&&w<=60351&&(S=w-49472),S===-1)throw new jt("Invalid byte sequence");const _=(S>>8)*192+(S&255);s.appendBits(_,13)}}static appendECI(n,s){s.appendBits(Ge.ECI.getBits(),4),s.appendBits(n.getValue(),8)}}Jt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Jt.DEFAULT_BYTE_MODE_ENCODING=de.UTF8.getName();class Fi{write(n,s,l,u=null){if(n.length===0)throw new O("Found empty contents");if(s<0||l<0)throw new O("Requested dimensions are too small: "+s+"x"+l);let d=ht.L,g=Fi.QUIET_ZONE_SIZE;u!==null&&(u.get(Tn.ERROR_CORRECTION)!==void 0&&(d=ht.fromString(u.get(Tn.ERROR_CORRECTION).toString())),u.get(Tn.MARGIN)!==void 0&&(g=Number.parseInt(u.get(Tn.MARGIN).toString(),10)));const y=Jt.encode(n,d,u);return this.renderResult(y,s,l,g)}writeToDom(n,s,l,u,d=null){typeof n=="string"&&(n=document.querySelector(n));const g=this.write(s,l,u,d);n&&n.appendChild(g)}renderResult(n,s,l,u){const d=n.getMatrix();if(d===null)throw new sr;const g=d.getWidth(),y=d.getHeight(),w=g+u*2,S=y+u*2,_=Math.max(s,w),R=Math.max(l,S),k=Math.min(Math.floor(_/w),Math.floor(R/S)),L=Math.floor((_-g*k)/2),z=Math.floor((R-y*k)/2),F=this.createSVGElement(_,R);for(let X=0,se=z;X<y;X++,se+=k)for(let _e=0,Ae=L;_e<g;_e++,Ae+=k)if(d.get(_e,X)===1){const Ee=this.createSvgRectElement(Ae,se,k,k);F.appendChild(Ee)}return F}createSVGElement(n,s){const l=document.createElementNS(Fi.SVG_NS,"svg");return l.setAttributeNS(null,"height",n.toString()),l.setAttributeNS(null,"width",s.toString()),l}createSvgRectElement(n,s,l,u){const d=document.createElementNS(Fi.SVG_NS,"rect");return d.setAttributeNS(null,"x",n.toString()),d.setAttributeNS(null,"y",s.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",u.toString()),d.setAttributeNS(null,"fill","#000000"),d}}Fi.QUIET_ZONE_SIZE=4,Fi.SVG_NS="http://www.w3.org/2000/svg";class Aa{encode(n,s,l,u,d){if(n.length===0)throw new O("Found empty contents");if(s!==me.QR_CODE)throw new O("Can only encode QR_CODE, but got "+s);if(l<0||u<0)throw new O(`Requested dimensions are too small: ${l}x${u}`);let g=ht.L,y=Aa.QUIET_ZONE_SIZE;d!==null&&(d.get(Tn.ERROR_CORRECTION)!==void 0&&(g=ht.fromString(d.get(Tn.ERROR_CORRECTION).toString())),d.get(Tn.MARGIN)!==void 0&&(y=Number.parseInt(d.get(Tn.MARGIN).toString(),10)));const w=Jt.encode(n,g,d);return Aa.renderResult(w,l,u,y)}static renderResult(n,s,l,u){const d=n.getMatrix();if(d===null)throw new sr;const g=d.getWidth(),y=d.getHeight(),w=g+u*2,S=y+u*2,_=Math.max(s,w),R=Math.max(l,S),k=Math.min(Math.floor(_/w),Math.floor(R/S)),L=Math.floor((_-g*k)/2),z=Math.floor((R-y*k)/2),F=new $e(_,R);for(let X=0,se=z;X<y;X++,se+=k)for(let _e=0,Ae=L;_e<g;_e++,Ae+=k)d.get(_e,X)===1&&F.setRegion(Ae,se,k,k);return F}}Aa.QUIET_ZONE_SIZE=4;class jd{encode(n,s,l,u,d){let g;if(s===me.QR_CODE)g=new Aa;else throw new O("No encoder available for format "+s);return g.encode(n,s,l,u,d)}}class Qr extends be{constructor(n,s,l,u,d,g,y,w){if(super(g,y),this.yuvData=n,this.dataWidth=s,this.dataHeight=l,this.left=u,this.top=d,u+g>s||d+y>l)throw new O("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(g,y)}getRow(n,s){if(n<0||n>=this.getHeight())throw new O("Requested row is outside the image: "+n);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(n+this.top)*this.dataWidth+this.left;return H.arraycopy(this.yuvData,u,s,0,l),s}getMatrix(){const n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.yuvData;const l=n*s,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return H.arraycopy(this.yuvData,d,u,0,l),u;for(let g=0;g<s;g++){const y=g*n;H.arraycopy(this.yuvData,d,u,y,n),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(n,s,l,u){return new Qr(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+s,l,u,!1)}renderThumbnail(){const n=this.getWidth()/Qr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Qr.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(n*s),u=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let g=0;g<s;g++){const y=g*n;for(let w=0;w<n;w++){const S=u[d+w*Qr.THUMBNAIL_SCALE_FACTOR]&255;l[y+w]=4278190080|S*65793}d+=this.dataWidth*Qr.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Qr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Qr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,s){const l=this.yuvData;for(let u=0,d=this.top*this.dataWidth+this.left;u<s;u++,d+=this.dataWidth){const g=d+n/2;for(let y=d,w=d+n-1;y<g;y++,w--){const S=l[y];l[y]=l[w],l[w]=S}}}invert(){return new he(this)}}Qr.THUMBNAIL_SCALE_FACTOR=2;class yl extends be{constructor(n,s,l,u,d,g,y){if(super(s,l),this.dataWidth=u,this.dataHeight=d,this.left=g,this.top=y,n.BYTES_PER_ELEMENT===4){const w=s*l,S=new Uint8ClampedArray(w);for(let _=0;_<w;_++){const R=n[_],k=R>>16&255,L=R>>7&510,z=R&255;S[_]=(k+L+z)/4&255}this.luminances=S}else this.luminances=n;if(u===void 0&&(this.dataWidth=s),d===void 0&&(this.dataHeight=l),g===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new O("Crop rectangle does not fit within image data.")}getRow(n,s){if(n<0||n>=this.getHeight())throw new O("Requested row is outside the image: "+n);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(n+this.top)*this.dataWidth+this.left;return H.arraycopy(this.luminances,u,s,0,l),s}getMatrix(){const n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=n*s,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return H.arraycopy(this.luminances,d,u,0,l),u;for(let g=0;g<s;g++){const y=g*n;H.arraycopy(this.luminances,d,u,y,n),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(n,s,l,u){return new yl(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+n,this.top+s)}invert(){return new he(this)}}class Bc extends de{static forName(n){return this.getCharacterSetECIByName(n)}}class fs{}fs.ISO_8859_1=de.ISO8859_1;class _a{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class Lc{static singletonList(n){return[n]}static min(n,s){return n.sort(s)[0]}}class jc{constructor(n){this.previous=n}getPrevious(){return this.previous}}class Vi extends jc{constructor(n,s,l){super(n),this.value=s,this.bitCount=l}appendTo(n,s){n.appendBits(this.value,this.bitCount)}add(n,s){return new Vi(this,n,s)}addBinaryShift(n,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Vi(this,n,s)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+q.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class to extends Vi{constructor(n,s,l){super(n,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(n,s){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):l===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(n,s){return new to(this,n,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Uc(N,n,s){return new to(N,n,s)}function Ca(N,n,s){return new Vi(N,n,s)}const Ta=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ki=0,no=1,br=2,pl=3,Dr=4,hs=new Vi(null,0,0),Hi=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ud(N){for(let n of N)Q.fill(n,-1);return N[ki][Dr]=0,N[no][Dr]=0,N[no][ki]=28,N[pl][Dr]=0,N[br][Dr]=0,N[br][ki]=15,N}const gs=Ud(Q.createInt32Array(6,6));class Mr{constructor(n,s,l,u){this.token=n,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,s){let l=this.bitCount,u=this.token;if(n!==this.mode){let g=Hi[this.mode][n];u=Ca(u,g&65535,g>>16),l+=g>>16}let d=n===br?4:5;return u=Ca(u,s,d),new Mr(u,n,0,l+d)}shiftAndAppend(n,s){let l=this.token,u=this.mode===br?4:5;return l=Ca(l,gs[this.mode][n],u),l=Ca(l,s,5),new Mr(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(n){let s=this.token,l=this.mode,u=this.bitCount;if(this.mode===Dr||this.mode===br){let y=Hi[l][ki];s=Ca(s,y&65535,y>>16),u+=y>>16,l=ki}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new Mr(s,l,this.binaryShiftByteCount+1,u+d);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(n+1)),g}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Uc(s,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new Mr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let s=this.bitCount+(Hi[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?s+=Mr.calculateBinaryShiftCost(n)-Mr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(s+=10),s<=n.bitCount}toBitArray(n){let s=[];for(let u=this.endBinaryShift(n.length).token;u!==null;u=u.getPrevious())s.unshift(u);let l=new xe;for(const u of s)u.appendTo(l,n);return l}toString(){return Ie.format("%s bits=%d bytes=%d",Ta[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}Mr.INITIAL_STATE=new Mr(hs,ki,0,0);function Pc(N){const n=Ie.getCharCode(" "),s=Ie.getCharCode("."),l=Ie.getCharCode(",");N[ki][n]=1;const u=Ie.getCharCode("Z"),d=Ie.getCharCode("A");for(let k=d;k<=u;k++)N[ki][k]=k-d+2;N[no][n]=1;const g=Ie.getCharCode("z"),y=Ie.getCharCode("a");for(let k=y;k<=g;k++)N[no][k]=k-y+2;N[br][n]=1;const w=Ie.getCharCode("9"),S=Ie.getCharCode("0");for(let k=S;k<=w;k++)N[br][k]=k-S+2;N[br][l]=12,N[br][s]=13;const _=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<_.length;k++)N[pl][Ie.getCharCode(_[k])]=k;const R=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<R.length;k++)Ie.getCharCode(R[k])>0&&(N[Dr][Ie.getCharCode(R[k])]=k);return N}const ms=Pc(Q.createInt32Array(5,256));class Gi{constructor(n){this.text=n}encode(){const n=Ie.getCharCode(" "),s=Ie.getCharCode(`
`);let l=Lc.singletonList(Mr.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let g,y=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case Ie.getCharCode("\r"):g=y===s?2:0;break;case Ie.getCharCode("."):g=y===n?3:0;break;case Ie.getCharCode(","):g=y===n?4:0;break;case Ie.getCharCode(":"):g=y===n?5:0;break;default:g=0}g>0?(l=Gi.updateStateListForPair(l,d,g),d++):l=this.updateStateListForChar(l,d)}return Lc.min(l,(d,g)=>d.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,s){const l=[];for(let u of n)this.updateStateForChar(u,s,l);return Gi.simplifyStates(l)}updateStateForChar(n,s,l){let u=this.text[s]&255,d=ms[n.getMode()][u]>0,g=null;for(let y=0;y<=Dr;y++){let w=ms[y][u];if(w>0){if(g==null&&(g=n.endBinaryShift(s)),!d||y===n.getMode()||y===br){const S=g.latchAndAppend(y,w);l.push(S)}if(!d&&gs[n.getMode()][y]>=0){const S=g.shiftAndAppend(y,w);l.push(S)}}}if(n.getBinaryShiftByteCount()>0||ms[n.getMode()][u]===0){let y=n.addBinaryShiftChar(s);l.push(y)}}static updateStateListForPair(n,s,l){const u=[];for(let d of n)this.updateStateForPair(d,s,l,u);return this.simplifyStates(u)}static updateStateForPair(n,s,l,u){let d=n.endBinaryShift(s);if(u.push(d.latchAndAppend(Dr,l)),n.getMode()!==Dr&&u.push(d.shiftAndAppend(Dr,l)),l===3||l===4){let g=d.latchAndAppend(br,16-l).latchAndAppend(br,1);u.push(g)}if(n.getBinaryShiftByteCount()>0){let g=n.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(g)}}static simplifyStates(n){let s=[];for(const l of n){let u=!0;for(const d of s){if(d.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(d)&&(s=s.filter(g=>g!==d))}u&&s.push(l)}return s}}class bt{constructor(){}static encodeBytes(n){return bt.encode(n,bt.DEFAULT_EC_PERCENT,bt.DEFAULT_AZTEC_LAYERS)}static encode(n,s,l){let u=new Gi(n).encode(),d=q.truncDivision(u.getSize()*s,100)+11,g=u.getSize()+d,y,w,S,_,R;if(l!==bt.DEFAULT_AZTEC_LAYERS){if(y=l<0,w=Math.abs(l),w>(y?bt.MAX_NB_BITS_COMPACT:bt.MAX_NB_BITS))throw new O(Ie.format("Illegal value %s for layers",l));S=bt.totalBitsInLayer(w,y),_=bt.WORD_SIZE[w];let Ee=S-S%_;if(R=bt.stuffBits(u,_),R.getSize()+d>Ee)throw new O("Data to large for user specified layer");if(y&&R.getSize()>_*64)throw new O("Data to large for user specified layer")}else{_=0,R=null;for(let Ee=0;;Ee++){if(Ee>bt.MAX_NB_BITS)throw new O("Data too large for an Aztec code");if(y=Ee<=3,w=y?Ee+1:Ee,S=bt.totalBitsInLayer(w,y),g>S)continue;(R==null||_!==bt.WORD_SIZE[w])&&(_=bt.WORD_SIZE[w],R=bt.stuffBits(u,_));let dt=S-S%_;if(!(y&&R.getSize()>_*64)&&R.getSize()+d<=dt)break}}let k=bt.generateCheckWords(R,S,_),L=R.getSize()/_,z=bt.generateModeMessage(y,w,L),F=(y?11:14)+w*4,X=new Int32Array(F),se;if(y){se=F;for(let Ee=0;Ee<X.length;Ee++)X[Ee]=Ee}else{se=F+1+2*q.truncDivision(q.truncDivision(F,2)-1,15);let Ee=q.truncDivision(F,2),dt=q.truncDivision(se,2);for(let at=0;at<Ee;at++){let xn=at+q.truncDivision(at,15);X[Ee-at-1]=dt-xn-1,X[Ee+at]=dt+xn+1}}let _e=new $e(se);for(let Ee=0,dt=0;Ee<w;Ee++){let at=(w-Ee)*4+(y?9:12);for(let xn=0;xn<at;xn++){let vr=xn*2;for(let Kn=0;Kn<2;Kn++)k.get(dt+vr+Kn)&&_e.set(X[Ee*2+Kn],X[Ee*2+xn]),k.get(dt+at*2+vr+Kn)&&_e.set(X[Ee*2+xn],X[F-1-Ee*2-Kn]),k.get(dt+at*4+vr+Kn)&&_e.set(X[F-1-Ee*2-Kn],X[F-1-Ee*2-xn]),k.get(dt+at*6+vr+Kn)&&_e.set(X[F-1-Ee*2-xn],X[Ee*2+Kn])}dt+=at*8}if(bt.drawModeMessage(_e,y,se,z),y)bt.drawBullsEye(_e,q.truncDivision(se,2),5);else{bt.drawBullsEye(_e,q.truncDivision(se,2),7);for(let Ee=0,dt=0;Ee<q.truncDivision(F,2)-1;Ee+=15,dt+=16)for(let at=q.truncDivision(se,2)&1;at<se;at+=2)_e.set(q.truncDivision(se,2)-dt,at),_e.set(q.truncDivision(se,2)+dt,at),_e.set(at,q.truncDivision(se,2)-dt),_e.set(at,q.truncDivision(se,2)+dt)}let Ae=new _a;return Ae.setCompact(y),Ae.setSize(se),Ae.setLayers(w),Ae.setCodeWords(L),Ae.setMatrix(_e),Ae}static drawBullsEye(n,s,l){for(let u=0;u<l;u+=2)for(let d=s-u;d<=s+u;d++)n.set(d,s-u),n.set(d,s+u),n.set(s-u,d),n.set(s+u,d);n.set(s-l,s-l),n.set(s-l+1,s-l),n.set(s-l,s-l+1),n.set(s+l,s-l),n.set(s+l,s-l+1),n.set(s+l,s+l-1)}static generateModeMessage(n,s,l){let u=new xe;return n?(u.appendBits(s-1,2),u.appendBits(l-1,6),u=bt.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(l-1,11),u=bt.generateCheckWords(u,40,4)),u}static drawModeMessage(n,s,l,u){let d=q.truncDivision(l,2);if(s)for(let g=0;g<7;g++){let y=d-3+g;u.get(g)&&n.set(y,d-5),u.get(g+7)&&n.set(d+5,y),u.get(20-g)&&n.set(y,d+5),u.get(27-g)&&n.set(d-5,y)}else for(let g=0;g<10;g++){let y=d-5+g+q.truncDivision(g,5);u.get(g)&&n.set(y,d-7),u.get(g+10)&&n.set(d+7,y),u.get(29-g)&&n.set(y,d+7),u.get(39-g)&&n.set(d-7,y)}}static generateCheckWords(n,s,l){let u=n.getSize()/l,d=new ds(bt.getGF(l)),g=q.truncDivision(s,l),y=bt.bitsToWords(n,l,g);d.encode(y,g-u);let w=s%l,S=new xe;S.appendBits(0,w);for(const _ of Array.from(y))S.appendBits(_,l);return S}static bitsToWords(n,s,l){let u=new Int32Array(l),d,g;for(d=0,g=n.getSize()/s;d<g;d++){let y=0;for(let w=0;w<s;w++)y|=n.get(d*s+w)?1<<s-w-1:0;u[d]=y}return u}static getGF(n){switch(n){case 4:return nt.AZTEC_PARAM;case 6:return nt.AZTEC_DATA_6;case 8:return nt.AZTEC_DATA_8;case 10:return nt.AZTEC_DATA_10;case 12:return nt.AZTEC_DATA_12;default:throw new O("Unsupported word size "+n)}}static stuffBits(n,s){let l=new xe,u=n.getSize(),d=(1<<s)-2;for(let g=0;g<u;g+=s){let y=0;for(let w=0;w<s;w++)(g+w>=u||n.get(g+w))&&(y|=1<<s-1-w);(y&d)===d?(l.appendBits(y&d,s),g--):(y&d)===0?(l.appendBits(y|1,s),g--):l.appendBits(y,s)}return l}static totalBitsInLayer(n,s){return((s?88:112)+16*n)*n}}bt.DEFAULT_EC_PERCENT=33,bt.DEFAULT_AZTEC_LAYERS=0,bt.MAX_NB_BITS=32,bt.MAX_NB_BITS_COMPACT=4,bt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ys{encode(n,s,l,u){return this.encodeWithHints(n,s,l,u,null)}encodeWithHints(n,s,l,u,d){let g=fs.ISO_8859_1,y=bt.DEFAULT_EC_PERCENT,w=bt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Tn.CHARACTER_SET)&&(g=Bc.forName(d.get(Tn.CHARACTER_SET).toString())),d.has(Tn.ERROR_CORRECTION)&&(y=q.parseInt(d.get(Tn.ERROR_CORRECTION).toString())),d.has(Tn.AZTEC_LAYERS)&&(w=q.parseInt(d.get(Tn.AZTEC_LAYERS).toString()))),ys.encodeLayers(n,s,l,u,g,y,w)}static encodeLayers(n,s,l,u,d,g,y){if(s!==me.AZTEC)throw new O("Can only encode AZTEC, but got "+s);let w=bt.encode(Ie.getBytes(n,d),g,y);return ys.renderResult(w,l,u)}static renderResult(n,s,l){let u=n.getMatrix();if(u==null)throw new sr;let d=u.getWidth(),g=u.getHeight(),y=Math.max(s,d),w=Math.max(l,g),S=Math.min(y/d,w/g),_=(y-d*S)/2,R=(w-g*S)/2,k=new $e(y,w);for(let L=0,z=R;L<g;L++,z+=S)for(let F=0,X=_;F<d;F++,X+=S)u.get(F,L)&&k.setRegion(X,z,S,S);return k}}i.AbstractExpandedDecoder=_n,i.ArgumentException=T,i.ArithmeticException=en,i.AztecCode=_a,i.AztecCodeReader=qs,i.AztecCodeWriter=ys,i.AztecDecoder=Ft,i.AztecDetector=sl,i.AztecDetectorResult=_c,i.AztecEncoder=bt,i.AztecHighLevelEncoder=Gi,i.AztecPoint=Xn,i.BarcodeFormat=me,i.Binarizer=G,i.BinaryBitmap=j,i.BitArray=xe,i.BitMatrix=$e,i.BitSource=Ir,i.BrowserAztecCodeReader=Rd,i.BrowserBarcodeReader=Id,i.BrowserCodeReader=ie,i.BrowserDatamatrixCodeReader=Xs,i.BrowserMultiFormatReader=Mc,i.BrowserPDF417Reader=Md,i.BrowserQRCodeReader=Bd,i.BrowserQRCodeSvgWriter=Fi,i.CharacterSetECI=de,i.ChecksumException=U,i.Code128Reader=Ce,i.Code39Reader=Wt,i.DataMatrixDecodedBitStreamParser=ui,i.DataMatrixReader=di,i.DecodeHintType=Se,i.DecoderResult=Oe,i.DefaultGridSampler=al,i.DetectorResult=Gs,i.EAN13Reader=Yr,i.EncodeHintType=Tn,i.Exception=v,i.FormatException=$,i.GenericGF=nt,i.GenericGFPoly=tt,i.GlobalHistogramBinarizer=ee,i.GridSampler=il,i.GridSamplerInstance=Or,i.HTMLCanvasElementLuminanceSource=ue,i.HybridBinarizer=fe,i.ITFReader=lt,i.IllegalArgumentException=O,i.IllegalStateException=sr,i.InvertedLuminanceSource=he,i.LuminanceSource=be,i.MathUtils=mt,i.MultiFormatOneDReader=Rr,i.MultiFormatReader=Dc,i.MultiFormatWriter=jd,i.NotFoundException=re,i.OneDReader=tn,i.PDF417DecodedBitStreamParser=oe,i.PDF417DecoderErrorCorrection=hi,i.PDF417Reader=Fn,i.PDF417ResultMetadata=Sa,i.PerspectiveTransform=pr,i.PlanarYUVLuminanceSource=Qr,i.QRCodeByteMatrix=eo,i.QRCodeDataMask=ur,i.QRCodeDecodedBitStreamParser=Kt,i.QRCodeDecoderErrorCorrectionLevel=ht,i.QRCodeDecoderFormatInformation=In,i.QRCodeEncoder=Jt,i.QRCodeEncoderQRCode=zi,i.QRCodeMaskUtil=dn,i.QRCodeMatrixUtil=Ze,i.QRCodeMode=Ge,i.QRCodeReader=fi,i.QRCodeVersion=Pe,i.QRCodeWriter=Aa,i.RGBLuminanceSource=yl,i.RSS14Reader=Lt,i.RSSExpandedReader=ve,i.ReaderException=$s,i.ReedSolomonDecoder=Tr,i.ReedSolomonEncoder=ds,i.ReedSolomonException=rn,i.Result=J,i.ResultMetadataType=He,i.ResultPoint=Me,i.StringUtils=Ie,i.UnsupportedOperationException=At,i.VideoInputDevice=B,i.WhiteRectangleDetector=hn,i.WriterException=jt,i.ZXingArrays=Q,i.ZXingCharset=Bc,i.ZXingInteger=q,i.ZXingStandardCharsets=fs,i.ZXingStringBuilder=Ye,i.ZXingStringEncoding=ft,i.ZXingSystem=H,i.createAbstractExpandedDecoder=ya,Object.defineProperty(i,"__esModule",{value:!0})}))})(oc,oc.exports)),oc.exports}var cn=r8();const i8=Ip(cn),a8=ev({__proto__:null,default:i8},[cn]);var rp=(function(){function a(e,i,o){if(this.formatMap=new Map([[De.QR_CODE,cn.BarcodeFormat.QR_CODE],[De.AZTEC,cn.BarcodeFormat.AZTEC],[De.CODABAR,cn.BarcodeFormat.CODABAR],[De.CODE_39,cn.BarcodeFormat.CODE_39],[De.CODE_93,cn.BarcodeFormat.CODE_93],[De.CODE_128,cn.BarcodeFormat.CODE_128],[De.DATA_MATRIX,cn.BarcodeFormat.DATA_MATRIX],[De.MAXICODE,cn.BarcodeFormat.MAXICODE],[De.ITF,cn.BarcodeFormat.ITF],[De.EAN_13,cn.BarcodeFormat.EAN_13],[De.EAN_8,cn.BarcodeFormat.EAN_8],[De.PDF_417,cn.BarcodeFormat.PDF_417],[De.RSS_14,cn.BarcodeFormat.RSS_14],[De.RSS_EXPANDED,cn.BarcodeFormat.RSS_EXPANDED],[De.UPC_A,cn.BarcodeFormat.UPC_A],[De.UPC_E,cn.BarcodeFormat.UPC_E],[De.UPC_EAN_EXTENSION,cn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!a8)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=i,this.logger=o;var h=this.createZXingFormats(e),m=new Map;m.set(cn.DecodeHintType.POSSIBLE_FORMATS,h),m.set(cn.DecodeHintType.TRY_HARDER,!1),this.hints=m}return a.prototype.decodeAsync=function(e){var i=this;return new Promise(function(o,h){try{o(i.decode(e))}catch(m){h(m)}})},a.prototype.decode=function(e){var i=new cn.MultiFormatReader(this.verbose,this.hints),o=new cn.HTMLCanvasElementLuminanceSource(e),h=new cn.BinaryBitmap(new cn.HybridBinarizer(o)),m=i.decode(h);return{text:m.text,format:Iw.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(i,o,h){e.set(i,o)}),e},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createZXingFormats=function(e){for(var i=[],o=0,h=e;o<h.length;o++){var m=h[o];this.formatMap.has(m)?i.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return i},a.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},a})(),s8=function(a,e,i,o){function h(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function A(T){try{v(o.next(T))}catch(O){x(O)}}function E(T){try{v(o.throw(T))}catch(O){x(O)}}function v(T){T.done?m(T.value):h(T.value).then(A,E)}v((o=o.apply(a,e||[])).next())})},o8=function(a,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,x;return x={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function A(v){return function(T){return E([v,T])}}function E(v){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,v[0]&&(i=0)),i;)try{if(o=1,h&&(m=v[0]&2?h.return:v[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,v[1])).done)return m;switch(h=0,m&&(v=[v[0]&2,m.value]),v[0]){case 0:case 1:m=v;break;case 4:return i.label++,{value:v[1],done:!1};case 5:i.label++,h=v[1],v=[0];continue;case 7:v=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(v[0]===6||v[0]===2)){i=0;continue}if(v[0]===3&&(!m||v[1]>m[0]&&v[1]<m[3])){i.label=v[1];break}if(v[0]===6&&i.label<m[1]){i.label=m[1],m=v;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(v);break}m[2]&&i.ops.pop(),i.trys.pop();continue}v=e.call(a,i)}catch(T){v=[6,T],h=0}finally{o=m=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},ip=(function(){function a(e,i,o){if(this.formatMap=new Map([[De.QR_CODE,"qr_code"],[De.AZTEC,"aztec"],[De.CODABAR,"codabar"],[De.CODE_39,"code_39"],[De.CODE_93,"code_93"],[De.CODE_128,"code_128"],[De.DATA_MATRIX,"data_matrix"],[De.ITF,"itf"],[De.EAN_13,"ean_13"],[De.EAN_8,"ean_8"],[De.PDF_417,"pdf417"],[De.UPC_A,"upc_a"],[De.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!a.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=i,this.logger=o;var h=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return a.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},a.prototype.decodeAsync=function(e){return s8(this,void 0,void 0,function(){var i,o;return o8(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(e)];case 1:if(i=h.sent(),!i||i.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(i),[2,{text:o.rawValue,format:Iw.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},a.prototype.selectLargestBarcode=function(e){for(var i=null,o=0,h=0,m=e;h<m.length;h++){var x=m[h],A=x.boundingBox.width*x.boundingBox.height;A>o&&(o=A,i=x)}if(!i)throw"No largest barcode found";return i},a.prototype.createBarcodeDetectorFormats=function(e){for(var i=[],o=0,h=e;o<h.length;o++){var m=h[o];this.formatMap.has(m)?i.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:i}},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(i,o,h){e.set(i,o)}),e},a.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},a})(),ap=function(a,e,i,o){function h(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function A(T){try{v(o.next(T))}catch(O){x(O)}}function E(T){try{v(o.throw(T))}catch(O){x(O)}}function v(T){T.done?m(T.value):h(T.value).then(A,E)}v((o=o.apply(a,e||[])).next())})},sp=function(a,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,x;return x={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function A(v){return function(T){return E([v,T])}}function E(v){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,v[0]&&(i=0)),i;)try{if(o=1,h&&(m=v[0]&2?h.return:v[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,v[1])).done)return m;switch(h=0,m&&(v=[v[0]&2,m.value]),v[0]){case 0:case 1:m=v;break;case 4:return i.label++,{value:v[1],done:!1};case 5:i.label++,h=v[1],v=[0];continue;case 7:v=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(v[0]===6||v[0]===2)){i=0;continue}if(v[0]===3&&(!m||v[1]>m[0]&&v[1]<m[3])){i.label=v[1];break}if(v[0]===6&&i.label<m[1]){i.label=m[1],m=v;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(v);break}m[2]&&i.ops.pop(),i.trys.pop();continue}v=e.call(a,i)}catch(T){v=[6,T],h=0}finally{o=m=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},l8=(function(){function a(e,i,o,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,i&&ip.isSupported()?(this.primaryDecoder=new ip(e,o,h),this.secondaryDecoder=new rp(e,o,h)):this.primaryDecoder=new rp(e,o,h)}return a.prototype.decodeAsync=function(e){return ap(this,void 0,void 0,function(){var i;return sp(this,function(o){switch(o.label){case 0:i=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(i),[7];case 4:return[2]}})})},a.prototype.decodeRobustlyAsync=function(e){return ap(this,void 0,void 0,function(){var i,o;return sp(this,function(h){switch(h.label){case 0:i=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,h.sent()];case 3:if(o=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(i),[7];case 5:return[2]}})})},a.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},a.prototype.possiblyLogPerformance=function(e){if(this.verbose){var i=performance.now()-e;this.executionResults.push(i),this.executions++,this.possiblyFlushPerformanceReport()}},a.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,i=0,o=this.executionResults;i<o.length;i++){var h=o[i];e+=h}var m=e/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},a})(),b1=(function(){var a=function(e,i){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(o[m]=h[m])},a(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");a(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}})(),pd=function(a,e,i,o){function h(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function A(T){try{v(o.next(T))}catch(O){x(O)}}function E(T){try{v(o.throw(T))}catch(O){x(O)}}function v(T){T.done?m(T.value):h(T.value).then(A,E)}v((o=o.apply(a,e||[])).next())})},xd=function(a,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,x;return x={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function A(v){return function(T){return E([v,T])}}function E(v){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,v[0]&&(i=0)),i;)try{if(o=1,h&&(m=v[0]&2?h.return:v[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,v[1])).done)return m;switch(h=0,m&&(v=[v[0]&2,m.value]),v[0]){case 0:case 1:m=v;break;case 4:return i.label++,{value:v[1],done:!1};case 5:i.label++,h=v[1],v=[0];continue;case 7:v=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(v[0]===6||v[0]===2)){i=0;continue}if(v[0]===3&&(!m||v[1]>m[0]&&v[1]<m[3])){i.label=v[1];break}if(v[0]===6&&i.label<m[1]){i.label=m[1],m=v;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(v);break}m[2]&&i.ops.pop(),i.trys.pop();continue}v=e.call(a,i)}catch(T){v=[6,T],h=0}finally{o=m=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},Dw=(function(){function a(e,i){this.name=e,this.track=i}return a.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},a.prototype.apply=function(e){var i={};i[this.name]=e;var o={advanced:[i]};return this.track.applyConstraints(o)},a.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var i=e[this.name];return i}return null},a})(),c8=(function(a){b1(e,a);function e(i,o){return a.call(this,i,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(i){var o={};o[this.name]=i;var h={advanced:[o]};return this.track.applyConstraints(h)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var i=this.track.getCapabilities(),o=i[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(Dw),u8=(function(a){b1(e,a);function e(i){return a.call(this,"zoom",i)||this}return e})(c8),d8=(function(a){b1(e,a);function e(i){return a.call(this,"torch",i)||this}return e})(Dw),f8=(function(){function a(e){this.track=e}return a.prototype.zoomFeature=function(){return new u8(this.track)},a.prototype.torchFeature=function(){return new d8(this.track)},a})(),h8=(function(){function a(e,i,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=i,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return a.prototype.createVideoElement=function(e){var i=document.createElement("video");return i.style.width="".concat(e,"px"),i.style.display="block",i.muted=!0,i.setAttribute("muted","true"),i.playsInline=!0,i},a.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var i=function(){var o=e.surface.clientWidth,h=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,h),e.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.srcObject=this.mediaStream,this.surface.play()},a.create=function(e,i,o,h){return pd(this,void 0,void 0,function(){var m,x;return xd(this,function(A){switch(A.label){case 0:return m=new a(e,i,h),o.aspectRatio?(x={aspectRatio:o.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:A.sent(),A.label=2;case 2:return m.setupSurface(),[2,m]}})})},a.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},a.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},a.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},a.prototype.resume=function(e){this.failIfClosed();var i=this,o=function(){setTimeout(e,200),i.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},a.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},a.prototype.getSurface=function(){return this.failIfClosed(),this.surface},a.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},a.prototype.applyVideoConstraints=function(e){return pd(this,void 0,void 0,function(){return xd(this,function(i){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},a.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(i,o){var h=e.mediaStream.getVideoTracks(),m=h.length,x=0;e.mediaStream.getVideoTracks().forEach(function(A){e.mediaStream.removeTrack(A),A.stop(),++x,x>=m&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),i())})})},a.prototype.getCapabilities=function(){return new f8(this.getFirstTrackOrFail())},a})(),g8=(function(){function a(e){this.mediaStream=e}return a.prototype.render=function(e,i,o){return pd(this,void 0,void 0,function(){return xd(this,function(h){return[2,h8.create(e,this.mediaStream,i,o)]})})},a.create=function(e){return pd(this,void 0,void 0,function(){var i,o;return xd(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return i={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(i)];case 1:return o=h.sent(),[2,new a(o)]}})})},a})(),op=function(a,e,i,o){function h(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function A(T){try{v(o.next(T))}catch(O){x(O)}}function E(T){try{v(o.throw(T))}catch(O){x(O)}}function v(T){T.done?m(T.value):h(T.value).then(A,E)}v((o=o.apply(a,e||[])).next())})},lp=function(a,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,x;return x={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function A(v){return function(T){return E([v,T])}}function E(v){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,v[0]&&(i=0)),i;)try{if(o=1,h&&(m=v[0]&2?h.return:v[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,v[1])).done)return m;switch(h=0,m&&(v=[v[0]&2,m.value]),v[0]){case 0:case 1:m=v;break;case 4:return i.label++,{value:v[1],done:!1};case 5:i.label++,h=v[1],v=[0];continue;case 7:v=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(v[0]===6||v[0]===2)){i=0;continue}if(v[0]===3&&(!m||v[1]>m[0]&&v[1]<m[3])){i.label=v[1];break}if(v[0]===6&&i.label<m[1]){i.label=m[1],m=v;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(v);break}m[2]&&i.ops.pop(),i.trys.pop();continue}v=e.call(a,i)}catch(T){v=[6,T],h=0}finally{o=m=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},m8=(function(){function a(){}return a.failIfNotSupported=function(){return op(this,void 0,void 0,function(){return lp(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new a]})})},a.prototype.create=function(e){return op(this,void 0,void 0,function(){return lp(this,function(i){return[2,g8.create(e)]})})},a})(),y8=function(a,e,i,o){function h(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function A(T){try{v(o.next(T))}catch(O){x(O)}}function E(T){try{v(o.throw(T))}catch(O){x(O)}}function v(T){T.done?m(T.value):h(T.value).then(A,E)}v((o=o.apply(a,e||[])).next())})},p8=function(a,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,x;return x={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function A(v){return function(T){return E([v,T])}}function E(v){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,v[0]&&(i=0)),i;)try{if(o=1,h&&(m=v[0]&2?h.return:v[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,v[1])).done)return m;switch(h=0,m&&(v=[v[0]&2,m.value]),v[0]){case 0:case 1:m=v;break;case 4:return i.label++,{value:v[1],done:!1};case 5:i.label++,h=v[1],v=[0];continue;case 7:v=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(v[0]===6||v[0]===2)){i=0;continue}if(v[0]===3&&(!m||v[1]>m[0]&&v[1]<m[3])){i.label=v[1];break}if(v[0]===6&&i.label<m[1]){i.label=m[1],m=v;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(v);break}m[2]&&i.ops.pop(),i.trys.pop();continue}v=e.call(a,i)}catch(T){v=[6,T],h=0}finally{o=m=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},x8=(function(){function a(){}return a.retrieve=function(){if(navigator.mediaDevices)return a.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?a.getCamerasFromMediaStreamTrack():a.rejectWithError()},a.rejectWithError=function(){var e=Wo.unableToQuerySupportedDevices();return a.isHttpsOrLocalhost()||(e=Wo.insecureContextCameraQueryError()),Promise.reject(e)},a.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},a.getCamerasFromMediaDevices=function(){return y8(this,void 0,void 0,function(){var e,i,o,h,m,x,A;return p8(this,function(E){switch(E.label){case 0:return e=function(v){for(var T=v.getVideoTracks(),O=0,j=T;O<j.length;O++){var U=j[O];U.enabled=!1,U.stop(),v.removeTrack(U)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return i=E.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=E.sent(),h=[],m=0,x=o;m<x.length;m++)A=x[m],A.kind==="videoinput"&&h.push({id:A.deviceId,label:A.label});return e(i),[2,h]}})})},a.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,i){var o=function(m){for(var x=[],A=0,E=m;A<E.length;A++){var v=E[A];v.kind==="video"&&x.push({id:v.id,label:v.label})}e(x)},h=MediaStreamTrack;h.getSources(o)})},a})(),mn;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.NOT_STARTED=1]="NOT_STARTED",a[a.SCANNING=2]="SCANNING",a[a.PAUSED=3]="PAUSED"})(mn||(mn={}));var w8=(function(){function a(){this.state=mn.NOT_STARTED,this.onGoingTransactionNewState=mn.UNKNOWN}return a.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},a.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},a.prototype.execute=function(){if(this.onGoingTransactionNewState===mn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=mn.UNKNOWN,this.directTransition(e)},a.prototype.cancel=function(){if(this.onGoingTransactionNewState===mn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=mn.UNKNOWN},a.prototype.getState=function(){return this.state},a.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==mn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},a.prototype.validateTransition=function(e){switch(this.state){case mn.UNKNOWN:throw"Transition from unknown is not allowed";case mn.NOT_STARTED:this.failIfNewStateIs(e,[mn.PAUSED]);break;case mn.SCANNING:break;case mn.PAUSED:break}},a.prototype.failIfNewStateIs=function(e,i){for(var o=0,h=i;o<h.length;o++){var m=h[o];if(e===m)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},a})(),b8=(function(){function a(e){this.stateManager=e}return a.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},a.prototype.directTransition=function(e){this.stateManager.directTransition(e)},a.prototype.getState=function(){return this.stateManager.getState()},a.prototype.canScanFile=function(){return this.stateManager.getState()===mn.NOT_STARTED},a.prototype.isScanning=function(){return this.stateManager.getState()!==mn.NOT_STARTED},a.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===mn.SCANNING},a.prototype.isPaused=function(){return this.stateManager.getState()===mn.PAUSED},a})(),v8=(function(){function a(){}return a.create=function(){return new b8(new w8)},a})(),E8=(function(){var a=function(e,i){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(o[m]=h[m])},a(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");a(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}})(),Vr=(function(a){E8(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})($T),S8=(function(){function a(e,i){this.logger=i,this.fps=Vr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Vr.DEFAULT_DISABLE_FLIP}return a.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?kw.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},a.prototype.isShadedBoxEnabled=function(){return!ca(this.qrbox)},a.create=function(e,i){return new a(e,i)},a})(),A8=(function(){function a(e,i){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof i=="boolean"?this.verbose=i===!0:i&&(o=i,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new t8(this.verbose),this.qrcode=new l8(this.getSupportedFormats(i),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=v8.create()}return a.prototype.start=function(e,i,o,h){var m=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;h?x=h:x=this.verbose?this.logger.log:function(){};var A=S8.create(i,this.logger);this.clearElement();var E=!1;A.videoConstraints&&(A.isMediaStreamConstraintsValid()?E=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var v=E,T=document.getElementById(this.elementId);T.clientWidth?T.clientWidth:Vr.DEFAULT_WIDTH,T.style.position="relative",this.shouldScan=!0,this.element=T;var O=this,j=this.stateManagerProxy.startTransition(mn.SCANNING);return new Promise(function(U,G){var H=v?A.videoConstraints:O.createVideoConstraints(e);if(!H){j.cancel(),G("videoConstraints should be defined");return}var Z={};(!v||A.aspectRatio)&&(Z.aspectRatio=A.aspectRatio);var le={onRenderSurfaceReady:function(Q,q){O.setupUi(Q,q,A),O.isScanning=!0,O.foreverScan(A,o,x)}};m8.failIfNotSupported().then(function(Q){Q.create(H).then(function(q){return q.render(m.element,Z,le).then(function(xe){O.renderedCamera=xe,j.execute(),U(null)}).catch(function(xe){j.cancel(),G(xe)})}).catch(function(q){j.cancel(),G(Wo.errorGettingUserMedia(q))})}).catch(function(Q){j.cancel(),G(Wo.cameraStreamingNotSupported())})})},a.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(mn.PAUSED),this.showPausedState(),(ca(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},a.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,i=function(){e.stateManagerProxy.directTransition(mn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){i();return}this.renderedCamera.resume(function(){i()})},a.prototype.getState=function(){return this.stateManagerProxy.getState()},a.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var i=this.stateManagerProxy.startTransition(mn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var m=document.getElementById(Vr.SHADED_REGION_ELEMENT_ID);m&&e.element.removeChild(m)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),o(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),i.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},a.prototype.scanFile=function(e,i){return this.scanFileV2(e,i).then(function(o){return o.decodedText})},a.prototype.scanFileV2=function(e,i){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ca(i)&&(i=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,m){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var x=new Image;x.onload=function(){var A=x.width,E=x.height,v=document.getElementById(o.elementId),T=v.clientWidth?v.clientWidth:Vr.DEFAULT_WIDTH,O=Math.max(v.clientHeight?v.clientHeight:E,Vr.FILE_SCAN_MIN_HEIGHT),j=o.computeCanvasDrawConfig(A,E,T,O);if(i){var U=o.createCanvasElement(T,O,"qr-canvas-visible");U.style.display="inline-block",v.appendChild(U);var G=U.getContext("2d");if(!G)throw"Unable to get 2d context from canvas";G.canvas.width=T,G.canvas.height=O,G.drawImage(x,0,0,A,E,j.x,j.y,j.width,j.height)}var H=Vr.FILE_SCAN_HIDDEN_CANVAS_PADDING,Z=Math.max(x.width,j.width),le=Math.max(x.height,j.height),Q=Z+2*H,q=le+2*H,xe=o.createCanvasElement(Q,q);v.appendChild(xe);var Le=xe.getContext("2d");if(!Le)throw"Unable to get 2d context from canvas";Le.canvas.width=Q,Le.canvas.height=q,Le.drawImage(x,0,0,A,E,H,H,Z,le);try{o.qrcode.decodeRobustlyAsync(xe).then(function(Se){h(tp.createFromQrcodeResult(Se))}).catch(m)}catch(Se){m("QR code parse error, error = ".concat(Se))}},x.onerror=m,x.onabort=m,x.onstalled=m,x.onsuspend=m,x.src=URL.createObjectURL(e)})},a.prototype.clear=function(){this.clearElement()},a.getCameras=function(){return x8.retrieve()},a.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},a.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},a.prototype.applyVideoConstraints=function(e){if(e){if(!kw.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},a.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},a.prototype.getSupportedFormats=function(e){var i=[De.QR_CODE,De.AZTEC,De.CODABAR,De.CODE_39,De.CODE_93,De.CODE_128,De.DATA_MATRIX,De.MAXICODE,De.ITF,De.EAN_13,De.EAN_8,De.PDF_417,De.RSS_14,De.RSS_EXPANDED,De.UPC_A,De.UPC_E,De.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return i;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],h=0,m=e.formatsToSupport;h<m.length;h++){var x=m[h];JT(x)?o.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},a.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ca(e))return!0;if(!ca(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ca(e.experimentalFeatures))return!0;var i=e.experimentalFeatures;return ca(i.useBarCodeDetectorIfSupported)?!0:i.useBarCodeDetectorIfSupported!==!1},a.prototype.validateQrboxSize=function(e,i,o){var h=this,m=o.qrbox;this.validateQrboxConfig(m);var x=this.toQrdimensions(e,i,m),A=function(v){if(v<Vr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Vr.MIN_QR_BOX_SIZE,"px.")},E=function(v){return v>e&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),v=e),v};A(x.width),A(x.height),x.width=E(x.width)},a.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},a.prototype.toQrdimensions=function(e,i,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,i)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return o},a.prototype.setupUi=function(e,i,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,i,o);var h=ca(o.qrbox)?{width:e,height:i}:o.qrbox;this.validateQrboxConfig(h);var m=this.toQrdimensions(e,i,h);m.height>i&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=o.isShadedBoxEnabled()&&m.height<=i,A={x:0,y:0,width:e,height:i},E=x?this.getShadedRegionBounds(e,i,m):A,v=this.createCanvasElement(E.width,E.height),T={willReadFrequently:!0},O=v.getContext("2d",T);O.canvas.width=E.width,O.canvas.height=E.height,this.element.append(v),x&&this.possiblyInsertShadingElement(this.element,e,i,m),this.createScannerPausedUiElement(this.element),this.qrRegion=E,this.context=O,this.canvasElement=v},a.prototype.createScannerPausedUiElement=function(e){var i=document.createElement("div");i.innerText=Wo.scannerPaused(),i.style.display="none",i.style.position="absolute",i.style.top="0px",i.style.zIndex="1",i.style.background="rgba(9, 9, 9, 0.46)",i.style.color="#FFECEC",i.style.textAlign="center",i.style.width="100%",e.appendChild(i),this.scannerPausedUiElement=i},a.prototype.scanContext=function(e,i){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return e(h.text,tp.createFromQrcodeResult(h)),o.possiblyUpdateShaders(!0),!0}).catch(function(h){o.possiblyUpdateShaders(!1);var m=Wo.codeParseError(h);return i(m,e8.createFrom(m)),!1})},a.prototype.foreverScan=function(e,i,o){var h=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),x=m.videoWidth/m.clientWidth,A=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var E=this.qrRegion.width*x,v=this.qrRegion.height*A,T=this.qrRegion.x*x,O=this.qrRegion.y*A;this.context.drawImage(m,T,O,E,v,0,0,this.qrRegion.width,this.qrRegion.height);var j=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(e,i,o)},h.getTimeoutFps(e.fps))};this.scanContext(i,o).then(function(U){!U&&e.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(i,o).finally(function(){j()})):j()}).catch(function(U){h.logger.logError("Error happend while scanning context",U),j()})}},a.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var i="facingMode",o="deviceId",h={user:!0,environment:!0},m="exact",x=function(G){if(G in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(G,"'")},A=Object.keys(e);if(A.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(A.length," keys");var E=Object.keys(e)[0];if(E!==i&&E!==o)throw"Only '".concat(i,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(E===i){var v=e.facingMode;if(typeof v=="string"){if(x(v))return{facingMode:v}}else if(typeof v=="object")if(m in v){if(x(v["".concat(m)]))return{facingMode:{exact:v["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var T=typeof v;throw"Invalid type of 'facingMode' = ".concat(T)}}else{var O=e.deviceId;if(typeof O=="string")return{deviceId:O};if(typeof O=="object"){if(m in O)return{deviceId:{exact:O["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var j=typeof O;throw"Invalid type of 'deviceId' = ".concat(j)}}}var U=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(U)},a.prototype.computeCanvasDrawConfig=function(e,i,o,h){if(e<=o&&i<=h){var m=(o-e)/2,x=(h-i)/2;return{x:m,y:x,width:e,height:i}}else{var A=e,E=i;return e>o&&(i=o/e*i,e=o),i>h&&(e=h/i*e,i=h),this.logger.log("Image downsampled from "+"".concat(A,"X").concat(E)+" to ".concat(e,"X").concat(i,".")),this.computeCanvasDrawConfig(e,i,o,h)}},a.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},a.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(i){i.style.backgroundColor=e?Vr.BORDER_SHADER_MATCH_COLOR:Vr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},a.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},a.prototype.createCanvasElement=function(e,i,o){var h=e,m=i,x=document.createElement("canvas");return x.style.width="".concat(h,"px"),x.style.height="".concat(m,"px"),x.style.display="none",x.id=ca(o)?"qr-canvas":o,x},a.prototype.getShadedRegionBounds=function(e,i,o){if(o.width>e||o.height>i)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(i-o.height)/2,width:o.width,height:o.height}},a.prototype.possiblyInsertShadingElement=function(e,i,o,h){if(!(i-h.width<1||o-h.height<1)){var m=document.createElement("div");m.style.position="absolute";var x=(i-h.width)/2,A=(o-h.height)/2;if(m.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(A,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(Vr.SHADED_REGION_ELEMENT_ID),i-h.width<11||o-h.height<11)this.hasBorderShaders=!1;else{var E=5,v=40;this.insertShaderBorders(m,v,E,-E,null,0,!0),this.insertShaderBorders(m,v,E,-E,null,0,!1),this.insertShaderBorders(m,v,E,null,-E,0,!0),this.insertShaderBorders(m,v,E,null,-E,0,!1),this.insertShaderBorders(m,E,v+E,-E,null,-E,!0),this.insertShaderBorders(m,E,v+E,null,-E,-E,!0),this.insertShaderBorders(m,E,v+E,-E,null,-E,!1),this.insertShaderBorders(m,E,v+E,null,-E,-E,!1),this.hasBorderShaders=!0}e.append(m)}},a.prototype.insertShaderBorders=function(e,i,o,h,m,x,A){var E=document.createElement("div");E.style.position="absolute",E.style.backgroundColor=Vr.BORDER_SHADER_DEFAULT_COLOR,E.style.width="".concat(i,"px"),E.style.height="".concat(o,"px"),h!==null&&(E.style.top="".concat(h,"px")),m!==null&&(E.style.bottom="".concat(m,"px")),A?E.style.left="".concat(x,"px"):E.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(E),e.appendChild(E)},a.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},a.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},a.prototype.getTimeoutFps=function(e){return 1e3/e},a})(),cp;(function(a){a[a.STATUS_DEFAULT=0]="STATUS_DEFAULT",a[a.STATUS_SUCCESS=1]="STATUS_SUCCESS",a[a.STATUS_WARNING=2]="STATUS_WARNING",a[a.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(cp||(cp={}));const _8=Object.freeze(Object.defineProperty({__proto__:null,Html5Qrcode:A8,get Html5QrcodeScanType(){return wc},get Html5QrcodeScannerState(){return mn},get Html5QrcodeSupportedFormats(){return De}},Symbol.toStringTag,{value:"Module"}));function C8({onFound:a,onClose:e}){const[i,o]=Fe.useState(null),[h,m]=Fe.useState(!0),x=Fe.useRef(null);return Fe.useEffect(()=>(p1(async()=>{const{Html5Qrcode:A}=await Promise.resolve().then(()=>_8);return{Html5Qrcode:A}},void 0).then(({Html5Qrcode:A})=>{const E=new A("reader");x.current=E;const v={fps:10,qrbox:{width:250,height:250}};E.start({facingMode:"environment"},v,async T=>{E.pause(),m(!0),o(null);try{const j=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${T}.json`)).json();j.status===1&&j.product&&j.product.product_name?a(j.product.product_name):(o("Prodotto non trovato nel database."),setTimeout(()=>{o(null),E.resume()},2e3))}catch{o("Errore di connessione."),setTimeout(()=>{o(null),E.resume()},2e3)}finally{m(!1)}},T=>{}).then(()=>{m(!1)}).catch(T=>{console.error("Error starting scanner",T),o("Impossibile avviare la fotocamera."),m(!1)})}),()=>{x.current&&x.current.stop().then(()=>{x.current.clear()}).catch(A=>console.error("Failed to stop scanner",A))}),[a]),I.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-[60] animate-fade-in-up",children:I.jsxs(yr,{intensity:"high",className:"w-full max-w-sm overflow-hidden p-0 bg-white shadow-2xl rounded-3xl",children:[I.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50/50",children:[I.jsx("h3",{className:"font-bold text-gray-800",children:"Scansiona Barcode"}),I.jsx("button",{onClick:e,className:"p-2 bg-gray-100 hover:bg-gray-200 rounded-full transition",children:I.jsx(bd,{size:20})})]}),I.jsxs("div",{className:"p-4 bg-black min-h-[300px] flex flex-col justify-center relative rounded-b-3xl overflow-hidden",children:[I.jsx("div",{id:"reader",className:"w-full h-full rounded-2xl overflow-hidden [&>video]:object-cover [&>video]:w-full [&>video]:h-full"}),h&&I.jsxs("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center z-10 text-white flex-col gap-3 font-medium",children:[I.jsx(Hv,{className:"animate-spin text-blue-500",size:40}),I.jsx("span",{children:"Avvio fotocamera..."})]})]}),i&&I.jsx("div",{className:"bg-red-50 p-4 text-center text-red-600 text-sm font-medium border-t border-red-100 animate-pulse",children:i}),I.jsx("div",{className:"p-3 text-center text-[10px] text-gray-400 font-bold tracking-widest uppercase bg-gray-50/80",children:"Powered by Open Food Facts"})]})})}const T8=[{id:"Freschi",icon:"",label:"Freschi"},{id:"Dispensa",icon:"",label:"Dispensa"},{id:"Surgelati",icon:"",label:"Surgelati"},{id:"Bevande",icon:"",label:"Bevande"},{id:"Altro",icon:"",label:"Altro"}];function O8({onAdd:a,onClose:e,embedded:i=!1}){const[o,h]=Fe.useState(""),[m,x]=Fe.useState(""),[A,E]=Fe.useState("Dispensa"),[v,T]=Fe.useState(1),[O,j]=Fe.useState(""),[U,G]=Fe.useState(!1),H=Q=>{if(Q.preventDefault(),!o||!m)return;const q=O?parseFloat(O):0;a({name:o,expiryDate:m,category:A,quantity:Number(v),price:q}),e&&e()},Z=Q=>{h(Q),G(!1)},le=I.jsxs("form",{onSubmit:H,className:gr("space-y-6",!i&&"p-6"),children:[I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:"Nome Prodotto"}),I.jsxs("div",{className:"flex gap-3",children:[I.jsx("input",{type:"text",value:o,onChange:Q=>h(Q.target.value),className:"flex-1 px-4 py-3.5 bg-gray-50 border border-gray-200 dark:bg-black dark:border-white/10 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none transition-all placeholder:text-gray-400 dark:placeholder:text-gray-600 font-medium text-lg dark:text-white",placeholder:"Es. Latte",autoFocus:!0}),I.jsx("button",{type:"button",onClick:()=>G(!0),className:"flex-none w-[54px] h-[54px] flex items-center justify-center bg-gray-900 text-white dark:bg-white/10 dark:text-white rounded-2xl hover:scale-105 active:scale-95 transition-all",title:"Scansiona Barcode",children:I.jsx(i3,{size:24})})]})]}),I.jsxs("div",{className:"flex flex-col gap-4",children:[I.jsxs("div",{className:"flex-1 space-y-2",children:[I.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:"Quantit"}),I.jsxs("div",{className:"flex items-center bg-gray-50 border border-gray-200 dark:bg-black dark:border-white/10 rounded-2xl px-4 py-3.5",children:[I.jsx("button",{type:"button",onClick:()=>T(Math.max(1,v-1)),className:"w-8 h-8 rounded-full bg-white dark:bg-white/10 shadow-sm flex items-center justify-center text-gray-600 dark:text-gray-300 font-bold hover:scale-110 transition active:scale-95",children:"-"}),I.jsx("input",{type:"number",min:"1",value:v,onChange:Q=>T(parseInt(Q.target.value)||1),className:"flex-1 bg-transparent text-center font-bold text-lg outline-none dark:text-white"}),I.jsx("button",{type:"button",onClick:()=>T(v+1),className:"w-8 h-8 rounded-full bg-white dark:bg-white/10 shadow-sm flex items-center justify-center text-gray-600 dark:text-gray-300 font-bold hover:scale-110 transition active:scale-95",children:"+"})]})]}),I.jsxs("div",{className:"flex-1 space-y-2",children:[I.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:"Prezzo ()"}),I.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:O,onChange:Q=>j(Q.target.value),className:"w-full px-4 py-3.5 bg-gray-50 border border-gray-200 dark:bg-black dark:border-white/10 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none transition-all placeholder:text-gray-400 dark:placeholder:text-gray-600 font-medium text-lg dark:text-white text-right"})]})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:"Categoria"}),I.jsx("div",{className:"grid grid-cols-3 gap-3",children:T8.map(Q=>I.jsxs("button",{type:"button",onClick:()=>E(Q.id),className:gr("flex flex-col items-center justify-center py-3 rounded-2xl border transition-all duration-200",A===Q.id?"bg-gray-900 text-white border-transparent dark:bg-white dark:text-black shadow-md":"bg-gray-50 border-gray-100 text-gray-500 dark:bg-black dark:border-white/5 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5"),children:[I.jsx("span",{className:"text-2xl mb-1 filter drop-shadow-sm",children:Q.icon}),I.jsx("span",{className:"text-[10px] font-bold tracking-wide",children:Q.label})]},Q.id))})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider ml-1",children:"Data di Scadenza"}),I.jsx("input",{type:"date",value:m,onChange:Q=>x(Q.target.value),min:"2024-01-01",max:"2030-12-31",className:"w-full px-4 py-3.5 bg-gray-50 border border-gray-200 dark:bg-black dark:border-white/10 rounded-2xl focus:ring-2 focus:ring-blue-500/50 outline-none transition-all font-medium text-lg text-gray-900 dark:text-white dark:[color-scheme:dark]"})]}),I.jsx("div",{className:"pt-4 pb-2",children:I.jsx("button",{type:"submit",disabled:!o||!m,className:"w-full bg-blue-600 text-white dark:bg-pantry-accent-blue py-4 rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-95 transition-all disabled:opacity-50 disabled:pointer-events-none",children:"Salva in Dispensa"})}),U&&I.jsx(C8,{onFound:Z,onClose:()=>G(!1)})]});return i?le:I.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-end sm:items-center justify-center z-50 animate-fade-in-up",children:I.jsx("div",{className:"w-full h-full sm:h-auto sm:max-w-md p-4 flex flex-col justify-end sm:justify-center",children:I.jsxs(yr,{intensity:"high",className:"w-full max-h-[90vh] overflow-y-auto p-0 border-white/80 dark:border-white/10 shadow-none rounded-3xl sm:rounded-[32px]",children:[I.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-100 dark:border-white/5 bg-white/80 dark:bg-pantry-bg-secondary/80 sticky top-0 z-10 backdrop-blur-md",children:[I.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Nuovo Prodotto"}),I.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center bg-gray-100 hover:bg-gray-200 dark:bg-white/10 dark:hover:bg-white/20 rounded-full transition-colors",children:I.jsx(bd,{size:20,className:"text-gray-500 dark:text-gray-300"})})]}),le]})})})}function N8(){const[a,e]=Fe.useState([]),[i,o]=Fe.useState("");Fe.useEffect(()=>{h()},[]);const h=async()=>{const T=(await h1()).sort((O,j)=>Number(O.isBought)-Number(j.isBought));e(T)},m=async v=>{v.preventDefault(),i.trim()&&(await g1({name:i}),o(""),await h())},x=async(v,T)=>{await lw(v,T),await h()},A=async v=>{await q0(v),await h()},E=async()=>{const v=a.filter(T=>T.isBought);for(const T of v)await q0(T.id);await h()};return I.jsxs("div",{className:"pb-24",children:[I.jsx(yr,{className:"p-2 mb-6 flex items-center shadow-lg border-white/60",children:I.jsxs("form",{onSubmit:m,className:"flex gap-2 w-full",children:[I.jsx("input",{type:"text",value:i,onChange:v=>o(v.target.value),placeholder:"Aggiungi alla lista...",className:"flex-1 px-4 py-3 bg-transparent outline-none text-gray-800 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500 font-medium"}),I.jsx("button",{type:"submit",className:"p-3 bg-gray-900 text-white rounded-xl hover:scale-105 active:scale-95 transition-all disabled:opacity-50 disabled:scale-100",disabled:!i.trim(),children:I.jsx(sd,{size:24})})]})}),a.length===0?I.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-400",children:[I.jsx("div",{className:"w-20 h-20 bg-white/30 backdrop-blur-xl rounded-[32px] flex items-center justify-center mb-4 shadow-lg border border-white/40",children:I.jsx(Z0,{size:40,className:"ml-1"})}),I.jsx("p",{className:"text-lg font-medium",children:"Tutto comprato!"})]}):I.jsxs(I.Fragment,{children:[I.jsx("ul",{className:"space-y-3",children:a.map(v=>I.jsxs(yr,{className:gr("flex items-center justify-between p-4 transition-all duration-300",v.isBought?"opacity-60 grayscale bg-white/20":"bg-white/50"),onClick:()=>x(v.id,v.isBought),children:[I.jsxs("div",{className:"flex items-center gap-4 flex-1 cursor-pointer",children:[I.jsx("div",{className:gr("w-7 h-7 rounded-full border-2 flex items-center justify-center transition-all duration-300",v.isBought?"bg-green-500 border-green-500 text-white scale-110":"border-gray-400 text-transparent"),children:I.jsx(Mp,{size:16,strokeWidth:3})}),I.jsx("span",{className:gr("text-lg font-medium transition-all",v.isBought?"line-through text-gray-500":"text-gray-800"),children:v.name})]}),I.jsx("button",{onClick:T=>{T.stopPropagation(),A(v.id)},className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all",children:I.jsx(wd,{size:20})})]},v.id))}),a.some(v=>v.isBought)&&I.jsx("div",{className:"mt-8 text-center",children:I.jsx("button",{onClick:E,className:"px-6 py-2 text-sm text-red-500 hover:text-red-700 hover:bg-red-50 rounded-full transition font-medium",children:"Rimuovi cancellati"})})]})]})}var e0={exports:{}},up;function R8(){return up||(up=1,(function(a){var e=(function(i){var o=Object.prototype,h=o.hasOwnProperty,m=Object.defineProperty||function(he,ue,B){he[ue]=B.value},x,A=typeof Symbol=="function"?Symbol:{},E=A.iterator||"@@iterator",v=A.asyncIterator||"@@asyncIterator",T=A.toStringTag||"@@toStringTag";function O(he,ue,B){return Object.defineProperty(he,ue,{value:B,enumerable:!0,configurable:!0,writable:!0}),he[ue]}try{O({},"")}catch{O=function(ue,B,Y){return ue[B]=Y}}function j(he,ue,B,Y){var ie=ue&&ue.prototype instanceof q?ue:q,J=Object.create(ie.prototype),Te=new ee(Y||[]);return m(J,"_invoke",{value:Ie(he,B,Te)}),J}i.wrap=j;function U(he,ue,B){try{return{type:"normal",arg:he.call(ue,B)}}catch(Y){return{type:"throw",arg:Y}}}var G="suspendedStart",H="suspendedYield",Z="executing",le="completed",Q={};function q(){}function xe(){}function Le(){}var Se={};O(Se,E,function(){return this});var $=Object.getPrototypeOf,we=$&&$($(fe([])));we&&we!==o&&h.call(we,E)&&(Se=we);var de=Le.prototype=q.prototype=Object.create(Se);xe.prototype=Le,m(de,"constructor",{value:Le,configurable:!0}),m(Le,"constructor",{value:xe,configurable:!0}),xe.displayName=O(Le,T,"GeneratorFunction");function At(he){["next","throw","return"].forEach(function(ue){O(he,ue,function(B){return this._invoke(ue,B)})})}i.isGeneratorFunction=function(he){var ue=typeof he=="function"&&he.constructor;return ue?ue===xe||(ue.displayName||ue.name)==="GeneratorFunction":!1},i.mark=function(he){return Object.setPrototypeOf?Object.setPrototypeOf(he,Le):(he.__proto__=Le,O(he,T,"GeneratorFunction")),he.prototype=Object.create(de),he},i.awrap=function(he){return{__await:he}};function ft(he,ue){function B(J,Te,me,Re){var He=U(he[J],he,Te);if(He.type==="throw")Re(He.arg);else{var Oe=He.arg,We=Oe.value;return We&&typeof We=="object"&&h.call(We,"__await")?ue.resolve(We.__await).then(function(tt){B("next",tt,me,Re)},function(tt){B("throw",tt,me,Re)}):ue.resolve(We).then(function(tt){Oe.value=tt,me(Oe)},function(tt){return B("throw",tt,me,Re)})}}var Y;function ie(J,Te){function me(){return new ue(function(Re,He){B(J,Te,Re,He)})}return Y=Y?Y.then(me,me):me()}m(this,"_invoke",{value:ie})}At(ft.prototype),O(ft.prototype,v,function(){return this}),i.AsyncIterator=ft,i.async=function(he,ue,B,Y,ie){ie===void 0&&(ie=Promise);var J=new ft(j(he,ue,B,Y),ie);return i.isGeneratorFunction(ue)?J:J.next().then(function(Te){return Te.done?Te.value:J.next()})};function Ie(he,ue,B){var Y=G;return function(J,Te){if(Y===Z)throw new Error("Generator is already running");if(Y===le){if(J==="throw")throw Te;return be()}for(B.method=J,B.arg=Te;;){var me=B.delegate;if(me){var Re=Ye(me,B);if(Re){if(Re===Q)continue;return Re}}if(B.method==="next")B.sent=B._sent=B.arg;else if(B.method==="throw"){if(Y===G)throw Y=le,B.arg;B.dispatchException(B.arg)}else B.method==="return"&&B.abrupt("return",B.arg);Y=Z;var He=U(he,ue,B);if(He.type==="normal"){if(Y=B.done?le:H,He.arg===Q)continue;return{value:He.arg,done:B.done}}else He.type==="throw"&&(Y=le,B.method="throw",B.arg=He.arg)}}}function Ye(he,ue){var B=ue.method,Y=he.iterator[B];if(Y===x)return ue.delegate=null,B==="throw"&&he.iterator.return&&(ue.method="return",ue.arg=x,Ye(he,ue),ue.method==="throw")||B!=="return"&&(ue.method="throw",ue.arg=new TypeError("The iterator does not provide a '"+B+"' method")),Q;var ie=U(Y,he.iterator,ue.arg);if(ie.type==="throw")return ue.method="throw",ue.arg=ie.arg,ue.delegate=null,Q;var J=ie.arg;if(!J)return ue.method="throw",ue.arg=new TypeError("iterator result is not an object"),ue.delegate=null,Q;if(J.done)ue[he.resultName]=J.value,ue.next=he.nextLoc,ue.method!=="return"&&(ue.method="next",ue.arg=x);else return J;return ue.delegate=null,Q}At(de),O(de,T,"Generator"),O(de,E,function(){return this}),O(de,"toString",function(){return"[object Generator]"});function $e(he){var ue={tryLoc:he[0]};1 in he&&(ue.catchLoc=he[1]),2 in he&&(ue.finallyLoc=he[2],ue.afterLoc=he[3]),this.tryEntries.push(ue)}function re(he){var ue=he.completion||{};ue.type="normal",delete ue.arg,he.completion=ue}function ee(he){this.tryEntries=[{tryLoc:"root"}],he.forEach($e,this),this.reset(!0)}i.keys=function(he){var ue=Object(he),B=[];for(var Y in ue)B.push(Y);return B.reverse(),function ie(){for(;B.length;){var J=B.pop();if(J in ue)return ie.value=J,ie.done=!1,ie}return ie.done=!0,ie}};function fe(he){if(he){var ue=he[E];if(ue)return ue.call(he);if(typeof he.next=="function")return he;if(!isNaN(he.length)){var B=-1,Y=function ie(){for(;++B<he.length;)if(h.call(he,B))return ie.value=he[B],ie.done=!1,ie;return ie.value=x,ie.done=!0,ie};return Y.next=Y}}return{next:be}}i.values=fe;function be(){return{value:x,done:!0}}return ee.prototype={constructor:ee,reset:function(he){if(this.prev=0,this.next=0,this.sent=this._sent=x,this.done=!1,this.delegate=null,this.method="next",this.arg=x,this.tryEntries.forEach(re),!he)for(var ue in this)ue.charAt(0)==="t"&&h.call(this,ue)&&!isNaN(+ue.slice(1))&&(this[ue]=x)},stop:function(){this.done=!0;var he=this.tryEntries[0],ue=he.completion;if(ue.type==="throw")throw ue.arg;return this.rval},dispatchException:function(he){if(this.done)throw he;var ue=this;function B(Re,He){return J.type="throw",J.arg=he,ue.next=Re,He&&(ue.method="next",ue.arg=x),!!He}for(var Y=this.tryEntries.length-1;Y>=0;--Y){var ie=this.tryEntries[Y],J=ie.completion;if(ie.tryLoc==="root")return B("end");if(ie.tryLoc<=this.prev){var Te=h.call(ie,"catchLoc"),me=h.call(ie,"finallyLoc");if(Te&&me){if(this.prev<ie.catchLoc)return B(ie.catchLoc,!0);if(this.prev<ie.finallyLoc)return B(ie.finallyLoc)}else if(Te){if(this.prev<ie.catchLoc)return B(ie.catchLoc,!0)}else if(me){if(this.prev<ie.finallyLoc)return B(ie.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(he,ue){for(var B=this.tryEntries.length-1;B>=0;--B){var Y=this.tryEntries[B];if(Y.tryLoc<=this.prev&&h.call(Y,"finallyLoc")&&this.prev<Y.finallyLoc){var ie=Y;break}}ie&&(he==="break"||he==="continue")&&ie.tryLoc<=ue&&ue<=ie.finallyLoc&&(ie=null);var J=ie?ie.completion:{};return J.type=he,J.arg=ue,ie?(this.method="next",this.next=ie.finallyLoc,Q):this.complete(J)},complete:function(he,ue){if(he.type==="throw")throw he.arg;return he.type==="break"||he.type==="continue"?this.next=he.arg:he.type==="return"?(this.rval=this.arg=he.arg,this.method="return",this.next="end"):he.type==="normal"&&ue&&(this.next=ue),Q},finish:function(he){for(var ue=this.tryEntries.length-1;ue>=0;--ue){var B=this.tryEntries[ue];if(B.finallyLoc===he)return this.complete(B.completion,B.afterLoc),re(B),Q}},catch:function(he){for(var ue=this.tryEntries.length-1;ue>=0;--ue){var B=this.tryEntries[ue];if(B.tryLoc===he){var Y=B.completion;if(Y.type==="throw"){var ie=Y.arg;re(B)}return ie}}throw new Error("illegal catch attempt")},delegateYield:function(he,ue,B){return this.delegate={iterator:fe(he),resultName:ue,nextLoc:B},this.method==="next"&&(this.arg=x),Q}},i})(a.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(e0)),e0.exports}var t0,dp;function v1(){return dp||(dp=1,t0=(a,e)=>`${a}-${e}-${Math.random().toString(16).slice(3,8)}`),t0}var n0,fp;function Mw(){if(fp)return n0;fp=1;const a=v1();let e=0;return n0=({id:i,action:o,payload:h={}})=>{let m=i;return typeof m>"u"&&(m=a("Job",e),e+=1),{id:m,action:o,payload:h}},n0}var nc={},hp;function E1(){if(hp)return nc;hp=1;let a=!1;return nc.logging=a,nc.setLogging=e=>{a=e},nc.log=(...e)=>a?console.log.apply(this,e):null,nc}var r0,gp;function I8(){if(gp)return r0;gp=1;const a=Mw(),{log:e}=E1(),i=v1();let o=0;return r0=()=>{const h=i("Scheduler",o),m={},x={};let A=[];o+=1;const E=()=>A.length,v=()=>Object.keys(m).length,T=()=>{if(A.length!==0){const H=Object.keys(m);for(let Z=0;Z<H.length;Z+=1)if(typeof x[H[Z]]>"u"){A[0](m[H[Z]]);break}}},O=(H,Z)=>new Promise((le,Q)=>{const q=a({action:H,payload:Z});A.push(async xe=>{A.shift(),x[xe.id]=q;try{le(await xe[H].apply(this,[...Z,q.id]))}catch(Le){Q(Le)}finally{delete x[xe.id],T()}}),e(`[${h}]: Add ${q.id} to JobQueue`),e(`[${h}]: JobQueue length=${A.length}`),T()});return{addWorker:H=>(m[H.id]=H,e(`[${h}]: Add ${H.id}`),e(`[${h}]: Number of workers=${v()}`),T(),H.id),addJob:async(H,...Z)=>{if(v()===0)throw Error(`[${h}]: You need to have at least one worker before adding jobs`);return O(H,Z)},terminate:async()=>{Object.keys(m).forEach(async H=>{await m[H].terminate()}),A=[]},getQueueLen:E,getNumWorkers:v}},r0}function k8(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var i0,mp;function D8(){return mp||(mp=1,i0=a=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof k8=="function"&&(e.type="node"),typeof a>"u"?e:e[a]}),i0}var a0,yp;function M8(){if(yp)return a0;yp=1;const e=D8()("type")==="browser"?i=>new URL(i,window.location.href).href:i=>i;return a0=i=>{const o={...i};return["corePath","workerPath","langPath"].forEach(h=>{i[h]&&(o[h]=e(o[h]))}),o},a0}var s0,pp;function Bw(){return pp||(pp=1,s0={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),s0}const B8="7.0.0",L8={version:B8};var o0,xp;function j8(){return xp||(xp=1,o0={workerBlobURL:!0,logger:()=>{}}),o0}var l0,wp;function U8(){if(wp)return l0;wp=1;const a=L8.version;return l0={...j8(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${a}/dist/worker.min.js`},l0}var c0,bp;function P8(){return bp||(bp=1,c0=({workerPath:a,workerBlobURL:e})=>{let i;if(Blob&&URL&&e){const o=new Blob([`importScripts("${a}");`],{type:"application/javascript"});i=new Worker(URL.createObjectURL(o))}else i=new Worker(a);return i}),c0}var u0,vp;function z8(){return vp||(vp=1,u0=a=>{a.terminate()}),u0}var d0,Ep;function F8(){return Ep||(Ep=1,d0=(a,e)=>{a.onmessage=({data:i})=>{e(i)}}),d0}var f0,Sp;function V8(){return Sp||(Sp=1,f0=async(a,e)=>{a.postMessage(e)}),f0}var h0,Ap;function H8(){if(Ap)return h0;Ap=1;const a=i=>new Promise((o,h)=>{const m=new FileReader;m.onload=()=>{o(m.result)},m.onerror=({target:{error:{code:x}}})=>{h(Error(`File could not be read! Code=${x}`))},m.readAsArrayBuffer(i)}),e=async i=>{let o=i;if(typeof i>"u")return"undefined";if(typeof i=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(i)?o=atob(i.split(",")[1]).split("").map(h=>h.charCodeAt(0)):o=await(await fetch(i)).arrayBuffer();else if(typeof HTMLElement<"u"&&i instanceof HTMLElement)i.tagName==="IMG"&&(o=await e(i.src)),i.tagName==="VIDEO"&&(o=await e(i.poster)),i.tagName==="CANVAS"&&await new Promise(h=>{i.toBlob(async m=>{o=await a(m),h()})});else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas){const h=await i.convertToBlob();o=await a(h)}else(i instanceof File||i instanceof Blob)&&(o=await a(i));return new Uint8Array(o)};return h0=e,h0}var g0,_p;function G8(){if(_p)return g0;_p=1;const a=U8(),e=P8(),i=z8(),o=F8(),h=V8(),m=H8();return g0={defaultOptions:a,spawnWorker:e,terminateWorker:i,onMessage:o,send:h,loadImage:m},g0}var m0,Cp;function Lw(){if(Cp)return m0;Cp=1;const a=M8(),e=Mw(),{log:i}=E1(),o=v1(),h=Bw(),{defaultOptions:m,spawnWorker:x,terminateWorker:A,onMessage:E,loadImage:v,send:T}=G8();let O=0;return m0=async(j="eng",U=h.LSTM_ONLY,G={},H={})=>{const Z=o("Worker",O),{logger:le,errorHandler:Q,...q}=a({...m,...G}),xe={},Le=typeof j=="string"?j.split("+"):j;let Se=U,$=H;const we=[h.DEFAULT,h.LSTM_ONLY].includes(U)&&!q.legacyCore;let de,At;const ft=new Promise((Oe,We)=>{At=Oe,de=We}),Ie=Oe=>{de(Oe.message)};let Ye=x(q);Ye.onerror=Ie,O+=1;const $e=({id:Oe,action:We,payload:tt})=>new Promise((en,nt)=>{i(`[${Z}]: Start ${Oe}, action=${We}`);const rn=`${We}-${Oe}`;xe[rn]={resolve:en,reject:nt},T(Ye,{workerId:Z,jobId:Oe,action:We,payload:tt})}),re=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),ee=Oe=>$e(e({id:Oe,action:"load",payload:{options:{lstmOnly:we,corePath:q.corePath,logging:q.logging}}})),fe=(Oe,We,tt)=>$e(e({id:tt,action:"FS",payload:{method:"writeFile",args:[Oe,We]}})),be=(Oe,We)=>$e(e({id:We,action:"FS",payload:{method:"readFile",args:[Oe,{encoding:"utf8"}]}})),he=(Oe,We)=>$e(e({id:We,action:"FS",payload:{method:"unlink",args:[Oe]}})),ue=(Oe,We,tt)=>$e(e({id:tt,action:"FS",payload:{method:Oe,args:We}})),B=(Oe,We)=>$e(e({id:We,action:"loadLanguage",payload:{langs:Oe,options:{langPath:q.langPath,dataPath:q.dataPath,cachePath:q.cachePath,cacheMethod:q.cacheMethod,gzip:q.gzip,lstmOnly:[h.DEFAULT,h.LSTM_ONLY].includes(Se)&&!q.legacyLang}}})),Y=(Oe,We,tt,en)=>$e(e({id:en,action:"initialize",payload:{langs:Oe,oem:We,config:tt}})),ie=(Oe="eng",We,tt,en)=>{if(we&&[h.TESSERACT_ONLY,h.TESSERACT_LSTM_COMBINED].includes(We))throw Error("Legacy model requested but code missing.");const nt=We||Se;Se=nt;const rn=tt||$;$=rn;const Tr=(typeof Oe=="string"?Oe.split("+"):Oe).filter(An=>!Le.includes(An));return Le.push(...Tr),Tr.length>0?B(Tr,en).then(()=>Y(Oe,nt,rn,en)):Y(Oe,nt,rn,en)},J=(Oe={},We)=>$e(e({id:We,action:"setParameters",payload:{params:Oe}})),Te=async(Oe,We={},tt={text:!0},en)=>$e(e({id:en,action:"recognize",payload:{image:await v(Oe),options:We,output:tt}})),me=async(Oe,We)=>{if(we)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return $e(e({id:We,action:"detect",payload:{image:await v(Oe)}}))},Re=async()=>(Ye!==null&&(A(Ye),Ye=null),Promise.resolve());E(Ye,({workerId:Oe,jobId:We,status:tt,action:en,data:nt})=>{const rn=`${en}-${We}`;if(tt==="resolve")i(`[${Oe}]: Complete ${We}`),xe[rn].resolve({jobId:We,data:nt}),delete xe[rn];else if(tt==="reject")if(xe[rn].reject(nt),delete xe[rn],en==="load"&&de(nt),Q)Q(nt);else throw Error(nt);else tt==="progress"&&le({...nt,userJobId:We})});const He={id:Z,worker:Ye,load:re,writeText:fe,readText:be,removeFile:he,FS:ue,reinitialize:ie,setParameters:J,recognize:Te,detect:me,terminate:Re};return ee().then(()=>B(j)).then(()=>Y(j,U,H)).then(()=>At(He)).catch(()=>{}),ft},m0}var y0,Tp;function q8(){if(Tp)return y0;Tp=1;const a=Lw();return y0={recognize:async(o,h,m)=>{const x=await a(h,1,m);return x.recognize(o).finally(async()=>{await x.terminate()})},detect:async(o,h)=>{const m=await a("osd",0,h);return m.detect(o).finally(async()=>{await m.terminate()})}},y0}var p0,Op;function W8(){return Op||(Op=1,p0={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),p0}var x0,Np;function Y8(){return Np||(Np=1,x0={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),x0}var w0,Rp;function X8(){if(Rp)return w0;Rp=1,R8();const a=I8(),e=Lw(),i=q8(),o=W8(),h=Bw(),m=Y8(),{setLogging:x}=E1();return w0={languages:o,OEM:h,PSM:m,createScheduler:a,createWorker:e,setLogging:x,...i},w0}var Z8=X8();const K8=Ip(Z8);function Q8({onScanComplete:a}){const[e,i]=Fe.useState(!1),[o,h]=Fe.useState(0),[m,x]=Fe.useState(""),A=async E=>{const v=E.target.files[0];if(v){i(!0),x("Initializing OCR...");try{const T=await K8.createWorker("ita+eng",1,{logger:j=>{j.status==="recognizing text"?(h(Math.round(j.progress*100)),x(`Scanning... ${Math.round(j.progress*100)}%`)):x(j.status)}});x("Recognizing text...");const{data:{text:O}}=await T.recognize(v);await T.terminate(),x("Parsing locally..."),a(O)}catch(T){console.error("OCR Error:",T),x("Error scanning receipt"),alert("Failed to scan receipt. Please try again.")}finally{i(!1),h(0)}}};return I.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-sm border border-gray-100",children:[I.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:"Scansiona Scontrino"}),e?I.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[I.jsx(ad,{className:"w-8 h-8 text-blue-500 animate-spin mb-2"}),I.jsx("p",{className:"text-sm text-gray-500",children:m}),I.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:I.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${o}%`}})})]}):I.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[I.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[I.jsx(Dp,{className:"w-8 h-8 text-gray-400 mb-2"}),I.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Scatta foto o carica file"}),I.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Supporta .jpg, .png"})]}),I.jsx("input",{type:"file",className:"hidden",accept:"image/*",capture:"environment",onChange:A})]})]})}const J8=async a=>{try{const e=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(a)}&search_simple=1&action=process&json=1&page_size=1`,o=await(await fetch(e)).json();if(o.products&&o.products.length>0){const h=o.products[0];return{found:!0,image_url:h.image_front_small_url,generic_name:h.generic_name||h.product_name,categories:h.categories_tags}}return{found:!1}}catch(e){return console.error("Open Food Facts search error:",e),{found:!1,error:e}}};function $8({initialData:a,onSave:e,onCancel:i}){const[o,h]=Fe.useState(a.items||[]),[m,x]=Fe.useState(a.store||""),[A,E]=Fe.useState(a.date||new Date().toISOString().split("T")[0]),[v,T]=Fe.useState(null),O=(Z,le,Q)=>{const q=[...o];q[Z]={...q[Z],[le]:Q},h(q)},j=Z=>{h(o.filter((le,Q)=>Q!==Z))},U=()=>{h([...o,{name:"",qty:1,price:0,expiry_estimate:""}])},G=async Z=>{const le=o[Z];if(!le.name)return;T(Z);const Q=await J8(le.name);if(T(null),Q.found){const q=[...o];q[Z]={...le,name:Q.generic_name||le.name},h(q),alert(`Found: ${Q.generic_name}`)}else alert("Product not found in Open Food Facts")},H=()=>o.reduce((Z,le)=>Z+Number(le.price)*Number(le.qty),0).toFixed(2);return I.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-4",children:[I.jsxs("div",{className:"flex justify-between items-center mb-4",children:[I.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Review Receipt"}),I.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["Total: ",H(),""]})]}),I.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Store"}),I.jsx("input",{type:"text",value:m,onChange:Z=>x(Z.target.value),className:"w-full text-sm p-2 border rounded"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Date"}),I.jsx("input",{type:"date",value:A,onChange:Z=>E(Z.target.value),className:"w-full text-sm p-2 border rounded"})]})]}),I.jsx("div",{className:"space-y-2 mb-4",children:o.map((Z,le)=>I.jsxs("div",{className:"flex items-start gap-2 p-2 border rounded bg-gray-50",children:[I.jsxs("div",{className:"flex-1 min-w-0",children:[I.jsx("input",{type:"text",value:Z.name,onChange:Q=>O(le,"name",Q.target.value),placeholder:"Product Name",className:"w-full text-base font-medium bg-transparent border-b border-dashed border-gray-300 focus:outline-none focus:border-blue-500 mb-2 py-1 placeholder:text-gray-400"}),I.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[I.jsxs("div",{className:"relative w-20 shrink-0",children:[I.jsx("input",{type:"number",value:Z.qty,onChange:Q=>O(le,"qty",Q.target.value),className:"w-full text-sm p-2 border rounded-lg bg-white bg-opacity-50",placeholder:"Qt"}),I.jsx("span",{className:"absolute top-0 right-1 text-[10px] text-gray-400 h-full flex items-center pointer-events-none",children:"pz"})]}),I.jsxs("div",{className:"relative w-24 shrink-0",children:[I.jsx("input",{type:"number",step:"0.01",value:Z.price,onChange:Q=>O(le,"price",Q.target.value),className:"w-full text-sm p-2 border rounded-lg bg-white bg-opacity-50 pl-5",placeholder:"0.00"}),I.jsx("span",{className:"absolute top-0 left-2 text-sm text-gray-400 h-full flex items-center pointer-events-none",children:""})]}),I.jsx("input",{type:"date",value:Z.expiry_estimate||"",onChange:Q=>O(le,"expiry_estimate",Q.target.value),className:"flex-1 min-w-[120px] text-sm p-2 border rounded-lg text-gray-600 bg-white bg-opacity-50"})]})]}),I.jsxs("div",{className:"flex flex-col gap-1",children:[I.jsx("button",{onClick:()=>G(le),disabled:v===le,className:"p-1 text-blue-500 hover:bg-blue-50 rounded",title:"Search Open Food Facts",children:v===le?I.jsx(e3,{className:"w-4 h-4 animate-spin"}):I.jsx(s3,{className:"w-4 h-4"})}),I.jsx("button",{onClick:()=>j(le),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:I.jsx(wd,{className:"w-4 h-4"})})]})]},le))}),I.jsx("div",{className:"flex gap-2 mb-4",children:I.jsxs("button",{onClick:U,className:"flex-1 flex items-center justify-center gap-2 text-sm text-blue-600 font-bold px-4 py-3 bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors",children:[I.jsx(sd,{className:"w-5 h-5"})," Add Item manually"]})}),I.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[I.jsx("button",{onClick:i,className:"flex-1 py-3.5 text-gray-600 font-bold bg-gray-100 rounded-xl hover:bg-gray-200 active:scale-95 transition-all text-sm",children:"Cancel"}),I.jsxs("button",{onClick:()=>e({items:o,store:m,date:A}),className:"flex-[2] py-3.5 bg-green-600 text-white font-bold rounded-xl hover:bg-green-700 active:scale-95 transition-all flex items-center justify-center gap-2 shadow-lg shadow-green-200",children:[I.jsx(n3,{className:"w-5 h-5"})," Confirm & Save"]})]})]})}function e6({onClose:a}){const[e,i]=Fe.useState("upload"),[o,h]=Fe.useState(null),[m,x]=Fe.useState(null),A=async v=>{i("parsing"),x(null);try{const T=await fetch("/.netlify/functions/parse-receipt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:v})});if(!T.ok)throw new Error(`Errore Server: ${T.statusText}`);const O=await T.json();if(!O.items||O.items.length===0){alert("Non sono riuscito a trovare prodotti. Riprova con una foto pi nitida."),i("upload");return}h(O),i("preview")}catch(T){console.error(T),x("Errore analisi IA. Verifica la connessione o riprova."),i("upload")}},E=async v=>{i("saving");try{const T=v.items.map(O=>({name:O.name,quantity:O.qty,price:O.price,expiry_date:O.expiry_estimate||v.date,category:"Dispensa",status:"active",pantry_id:"default"}));for(const O of T){const{error:j}=await Rn.addProduct(O);if(j)throw j}alert("Prodotti salvati su Supabase!"),a?a():(i("upload"),h(null))}catch(T){console.error(T),alert("Errore salvataggio: "+T.message),i("preview")}};return I.jsxs("div",{className:"max-w-md mx-auto p-2",children:[m&&I.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded mb-4 text-sm border border-red-100",children:m}),e==="upload"&&I.jsx(Q8,{onScanComplete:A}),e==="parsing"&&I.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-white/50 rounded-2xl border border-white/60 shadow-sm backdrop-blur-sm",children:[I.jsx(ad,{className:"w-12 h-12 text-blue-600 animate-spin mb-4"}),I.jsx("p",{className:"text-gray-800 font-bold text-lg",children:"Sto leggendo i dati..."}),I.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Potrebbe richiedere qualche secondo"})]}),e==="preview"&&o&&I.jsx($8,{initialData:o,onSave:E,onCancel:()=>i("upload")}),e==="saving"&&I.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-white/50 rounded-2xl border border-white/60 shadow-sm",children:[I.jsx(ad,{className:"w-12 h-12 text-green-600 animate-spin mb-4"}),I.jsx("p",{className:"text-gray-800 font-bold text-lg",children:"Salvataggio nel Cloud..."})]})]})}function t6({onAdd:a,onClose:e}){const[i,o]=Fe.useState("selection");return I.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-end sm:items-center justify-center z-50 animate-fade-in-up",children:I.jsx("div",{className:"w-full h-full sm:h-auto sm:max-w-md p-4 flex flex-col justify-end sm:justify-center",children:I.jsxs(yr,{intensity:"high",className:"w-full max-h-[90vh] overflow-y-auto p-0 border-white/80 dark:border-white/10 shadow-none rounded-3xl sm:rounded-[32px]",children:[I.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-100 dark:border-white/5 bg-white/80 dark:bg-pantry-bg-secondary/80 sticky top-0 z-10 backdrop-blur-md",children:[I.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[i==="selection"&&"Aggiungi Prodotto",i==="manual"&&"Nuovo Prodotto",i==="scan"&&"Scansiona Scontrino"]}),I.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center bg-gray-100 hover:bg-gray-200 dark:bg-white/10 dark:hover:bg-white/20 rounded-full transition-colors",children:I.jsx(bd,{size:20,className:"text-gray-500 dark:text-gray-300"})})]}),I.jsxs("div",{className:"p-6",children:[i==="selection"&&I.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[I.jsxs("button",{onClick:()=>o("scan"),className:"flex items-center gap-4 p-5 bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-2xl shadow-lg hover:scale-[1.02] active:scale-98 transition-all",children:[I.jsx("div",{className:"p-3 bg-white/20 rounded-full",children:I.jsx(Dp,{size:32})}),I.jsxs("div",{className:"text-left",children:[I.jsx("h3",{className:"text-lg font-bold",children:"Scansiona Scontrino"}),I.jsx("p",{className:"text-blue-100 text-xs text-opacity-80",children:"Rilevamento automatico con AI"})]})]}),I.jsxs("button",{onClick:()=>o("manual"),className:"flex items-center gap-4 p-5 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 text-gray-800 dark:text-white rounded-2xl shadow-sm hover:bg-gray-50 dark:hover:bg-white/10 transition-all",children:[I.jsx("div",{className:"p-3 bg-gray-100 dark:bg-white/10 rounded-full text-gray-600 dark:text-gray-300",children:I.jsx(Qv,{size:32})}),I.jsxs("div",{className:"text-left",children:[I.jsx("h3",{className:"text-lg font-bold",children:"Inserimento Manuale"}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Digita dettagli prodotto"})]})]})]}),i==="manual"&&I.jsx(O8,{onAdd:a,onClose:e,embedded:!0}),i==="scan"&&I.jsx(e6,{onClose:e})]})]})})})}function n6({currentTheme:a,onThemeChange:e,currentFamily:i,locations:o=[],onRemoveLocation:h}){const m=async()=>{confirm("Sei sicuro di voler uscire dalla famiglia?")&&(await nw(),window.location.reload())},x=async E=>{if(o.length<=1){alert("Devi avere almeno una dispensa.");return}confirm("Sei sicuro? I prodotti in questa dispensa potrebbero essere persi.")&&await h(E)},A=E=>{E&&(navigator.clipboard.writeText(E),alert("Codice copiato negli appunti!"))};return I.jsxs("div",{className:"space-y-6 pb-24 animate-fade-in-up",children:[I.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white px-1",children:"Impostazioni"}),I.jsxs(yr,{className:"p-5",children:[I.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Aspetto"}),I.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-800 p-1.5 rounded-xl",children:[I.jsxs("button",{onClick:()=>e("light"),className:gr("flex-1 flex items-center justify-center gap-2 py-3 rounded-lg font-bold text-sm transition-all",a==="light"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:[I.jsx(h3,{size:18})," Light"]}),I.jsxs("button",{onClick:()=>e("dark"),className:gr("flex-1 flex items-center justify-center gap-2 py-3 rounded-lg font-bold text-sm transition-all",a==="dark"?"bg-slate-700 text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:[I.jsx(Zv,{size:18})," Dark"]})]})]}),i&&I.jsxs(yr,{className:"p-5 border-blue-100 dark:border-blue-900",children:[I.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2",children:[I.jsx(v0,{size:20,className:"text-blue-500"}),"La tua Famiglia"]}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Nome Gruppo"}),I.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:i.name})]}),I.jsxs("div",{children:[I.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Codice Invito"}),I.jsxs("div",{className:"flex gap-2 mt-1",children:[I.jsx("code",{className:"flex-1 bg-gray-100 dark:bg-black/30 p-3 rounded-xl font-mono text-sm text-gray-600 dark:text-gray-300 break-all border border-gray-200 dark:border-white/10",children:i.id}),I.jsx("button",{onClick:()=>A(i.id),className:"p-3 bg-blue-100 text-blue-600 dark:bg-blue-500/20 dark:text-blue-400 rounded-xl hover:bg-blue-200 transition-colors",title:"Copia Codice",children:I.jsx(kv,{size:20})})]})]}),I.jsx("div",{className:"pt-4 border-t border-gray-100 dark:border-white/5",children:I.jsxs("button",{onClick:m,className:"w-full py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:[I.jsx(Yv,{size:18}),"Esci dalla Famiglia"]})})]})]}),I.jsxs(yr,{className:"p-5",children:[I.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Gestione Dispense (Locations)"}),I.jsx("div",{className:"space-y-2",children:o.map(E=>I.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-white/5 rounded-xl border border-gray-100 dark:border-white/5",children:[I.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-200",children:E.name}),o.length>1&&I.jsx("button",{onClick:()=>x(E.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:I.jsx(wd,{size:18})})]},E.id))}),I.jsx("p",{className:"text-xs text-gray-400 mt-4 text-center",children:"Puoi aggiungere nuove dispense dalla Home Page."})]}),I.jsx("div",{className:"text-center pb-8 pt-4",children:I.jsx("p",{className:"text-xs text-gray-400 font-medium",children:"Versione App v1.2.0 (Auto-Update)"})})]})}function r6({activeTab:a,onTabChange:e}){const i=[{id:"pantry",label:"Dispensa",icon:Uv},{id:"shopping",label:"Spesa",icon:Z0},{id:"stats",label:"Stats",icon:Ev},{id:"settings",label:"Settings",icon:l3}];return I.jsx("nav",{className:"fixed bottom-6 left-4 right-4 h-20 bg-white/70 dark:bg-pantry-bg-secondary/90 backdrop-blur-3xl rounded-[32px] shadow-2xl border border-white/50 dark:border-white/5 flex justify-between items-center px-2 z-40 transform transition-all duration-300 hover:scale-[1.01]",children:i.map(o=>{const h=o.icon,m=a===o.id;return I.jsxs("button",{onClick:()=>e(o.id),className:gr("flex-1 flex flex-col items-center justify-center h-full rounded-2xl transition-all duration-300 relative",m?"text-gray-900 dark:text-pantry-accent-blue":"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-pantry-text-primary"),children:[m&&I.jsx("span",{className:"absolute inset-x-2 inset-y-2 bg-white dark:bg-pantry-accent-blue/15 rounded-2xl shadow-md dark:shadow-none -z-10 animate-fade-in-up"}),I.jsx(h,{size:26,strokeWidth:m?2.5:2,className:gr("mb-0.5 transition-transform duration-300",m&&"scale-110")})]},o.id)})})}function i6(){const[a,e]=Fe.useState({month:et.now().toFormat("yyyy-MM"),totalSpent:0,totalWasted:0,wastePct:0,topCategories:[]}),[i,o]=Fe.useState(!0),[h,m]=Fe.useState(null);Fe.useEffect(()=>{x()},[]);const x=async()=>{o(!0);try{const A=et.now().toFormat("yyyy-MM"),{data:E,error:v}=await Rn.getStats(A);v&&v.code!=="PGRST116"&&console.warn("Failed to fetch stored stats",v);const{data:T,error:O}=await Rn.getProducts();if(O)throw O;const j=E?.total_wasted||0,U=T.reduce((Z,le)=>Z+le.price*le.quantity,0),G=U+j,H=G>0?j/G*100:0;e({month:A,totalPantryValue:U,totalWasted:j,wastePct:H.toFixed(1),wasteItemsCount:0})}catch(A){console.error(A),m("Failed to load statistics")}finally{o(!1)}};return{stats:a,loading:i,error:h,refreshStats:x}}function a6(){const{stats:a,loading:e,error:i}=i6();if(e)return I.jsx("div",{className:"flex justify-center py-10",children:I.jsx(ad,{className:"w-8 h-8 text-blue-500 animate-spin"})});if(i)return I.jsx("div",{className:"text-red-500 p-4 font-medium",children:i});const o=a.wastePct<5?"good":a.wastePct<15?"warning":"bad",h=o==="good"?"text-green-500":o==="warning"?"text-yellow-500":"text-red-500",m=o==="good"?"bg-green-100 dark:bg-green-900/20":o==="warning"?"bg-yellow-100 dark:bg-yellow-900/20":"bg-red-100 dark:bg-red-900/20";return I.jsxs("div",{className:"p-4 md:p-6 space-y-6 md:space-y-0 md:grid md:grid-cols-2 md:gap-6 lg:gap-8 max-w-5xl mx-auto",children:[I.jsxs("div",{className:"text-center mb-6 md:col-span-2 md:mb-8",children:[I.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-white",children:"Riepilogo Sprechi"}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm md:text-base",children:"Analisi della tua efficienza"})]}),I.jsxs(yr,{className:"p-6 md:p-10 text-center flex flex-col items-center justify-center h-full min-h-[300px]",children:[I.jsxs("div",{className:`w-24 h-24 md:w-32 md:h-32 rounded-full flex items-center justify-center mb-3 md:mb-6 ${m} transition-colors`,children:[o==="good"&&I.jsx(zv,{size:40,className:`md:w-16 md:h-16 ${h}`}),o==="warning"&&I.jsx(b0,{size:40,className:`md:w-16 md:h-16 ${h}`}),o==="bad"&&I.jsx(L2,{size:40,className:`md:w-16 md:h-16 ${h}`})]}),I.jsxs("h3",{className:"text-4xl md:text-6xl font-black text-gray-900 dark:text-white mb-2",children:[100-a.wastePct,"%"]}),I.jsx("p",{className:"text-gray-500 uppercase tracking-widest text-xs md:text-sm font-bold",children:"Punteggio Efficienza"}),I.jsxs("div",{className:"mt-4 md:mt-6 text-sm md:text-base text-gray-600 dark:text-gray-300 max-w-sm mx-auto",children:[o==="good"&&"Ottimo lavoro! Stai sprecando pochissimo.",o==="warning"&&"Attenzione, qualche prodotto sta scadendo troppo spesso.",o==="bad"&&"C' molto margine di miglioramento. Controlla le scadenze!"]})]}),I.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-1 gap-4 md:gap-6 h-full",children:[I.jsxs(yr,{className:"p-4 md:p-8 flex flex-col justify-center h-full",children:[I.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-2 text-red-500",children:[I.jsx(L2,{size:16,className:"md:w-6 md:h-6"}),I.jsx("span",{className:"text-xs md:text-sm font-bold uppercase",children:"Soldi Persi (Totale)"})]}),I.jsxs("p",{className:"text-2xl md:text-4xl font-bold text-gray-900 dark:text-white",children:["",a.totalWasted.toFixed(2)]}),I.jsxs("p",{className:"text-[10px] md:text-sm text-gray-400 mt-1",children:[a.wasteItemsCount," prodotti buttati"]})]}),I.jsxs(yr,{className:"p-4 md:p-8 flex flex-col justify-center h-full",children:[I.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-2 text-green-500",children:[I.jsx(Mv,{size:16,className:"md:w-6 md:h-6"}),I.jsx("span",{className:"text-xs md:text-sm font-bold uppercase",children:"Valore in Dispensa"})]}),I.jsxs("p",{className:"text-2xl md:text-4xl font-bold text-gray-900 dark:text-white",children:["",a.totalPantryValue.toFixed(2)]}),I.jsx("p",{className:"text-[10px] md:text-sm text-gray-400 mt-1",children:"Prodotti attualmente disponibili"})]})]})]})}function s6({products:a,onClose:e}){const[i,o]=Fe.useState(null),[h,m]=Fe.useState(!1),[x,A]=Fe.useState(new Set(a.map(T=>T.id))),E=T=>{const O=new Set(x);O.has(T)?O.delete(T):O.add(T),A(O)},v=async()=>{const T=a.filter(O=>x.has(O.id));if(T.length===0){alert("Seleziona almeno un ingrediente!");return}m(!0);try{const O=T.map(G=>G.name),j=await fetch("/.netlify/functions/suggest-recipes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ingredients:O})});if(!j.ok)throw new Error("Errore API");const U=await j.json();o(U)}catch(O){alert("Lo chef non risponde al momento. Riprova pi tardi."),console.error(O)}finally{m(!1)}};return I.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-end sm:items-center justify-center z-[60] animate-fade-in-up p-4",children:I.jsxs(yr,{intensity:"high",className:"w-full max-w-lg max-h-[85vh] overflow-y-auto p-0 bg-white dark:bg-gray-900 rounded-3xl border border-white/20",children:[I.jsxs("div",{className:"p-5 border-b border-gray-100 dark:border-white/10 flex justify-between items-center sticky top-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur z-10",children:[I.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[I.jsx(_v,{size:24}),I.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Sos Cena"})]}),I.jsx("button",{onClick:e,className:"p-2 bg-gray-100 dark:bg-white/10 rounded-full hover:opacity-80 transition-colors",children:I.jsx(bd,{size:20,className:"text-gray-500 dark:text-gray-300"})})]}),I.jsx("div",{className:"p-6 space-y-6",children:i?I.jsxs("div",{className:"space-y-4 animate-fade-in-up",children:[I.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white leading-tight",children:i.title}),I.jsxs("div",{className:"flex gap-3 text-sm font-medium text-gray-500",children:[I.jsxs("span",{className:"flex items-center gap-1 bg-gray-100 dark:bg-white/10 px-3 py-1 rounded-lg",children:[I.jsx(Rv,{size:14})," ",i.time]}),I.jsxs("span",{className:"flex items-center gap-1 bg-gray-100 dark:bg-white/10 px-3 py-1 rounded-lg",children:[I.jsx(Lv,{size:14})," ",i.difficulty||"Media"]})]}),I.jsxs("div",{className:"space-y-2 bg-blue-50 dark:bg-blue-900/10 p-4 rounded-2xl",children:[I.jsx("h4",{className:"font-bold text-xs uppercase tracking-wider text-blue-800 dark:text-blue-300 mb-2",children:"Ingredienti Necessari"}),I.jsx("ul",{className:"grid grid-cols-1 gap-2 text-sm text-gray-700 dark:text-gray-300",children:i.ingredients.map((T,O)=>I.jsxs("li",{className:"flex items-start gap-2",children:[I.jsx("span",{className:"mt-1.5 w-1.5 h-1.5 bg-blue-500 rounded-full shrink-0"})," ",T]},O))})]}),I.jsxs("div",{className:"space-y-4",children:[I.jsx("h4",{className:"font-bold text-sm uppercase tracking-wider text-gray-400",children:"Procedimento"}),i.steps.map((T,O)=>I.jsxs("div",{className:"flex gap-4 text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:[I.jsx("span",{className:"font-bold text-blue-600 bg-blue-100 dark:bg-blue-900/40 w-6 h-6 flex items-center justify-center rounded-full shrink-0 text-xs mt-0.5",children:O+1}),I.jsx("p",{children:T})]},O))]}),I.jsx("button",{onClick:()=>o(null),className:"w-full py-3 mt-4 bg-gray-100 dark:bg-white/10 text-gray-600 dark:text-gray-300 font-bold rounded-xl hover:bg-gray-200 dark:hover:bg-white/20 transition-colors",children:"Torna alla selezione"})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"flex justify-between items-end",children:[I.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-200",children:"Seleziona ingredienti:"}),I.jsxs("span",{className:"text-xs text-gray-500",children:[x.size," selezionati"]})]}),I.jsx("div",{className:"bg-gray-50 dark:bg-black/20 rounded-2xl p-2 max-h-[40vh] overflow-y-auto border border-gray-100 dark:border-white/5",children:a.map(T=>{const O=x.has(T.id);return I.jsx("div",{onClick:()=>E(T.id),className:`flex items-center justify-between p-3 mb-2 rounded-xl cursor-pointer transition-all border ${O?"bg-white dark:bg-gray-800 border-red-200 dark:border-red-900 shadow-sm":"bg-transparent border-transparent opacity-60 hover:opacity-100"}`,children:I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center border transition-colors ${O?"bg-red-500 border-red-500 text-white":"border-gray-300 dark:border-gray-600"}`,children:O&&I.jsx(Mp,{size:14,strokeWidth:3})}),I.jsxs("div",{children:[I.jsx("p",{className:"font-bold text-gray-800 dark:text-gray-200 text-sm",children:T.name}),I.jsxs("p",{className:"text-xs text-red-500 font-medium",children:["Scade il ",new Date(T.expiryDate).toLocaleDateString()]})]})]})},T.id)})})]}),I.jsx("button",{onClick:v,disabled:h||x.size===0,className:"w-full py-4 bg-gradient-to-r from-orange-500 to-red-500 text-white font-bold rounded-2xl shadow-lg hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:scale-100",children:h?"Lo Chef sta pensando...":I.jsxs(I.Fragment,{children:[I.jsx(d3,{size:20})," Genera Ricetta con ",x.size," prodotti"]})})]})})]})})}function o6(){const[a,e]=Fe.useState(!1),[i,o]=Fe.useState([]),[h,m]=Fe.useState(!1),[x,A]=Fe.useState(Notification.permission),[E,v]=Fe.useState("pantry"),[T,O]=Fe.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light"),[j,U]=Fe.useState(null),[G,H]=Fe.useState(null),[Z,le]=Fe.useState([]),[Q,q]=Fe.useState(null),[xe,Le]=Fe.useState(!1),[Se,$]=Fe.useState(""),[we,de]=Fe.useState(!1),[At,ft]=Fe.useState([]),[Ie,Ye]=Fe.useState(!0);Fe.useEffect(()=>{$e()},[]),Fe.useEffect(()=>{const J=window.document.documentElement;J.classList.remove("light","dark"),J.classList.add(T),localStorage.setItem("theme",T)},[T]);const $e=async()=>{try{const J=await Hs();if(J){const Te=await ew();if(!Te)await U(null),await H(null);else{U(J),H(Te);const me=await G0(J);le(me),me.length>0&&q(me[0]),await re(J)}}}catch(J){console.error("Init error:",J)}finally{Ye(!1)}},re=async J=>{const Te=J||j;if(!Te)return;const me=await sw(Te);o(me),he(me)},ee=J=>{q(J),Le(!1)},fe=async J=>{if(J.preventDefault(),!Se.trim())return;const{success:Te,location:me}=await f1(j,Se);if(Te&&me){const Re=[...Z,me];le(Re),q(me),$(""),de(!1),Le(!1)}},be=async J=>{await rw(J);const Te=await G0(j);le(Te),Q?.id===J&&q(Te[0]||null)},he=J=>{const Te=new Date,me=J.filter(He=>{if(He.status!=="active")return!1;const Oe=y1(md(He.expiryDate),Te);return Oe<=3&&Oe>=-1});ft(me);const Re=CC(J);Re.length>0&&Notification.permission==="granted"&&TC("Attenzione Sprechi",`${Re.length} prodotti in scadenza!`)},ue=async J=>{const Te={...J,locationId:Q?.id};await ow(Te,j),await re()},B=async()=>{await re()},Y=async()=>{const J=await _C();A(J?"granted":"denied"),J&&he(i)},ie=async J=>{Ye(!0),await $e()};return Ie?null:j?I.jsxs("div",{className:"h-[100dvh] flex flex-col overflow-hidden text-gray-800 font-sans transition-colors duration-500 bg-gradient-to-br from-teal-50 via-orange-50 to-rose-50 dark:from-pantry-bg-dark dark:to-pantry-bg-secondary",children:[I.jsxs("header",{className:"px-6 py-5 pt-[calc(1.25rem+env(safe-area-inset-top))] flex justify-between items-center z-30 shrink-0",children:[I.jsxs("div",{children:[I.jsxs("div",{className:"relative",children:[I.jsxs("button",{onClick:()=>Le(!xe),disabled:E==="settings",className:`flex items-center gap-2 text-3xl font-bold tracking-tight bg-gradient-to-r from-gray-800 to-gray-600 dark:from-white dark:to-pantry-text-secondary bg-clip-text text-transparent hover:opacity-80 transition-opacity ${E==="settings"?"pointer-events-none":""}`,children:[E==="pantry"?Q?.name||"Caricamento...":E==="shopping"?"Spesa":E==="stats"?"Rifiuti":"Impostazioni",E==="pantry"&&I.jsx(Tv,{size:24,className:`text-gray-600 dark:text-pantry-text-secondary transition-transform duration-300 ${xe?"rotate-180":""}`})]}),xe&&E==="pantry"&&I.jsxs(I.Fragment,{children:[I.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>Le(!1)}),I.jsxs("div",{className:"absolute top-full left-0 mt-3 w-72 bg-white/90 dark:bg-pantry-bg-secondary rounded-3xl shadow-2xl border border-gray-200/50 dark:border-white/5 overflow-hidden z-50 animate-fade-in-up origin-top-left p-2",children:[I.jsx("div",{className:"px-4 py-2 text-xs font-bold text-gray-400 uppercase tracking-wider",children:G?.name||"Famiglia"}),I.jsx("div",{className:"max-h-60 overflow-y-auto no-scrollbar",children:Z.map(J=>I.jsxs("button",{onClick:()=>ee(J),className:`w-full text-left px-4 py-3.5 rounded-2xl mb-1 flex items-center justify-between transition-all ${Q?.id===J.id?"bg-gray-900 dark:bg-pantry-glass-high text-white dark:text-pantry-text-primary font-bold shadow-md transform scale-[1.02]":"hover:bg-gray-100 dark:hover:bg-pantry-glass-low text-gray-600 dark:text-pantry-text-secondary"}`,children:[I.jsx("span",{className:"truncate",children:J.name}),Q?.id===J.id&&I.jsx("div",{className:"w-2 h-2 rounded-full bg-pantry-accent-green"})]},J.id))}),I.jsx("div",{className:"h-px bg-gray-200/50 dark:bg-white/5 my-2 mx-2"}),we?I.jsxs("form",{onSubmit:fe,className:"p-2 animate-fade-in-up",children:[I.jsx("input",{autoFocus:!0,type:"text",placeholder:"Es. Cantina...",value:Se,onChange:J=>$(J.target.value),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-pantry-bg-dark border border-gray-200 dark:border-white/5 mb-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-pantry-text-primary dark:placeholder-pantry-text-secondary/50 transition-all font-medium"}),I.jsxs("div",{className:"flex gap-2",children:[I.jsx("button",{type:"submit",disabled:!Se.trim(),className:"flex-1 bg-blue-600 text-white text-xs font-bold py-2.5 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-700 transition",children:"Crea"}),I.jsx("button",{type:"button",onClick:()=>de(!1),className:"flex-1 bg-gray-100 dark:bg-pantry-glass-low text-gray-600 dark:text-pantry-text-secondary text-xs font-bold py-2.5 rounded-xl hover:bg-gray-200 dark:hover:bg-pantry-glass-medium transition",children:"Annulla"})]})]}):I.jsxs("button",{onClick:()=>de(!0),className:"w-full text-left px-4 py-3.5 rounded-2xl text-blue-600 dark:text-blue-400 font-bold hover:bg-blue-50 dark:hover:bg-blue-500/10 transition flex items-center gap-3",children:[I.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-500/20 flex items-center justify-center",children:I.jsx(sd,{size:14})}),"Nuova Dispensa"]})]})]})]}),I.jsxs("p",{className:"text-gray-500 dark:text-pantry-text-secondary text-sm font-medium mt-0.5 tracking-wide",children:[E==="pantry"&&"La tua dispensa digitale",E==="shopping"&&"Lista della spesa",E==="stats"&&"Statistiche Sprechi",E==="settings"&&"Personalizza esperienza"]}),At.length>0&&E==="pantry"&&I.jsxs("div",{onClick:()=>e(!0),className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 rounded-2xl flex items-center gap-3 animate-pulse",children:[I.jsx("div",{className:"p-2 bg-red-500 text-white rounded-full",children:I.jsx(p3,{size:18,fill:"currentColor"})}),I.jsxs("div",{children:[I.jsx("p",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:"Attenzione!"}),I.jsx("p",{className:"text-xs text-red-500/80 font-medium",children:At.length===1?"1 prodotto sta scadendo":`${At.length} prodotti in scadenza`})]})]})]}),x==="default"&&I.jsx("button",{onClick:Y,className:"w-12 h-12 flex items-center justify-center text-gray-700 dark:text-pantry-text-primary bg-white/50 dark:bg-pantry-glass-low backdrop-blur-md border border-white/60 dark:border-white/5 rounded-full shadow-lg hover:scale-110 active:scale-95 transition-all",title:"Attiva Notifiche",children:I.jsx(wv,{size:20,strokeWidth:2.5,className:At.length>0?"text-red-500 animate-bounce":""})})]}),I.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden px-5 pb-[calc(8rem+env(safe-area-inset-bottom))] pt-2 scroll-smooth no-scrollbar",children:I.jsxs("div",{className:"max-w-md md:max-w-4xl lg:max-w-6xl mx-auto h-full",children:[E==="pantry"&&I.jsx(KT,{products:Q?i.filter(J=>J.locationId===Q.id):i,onUpdate:B}),E==="shopping"&&I.jsx(N8,{}),E==="stats"&&I.jsx("div",{className:"h-full",children:I.jsx(a6,{})}),E==="settings"&&I.jsx(n6,{currentTheme:T,onThemeChange:O,currentFamily:G,locations:Z,onAddLocation:fe,onRemoveLocation:be})]})}),E==="pantry"&&I.jsx("button",{onClick:()=>m(!0),className:"fixed bottom-32 right-6 w-16 h-16 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-[24px] shadow-2xl flex items-center justify-center hover:scale-105 active:scale-95 transition-all z-30 border border-white/20 dark:border-black/10",children:I.jsx(sd,{size:32,strokeWidth:2.5})}),h&&I.jsx(t6,{onAdd:ue,onClose:()=>m(!1)}),a&&I.jsx(s6,{products:At,onClose:()=>e(!1)}),I.jsx(r6,{activeTab:E,onTabChange:v})]}):I.jsx(QT,{onComplete:ie})}function l6(a={}){const{immediate:e=!1,onNeedRefresh:i,onOfflineReady:o,onRegistered:h,onRegisteredSW:m,onRegisterError:x}=a;let A,E;const v=async(O=!0)=>{await E};async function T(){if("serviceWorker"in navigator){if(A=await p1(async()=>{const{Workbox:O}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:O}},[]).then(({Workbox:O})=>new O("/sw.js",{scope:"/",type:"classic"})).catch(O=>{x?.(O)}),!A)return;A.addEventListener("activated",O=>{(O.isUpdate||O.isExternal)&&window.location.reload()}),A.addEventListener("installed",O=>{O.isUpdate||o?.()}),A.register({immediate:e}).then(O=>{m?m("/sw.js",O):h?.(O)}).catch(O=>{x?.(O)})}}return E=T(),v}l6({onNeedRefresh(){},onOfflineReady(){}});uv.createRoot(document.getElementById("root")).render(I.jsx(Fe.StrictMode,{children:I.jsx(o6,{})}));
